import{j as e,b as l}from"./index-Cc-Lnn9x.js";import{r as c}from"./vendor-react-Dfcn4nkY.js";import{E as h}from"./vendor-jspdf-Bh_S0msn.js";import"./vendor-utils-DmyZJLyO.js";import"./vendor-ui-DKtFGipk.js";const j=()=>{const[a,x]=c.useState({artists:0,venues:0,shows:0,contracts:0}),[n,d]=c.useState(!0);c.useEffect(()=>{(async()=>{d(!0);try{const{count:s}=await l.from("usuarios").select("*",{count:"exact",head:!0}).eq("tipo","artista"),{count:o}=await l.from("usuarios").select("*",{count:"exact",head:!0}).eq("tipo","estabelecimento"),{count:i}=await l.from("contratos").select("*",{count:"exact",head:!0}).in("status",["concluido"]),{count:r}=await l.from("contratos").select("*",{count:"exact",head:!0}).in("status",["assinado","concluido"]);x({artists:s||0,venues:o||0,shows:i||0,contracts:r||0})}catch(s){console.error("Error fetching report data:",s)}finally{d(!1)}})()},[]);const p=()=>{const t=new h;t.setFontSize(18),t.text("Relatório Geral - RESONNA",14,20),t.setFontSize(10),t.setTextColor(100),t.text(`Gerado em: ${new Date().toLocaleString("pt-BR")}`,14,28),t.setTextColor(0),t.setFontSize(12);let s=45;t.setFillColor(240,240,240),t.rect(14,s-5,180,10,"F"),t.setFont("helvetica","bold"),t.text("Métrica",16,s),t.text("Valor",150,s),t.setFont("helvetica","normal"),s+=15;const o=(i,r)=>{t.text(i,16,s),t.text(r.toString(),150,s),t.line(14,s+2,194,s+2),s+=10};o("Total de Artistas",a.artists),o("Total de Estabelecimentos",a.venues),o("Shows Realizados",a.shows),o("Contratos Firmados",a.contracts),t.save(`resona_relatorio_${new Date().toISOString().split("T")[0]}.pdf`)};return e.jsxs("div",{className:"text-white animate-fade-in relative pb-20",children:[e.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end mb-12 gap-8",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-heading-hero mb-3 uppercase",children:["RELATÓRIOS E ",e.jsx("span",{className:"text-secondary italic",children:"MÉTRICAS"})]}),e.jsx("p",{className:"text-section-label text-gray-500",children:"Mineração de Dados e Métricas de Engajamento"})]})}),e.jsxs("div",{className:"glass-card p-6 rounded-3xl mb-10 border-white/5 shadow-2xl flex flex-col md:flex-row gap-8 items-center group",children:[e.jsxs("div",{className:"flex items-center gap-4 bg-white/5 px-6 py-3 rounded-xl border border-white/10 group-hover:border-secondary/30 transition-all",children:[e.jsx("label",{htmlFor:"period-filter",className:"text-section-label text-gray-400",children:"Escopo Temporal"}),e.jsxs("select",{id:"period-filter",className:"bg-transparent text-white font-black uppercase tracking-widest text-[10px] focus:outline-none cursor-pointer",children:[e.jsx("option",{className:"bg-dark text-white",children:"GLOBAL (TODO O TEMPO)"}),e.jsx("option",{disabled:!0,className:"bg-dark text-gray-600 italic",children:"JANELA 30D (BREVE)"}),e.jsx("option",{disabled:!0,className:"bg-dark text-gray-600 italic",children:"ANO 2024 (BREVE)"})]})]}),e.jsxs("div",{className:"flex-grow flex justify-end gap-4 w-full md:w-auto",children:[e.jsx("button",{onClick:p,disabled:n,className:"flex-1 md:flex-none bg-white text-dark font-black uppercase tracking-[0.2em] text-[10px] py-4 px-10 rounded-2xl transition-all shadow-xl hover:bg-secondary hover:text-white active:scale-95 disabled:opacity-20",children:"Exportar PDF"}),e.jsx("button",{onClick:()=>{const t=["Categoria","Valor"],s=[["Total de Artistas",a.artists],["Total de Estabelecimentos",a.venues],["Shows Realizados",a.shows],["Contratos Firmados",a.contracts]];let o="data:text/csv;charset=utf-8,"+t.join(",")+`
`+s.map(m=>m.join(",")).join(`
`);const i=encodeURI(o),r=document.createElement("a");r.setAttribute("href",i),r.setAttribute("download",`resona_reports_${new Date().toISOString().split("T")[0]}.csv`),document.body.appendChild(r),r.click(),document.body.removeChild(r)},className:"flex-1 md:flex-none bg-secondary/10 text-secondary font-black uppercase tracking-[0.2em] text-[10px] py-4 px-10 rounded-2xl border border-secondary/20 transition-all hover:bg-secondary hover:text-white active:scale-95 disabled:opacity-20 shadow-lg",disabled:n,children:"Extrair CSV"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-12",children:[e.jsxs("div",{className:"glass-card p-8 rounded-3xl border-white/5 shadow-2xl group hover:shadow-primary/10 transition-all text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-6",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-primary animate-pulse shadow-[0_0_10px_rgba(var(--primary-rgb),0.5)]"}),e.jsx("h3",{className:"text-section-label text-gray-400",children:"Artistas"})]}),e.jsx("p",{className:"text-6xl font-black text-white font-poppins tracking-tighter leading-none group-hover:scale-105 transition-transform origin-left",children:n?"...":a.artists}),e.jsx("p",{className:"text-[9px] font-mono text-gray-600 mt-4 uppercase tracking-[0.2em] font-black",children:"Total de Artistas Verificados"})]}),e.jsxs("div",{className:"glass-card p-8 rounded-3xl border-white/5 shadow-2xl group hover:shadow-secondary/10 transition-all text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-6",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-secondary animate-pulse shadow-[0_0_10px_rgba(var(--secondary-rgb),0.5)]"}),e.jsx("h3",{className:"text-section-label text-gray-400",children:"Nexos"})]}),e.jsx("p",{className:"text-6xl font-black text-white font-poppins tracking-tighter leading-none group-hover:scale-105 transition-transform origin-left",children:n?"...":a.venues}),e.jsx("p",{className:"text-[9px] font-mono text-gray-600 mt-4 uppercase tracking-[0.2em] font-black",children:"Estabelecimentos Ativos"})]}),e.jsxs("div",{className:"glass-card p-8 rounded-3xl border-white/5 shadow-2xl group hover:shadow-green-500/20 transition-all text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-6",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse shadow-[0_0_10px_rgba(34,197,94,0.5)]"}),e.jsx("h3",{className:"text-section-label text-gray-400",children:"Shows"})]}),e.jsx("p",{className:"text-6xl font-black text-green-400 font-poppins tracking-tighter leading-none group-hover:scale-105 transition-transform origin-left",children:n?"...":a.shows}),e.jsx("p",{className:"text-[9px] font-mono text-gray-600 mt-4 uppercase tracking-[0.2em] font-black",children:"Apresentações Concluídas"})]}),e.jsxs("div",{className:"glass-card p-8 rounded-3xl border-white/5 shadow-2xl group hover:shadow-primary/20 transition-all text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-6",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-primary animate-pulse shadow-[0_0_10px_rgba(var(--primary-rgb),0.5)]"}),e.jsx("h3",{className:"text-section-label text-gray-400",children:"Contratos"})]}),e.jsx("p",{className:"text-6xl font-black text-primary font-poppins tracking-tighter leading-none group-hover:scale-105 transition-transform origin-left",children:n?"...":a.contracts}),e.jsx("p",{className:"text-[9px] font-mono text-gray-600 mt-4 uppercase tracking-[0.2em] font-black",children:"Contratos Ativos e Validados"})]})]}),e.jsxs("div",{className:"glass-card p-12 rounded-3xl border-white/5 shadow-2xl relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-primary/5 rounded-full blur-[120px] pointer-events-none"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("h2",{className:"text-3xl font-black text-white font-poppins tracking-tighter mb-8 uppercase leading-none",children:["ENGAJAMENTO ",e.jsx("span",{className:"text-primary italic",children:"GLOBAL"})]}),e.jsxs("div",{className:"w-full h-96 bg-white/[0.02] border border-dashed border-white/10 rounded-[2rem] flex flex-col items-center justify-center group-hover:bg-white/[0.04] transition-all",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-white/5 border-t-secondary rounded-full animate-spin mb-6"}),e.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.4em] text-gray-600 animate-pulse",children:"Sincronizando Visualizações Neurais..."}),e.jsx("p",{className:"text-[9px] text-gray-700 mt-4 uppercase tracking-[0.2em] font-bold",children:"Motor gráfico iniciando no próximo ciclo"})]})]})]})]})};export{j as default};
