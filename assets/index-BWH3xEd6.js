var Mj=Object.defineProperty;var Ij=(t,e,s)=>e in t?Mj(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var Ka=(t,e,s)=>Ij(t,typeof e!="symbol"?e+"":e,s);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&n(d)}).observe(document,{childList:!0,subtree:!0});function s(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(i){if(i.ep)return;i.ep=!0;const l=s(i);fetch(i.href,l)}})();var o8=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fr(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Bh={exports:{}},Ti={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hx;function Dj(){if(Hx)return Ti;Hx=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function s(n,i,l){var d=null;if(l!==void 0&&(d=""+l),i.key!==void 0&&(d=""+i.key),"key"in i){l={};for(var u in i)u!=="key"&&(l[u]=i[u])}else l=i;return i=l.ref,{$$typeof:t,type:n,key:d,ref:i!==void 0?i:null,props:l}}return Ti.Fragment=e,Ti.jsx=s,Ti.jsxs=s,Ti}var Gx;function Pj(){return Gx||(Gx=1,Bh.exports=Dj()),Bh.exports}var a=Pj(),$h={exports:{}},Ai={},zh={exports:{}},Vh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fx;function Uj(){return Fx||(Fx=1,(function(t){function e(P,O){var Y=P.length;P.push(O);e:for(;0<Y;){var ne=Y-1>>>1,le=P[ne];if(0<i(le,O))P[ne]=O,P[Y]=le,Y=ne;else break e}}function s(P){return P.length===0?null:P[0]}function n(P){if(P.length===0)return null;var O=P[0],Y=P.pop();if(Y!==O){P[0]=Y;e:for(var ne=0,le=P.length,L=le>>>1;ne<L;){var D=2*(ne+1)-1,te=P[D],se=D+1,fe=P[se];if(0>i(te,Y))se<le&&0>i(fe,te)?(P[ne]=fe,P[se]=Y,ne=se):(P[ne]=te,P[D]=Y,ne=D);else if(se<le&&0>i(fe,Y))P[ne]=fe,P[se]=Y,ne=se;else break e}}return O}function i(P,O){var Y=P.sortIndex-O.sortIndex;return Y!==0?Y:P.id-O.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var d=Date,u=d.now();t.unstable_now=function(){return d.now()-u}}var f=[],m=[],g=1,v=null,b=3,_=!1,S=!1,E=!1,C=!1,T=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function M(P){for(var O=s(m);O!==null;){if(O.callback===null)n(m);else if(O.startTime<=P)n(m),O.sortIndex=O.expirationTime,e(f,O);else break;O=s(m)}}function z(P){if(E=!1,M(P),!S)if(s(f)!==null)S=!0,F||(F=!0,H());else{var O=s(m);O!==null&&re(z,O.startTime-P)}}var F=!1,G=-1,K=5,I=-1;function U(){return C?!0:!(t.unstable_now()-I<K)}function q(){if(C=!1,F){var P=t.unstable_now();I=P;var O=!0;try{e:{S=!1,E&&(E=!1,R(G),G=-1),_=!0;var Y=b;try{t:{for(M(P),v=s(f);v!==null&&!(v.expirationTime>P&&U());){var ne=v.callback;if(typeof ne=="function"){v.callback=null,b=v.priorityLevel;var le=ne(v.expirationTime<=P);if(P=t.unstable_now(),typeof le=="function"){v.callback=le,M(P),O=!0;break t}v===s(f)&&n(f),M(P)}else n(f);v=s(f)}if(v!==null)O=!0;else{var L=s(m);L!==null&&re(z,L.startTime-P),O=!1}}break e}finally{v=null,b=Y,_=!1}O=void 0}}finally{O?H():F=!1}}}var H;if(typeof A=="function")H=function(){A(q)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,ie=$.port2;$.port1.onmessage=q,H=function(){ie.postMessage(null)}}else H=function(){T(q,0)};function re(P,O){G=T(function(){P(t.unstable_now())},O)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):K=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return b},t.unstable_next=function(P){switch(b){case 1:case 2:case 3:var O=3;break;default:O=b}var Y=b;b=O;try{return P()}finally{b=Y}},t.unstable_requestPaint=function(){C=!0},t.unstable_runWithPriority=function(P,O){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var Y=b;b=P;try{return O()}finally{b=Y}},t.unstable_scheduleCallback=function(P,O,Y){var ne=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?ne+Y:ne):Y=ne,P){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=Y+le,P={id:g++,callback:O,priorityLevel:P,startTime:Y,expirationTime:le,sortIndex:-1},Y>ne?(P.sortIndex=Y,e(m,P),s(f)===null&&P===s(m)&&(E?(R(G),G=-1):E=!0,re(z,Y-ne))):(P.sortIndex=le,e(f,P),S||_||(S=!0,F||(F=!0,H()))),P},t.unstable_shouldYield=U,t.unstable_wrapCallback=function(P){var O=b;return function(){var Y=b;b=O;try{return P.apply(this,arguments)}finally{b=Y}}}})(Vh)),Vh}var Jx;function Lj(){return Jx||(Jx=1,zh.exports=Uj()),zh.exports}var Hh={exports:{}},ke={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kx;function Oj(){if(Kx)return ke;Kx=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),d=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),b=Symbol.iterator;function _(L){return L===null||typeof L!="object"?null:(L=b&&L[b]||L["@@iterator"],typeof L=="function"?L:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,C={};function T(L,D,te){this.props=L,this.context=D,this.refs=C,this.updater=te||S}T.prototype.isReactComponent={},T.prototype.setState=function(L,D){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,D,"setState")},T.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function R(){}R.prototype=T.prototype;function A(L,D,te){this.props=L,this.context=D,this.refs=C,this.updater=te||S}var M=A.prototype=new R;M.constructor=A,E(M,T.prototype),M.isPureReactComponent=!0;var z=Array.isArray;function F(){}var G={H:null,A:null,T:null,S:null},K=Object.prototype.hasOwnProperty;function I(L,D,te){var se=te.ref;return{$$typeof:t,type:L,key:D,ref:se!==void 0?se:null,props:te}}function U(L,D){return I(L.type,D,L.props)}function q(L){return typeof L=="object"&&L!==null&&L.$$typeof===t}function H(L){var D={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(te){return D[te]})}var $=/\/+/g;function ie(L,D){return typeof L=="object"&&L!==null&&L.key!=null?H(""+L.key):D.toString(36)}function re(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(F,F):(L.status="pending",L.then(function(D){L.status==="pending"&&(L.status="fulfilled",L.value=D)},function(D){L.status==="pending"&&(L.status="rejected",L.reason=D)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function P(L,D,te,se,fe){var ee=typeof L;(ee==="undefined"||ee==="boolean")&&(L=null);var me=!1;if(L===null)me=!0;else switch(ee){case"bigint":case"string":case"number":me=!0;break;case"object":switch(L.$$typeof){case t:case e:me=!0;break;case g:return me=L._init,P(me(L._payload),D,te,se,fe)}}if(me)return fe=fe(L),me=se===""?"."+ie(L,0):se,z(fe)?(te="",me!=null&&(te=me.replace($,"$&/")+"/"),P(fe,D,te,"",function(Ne){return Ne})):fe!=null&&(q(fe)&&(fe=U(fe,te+(fe.key==null||L&&L.key===fe.key?"":(""+fe.key).replace($,"$&/")+"/")+me)),D.push(fe)),1;me=0;var je=se===""?".":se+":";if(z(L))for(var pe=0;pe<L.length;pe++)se=L[pe],ee=je+ie(se,pe),me+=P(se,D,te,ee,fe);else if(pe=_(L),typeof pe=="function")for(L=pe.call(L),pe=0;!(se=L.next()).done;)se=se.value,ee=je+ie(se,pe++),me+=P(se,D,te,ee,fe);else if(ee==="object"){if(typeof L.then=="function")return P(re(L),D,te,se,fe);throw D=String(L),Error("Objects are not valid as a React child (found: "+(D==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":D)+"). If you meant to render a collection of children, use an array instead.")}return me}function O(L,D,te){if(L==null)return L;var se=[],fe=0;return P(L,se,"","",function(ee){return D.call(te,ee,fe++)}),se}function Y(L){if(L._status===-1){var D=L._result;D=D(),D.then(function(te){(L._status===0||L._status===-1)&&(L._status=1,L._result=te)},function(te){(L._status===0||L._status===-1)&&(L._status=2,L._result=te)}),L._status===-1&&(L._status=0,L._result=D)}if(L._status===1)return L._result.default;throw L._result}var ne=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var D=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(D))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)},le={map:O,forEach:function(L,D,te){O(L,function(){D.apply(this,arguments)},te)},count:function(L){var D=0;return O(L,function(){D++}),D},toArray:function(L){return O(L,function(D){return D})||[]},only:function(L){if(!q(L))throw Error("React.Children.only expected to receive a single React element child.");return L}};return ke.Activity=v,ke.Children=le,ke.Component=T,ke.Fragment=s,ke.Profiler=i,ke.PureComponent=A,ke.StrictMode=n,ke.Suspense=f,ke.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=G,ke.__COMPILER_RUNTIME={__proto__:null,c:function(L){return G.H.useMemoCache(L)}},ke.cache=function(L){return function(){return L.apply(null,arguments)}},ke.cacheSignal=function(){return null},ke.cloneElement=function(L,D,te){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var se=E({},L.props),fe=L.key;if(D!=null)for(ee in D.key!==void 0&&(fe=""+D.key),D)!K.call(D,ee)||ee==="key"||ee==="__self"||ee==="__source"||ee==="ref"&&D.ref===void 0||(se[ee]=D[ee]);var ee=arguments.length-2;if(ee===1)se.children=te;else if(1<ee){for(var me=Array(ee),je=0;je<ee;je++)me[je]=arguments[je+2];se.children=me}return I(L.type,fe,se)},ke.createContext=function(L){return L={$$typeof:d,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:l,_context:L},L},ke.createElement=function(L,D,te){var se,fe={},ee=null;if(D!=null)for(se in D.key!==void 0&&(ee=""+D.key),D)K.call(D,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(fe[se]=D[se]);var me=arguments.length-2;if(me===1)fe.children=te;else if(1<me){for(var je=Array(me),pe=0;pe<me;pe++)je[pe]=arguments[pe+2];fe.children=je}if(L&&L.defaultProps)for(se in me=L.defaultProps,me)fe[se]===void 0&&(fe[se]=me[se]);return I(L,ee,fe)},ke.createRef=function(){return{current:null}},ke.forwardRef=function(L){return{$$typeof:u,render:L}},ke.isValidElement=q,ke.lazy=function(L){return{$$typeof:g,_payload:{_status:-1,_result:L},_init:Y}},ke.memo=function(L,D){return{$$typeof:m,type:L,compare:D===void 0?null:D}},ke.startTransition=function(L){var D=G.T,te={};G.T=te;try{var se=L(),fe=G.S;fe!==null&&fe(te,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(F,ne)}catch(ee){ne(ee)}finally{D!==null&&te.types!==null&&(D.types=te.types),G.T=D}},ke.unstable_useCacheRefresh=function(){return G.H.useCacheRefresh()},ke.use=function(L){return G.H.use(L)},ke.useActionState=function(L,D,te){return G.H.useActionState(L,D,te)},ke.useCallback=function(L,D){return G.H.useCallback(L,D)},ke.useContext=function(L){return G.H.useContext(L)},ke.useDebugValue=function(){},ke.useDeferredValue=function(L,D){return G.H.useDeferredValue(L,D)},ke.useEffect=function(L,D){return G.H.useEffect(L,D)},ke.useEffectEvent=function(L){return G.H.useEffectEvent(L)},ke.useId=function(){return G.H.useId()},ke.useImperativeHandle=function(L,D,te){return G.H.useImperativeHandle(L,D,te)},ke.useInsertionEffect=function(L,D){return G.H.useInsertionEffect(L,D)},ke.useLayoutEffect=function(L,D){return G.H.useLayoutEffect(L,D)},ke.useMemo=function(L,D){return G.H.useMemo(L,D)},ke.useOptimistic=function(L,D){return G.H.useOptimistic(L,D)},ke.useReducer=function(L,D,te){return G.H.useReducer(L,D,te)},ke.useRef=function(L){return G.H.useRef(L)},ke.useState=function(L){return G.H.useState(L)},ke.useSyncExternalStore=function(L,D,te){return G.H.useSyncExternalStore(L,D,te)},ke.useTransition=function(){return G.H.useTransition()},ke.version="19.2.3",ke}var Yx;function gm(){return Yx||(Yx=1,Hh.exports=Oj()),Hh.exports}var Gh={exports:{}},Kt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wx;function qj(){if(Wx)return Kt;Wx=1;var t=gm();function e(f){var m="https://react.dev/errors/"+f;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)m+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+f+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var n={d:{f:s,r:function(){throw Error(e(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},i=Symbol.for("react.portal");function l(f,m,g){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:v==null?null:""+v,children:f,containerInfo:m,implementation:g}}var d=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(f,m){if(f==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return Kt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Kt.createPortal=function(f,m){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return l(f,m,null,g)},Kt.flushSync=function(f){var m=d.T,g=n.p;try{if(d.T=null,n.p=2,f)return f()}finally{d.T=m,n.p=g,n.d.f()}},Kt.preconnect=function(f,m){typeof f=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,n.d.C(f,m))},Kt.prefetchDNS=function(f){typeof f=="string"&&n.d.D(f)},Kt.preinit=function(f,m){if(typeof f=="string"&&m&&typeof m.as=="string"){var g=m.as,v=u(g,m.crossOrigin),b=typeof m.integrity=="string"?m.integrity:void 0,_=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;g==="style"?n.d.S(f,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:v,integrity:b,fetchPriority:_}):g==="script"&&n.d.X(f,{crossOrigin:v,integrity:b,fetchPriority:_,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},Kt.preinitModule=function(f,m){if(typeof f=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var g=u(m.as,m.crossOrigin);n.d.M(f,{crossOrigin:g,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&n.d.M(f)},Kt.preload=function(f,m){if(typeof f=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var g=m.as,v=u(g,m.crossOrigin);n.d.L(f,g,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},Kt.preloadModule=function(f,m){if(typeof f=="string")if(m){var g=u(m.as,m.crossOrigin);n.d.m(f,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:g,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else n.d.m(f)},Kt.requestFormReset=function(f){n.d.r(f)},Kt.unstable_batchedUpdates=function(f,m){return f(m)},Kt.useFormState=function(f,m,g){return d.H.useFormState(f,m,g)},Kt.useFormStatus=function(){return d.H.useHostTransitionStatus()},Kt.version="19.2.3",Kt}var Xx;function Qb(){if(Xx)return Gh.exports;Xx=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Gh.exports=qj(),Gh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qx;function Bj(){if(Qx)return Ai;Qx=1;var t=Lj(),e=gm(),s=Qb();function n(r){var o="https://react.dev/errors/"+r;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)o+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+r+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var o=r,c=r;if(r.alternate)for(;o.return;)o=o.return;else{r=o;do o=r,(o.flags&4098)!==0&&(c=o.return),r=o.return;while(r)}return o.tag===3?c:null}function d(r){if(r.tag===13){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function u(r){if(r.tag===31){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function f(r){if(l(r)!==r)throw Error(n(188))}function m(r){var o=r.alternate;if(!o){if(o=l(r),o===null)throw Error(n(188));return o!==r?null:r}for(var c=r,h=o;;){var y=c.return;if(y===null)break;var w=y.alternate;if(w===null){if(h=y.return,h!==null){c=h;continue}break}if(y.child===w.child){for(w=y.child;w;){if(w===c)return f(y),r;if(w===h)return f(y),o;w=w.sibling}throw Error(n(188))}if(c.return!==h.return)c=y,h=w;else{for(var j=!1,k=y.child;k;){if(k===c){j=!0,c=y,h=w;break}if(k===h){j=!0,h=y,c=w;break}k=k.sibling}if(!j){for(k=w.child;k;){if(k===c){j=!0,c=w,h=y;break}if(k===h){j=!0,h=w,c=y;break}k=k.sibling}if(!j)throw Error(n(189))}}if(c.alternate!==h)throw Error(n(190))}if(c.tag!==3)throw Error(n(188));return c.stateNode.current===c?r:o}function g(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r;for(r=r.child;r!==null;){if(o=g(r),o!==null)return o;r=r.sibling}return null}var v=Object.assign,b=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),R=Symbol.for("react.consumer"),A=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),G=Symbol.for("react.memo"),K=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),q=Symbol.iterator;function H(r){return r===null||typeof r!="object"?null:(r=q&&r[q]||r["@@iterator"],typeof r=="function"?r:null)}var $=Symbol.for("react.client.reference");function ie(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===$?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case E:return"Fragment";case T:return"Profiler";case C:return"StrictMode";case z:return"Suspense";case F:return"SuspenseList";case I:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case S:return"Portal";case A:return r.displayName||"Context";case R:return(r._context.displayName||"Context")+".Consumer";case M:var o=r.render;return r=r.displayName,r||(r=o.displayName||o.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case G:return o=r.displayName||null,o!==null?o:ie(r.type)||"Memo";case K:o=r._payload,r=r._init;try{return ie(r(o))}catch{}}return null}var re=Array.isArray,P=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,O=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y={pending:!1,data:null,method:null,action:null},ne=[],le=-1;function L(r){return{current:r}}function D(r){0>le||(r.current=ne[le],ne[le]=null,le--)}function te(r,o){le++,ne[le]=r.current,r.current=o}var se=L(null),fe=L(null),ee=L(null),me=L(null);function je(r,o){switch(te(ee,o),te(fe,r),te(se,null),o.nodeType){case 9:case 11:r=(r=o.documentElement)&&(r=r.namespaceURI)?fx(r):0;break;default:if(r=o.tagName,o=o.namespaceURI)o=fx(o),r=mx(o,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}D(se),te(se,r)}function pe(){D(se),D(fe),D(ee)}function Ne(r){r.memoizedState!==null&&te(me,r);var o=se.current,c=mx(o,r.type);o!==c&&(te(fe,r),te(se,c))}function Me(r){fe.current===r&&(D(se),D(fe)),me.current===r&&(D(me),Si._currentValue=Y)}var ue,_e;function Ue(r){if(ue===void 0)try{throw Error()}catch(c){var o=c.stack.trim().match(/\n( *(at )?)/);ue=o&&o[1]||"",_e=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ue+r+_e}var Fe=!1;function dt(r,o){if(!r||Fe)return"";Fe=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(o){var de=function(){throw Error()};if(Object.defineProperty(de.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(de,[])}catch(ae){var Z=ae}Reflect.construct(r,[],de)}else{try{de.call()}catch(ae){Z=ae}r.call(de.prototype)}}else{try{throw Error()}catch(ae){Z=ae}(de=r())&&typeof de.catch=="function"&&de.catch(function(){})}}catch(ae){if(ae&&Z&&typeof ae.stack=="string")return[ae.stack,Z.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=h.DetermineComponentFrameRoot(),j=w[0],k=w[1];if(j&&k){var B=j.split(`
`),X=k.split(`
`);for(y=h=0;h<B.length&&!B[h].includes("DetermineComponentFrameRoot");)h++;for(;y<X.length&&!X[y].includes("DetermineComponentFrameRoot");)y++;if(h===B.length||y===X.length)for(h=B.length-1,y=X.length-1;1<=h&&0<=y&&B[h]!==X[y];)y--;for(;1<=h&&0<=y;h--,y--)if(B[h]!==X[y]){if(h!==1||y!==1)do if(h--,y--,0>y||B[h]!==X[y]){var oe=`
`+B[h].replace(" at new "," at ");return r.displayName&&oe.includes("<anonymous>")&&(oe=oe.replace("<anonymous>",r.displayName)),oe}while(1<=h&&0<=y);break}}}finally{Fe=!1,Error.prepareStackTrace=c}return(c=r?r.displayName||r.name:"")?Ue(c):""}function pt(r,o){switch(r.tag){case 26:case 27:case 5:return Ue(r.type);case 16:return Ue("Lazy");case 13:return r.child!==o&&o!==null?Ue("Suspense Fallback"):Ue("Suspense");case 19:return Ue("SuspenseList");case 0:case 15:return dt(r.type,!1);case 11:return dt(r.type.render,!1);case 1:return dt(r.type,!0);case 31:return Ue("Activity");default:return""}}function Dt(r){try{var o="",c=null;do o+=pt(r,c),c=r,r=r.return;while(r);return o}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var Ls=Object.prototype.hasOwnProperty,sa=t.unstable_scheduleCallback,ga=t.unstable_cancelCallback,Ae=t.unstable_shouldYield,be=t.unstable_requestPaint,He=t.unstable_now,lt=t.unstable_getCurrentPriorityLevel,Rt=t.unstable_ImmediatePriority,Nt=t.unstable_UserBlockingPriority,Je=t.unstable_NormalPriority,Jt=t.unstable_LowPriority,ys=t.unstable_IdlePriority,Aa=t.log,On=t.unstable_setDisableYieldValue,Os=null,_t=null;function rs(r){if(typeof Aa=="function"&&On(r),_t&&typeof _t.setStrictMode=="function")try{_t.setStrictMode(Os,r)}catch{}}var et=Math.clz32?Math.clz32:pr,os=Math.log,ln=Math.LN2;function pr(r){return r>>>=0,r===0?32:31-(os(r)/ln|0)|0}var ll=256,cl=262144,dl=4194304;function qn(r){var o=r&42;if(o!==0)return o;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function ul(r,o,c){var h=r.pendingLanes;if(h===0)return 0;var y=0,w=r.suspendedLanes,j=r.pingedLanes;r=r.warmLanes;var k=h&134217727;return k!==0?(h=k&~w,h!==0?y=qn(h):(j&=k,j!==0?y=qn(j):c||(c=k&~r,c!==0&&(y=qn(c))))):(k=h&~w,k!==0?y=qn(k):j!==0?y=qn(j):c||(c=h&~r,c!==0&&(y=qn(c)))),y===0?0:o!==0&&o!==y&&(o&w)===0&&(w=y&-y,c=o&-o,w>=c||w===32&&(c&4194048)!==0)?o:y}function Lo(r,o){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&o)===0}function v_(r,o){switch(r){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Km(){var r=dl;return dl<<=1,(dl&62914560)===0&&(dl=4194304),r}function Td(r){for(var o=[],c=0;31>c;c++)o.push(r);return o}function Oo(r,o){r.pendingLanes|=o,o!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function b_(r,o,c,h,y,w){var j=r.pendingLanes;r.pendingLanes=c,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=c,r.entangledLanes&=c,r.errorRecoveryDisabledLanes&=c,r.shellSuspendCounter=0;var k=r.entanglements,B=r.expirationTimes,X=r.hiddenUpdates;for(c=j&~c;0<c;){var oe=31-et(c),de=1<<oe;k[oe]=0,B[oe]=-1;var Z=X[oe];if(Z!==null)for(X[oe]=null,oe=0;oe<Z.length;oe++){var ae=Z[oe];ae!==null&&(ae.lane&=-536870913)}c&=~de}h!==0&&Ym(r,h,0),w!==0&&y===0&&r.tag!==0&&(r.suspendedLanes|=w&~(j&~o))}function Ym(r,o,c){r.pendingLanes|=o,r.suspendedLanes&=~o;var h=31-et(o);r.entangledLanes|=o,r.entanglements[h]=r.entanglements[h]|1073741824|c&261930}function Wm(r,o){var c=r.entangledLanes|=o;for(r=r.entanglements;c;){var h=31-et(c),y=1<<h;y&o|r[h]&o&&(r[h]|=o),c&=~y}}function Xm(r,o){var c=o&-o;return c=(c&42)!==0?1:Ad(c),(c&(r.suspendedLanes|o))!==0?0:c}function Ad(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Rd(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Qm(){var r=O.p;return r!==0?r:(r=window.event,r===void 0?32:Lx(r.type))}function Zm(r,o){var c=O.p;try{return O.p=r,o()}finally{O.p=c}}var cn=Math.random().toString(36).slice(2),qt="__reactFiber$"+cn,is="__reactProps$"+cn,gr="__reactContainer$"+cn,kd="__reactEvents$"+cn,w_="__reactListeners$"+cn,N_="__reactHandles$"+cn,ep="__reactResources$"+cn,qo="__reactMarker$"+cn;function Md(r){delete r[qt],delete r[is],delete r[kd],delete r[w_],delete r[N_]}function xr(r){var o=r[qt];if(o)return o;for(var c=r.parentNode;c;){if(o=c[gr]||c[qt]){if(c=o.alternate,o.child!==null||c!==null&&c.child!==null)for(r=wx(r);r!==null;){if(c=r[qt])return c;r=wx(r)}return o}r=c,c=r.parentNode}return null}function yr(r){if(r=r[qt]||r[gr]){var o=r.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return r}return null}function Bo(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r.stateNode;throw Error(n(33))}function vr(r){var o=r[ep];return o||(o=r[ep]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Pt(r){r[qo]=!0}var tp=new Set,sp={};function Bn(r,o){br(r,o),br(r+"Capture",o)}function br(r,o){for(sp[r]=o,r=0;r<o.length;r++)tp.add(o[r])}var __=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ap={},np={};function S_(r){return Ls.call(np,r)?!0:Ls.call(ap,r)?!1:__.test(r)?np[r]=!0:(ap[r]=!0,!1)}function hl(r,o,c){if(S_(o))if(c===null)r.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":r.removeAttribute(o);return;case"boolean":var h=o.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){r.removeAttribute(o);return}}r.setAttribute(o,""+c)}}function fl(r,o,c){if(c===null)r.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttribute(o,""+c)}}function Ra(r,o,c,h){if(h===null)r.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(c);return}r.setAttributeNS(o,c,""+h)}}function qs(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function rp(r){var o=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function j_(r,o,c){var h=Object.getOwnPropertyDescriptor(r.constructor.prototype,o);if(!r.hasOwnProperty(o)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var y=h.get,w=h.set;return Object.defineProperty(r,o,{configurable:!0,get:function(){return y.call(this)},set:function(j){c=""+j,w.call(this,j)}}),Object.defineProperty(r,o,{enumerable:h.enumerable}),{getValue:function(){return c},setValue:function(j){c=""+j},stopTracking:function(){r._valueTracker=null,delete r[o]}}}}function Id(r){if(!r._valueTracker){var o=rp(r)?"checked":"value";r._valueTracker=j_(r,o,""+r[o])}}function op(r){if(!r)return!1;var o=r._valueTracker;if(!o)return!0;var c=o.getValue(),h="";return r&&(h=rp(r)?r.checked?"true":"false":r.value),r=h,r!==c?(o.setValue(r),!0):!1}function ml(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var E_=/[\n"\\]/g;function Bs(r){return r.replace(E_,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Dd(r,o,c,h,y,w,j,k){r.name="",j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?r.type=j:r.removeAttribute("type"),o!=null?j==="number"?(o===0&&r.value===""||r.value!=o)&&(r.value=""+qs(o)):r.value!==""+qs(o)&&(r.value=""+qs(o)):j!=="submit"&&j!=="reset"||r.removeAttribute("value"),o!=null?Pd(r,j,qs(o)):c!=null?Pd(r,j,qs(c)):h!=null&&r.removeAttribute("value"),y==null&&w!=null&&(r.defaultChecked=!!w),y!=null&&(r.checked=y&&typeof y!="function"&&typeof y!="symbol"),k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?r.name=""+qs(k):r.removeAttribute("name")}function ip(r,o,c,h,y,w,j,k){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(r.type=w),o!=null||c!=null){if(!(w!=="submit"&&w!=="reset"||o!=null)){Id(r);return}c=c!=null?""+qs(c):"",o=o!=null?""+qs(o):c,k||o===r.value||(r.value=o),r.defaultValue=o}h=h??y,h=typeof h!="function"&&typeof h!="symbol"&&!!h,r.checked=k?r.checked:!!h,r.defaultChecked=!!h,j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"&&(r.name=j),Id(r)}function Pd(r,o,c){o==="number"&&ml(r.ownerDocument)===r||r.defaultValue===""+c||(r.defaultValue=""+c)}function wr(r,o,c,h){if(r=r.options,o){o={};for(var y=0;y<c.length;y++)o["$"+c[y]]=!0;for(c=0;c<r.length;c++)y=o.hasOwnProperty("$"+r[c].value),r[c].selected!==y&&(r[c].selected=y),y&&h&&(r[c].defaultSelected=!0)}else{for(c=""+qs(c),o=null,y=0;y<r.length;y++){if(r[y].value===c){r[y].selected=!0,h&&(r[y].defaultSelected=!0);return}o!==null||r[y].disabled||(o=r[y])}o!==null&&(o.selected=!0)}}function lp(r,o,c){if(o!=null&&(o=""+qs(o),o!==r.value&&(r.value=o),c==null)){r.defaultValue!==o&&(r.defaultValue=o);return}r.defaultValue=c!=null?""+qs(c):""}function cp(r,o,c,h){if(o==null){if(h!=null){if(c!=null)throw Error(n(92));if(re(h)){if(1<h.length)throw Error(n(93));h=h[0]}c=h}c==null&&(c=""),o=c}c=qs(o),r.defaultValue=c,h=r.textContent,h===c&&h!==""&&h!==null&&(r.value=h),Id(r)}function Nr(r,o){if(o){var c=r.firstChild;if(c&&c===r.lastChild&&c.nodeType===3){c.nodeValue=o;return}}r.textContent=o}var C_=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function dp(r,o,c){var h=o.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?h?r.setProperty(o,""):o==="float"?r.cssFloat="":r[o]="":h?r.setProperty(o,c):typeof c!="number"||c===0||C_.has(o)?o==="float"?r.cssFloat=c:r[o]=(""+c).trim():r[o]=c+"px"}function up(r,o,c){if(o!=null&&typeof o!="object")throw Error(n(62));if(r=r.style,c!=null){for(var h in c)!c.hasOwnProperty(h)||o!=null&&o.hasOwnProperty(h)||(h.indexOf("--")===0?r.setProperty(h,""):h==="float"?r.cssFloat="":r[h]="");for(var y in o)h=o[y],o.hasOwnProperty(y)&&c[y]!==h&&dp(r,y,h)}else for(var w in o)o.hasOwnProperty(w)&&dp(r,w,o[w])}function Ud(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var T_=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),A_=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function pl(r){return A_.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function ka(){}var Ld=null;function Od(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var _r=null,Sr=null;function hp(r){var o=yr(r);if(o&&(r=o.stateNode)){var c=r[is]||null;e:switch(r=o.stateNode,o.type){case"input":if(Dd(r,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),o=c.name,c.type==="radio"&&o!=null){for(c=r;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+Bs(""+o)+'"][type="radio"]'),o=0;o<c.length;o++){var h=c[o];if(h!==r&&h.form===r.form){var y=h[is]||null;if(!y)throw Error(n(90));Dd(h,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(o=0;o<c.length;o++)h=c[o],h.form===r.form&&op(h)}break e;case"textarea":lp(r,c.value,c.defaultValue);break e;case"select":o=c.value,o!=null&&wr(r,!!c.multiple,o,!1)}}}var qd=!1;function fp(r,o,c){if(qd)return r(o,c);qd=!0;try{var h=r(o);return h}finally{if(qd=!1,(_r!==null||Sr!==null)&&(sc(),_r&&(o=_r,r=Sr,Sr=_r=null,hp(o),r)))for(o=0;o<r.length;o++)hp(r[o])}}function $o(r,o){var c=r.stateNode;if(c===null)return null;var h=c[is]||null;if(h===null)return null;c=h[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(r=r.type,h=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!h;break e;default:r=!1}if(r)return null;if(c&&typeof c!="function")throw Error(n(231,o,typeof c));return c}var Ma=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bd=!1;if(Ma)try{var zo={};Object.defineProperty(zo,"passive",{get:function(){Bd=!0}}),window.addEventListener("test",zo,zo),window.removeEventListener("test",zo,zo)}catch{Bd=!1}var dn=null,$d=null,gl=null;function mp(){if(gl)return gl;var r,o=$d,c=o.length,h,y="value"in dn?dn.value:dn.textContent,w=y.length;for(r=0;r<c&&o[r]===y[r];r++);var j=c-r;for(h=1;h<=j&&o[c-h]===y[w-h];h++);return gl=y.slice(r,1<h?1-h:void 0)}function xl(r){var o=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&o===13&&(r=13)):r=o,r===10&&(r=13),32<=r||r===13?r:0}function yl(){return!0}function pp(){return!1}function ls(r){function o(c,h,y,w,j){this._reactName=c,this._targetInst=y,this.type=h,this.nativeEvent=w,this.target=j,this.currentTarget=null;for(var k in r)r.hasOwnProperty(k)&&(c=r[k],this[k]=c?c(w):w[k]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?yl:pp,this.isPropagationStopped=pp,this}return v(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=yl)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=yl)},persist:function(){},isPersistent:yl}),o}var $n={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vl=ls($n),Vo=v({},$n,{view:0,detail:0}),R_=ls(Vo),zd,Vd,Ho,bl=v({},Vo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gd,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Ho&&(Ho&&r.type==="mousemove"?(zd=r.screenX-Ho.screenX,Vd=r.screenY-Ho.screenY):Vd=zd=0,Ho=r),zd)},movementY:function(r){return"movementY"in r?r.movementY:Vd}}),gp=ls(bl),k_=v({},bl,{dataTransfer:0}),M_=ls(k_),I_=v({},Vo,{relatedTarget:0}),Hd=ls(I_),D_=v({},$n,{animationName:0,elapsedTime:0,pseudoElement:0}),P_=ls(D_),U_=v({},$n,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),L_=ls(U_),O_=v({},$n,{data:0}),xp=ls(O_),q_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},B_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function z_(r){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(r):(r=$_[r])?!!o[r]:!1}function Gd(){return z_}var V_=v({},Vo,{key:function(r){if(r.key){var o=q_[r.key]||r.key;if(o!=="Unidentified")return o}return r.type==="keypress"?(r=xl(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?B_[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gd,charCode:function(r){return r.type==="keypress"?xl(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?xl(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),H_=ls(V_),G_=v({},bl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yp=ls(G_),F_=v({},Vo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gd}),J_=ls(F_),K_=v({},$n,{propertyName:0,elapsedTime:0,pseudoElement:0}),Y_=ls(K_),W_=v({},bl,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),X_=ls(W_),Q_=v({},$n,{newState:0,oldState:0}),Z_=ls(Q_),eS=[9,13,27,32],Fd=Ma&&"CompositionEvent"in window,Go=null;Ma&&"documentMode"in document&&(Go=document.documentMode);var tS=Ma&&"TextEvent"in window&&!Go,vp=Ma&&(!Fd||Go&&8<Go&&11>=Go),bp=" ",wp=!1;function Np(r,o){switch(r){case"keyup":return eS.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _p(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var jr=!1;function sS(r,o){switch(r){case"compositionend":return _p(o);case"keypress":return o.which!==32?null:(wp=!0,bp);case"textInput":return r=o.data,r===bp&&wp?null:r;default:return null}}function aS(r,o){if(jr)return r==="compositionend"||!Fd&&Np(r,o)?(r=mp(),gl=$d=dn=null,jr=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return vp&&o.locale!=="ko"?null:o.data;default:return null}}var nS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sp(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o==="input"?!!nS[r.type]:o==="textarea"}function jp(r,o,c,h){_r?Sr?Sr.push(h):Sr=[h]:_r=h,o=cc(o,"onChange"),0<o.length&&(c=new vl("onChange","change",null,c,h),r.push({event:c,listeners:o}))}var Fo=null,Jo=null;function rS(r){ix(r,0)}function wl(r){var o=Bo(r);if(op(o))return r}function Ep(r,o){if(r==="change")return o}var Cp=!1;if(Ma){var Jd;if(Ma){var Kd="oninput"in document;if(!Kd){var Tp=document.createElement("div");Tp.setAttribute("oninput","return;"),Kd=typeof Tp.oninput=="function"}Jd=Kd}else Jd=!1;Cp=Jd&&(!document.documentMode||9<document.documentMode)}function Ap(){Fo&&(Fo.detachEvent("onpropertychange",Rp),Jo=Fo=null)}function Rp(r){if(r.propertyName==="value"&&wl(Jo)){var o=[];jp(o,Jo,r,Od(r)),fp(rS,o)}}function oS(r,o,c){r==="focusin"?(Ap(),Fo=o,Jo=c,Fo.attachEvent("onpropertychange",Rp)):r==="focusout"&&Ap()}function iS(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return wl(Jo)}function lS(r,o){if(r==="click")return wl(o)}function cS(r,o){if(r==="input"||r==="change")return wl(o)}function dS(r,o){return r===o&&(r!==0||1/r===1/o)||r!==r&&o!==o}var vs=typeof Object.is=="function"?Object.is:dS;function Ko(r,o){if(vs(r,o))return!0;if(typeof r!="object"||r===null||typeof o!="object"||o===null)return!1;var c=Object.keys(r),h=Object.keys(o);if(c.length!==h.length)return!1;for(h=0;h<c.length;h++){var y=c[h];if(!Ls.call(o,y)||!vs(r[y],o[y]))return!1}return!0}function kp(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Mp(r,o){var c=kp(r);r=0;for(var h;c;){if(c.nodeType===3){if(h=r+c.textContent.length,r<=o&&h>=o)return{node:c,offset:o-r};r=h}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=kp(c)}}function Ip(r,o){return r&&o?r===o?!0:r&&r.nodeType===3?!1:o&&o.nodeType===3?Ip(r,o.parentNode):"contains"in r?r.contains(o):r.compareDocumentPosition?!!(r.compareDocumentPosition(o)&16):!1:!1}function Dp(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var o=ml(r.document);o instanceof r.HTMLIFrameElement;){try{var c=typeof o.contentWindow.location.href=="string"}catch{c=!1}if(c)r=o.contentWindow;else break;o=ml(r.document)}return o}function Yd(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o&&(o==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||o==="textarea"||r.contentEditable==="true")}var uS=Ma&&"documentMode"in document&&11>=document.documentMode,Er=null,Wd=null,Yo=null,Xd=!1;function Pp(r,o,c){var h=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Xd||Er==null||Er!==ml(h)||(h=Er,"selectionStart"in h&&Yd(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Yo&&Ko(Yo,h)||(Yo=h,h=cc(Wd,"onSelect"),0<h.length&&(o=new vl("onSelect","select",null,o,c),r.push({event:o,listeners:h}),o.target=Er)))}function zn(r,o){var c={};return c[r.toLowerCase()]=o.toLowerCase(),c["Webkit"+r]="webkit"+o,c["Moz"+r]="moz"+o,c}var Cr={animationend:zn("Animation","AnimationEnd"),animationiteration:zn("Animation","AnimationIteration"),animationstart:zn("Animation","AnimationStart"),transitionrun:zn("Transition","TransitionRun"),transitionstart:zn("Transition","TransitionStart"),transitioncancel:zn("Transition","TransitionCancel"),transitionend:zn("Transition","TransitionEnd")},Qd={},Up={};Ma&&(Up=document.createElement("div").style,"AnimationEvent"in window||(delete Cr.animationend.animation,delete Cr.animationiteration.animation,delete Cr.animationstart.animation),"TransitionEvent"in window||delete Cr.transitionend.transition);function Vn(r){if(Qd[r])return Qd[r];if(!Cr[r])return r;var o=Cr[r],c;for(c in o)if(o.hasOwnProperty(c)&&c in Up)return Qd[r]=o[c];return r}var Lp=Vn("animationend"),Op=Vn("animationiteration"),qp=Vn("animationstart"),hS=Vn("transitionrun"),fS=Vn("transitionstart"),mS=Vn("transitioncancel"),Bp=Vn("transitionend"),$p=new Map,Zd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Zd.push("scrollEnd");function aa(r,o){$p.set(r,o),Bn(o,[r])}var Nl=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},$s=[],Tr=0,eu=0;function _l(){for(var r=Tr,o=eu=Tr=0;o<r;){var c=$s[o];$s[o++]=null;var h=$s[o];$s[o++]=null;var y=$s[o];$s[o++]=null;var w=$s[o];if($s[o++]=null,h!==null&&y!==null){var j=h.pending;j===null?y.next=y:(y.next=j.next,j.next=y),h.pending=y}w!==0&&zp(c,y,w)}}function Sl(r,o,c,h){$s[Tr++]=r,$s[Tr++]=o,$s[Tr++]=c,$s[Tr++]=h,eu|=h,r.lanes|=h,r=r.alternate,r!==null&&(r.lanes|=h)}function tu(r,o,c,h){return Sl(r,o,c,h),jl(r)}function Hn(r,o){return Sl(r,null,null,o),jl(r)}function zp(r,o,c){r.lanes|=c;var h=r.alternate;h!==null&&(h.lanes|=c);for(var y=!1,w=r.return;w!==null;)w.childLanes|=c,h=w.alternate,h!==null&&(h.childLanes|=c),w.tag===22&&(r=w.stateNode,r===null||r._visibility&1||(y=!0)),r=w,w=w.return;return r.tag===3?(w=r.stateNode,y&&o!==null&&(y=31-et(c),r=w.hiddenUpdates,h=r[y],h===null?r[y]=[o]:h.push(o),o.lane=c|536870912),w):null}function jl(r){if(50<xi)throw xi=0,dh=null,Error(n(185));for(var o=r.return;o!==null;)r=o,o=r.return;return r.tag===3?r.stateNode:null}var Ar={};function pS(r,o,c,h){this.tag=r,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bs(r,o,c,h){return new pS(r,o,c,h)}function su(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Ia(r,o){var c=r.alternate;return c===null?(c=bs(r.tag,o,r.key,r.mode),c.elementType=r.elementType,c.type=r.type,c.stateNode=r.stateNode,c.alternate=r,r.alternate=c):(c.pendingProps=o,c.type=r.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=r.flags&65011712,c.childLanes=r.childLanes,c.lanes=r.lanes,c.child=r.child,c.memoizedProps=r.memoizedProps,c.memoizedState=r.memoizedState,c.updateQueue=r.updateQueue,o=r.dependencies,c.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},c.sibling=r.sibling,c.index=r.index,c.ref=r.ref,c.refCleanup=r.refCleanup,c}function Vp(r,o){r.flags&=65011714;var c=r.alternate;return c===null?(r.childLanes=0,r.lanes=o,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=c.childLanes,r.lanes=c.lanes,r.child=c.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=c.memoizedProps,r.memoizedState=c.memoizedState,r.updateQueue=c.updateQueue,r.type=c.type,o=c.dependencies,r.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),r}function El(r,o,c,h,y,w){var j=0;if(h=r,typeof r=="function")su(r)&&(j=1);else if(typeof r=="string")j=bj(r,c,se.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case I:return r=bs(31,c,o,y),r.elementType=I,r.lanes=w,r;case E:return Gn(c.children,y,w,o);case C:j=8,y|=24;break;case T:return r=bs(12,c,o,y|2),r.elementType=T,r.lanes=w,r;case z:return r=bs(13,c,o,y),r.elementType=z,r.lanes=w,r;case F:return r=bs(19,c,o,y),r.elementType=F,r.lanes=w,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case A:j=10;break e;case R:j=9;break e;case M:j=11;break e;case G:j=14;break e;case K:j=16,h=null;break e}j=29,c=Error(n(130,r===null?"null":typeof r,"")),h=null}return o=bs(j,c,o,y),o.elementType=r,o.type=h,o.lanes=w,o}function Gn(r,o,c,h){return r=bs(7,r,h,o),r.lanes=c,r}function au(r,o,c){return r=bs(6,r,null,o),r.lanes=c,r}function Hp(r){var o=bs(18,null,null,0);return o.stateNode=r,o}function nu(r,o,c){return o=bs(4,r.children!==null?r.children:[],r.key,o),o.lanes=c,o.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},o}var Gp=new WeakMap;function zs(r,o){if(typeof r=="object"&&r!==null){var c=Gp.get(r);return c!==void 0?c:(o={value:r,source:o,stack:Dt(o)},Gp.set(r,o),o)}return{value:r,source:o,stack:Dt(o)}}var Rr=[],kr=0,Cl=null,Wo=0,Vs=[],Hs=0,un=null,xa=1,ya="";function Da(r,o){Rr[kr++]=Wo,Rr[kr++]=Cl,Cl=r,Wo=o}function Fp(r,o,c){Vs[Hs++]=xa,Vs[Hs++]=ya,Vs[Hs++]=un,un=r;var h=xa;r=ya;var y=32-et(h)-1;h&=~(1<<y),c+=1;var w=32-et(o)+y;if(30<w){var j=y-y%5;w=(h&(1<<j)-1).toString(32),h>>=j,y-=j,xa=1<<32-et(o)+y|c<<y|h,ya=w+r}else xa=1<<w|c<<y|h,ya=r}function ru(r){r.return!==null&&(Da(r,1),Fp(r,1,0))}function ou(r){for(;r===Cl;)Cl=Rr[--kr],Rr[kr]=null,Wo=Rr[--kr],Rr[kr]=null;for(;r===un;)un=Vs[--Hs],Vs[Hs]=null,ya=Vs[--Hs],Vs[Hs]=null,xa=Vs[--Hs],Vs[Hs]=null}function Jp(r,o){Vs[Hs++]=xa,Vs[Hs++]=ya,Vs[Hs++]=un,xa=o.id,ya=o.overflow,un=r}var Bt=null,ut=null,Ge=!1,hn=null,Gs=!1,iu=Error(n(519));function fn(r){var o=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Xo(zs(o,r)),iu}function Kp(r){var o=r.stateNode,c=r.type,h=r.memoizedProps;switch(o[qt]=r,o[is]=h,c){case"dialog":$e("cancel",o),$e("close",o);break;case"iframe":case"object":case"embed":$e("load",o);break;case"video":case"audio":for(c=0;c<vi.length;c++)$e(vi[c],o);break;case"source":$e("error",o);break;case"img":case"image":case"link":$e("error",o),$e("load",o);break;case"details":$e("toggle",o);break;case"input":$e("invalid",o),ip(o,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":$e("invalid",o);break;case"textarea":$e("invalid",o),cp(o,h.value,h.defaultValue,h.children)}c=h.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||o.textContent===""+c||h.suppressHydrationWarning===!0||ux(o.textContent,c)?(h.popover!=null&&($e("beforetoggle",o),$e("toggle",o)),h.onScroll!=null&&$e("scroll",o),h.onScrollEnd!=null&&$e("scrollend",o),h.onClick!=null&&(o.onclick=ka),o=!0):o=!1,o||fn(r,!0)}function Yp(r){for(Bt=r.return;Bt;)switch(Bt.tag){case 5:case 31:case 13:Gs=!1;return;case 27:case 3:Gs=!0;return;default:Bt=Bt.return}}function Mr(r){if(r!==Bt)return!1;if(!Ge)return Yp(r),Ge=!0,!1;var o=r.tag,c;if((c=o!==3&&o!==27)&&((c=o===5)&&(c=r.type,c=!(c!=="form"&&c!=="button")||jh(r.type,r.memoizedProps)),c=!c),c&&ut&&fn(r),Yp(r),o===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(317));ut=bx(r)}else if(o===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(317));ut=bx(r)}else o===27?(o=ut,Cn(r.type)?(r=Rh,Rh=null,ut=r):ut=o):ut=Bt?Js(r.stateNode.nextSibling):null;return!0}function Fn(){ut=Bt=null,Ge=!1}function lu(){var r=hn;return r!==null&&(hs===null?hs=r:hs.push.apply(hs,r),hn=null),r}function Xo(r){hn===null?hn=[r]:hn.push(r)}var cu=L(null),Jn=null,Pa=null;function mn(r,o,c){te(cu,o._currentValue),o._currentValue=c}function Ua(r){r._currentValue=cu.current,D(cu)}function du(r,o,c){for(;r!==null;){var h=r.alternate;if((r.childLanes&o)!==o?(r.childLanes|=o,h!==null&&(h.childLanes|=o)):h!==null&&(h.childLanes&o)!==o&&(h.childLanes|=o),r===c)break;r=r.return}}function uu(r,o,c,h){var y=r.child;for(y!==null&&(y.return=r);y!==null;){var w=y.dependencies;if(w!==null){var j=y.child;w=w.firstContext;e:for(;w!==null;){var k=w;w=y;for(var B=0;B<o.length;B++)if(k.context===o[B]){w.lanes|=c,k=w.alternate,k!==null&&(k.lanes|=c),du(w.return,c,r),h||(j=null);break e}w=k.next}}else if(y.tag===18){if(j=y.return,j===null)throw Error(n(341));j.lanes|=c,w=j.alternate,w!==null&&(w.lanes|=c),du(j,c,r),j=null}else j=y.child;if(j!==null)j.return=y;else for(j=y;j!==null;){if(j===r){j=null;break}if(y=j.sibling,y!==null){y.return=j.return,j=y;break}j=j.return}y=j}}function Ir(r,o,c,h){r=null;for(var y=o,w=!1;y!==null;){if(!w){if((y.flags&524288)!==0)w=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var j=y.alternate;if(j===null)throw Error(n(387));if(j=j.memoizedProps,j!==null){var k=y.type;vs(y.pendingProps.value,j.value)||(r!==null?r.push(k):r=[k])}}else if(y===me.current){if(j=y.alternate,j===null)throw Error(n(387));j.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(r!==null?r.push(Si):r=[Si])}y=y.return}r!==null&&uu(o,r,c,h),o.flags|=262144}function Tl(r){for(r=r.firstContext;r!==null;){if(!vs(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Kn(r){Jn=r,Pa=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function $t(r){return Wp(Jn,r)}function Al(r,o){return Jn===null&&Kn(r),Wp(r,o)}function Wp(r,o){var c=o._currentValue;if(o={context:o,memoizedValue:c,next:null},Pa===null){if(r===null)throw Error(n(308));Pa=o,r.dependencies={lanes:0,firstContext:o},r.flags|=524288}else Pa=Pa.next=o;return c}var gS=typeof AbortController<"u"?AbortController:function(){var r=[],o=this.signal={aborted:!1,addEventListener:function(c,h){r.push(h)}};this.abort=function(){o.aborted=!0,r.forEach(function(c){return c()})}},xS=t.unstable_scheduleCallback,yS=t.unstable_NormalPriority,St={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function hu(){return{controller:new gS,data:new Map,refCount:0}}function Qo(r){r.refCount--,r.refCount===0&&xS(yS,function(){r.controller.abort()})}var Zo=null,fu=0,Dr=0,Pr=null;function vS(r,o){if(Zo===null){var c=Zo=[];fu=0,Dr=gh(),Pr={status:"pending",value:void 0,then:function(h){c.push(h)}}}return fu++,o.then(Xp,Xp),o}function Xp(){if(--fu===0&&Zo!==null){Pr!==null&&(Pr.status="fulfilled");var r=Zo;Zo=null,Dr=0,Pr=null;for(var o=0;o<r.length;o++)(0,r[o])()}}function bS(r,o){var c=[],h={status:"pending",value:null,reason:null,then:function(y){c.push(y)}};return r.then(function(){h.status="fulfilled",h.value=o;for(var y=0;y<c.length;y++)(0,c[y])(o)},function(y){for(h.status="rejected",h.reason=y,y=0;y<c.length;y++)(0,c[y])(void 0)}),h}var Qp=P.S;P.S=function(r,o){P0=He(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&vS(r,o),Qp!==null&&Qp(r,o)};var Yn=L(null);function mu(){var r=Yn.current;return r!==null?r:ot.pooledCache}function Rl(r,o){o===null?te(Yn,Yn.current):te(Yn,o.pool)}function Zp(){var r=mu();return r===null?null:{parent:St._currentValue,pool:r}}var Ur=Error(n(460)),pu=Error(n(474)),kl=Error(n(542)),Ml={then:function(){}};function eg(r){return r=r.status,r==="fulfilled"||r==="rejected"}function tg(r,o,c){switch(c=r[c],c===void 0?r.push(o):c!==o&&(o.then(ka,ka),o=c),o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,ag(r),r;default:if(typeof o.status=="string")o.then(ka,ka);else{if(r=ot,r!==null&&100<r.shellSuspendCounter)throw Error(n(482));r=o,r.status="pending",r.then(function(h){if(o.status==="pending"){var y=o;y.status="fulfilled",y.value=h}},function(h){if(o.status==="pending"){var y=o;y.status="rejected",y.reason=h}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,ag(r),r}throw Xn=o,Ur}}function Wn(r){try{var o=r._init;return o(r._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(Xn=c,Ur):c}}var Xn=null;function sg(){if(Xn===null)throw Error(n(459));var r=Xn;return Xn=null,r}function ag(r){if(r===Ur||r===kl)throw Error(n(483))}var Lr=null,ei=0;function Il(r){var o=ei;return ei+=1,Lr===null&&(Lr=[]),tg(Lr,r,o)}function ti(r,o){o=o.props.ref,r.ref=o!==void 0?o:null}function Dl(r,o){throw o.$$typeof===b?Error(n(525)):(r=Object.prototype.toString.call(o),Error(n(31,r==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":r)))}function ng(r){function o(J,V){if(r){var W=J.deletions;W===null?(J.deletions=[V],J.flags|=16):W.push(V)}}function c(J,V){if(!r)return null;for(;V!==null;)o(J,V),V=V.sibling;return null}function h(J){for(var V=new Map;J!==null;)J.key!==null?V.set(J.key,J):V.set(J.index,J),J=J.sibling;return V}function y(J,V){return J=Ia(J,V),J.index=0,J.sibling=null,J}function w(J,V,W){return J.index=W,r?(W=J.alternate,W!==null?(W=W.index,W<V?(J.flags|=67108866,V):W):(J.flags|=67108866,V)):(J.flags|=1048576,V)}function j(J){return r&&J.alternate===null&&(J.flags|=67108866),J}function k(J,V,W,ce){return V===null||V.tag!==6?(V=au(W,J.mode,ce),V.return=J,V):(V=y(V,W),V.return=J,V)}function B(J,V,W,ce){var we=W.type;return we===E?oe(J,V,W.props.children,ce,W.key):V!==null&&(V.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===K&&Wn(we)===V.type)?(V=y(V,W.props),ti(V,W),V.return=J,V):(V=El(W.type,W.key,W.props,null,J.mode,ce),ti(V,W),V.return=J,V)}function X(J,V,W,ce){return V===null||V.tag!==4||V.stateNode.containerInfo!==W.containerInfo||V.stateNode.implementation!==W.implementation?(V=nu(W,J.mode,ce),V.return=J,V):(V=y(V,W.children||[]),V.return=J,V)}function oe(J,V,W,ce,we){return V===null||V.tag!==7?(V=Gn(W,J.mode,ce,we),V.return=J,V):(V=y(V,W),V.return=J,V)}function de(J,V,W){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=au(""+V,J.mode,W),V.return=J,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case _:return W=El(V.type,V.key,V.props,null,J.mode,W),ti(W,V),W.return=J,W;case S:return V=nu(V,J.mode,W),V.return=J,V;case K:return V=Wn(V),de(J,V,W)}if(re(V)||H(V))return V=Gn(V,J.mode,W,null),V.return=J,V;if(typeof V.then=="function")return de(J,Il(V),W);if(V.$$typeof===A)return de(J,Al(J,V),W);Dl(J,V)}return null}function Z(J,V,W,ce){var we=V!==null?V.key:null;if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return we!==null?null:k(J,V,""+W,ce);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case _:return W.key===we?B(J,V,W,ce):null;case S:return W.key===we?X(J,V,W,ce):null;case K:return W=Wn(W),Z(J,V,W,ce)}if(re(W)||H(W))return we!==null?null:oe(J,V,W,ce,null);if(typeof W.then=="function")return Z(J,V,Il(W),ce);if(W.$$typeof===A)return Z(J,V,Al(J,W),ce);Dl(J,W)}return null}function ae(J,V,W,ce,we){if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return J=J.get(W)||null,k(V,J,""+ce,we);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case _:return J=J.get(ce.key===null?W:ce.key)||null,B(V,J,ce,we);case S:return J=J.get(ce.key===null?W:ce.key)||null,X(V,J,ce,we);case K:return ce=Wn(ce),ae(J,V,W,ce,we)}if(re(ce)||H(ce))return J=J.get(W)||null,oe(V,J,ce,we,null);if(typeof ce.then=="function")return ae(J,V,W,Il(ce),we);if(ce.$$typeof===A)return ae(J,V,W,Al(V,ce),we);Dl(V,ce)}return null}function xe(J,V,W,ce){for(var we=null,Ye=null,ye=V,Le=V=0,Ve=null;ye!==null&&Le<W.length;Le++){ye.index>Le?(Ve=ye,ye=null):Ve=ye.sibling;var We=Z(J,ye,W[Le],ce);if(We===null){ye===null&&(ye=Ve);break}r&&ye&&We.alternate===null&&o(J,ye),V=w(We,V,Le),Ye===null?we=We:Ye.sibling=We,Ye=We,ye=Ve}if(Le===W.length)return c(J,ye),Ge&&Da(J,Le),we;if(ye===null){for(;Le<W.length;Le++)ye=de(J,W[Le],ce),ye!==null&&(V=w(ye,V,Le),Ye===null?we=ye:Ye.sibling=ye,Ye=ye);return Ge&&Da(J,Le),we}for(ye=h(ye);Le<W.length;Le++)Ve=ae(ye,J,Le,W[Le],ce),Ve!==null&&(r&&Ve.alternate!==null&&ye.delete(Ve.key===null?Le:Ve.key),V=w(Ve,V,Le),Ye===null?we=Ve:Ye.sibling=Ve,Ye=Ve);return r&&ye.forEach(function(Mn){return o(J,Mn)}),Ge&&Da(J,Le),we}function Ee(J,V,W,ce){if(W==null)throw Error(n(151));for(var we=null,Ye=null,ye=V,Le=V=0,Ve=null,We=W.next();ye!==null&&!We.done;Le++,We=W.next()){ye.index>Le?(Ve=ye,ye=null):Ve=ye.sibling;var Mn=Z(J,ye,We.value,ce);if(Mn===null){ye===null&&(ye=Ve);break}r&&ye&&Mn.alternate===null&&o(J,ye),V=w(Mn,V,Le),Ye===null?we=Mn:Ye.sibling=Mn,Ye=Mn,ye=Ve}if(We.done)return c(J,ye),Ge&&Da(J,Le),we;if(ye===null){for(;!We.done;Le++,We=W.next())We=de(J,We.value,ce),We!==null&&(V=w(We,V,Le),Ye===null?we=We:Ye.sibling=We,Ye=We);return Ge&&Da(J,Le),we}for(ye=h(ye);!We.done;Le++,We=W.next())We=ae(ye,J,Le,We.value,ce),We!==null&&(r&&We.alternate!==null&&ye.delete(We.key===null?Le:We.key),V=w(We,V,Le),Ye===null?we=We:Ye.sibling=We,Ye=We);return r&&ye.forEach(function(kj){return o(J,kj)}),Ge&&Da(J,Le),we}function rt(J,V,W,ce){if(typeof W=="object"&&W!==null&&W.type===E&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case _:e:{for(var we=W.key;V!==null;){if(V.key===we){if(we=W.type,we===E){if(V.tag===7){c(J,V.sibling),ce=y(V,W.props.children),ce.return=J,J=ce;break e}}else if(V.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===K&&Wn(we)===V.type){c(J,V.sibling),ce=y(V,W.props),ti(ce,W),ce.return=J,J=ce;break e}c(J,V);break}else o(J,V);V=V.sibling}W.type===E?(ce=Gn(W.props.children,J.mode,ce,W.key),ce.return=J,J=ce):(ce=El(W.type,W.key,W.props,null,J.mode,ce),ti(ce,W),ce.return=J,J=ce)}return j(J);case S:e:{for(we=W.key;V!==null;){if(V.key===we)if(V.tag===4&&V.stateNode.containerInfo===W.containerInfo&&V.stateNode.implementation===W.implementation){c(J,V.sibling),ce=y(V,W.children||[]),ce.return=J,J=ce;break e}else{c(J,V);break}else o(J,V);V=V.sibling}ce=nu(W,J.mode,ce),ce.return=J,J=ce}return j(J);case K:return W=Wn(W),rt(J,V,W,ce)}if(re(W))return xe(J,V,W,ce);if(H(W)){if(we=H(W),typeof we!="function")throw Error(n(150));return W=we.call(W),Ee(J,V,W,ce)}if(typeof W.then=="function")return rt(J,V,Il(W),ce);if(W.$$typeof===A)return rt(J,V,Al(J,W),ce);Dl(J,W)}return typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint"?(W=""+W,V!==null&&V.tag===6?(c(J,V.sibling),ce=y(V,W),ce.return=J,J=ce):(c(J,V),ce=au(W,J.mode,ce),ce.return=J,J=ce),j(J)):c(J,V)}return function(J,V,W,ce){try{ei=0;var we=rt(J,V,W,ce);return Lr=null,we}catch(ye){if(ye===Ur||ye===kl)throw ye;var Ye=bs(29,ye,null,J.mode);return Ye.lanes=ce,Ye.return=J,Ye}finally{}}}var Qn=ng(!0),rg=ng(!1),pn=!1;function gu(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function xu(r,o){r=r.updateQueue,o.updateQueue===r&&(o.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function gn(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function xn(r,o,c){var h=r.updateQueue;if(h===null)return null;if(h=h.shared,(Ze&2)!==0){var y=h.pending;return y===null?o.next=o:(o.next=y.next,y.next=o),h.pending=o,o=jl(r),zp(r,null,c),o}return Sl(r,h,o,c),jl(r)}function si(r,o,c){if(o=o.updateQueue,o!==null&&(o=o.shared,(c&4194048)!==0)){var h=o.lanes;h&=r.pendingLanes,c|=h,o.lanes=c,Wm(r,c)}}function yu(r,o){var c=r.updateQueue,h=r.alternate;if(h!==null&&(h=h.updateQueue,c===h)){var y=null,w=null;if(c=c.firstBaseUpdate,c!==null){do{var j={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};w===null?y=w=j:w=w.next=j,c=c.next}while(c!==null);w===null?y=w=o:w=w.next=o}else y=w=o;c={baseState:h.baseState,firstBaseUpdate:y,lastBaseUpdate:w,shared:h.shared,callbacks:h.callbacks},r.updateQueue=c;return}r=c.lastBaseUpdate,r===null?c.firstBaseUpdate=o:r.next=o,c.lastBaseUpdate=o}var vu=!1;function ai(){if(vu){var r=Pr;if(r!==null)throw r}}function ni(r,o,c,h){vu=!1;var y=r.updateQueue;pn=!1;var w=y.firstBaseUpdate,j=y.lastBaseUpdate,k=y.shared.pending;if(k!==null){y.shared.pending=null;var B=k,X=B.next;B.next=null,j===null?w=X:j.next=X,j=B;var oe=r.alternate;oe!==null&&(oe=oe.updateQueue,k=oe.lastBaseUpdate,k!==j&&(k===null?oe.firstBaseUpdate=X:k.next=X,oe.lastBaseUpdate=B))}if(w!==null){var de=y.baseState;j=0,oe=X=B=null,k=w;do{var Z=k.lane&-536870913,ae=Z!==k.lane;if(ae?(ze&Z)===Z:(h&Z)===Z){Z!==0&&Z===Dr&&(vu=!0),oe!==null&&(oe=oe.next={lane:0,tag:k.tag,payload:k.payload,callback:null,next:null});e:{var xe=r,Ee=k;Z=o;var rt=c;switch(Ee.tag){case 1:if(xe=Ee.payload,typeof xe=="function"){de=xe.call(rt,de,Z);break e}de=xe;break e;case 3:xe.flags=xe.flags&-65537|128;case 0:if(xe=Ee.payload,Z=typeof xe=="function"?xe.call(rt,de,Z):xe,Z==null)break e;de=v({},de,Z);break e;case 2:pn=!0}}Z=k.callback,Z!==null&&(r.flags|=64,ae&&(r.flags|=8192),ae=y.callbacks,ae===null?y.callbacks=[Z]:ae.push(Z))}else ae={lane:Z,tag:k.tag,payload:k.payload,callback:k.callback,next:null},oe===null?(X=oe=ae,B=de):oe=oe.next=ae,j|=Z;if(k=k.next,k===null){if(k=y.shared.pending,k===null)break;ae=k,k=ae.next,ae.next=null,y.lastBaseUpdate=ae,y.shared.pending=null}}while(!0);oe===null&&(B=de),y.baseState=B,y.firstBaseUpdate=X,y.lastBaseUpdate=oe,w===null&&(y.shared.lanes=0),Nn|=j,r.lanes=j,r.memoizedState=de}}function og(r,o){if(typeof r!="function")throw Error(n(191,r));r.call(o)}function ig(r,o){var c=r.callbacks;if(c!==null)for(r.callbacks=null,r=0;r<c.length;r++)og(c[r],o)}var Or=L(null),Pl=L(0);function lg(r,o){r=Ga,te(Pl,r),te(Or,o),Ga=r|o.baseLanes}function bu(){te(Pl,Ga),te(Or,Or.current)}function wu(){Ga=Pl.current,D(Or),D(Pl)}var ws=L(null),Fs=null;function yn(r){var o=r.alternate;te(bt,bt.current&1),te(ws,r),Fs===null&&(o===null||Or.current!==null||o.memoizedState!==null)&&(Fs=r)}function Nu(r){te(bt,bt.current),te(ws,r),Fs===null&&(Fs=r)}function cg(r){r.tag===22?(te(bt,bt.current),te(ws,r),Fs===null&&(Fs=r)):vn()}function vn(){te(bt,bt.current),te(ws,ws.current)}function Ns(r){D(ws),Fs===r&&(Fs=null),D(bt)}var bt=L(0);function Ul(r){for(var o=r;o!==null;){if(o.tag===13){var c=o.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||Th(c)||Ah(c)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var La=0,De=null,at=null,jt=null,Ll=!1,qr=!1,Zn=!1,Ol=0,ri=0,Br=null,wS=0;function xt(){throw Error(n(321))}function _u(r,o){if(o===null)return!1;for(var c=0;c<o.length&&c<r.length;c++)if(!vs(r[c],o[c]))return!1;return!0}function Su(r,o,c,h,y,w){return La=w,De=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,P.H=r===null||r.memoizedState===null?Fg:qu,Zn=!1,w=c(h,y),Zn=!1,qr&&(w=ug(o,c,h,y)),dg(r),w}function dg(r){P.H=li;var o=at!==null&&at.next!==null;if(La=0,jt=at=De=null,Ll=!1,ri=0,Br=null,o)throw Error(n(300));r===null||Et||(r=r.dependencies,r!==null&&Tl(r)&&(Et=!0))}function ug(r,o,c,h){De=r;var y=0;do{if(qr&&(Br=null),ri=0,qr=!1,25<=y)throw Error(n(301));if(y+=1,jt=at=null,r.updateQueue!=null){var w=r.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}P.H=Jg,w=o(c,h)}while(qr);return w}function NS(){var r=P.H,o=r.useState()[0];return o=typeof o.then=="function"?oi(o):o,r=r.useState()[0],(at!==null?at.memoizedState:null)!==r&&(De.flags|=1024),o}function ju(){var r=Ol!==0;return Ol=0,r}function Eu(r,o,c){o.updateQueue=r.updateQueue,o.flags&=-2053,r.lanes&=~c}function Cu(r){if(Ll){for(r=r.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}Ll=!1}La=0,jt=at=De=null,qr=!1,ri=Ol=0,Br=null}function Zt(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jt===null?De.memoizedState=jt=r:jt=jt.next=r,jt}function wt(){if(at===null){var r=De.alternate;r=r!==null?r.memoizedState:null}else r=at.next;var o=jt===null?De.memoizedState:jt.next;if(o!==null)jt=o,at=r;else{if(r===null)throw De.alternate===null?Error(n(467)):Error(n(310));at=r,r={memoizedState:at.memoizedState,baseState:at.baseState,baseQueue:at.baseQueue,queue:at.queue,next:null},jt===null?De.memoizedState=jt=r:jt=jt.next=r}return jt}function ql(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function oi(r){var o=ri;return ri+=1,Br===null&&(Br=[]),r=tg(Br,r,o),o=De,(jt===null?o.memoizedState:jt.next)===null&&(o=o.alternate,P.H=o===null||o.memoizedState===null?Fg:qu),r}function Bl(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return oi(r);if(r.$$typeof===A)return $t(r)}throw Error(n(438,String(r)))}function Tu(r){var o=null,c=De.updateQueue;if(c!==null&&(o=c.memoCache),o==null){var h=De.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(o={data:h.data.map(function(y){return y.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),c===null&&(c=ql(),De.updateQueue=c),c.memoCache=o,c=o.data[o.index],c===void 0)for(c=o.data[o.index]=Array(r),h=0;h<r;h++)c[h]=U;return o.index++,c}function Oa(r,o){return typeof o=="function"?o(r):o}function $l(r){var o=wt();return Au(o,at,r)}function Au(r,o,c){var h=r.queue;if(h===null)throw Error(n(311));h.lastRenderedReducer=c;var y=r.baseQueue,w=h.pending;if(w!==null){if(y!==null){var j=y.next;y.next=w.next,w.next=j}o.baseQueue=y=w,h.pending=null}if(w=r.baseState,y===null)r.memoizedState=w;else{o=y.next;var k=j=null,B=null,X=o,oe=!1;do{var de=X.lane&-536870913;if(de!==X.lane?(ze&de)===de:(La&de)===de){var Z=X.revertLane;if(Z===0)B!==null&&(B=B.next={lane:0,revertLane:0,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),de===Dr&&(oe=!0);else if((La&Z)===Z){X=X.next,Z===Dr&&(oe=!0);continue}else de={lane:0,revertLane:X.revertLane,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},B===null?(k=B=de,j=w):B=B.next=de,De.lanes|=Z,Nn|=Z;de=X.action,Zn&&c(w,de),w=X.hasEagerState?X.eagerState:c(w,de)}else Z={lane:de,revertLane:X.revertLane,gesture:X.gesture,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},B===null?(k=B=Z,j=w):B=B.next=Z,De.lanes|=de,Nn|=de;X=X.next}while(X!==null&&X!==o);if(B===null?j=w:B.next=k,!vs(w,r.memoizedState)&&(Et=!0,oe&&(c=Pr,c!==null)))throw c;r.memoizedState=w,r.baseState=j,r.baseQueue=B,h.lastRenderedState=w}return y===null&&(h.lanes=0),[r.memoizedState,h.dispatch]}function Ru(r){var o=wt(),c=o.queue;if(c===null)throw Error(n(311));c.lastRenderedReducer=r;var h=c.dispatch,y=c.pending,w=o.memoizedState;if(y!==null){c.pending=null;var j=y=y.next;do w=r(w,j.action),j=j.next;while(j!==y);vs(w,o.memoizedState)||(Et=!0),o.memoizedState=w,o.baseQueue===null&&(o.baseState=w),c.lastRenderedState=w}return[w,h]}function hg(r,o,c){var h=De,y=wt(),w=Ge;if(w){if(c===void 0)throw Error(n(407));c=c()}else c=o();var j=!vs((at||y).memoizedState,c);if(j&&(y.memoizedState=c,Et=!0),y=y.queue,Iu(pg.bind(null,h,y,r),[r]),y.getSnapshot!==o||j||jt!==null&&jt.memoizedState.tag&1){if(h.flags|=2048,$r(9,{destroy:void 0},mg.bind(null,h,y,c,o),null),ot===null)throw Error(n(349));w||(La&127)!==0||fg(h,o,c)}return c}function fg(r,o,c){r.flags|=16384,r={getSnapshot:o,value:c},o=De.updateQueue,o===null?(o=ql(),De.updateQueue=o,o.stores=[r]):(c=o.stores,c===null?o.stores=[r]:c.push(r))}function mg(r,o,c,h){o.value=c,o.getSnapshot=h,gg(o)&&xg(r)}function pg(r,o,c){return c(function(){gg(o)&&xg(r)})}function gg(r){var o=r.getSnapshot;r=r.value;try{var c=o();return!vs(r,c)}catch{return!0}}function xg(r){var o=Hn(r,2);o!==null&&fs(o,r,2)}function ku(r){var o=Zt();if(typeof r=="function"){var c=r;if(r=c(),Zn){rs(!0);try{c()}finally{rs(!1)}}}return o.memoizedState=o.baseState=r,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oa,lastRenderedState:r},o}function yg(r,o,c,h){return r.baseState=c,Au(r,at,typeof h=="function"?h:Oa)}function _S(r,o,c,h,y){if(Hl(r))throw Error(n(485));if(r=o.action,r!==null){var w={payload:y,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(j){w.listeners.push(j)}};P.T!==null?c(!0):w.isTransition=!1,h(w),c=o.pending,c===null?(w.next=o.pending=w,vg(o,w)):(w.next=c.next,o.pending=c.next=w)}}function vg(r,o){var c=o.action,h=o.payload,y=r.state;if(o.isTransition){var w=P.T,j={};P.T=j;try{var k=c(y,h),B=P.S;B!==null&&B(j,k),bg(r,o,k)}catch(X){Mu(r,o,X)}finally{w!==null&&j.types!==null&&(w.types=j.types),P.T=w}}else try{w=c(y,h),bg(r,o,w)}catch(X){Mu(r,o,X)}}function bg(r,o,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(h){wg(r,o,h)},function(h){return Mu(r,o,h)}):wg(r,o,c)}function wg(r,o,c){o.status="fulfilled",o.value=c,Ng(o),r.state=c,o=r.pending,o!==null&&(c=o.next,c===o?r.pending=null:(c=c.next,o.next=c,vg(r,c)))}function Mu(r,o,c){var h=r.pending;if(r.pending=null,h!==null){h=h.next;do o.status="rejected",o.reason=c,Ng(o),o=o.next;while(o!==h)}r.action=null}function Ng(r){r=r.listeners;for(var o=0;o<r.length;o++)(0,r[o])()}function _g(r,o){return o}function Sg(r,o){if(Ge){var c=ot.formState;if(c!==null){e:{var h=De;if(Ge){if(ut){t:{for(var y=ut,w=Gs;y.nodeType!==8;){if(!w){y=null;break t}if(y=Js(y.nextSibling),y===null){y=null;break t}}w=y.data,y=w==="F!"||w==="F"?y:null}if(y){ut=Js(y.nextSibling),h=y.data==="F!";break e}}fn(h)}h=!1}h&&(o=c[0])}}return c=Zt(),c.memoizedState=c.baseState=o,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_g,lastRenderedState:o},c.queue=h,c=Vg.bind(null,De,h),h.dispatch=c,h=ku(!1),w=Ou.bind(null,De,!1,h.queue),h=Zt(),y={state:o,dispatch:null,action:r,pending:null},h.queue=y,c=_S.bind(null,De,y,w,c),y.dispatch=c,h.memoizedState=r,[o,c,!1]}function jg(r){var o=wt();return Eg(o,at,r)}function Eg(r,o,c){if(o=Au(r,o,_g)[0],r=$l(Oa)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var h=oi(o)}catch(j){throw j===Ur?kl:j}else h=o;o=wt();var y=o.queue,w=y.dispatch;return c!==o.memoizedState&&(De.flags|=2048,$r(9,{destroy:void 0},SS.bind(null,y,c),null)),[h,w,r]}function SS(r,o){r.action=o}function Cg(r){var o=wt(),c=at;if(c!==null)return Eg(o,c,r);wt(),o=o.memoizedState,c=wt();var h=c.queue.dispatch;return c.memoizedState=r,[o,h,!1]}function $r(r,o,c,h){return r={tag:r,create:c,deps:h,inst:o,next:null},o=De.updateQueue,o===null&&(o=ql(),De.updateQueue=o),c=o.lastEffect,c===null?o.lastEffect=r.next=r:(h=c.next,c.next=r,r.next=h,o.lastEffect=r),r}function Tg(){return wt().memoizedState}function zl(r,o,c,h){var y=Zt();De.flags|=r,y.memoizedState=$r(1|o,{destroy:void 0},c,h===void 0?null:h)}function Vl(r,o,c,h){var y=wt();h=h===void 0?null:h;var w=y.memoizedState.inst;at!==null&&h!==null&&_u(h,at.memoizedState.deps)?y.memoizedState=$r(o,w,c,h):(De.flags|=r,y.memoizedState=$r(1|o,w,c,h))}function Ag(r,o){zl(8390656,8,r,o)}function Iu(r,o){Vl(2048,8,r,o)}function jS(r){De.flags|=4;var o=De.updateQueue;if(o===null)o=ql(),De.updateQueue=o,o.events=[r];else{var c=o.events;c===null?o.events=[r]:c.push(r)}}function Rg(r){var o=wt().memoizedState;return jS({ref:o,nextImpl:r}),function(){if((Ze&2)!==0)throw Error(n(440));return o.impl.apply(void 0,arguments)}}function kg(r,o){return Vl(4,2,r,o)}function Mg(r,o){return Vl(4,4,r,o)}function Ig(r,o){if(typeof o=="function"){r=r();var c=o(r);return function(){typeof c=="function"?c():o(null)}}if(o!=null)return r=r(),o.current=r,function(){o.current=null}}function Dg(r,o,c){c=c!=null?c.concat([r]):null,Vl(4,4,Ig.bind(null,o,r),c)}function Du(){}function Pg(r,o){var c=wt();o=o===void 0?null:o;var h=c.memoizedState;return o!==null&&_u(o,h[1])?h[0]:(c.memoizedState=[r,o],r)}function Ug(r,o){var c=wt();o=o===void 0?null:o;var h=c.memoizedState;if(o!==null&&_u(o,h[1]))return h[0];if(h=r(),Zn){rs(!0);try{r()}finally{rs(!1)}}return c.memoizedState=[h,o],h}function Pu(r,o,c){return c===void 0||(La&1073741824)!==0&&(ze&261930)===0?r.memoizedState=o:(r.memoizedState=c,r=L0(),De.lanes|=r,Nn|=r,c)}function Lg(r,o,c,h){return vs(c,o)?c:Or.current!==null?(r=Pu(r,c,h),vs(r,o)||(Et=!0),r):(La&42)===0||(La&1073741824)!==0&&(ze&261930)===0?(Et=!0,r.memoizedState=c):(r=L0(),De.lanes|=r,Nn|=r,o)}function Og(r,o,c,h,y){var w=O.p;O.p=w!==0&&8>w?w:8;var j=P.T,k={};P.T=k,Ou(r,!1,o,c);try{var B=y(),X=P.S;if(X!==null&&X(k,B),B!==null&&typeof B=="object"&&typeof B.then=="function"){var oe=bS(B,h);ii(r,o,oe,js(r))}else ii(r,o,h,js(r))}catch(de){ii(r,o,{then:function(){},status:"rejected",reason:de},js())}finally{O.p=w,j!==null&&k.types!==null&&(j.types=k.types),P.T=j}}function ES(){}function Uu(r,o,c,h){if(r.tag!==5)throw Error(n(476));var y=qg(r).queue;Og(r,y,o,Y,c===null?ES:function(){return Bg(r),c(h)})}function qg(r){var o=r.memoizedState;if(o!==null)return o;o={memoizedState:Y,baseState:Y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oa,lastRenderedState:Y},next:null};var c={};return o.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oa,lastRenderedState:c},next:null},r.memoizedState=o,r=r.alternate,r!==null&&(r.memoizedState=o),o}function Bg(r){var o=qg(r);o.next===null&&(o=r.alternate.memoizedState),ii(r,o.next.queue,{},js())}function Lu(){return $t(Si)}function $g(){return wt().memoizedState}function zg(){return wt().memoizedState}function CS(r){for(var o=r.return;o!==null;){switch(o.tag){case 24:case 3:var c=js();r=gn(c);var h=xn(o,r,c);h!==null&&(fs(h,o,c),si(h,o,c)),o={cache:hu()},r.payload=o;return}o=o.return}}function TS(r,o,c){var h=js();c={lane:h,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Hl(r)?Hg(o,c):(c=tu(r,o,c,h),c!==null&&(fs(c,r,h),Gg(c,o,h)))}function Vg(r,o,c){var h=js();ii(r,o,c,h)}function ii(r,o,c,h){var y={lane:h,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(Hl(r))Hg(o,y);else{var w=r.alternate;if(r.lanes===0&&(w===null||w.lanes===0)&&(w=o.lastRenderedReducer,w!==null))try{var j=o.lastRenderedState,k=w(j,c);if(y.hasEagerState=!0,y.eagerState=k,vs(k,j))return Sl(r,o,y,0),ot===null&&_l(),!1}catch{}finally{}if(c=tu(r,o,y,h),c!==null)return fs(c,r,h),Gg(c,o,h),!0}return!1}function Ou(r,o,c,h){if(h={lane:2,revertLane:gh(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},Hl(r)){if(o)throw Error(n(479))}else o=tu(r,c,h,2),o!==null&&fs(o,r,2)}function Hl(r){var o=r.alternate;return r===De||o!==null&&o===De}function Hg(r,o){qr=Ll=!0;var c=r.pending;c===null?o.next=o:(o.next=c.next,c.next=o),r.pending=o}function Gg(r,o,c){if((c&4194048)!==0){var h=o.lanes;h&=r.pendingLanes,c|=h,o.lanes=c,Wm(r,c)}}var li={readContext:$t,use:Bl,useCallback:xt,useContext:xt,useEffect:xt,useImperativeHandle:xt,useLayoutEffect:xt,useInsertionEffect:xt,useMemo:xt,useReducer:xt,useRef:xt,useState:xt,useDebugValue:xt,useDeferredValue:xt,useTransition:xt,useSyncExternalStore:xt,useId:xt,useHostTransitionStatus:xt,useFormState:xt,useActionState:xt,useOptimistic:xt,useMemoCache:xt,useCacheRefresh:xt};li.useEffectEvent=xt;var Fg={readContext:$t,use:Bl,useCallback:function(r,o){return Zt().memoizedState=[r,o===void 0?null:o],r},useContext:$t,useEffect:Ag,useImperativeHandle:function(r,o,c){c=c!=null?c.concat([r]):null,zl(4194308,4,Ig.bind(null,o,r),c)},useLayoutEffect:function(r,o){return zl(4194308,4,r,o)},useInsertionEffect:function(r,o){zl(4,2,r,o)},useMemo:function(r,o){var c=Zt();o=o===void 0?null:o;var h=r();if(Zn){rs(!0);try{r()}finally{rs(!1)}}return c.memoizedState=[h,o],h},useReducer:function(r,o,c){var h=Zt();if(c!==void 0){var y=c(o);if(Zn){rs(!0);try{c(o)}finally{rs(!1)}}}else y=o;return h.memoizedState=h.baseState=y,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:y},h.queue=r,r=r.dispatch=TS.bind(null,De,r),[h.memoizedState,r]},useRef:function(r){var o=Zt();return r={current:r},o.memoizedState=r},useState:function(r){r=ku(r);var o=r.queue,c=Vg.bind(null,De,o);return o.dispatch=c,[r.memoizedState,c]},useDebugValue:Du,useDeferredValue:function(r,o){var c=Zt();return Pu(c,r,o)},useTransition:function(){var r=ku(!1);return r=Og.bind(null,De,r.queue,!0,!1),Zt().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,o,c){var h=De,y=Zt();if(Ge){if(c===void 0)throw Error(n(407));c=c()}else{if(c=o(),ot===null)throw Error(n(349));(ze&127)!==0||fg(h,o,c)}y.memoizedState=c;var w={value:c,getSnapshot:o};return y.queue=w,Ag(pg.bind(null,h,w,r),[r]),h.flags|=2048,$r(9,{destroy:void 0},mg.bind(null,h,w,c,o),null),c},useId:function(){var r=Zt(),o=ot.identifierPrefix;if(Ge){var c=ya,h=xa;c=(h&~(1<<32-et(h)-1)).toString(32)+c,o="_"+o+"R_"+c,c=Ol++,0<c&&(o+="H"+c.toString(32)),o+="_"}else c=wS++,o="_"+o+"r_"+c.toString(32)+"_";return r.memoizedState=o},useHostTransitionStatus:Lu,useFormState:Sg,useActionState:Sg,useOptimistic:function(r){var o=Zt();o.memoizedState=o.baseState=r;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=c,o=Ou.bind(null,De,!0,c),c.dispatch=o,[r,o]},useMemoCache:Tu,useCacheRefresh:function(){return Zt().memoizedState=CS.bind(null,De)},useEffectEvent:function(r){var o=Zt(),c={impl:r};return o.memoizedState=c,function(){if((Ze&2)!==0)throw Error(n(440));return c.impl.apply(void 0,arguments)}}},qu={readContext:$t,use:Bl,useCallback:Pg,useContext:$t,useEffect:Iu,useImperativeHandle:Dg,useInsertionEffect:kg,useLayoutEffect:Mg,useMemo:Ug,useReducer:$l,useRef:Tg,useState:function(){return $l(Oa)},useDebugValue:Du,useDeferredValue:function(r,o){var c=wt();return Lg(c,at.memoizedState,r,o)},useTransition:function(){var r=$l(Oa)[0],o=wt().memoizedState;return[typeof r=="boolean"?r:oi(r),o]},useSyncExternalStore:hg,useId:$g,useHostTransitionStatus:Lu,useFormState:jg,useActionState:jg,useOptimistic:function(r,o){var c=wt();return yg(c,at,r,o)},useMemoCache:Tu,useCacheRefresh:zg};qu.useEffectEvent=Rg;var Jg={readContext:$t,use:Bl,useCallback:Pg,useContext:$t,useEffect:Iu,useImperativeHandle:Dg,useInsertionEffect:kg,useLayoutEffect:Mg,useMemo:Ug,useReducer:Ru,useRef:Tg,useState:function(){return Ru(Oa)},useDebugValue:Du,useDeferredValue:function(r,o){var c=wt();return at===null?Pu(c,r,o):Lg(c,at.memoizedState,r,o)},useTransition:function(){var r=Ru(Oa)[0],o=wt().memoizedState;return[typeof r=="boolean"?r:oi(r),o]},useSyncExternalStore:hg,useId:$g,useHostTransitionStatus:Lu,useFormState:Cg,useActionState:Cg,useOptimistic:function(r,o){var c=wt();return at!==null?yg(c,at,r,o):(c.baseState=r,[r,c.queue.dispatch])},useMemoCache:Tu,useCacheRefresh:zg};Jg.useEffectEvent=Rg;function Bu(r,o,c,h){o=r.memoizedState,c=c(h,o),c=c==null?o:v({},o,c),r.memoizedState=c,r.lanes===0&&(r.updateQueue.baseState=c)}var $u={enqueueSetState:function(r,o,c){r=r._reactInternals;var h=js(),y=gn(h);y.payload=o,c!=null&&(y.callback=c),o=xn(r,y,h),o!==null&&(fs(o,r,h),si(o,r,h))},enqueueReplaceState:function(r,o,c){r=r._reactInternals;var h=js(),y=gn(h);y.tag=1,y.payload=o,c!=null&&(y.callback=c),o=xn(r,y,h),o!==null&&(fs(o,r,h),si(o,r,h))},enqueueForceUpdate:function(r,o){r=r._reactInternals;var c=js(),h=gn(c);h.tag=2,o!=null&&(h.callback=o),o=xn(r,h,c),o!==null&&(fs(o,r,c),si(o,r,c))}};function Kg(r,o,c,h,y,w,j){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(h,w,j):o.prototype&&o.prototype.isPureReactComponent?!Ko(c,h)||!Ko(y,w):!0}function Yg(r,o,c,h){r=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(c,h),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(c,h),o.state!==r&&$u.enqueueReplaceState(o,o.state,null)}function er(r,o){var c=o;if("ref"in o){c={};for(var h in o)h!=="ref"&&(c[h]=o[h])}if(r=r.defaultProps){c===o&&(c=v({},c));for(var y in r)c[y]===void 0&&(c[y]=r[y])}return c}function Wg(r){Nl(r)}function Xg(r){console.error(r)}function Qg(r){Nl(r)}function Gl(r,o){try{var c=r.onUncaughtError;c(o.value,{componentStack:o.stack})}catch(h){setTimeout(function(){throw h})}}function Zg(r,o,c){try{var h=r.onCaughtError;h(c.value,{componentStack:c.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function zu(r,o,c){return c=gn(c),c.tag=3,c.payload={element:null},c.callback=function(){Gl(r,o)},c}function e0(r){return r=gn(r),r.tag=3,r}function t0(r,o,c,h){var y=c.type.getDerivedStateFromError;if(typeof y=="function"){var w=h.value;r.payload=function(){return y(w)},r.callback=function(){Zg(o,c,h)}}var j=c.stateNode;j!==null&&typeof j.componentDidCatch=="function"&&(r.callback=function(){Zg(o,c,h),typeof y!="function"&&(_n===null?_n=new Set([this]):_n.add(this));var k=h.stack;this.componentDidCatch(h.value,{componentStack:k!==null?k:""})})}function AS(r,o,c,h,y){if(c.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(o=c.alternate,o!==null&&Ir(o,c,y,!0),c=ws.current,c!==null){switch(c.tag){case 31:case 13:return Fs===null?ac():c.alternate===null&&yt===0&&(yt=3),c.flags&=-257,c.flags|=65536,c.lanes=y,h===Ml?c.flags|=16384:(o=c.updateQueue,o===null?c.updateQueue=new Set([h]):o.add(h),fh(r,h,y)),!1;case 22:return c.flags|=65536,h===Ml?c.flags|=16384:(o=c.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([h])},c.updateQueue=o):(c=o.retryQueue,c===null?o.retryQueue=new Set([h]):c.add(h)),fh(r,h,y)),!1}throw Error(n(435,c.tag))}return fh(r,h,y),ac(),!1}if(Ge)return o=ws.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=y,h!==iu&&(r=Error(n(422),{cause:h}),Xo(zs(r,c)))):(h!==iu&&(o=Error(n(423),{cause:h}),Xo(zs(o,c))),r=r.current.alternate,r.flags|=65536,y&=-y,r.lanes|=y,h=zs(h,c),y=zu(r.stateNode,h,y),yu(r,y),yt!==4&&(yt=2)),!1;var w=Error(n(520),{cause:h});if(w=zs(w,c),gi===null?gi=[w]:gi.push(w),yt!==4&&(yt=2),o===null)return!0;h=zs(h,c),c=o;do{switch(c.tag){case 3:return c.flags|=65536,r=y&-y,c.lanes|=r,r=zu(c.stateNode,h,r),yu(c,r),!1;case 1:if(o=c.type,w=c.stateNode,(c.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(_n===null||!_n.has(w))))return c.flags|=65536,y&=-y,c.lanes|=y,y=e0(y),t0(y,r,c,h),yu(c,y),!1}c=c.return}while(c!==null);return!1}var Vu=Error(n(461)),Et=!1;function zt(r,o,c,h){o.child=r===null?rg(o,null,c,h):Qn(o,r.child,c,h)}function s0(r,o,c,h,y){c=c.render;var w=o.ref;if("ref"in h){var j={};for(var k in h)k!=="ref"&&(j[k]=h[k])}else j=h;return Kn(o),h=Su(r,o,c,j,w,y),k=ju(),r!==null&&!Et?(Eu(r,o,y),qa(r,o,y)):(Ge&&k&&ru(o),o.flags|=1,zt(r,o,h,y),o.child)}function a0(r,o,c,h,y){if(r===null){var w=c.type;return typeof w=="function"&&!su(w)&&w.defaultProps===void 0&&c.compare===null?(o.tag=15,o.type=w,n0(r,o,w,h,y)):(r=El(c.type,null,h,o,o.mode,y),r.ref=o.ref,r.return=o,o.child=r)}if(w=r.child,!Xu(r,y)){var j=w.memoizedProps;if(c=c.compare,c=c!==null?c:Ko,c(j,h)&&r.ref===o.ref)return qa(r,o,y)}return o.flags|=1,r=Ia(w,h),r.ref=o.ref,r.return=o,o.child=r}function n0(r,o,c,h,y){if(r!==null){var w=r.memoizedProps;if(Ko(w,h)&&r.ref===o.ref)if(Et=!1,o.pendingProps=h=w,Xu(r,y))(r.flags&131072)!==0&&(Et=!0);else return o.lanes=r.lanes,qa(r,o,y)}return Hu(r,o,c,h,y)}function r0(r,o,c,h){var y=h.children,w=r!==null?r.memoizedState:null;if(r===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((o.flags&128)!==0){if(w=w!==null?w.baseLanes|c:c,r!==null){for(h=o.child=r.child,y=0;h!==null;)y=y|h.lanes|h.childLanes,h=h.sibling;h=y&~w}else h=0,o.child=null;return o0(r,o,w,c,h)}if((c&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},r!==null&&Rl(o,w!==null?w.cachePool:null),w!==null?lg(o,w):bu(),cg(o);else return h=o.lanes=536870912,o0(r,o,w!==null?w.baseLanes|c:c,c,h)}else w!==null?(Rl(o,w.cachePool),lg(o,w),vn(),o.memoizedState=null):(r!==null&&Rl(o,null),bu(),vn());return zt(r,o,y,c),o.child}function ci(r,o){return r!==null&&r.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function o0(r,o,c,h,y){var w=mu();return w=w===null?null:{parent:St._currentValue,pool:w},o.memoizedState={baseLanes:c,cachePool:w},r!==null&&Rl(o,null),bu(),cg(o),r!==null&&Ir(r,o,h,!0),o.childLanes=y,null}function Fl(r,o){return o=Kl({mode:o.mode,children:o.children},r.mode),o.ref=r.ref,r.child=o,o.return=r,o}function i0(r,o,c){return Qn(o,r.child,null,c),r=Fl(o,o.pendingProps),r.flags|=2,Ns(o),o.memoizedState=null,r}function RS(r,o,c){var h=o.pendingProps,y=(o.flags&128)!==0;if(o.flags&=-129,r===null){if(Ge){if(h.mode==="hidden")return r=Fl(o,h),o.lanes=536870912,ci(null,r);if(Nu(o),(r=ut)?(r=vx(r,Gs),r=r!==null&&r.data==="&"?r:null,r!==null&&(o.memoizedState={dehydrated:r,treeContext:un!==null?{id:xa,overflow:ya}:null,retryLane:536870912,hydrationErrors:null},c=Hp(r),c.return=o,o.child=c,Bt=o,ut=null)):r=null,r===null)throw fn(o);return o.lanes=536870912,null}return Fl(o,h)}var w=r.memoizedState;if(w!==null){var j=w.dehydrated;if(Nu(o),y)if(o.flags&256)o.flags&=-257,o=i0(r,o,c);else if(o.memoizedState!==null)o.child=r.child,o.flags|=128,o=null;else throw Error(n(558));else if(Et||Ir(r,o,c,!1),y=(c&r.childLanes)!==0,Et||y){if(h=ot,h!==null&&(j=Xm(h,c),j!==0&&j!==w.retryLane))throw w.retryLane=j,Hn(r,j),fs(h,r,j),Vu;ac(),o=i0(r,o,c)}else r=w.treeContext,ut=Js(j.nextSibling),Bt=o,Ge=!0,hn=null,Gs=!1,r!==null&&Jp(o,r),o=Fl(o,h),o.flags|=4096;return o}return r=Ia(r.child,{mode:h.mode,children:h.children}),r.ref=o.ref,o.child=r,r.return=o,r}function Jl(r,o){var c=o.ref;if(c===null)r!==null&&r.ref!==null&&(o.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(n(284));(r===null||r.ref!==c)&&(o.flags|=4194816)}}function Hu(r,o,c,h,y){return Kn(o),c=Su(r,o,c,h,void 0,y),h=ju(),r!==null&&!Et?(Eu(r,o,y),qa(r,o,y)):(Ge&&h&&ru(o),o.flags|=1,zt(r,o,c,y),o.child)}function l0(r,o,c,h,y,w){return Kn(o),o.updateQueue=null,c=ug(o,h,c,y),dg(r),h=ju(),r!==null&&!Et?(Eu(r,o,w),qa(r,o,w)):(Ge&&h&&ru(o),o.flags|=1,zt(r,o,c,w),o.child)}function c0(r,o,c,h,y){if(Kn(o),o.stateNode===null){var w=Ar,j=c.contextType;typeof j=="object"&&j!==null&&(w=$t(j)),w=new c(h,w),o.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=$u,o.stateNode=w,w._reactInternals=o,w=o.stateNode,w.props=h,w.state=o.memoizedState,w.refs={},gu(o),j=c.contextType,w.context=typeof j=="object"&&j!==null?$t(j):Ar,w.state=o.memoizedState,j=c.getDerivedStateFromProps,typeof j=="function"&&(Bu(o,c,j,h),w.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(j=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),j!==w.state&&$u.enqueueReplaceState(w,w.state,null),ni(o,h,w,y),ai(),w.state=o.memoizedState),typeof w.componentDidMount=="function"&&(o.flags|=4194308),h=!0}else if(r===null){w=o.stateNode;var k=o.memoizedProps,B=er(c,k);w.props=B;var X=w.context,oe=c.contextType;j=Ar,typeof oe=="object"&&oe!==null&&(j=$t(oe));var de=c.getDerivedStateFromProps;oe=typeof de=="function"||typeof w.getSnapshotBeforeUpdate=="function",k=o.pendingProps!==k,oe||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(k||X!==j)&&Yg(o,w,h,j),pn=!1;var Z=o.memoizedState;w.state=Z,ni(o,h,w,y),ai(),X=o.memoizedState,k||Z!==X||pn?(typeof de=="function"&&(Bu(o,c,de,h),X=o.memoizedState),(B=pn||Kg(o,c,B,h,Z,X,j))?(oe||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(o.flags|=4194308)):(typeof w.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=h,o.memoizedState=X),w.props=h,w.state=X,w.context=j,h=B):(typeof w.componentDidMount=="function"&&(o.flags|=4194308),h=!1)}else{w=o.stateNode,xu(r,o),j=o.memoizedProps,oe=er(c,j),w.props=oe,de=o.pendingProps,Z=w.context,X=c.contextType,B=Ar,typeof X=="object"&&X!==null&&(B=$t(X)),k=c.getDerivedStateFromProps,(X=typeof k=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(j!==de||Z!==B)&&Yg(o,w,h,B),pn=!1,Z=o.memoizedState,w.state=Z,ni(o,h,w,y),ai();var ae=o.memoizedState;j!==de||Z!==ae||pn||r!==null&&r.dependencies!==null&&Tl(r.dependencies)?(typeof k=="function"&&(Bu(o,c,k,h),ae=o.memoizedState),(oe=pn||Kg(o,c,oe,h,Z,ae,B)||r!==null&&r.dependencies!==null&&Tl(r.dependencies))?(X||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(h,ae,B),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(h,ae,B)),typeof w.componentDidUpdate=="function"&&(o.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof w.componentDidUpdate!="function"||j===r.memoizedProps&&Z===r.memoizedState||(o.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||j===r.memoizedProps&&Z===r.memoizedState||(o.flags|=1024),o.memoizedProps=h,o.memoizedState=ae),w.props=h,w.state=ae,w.context=B,h=oe):(typeof w.componentDidUpdate!="function"||j===r.memoizedProps&&Z===r.memoizedState||(o.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||j===r.memoizedProps&&Z===r.memoizedState||(o.flags|=1024),h=!1)}return w=h,Jl(r,o),h=(o.flags&128)!==0,w||h?(w=o.stateNode,c=h&&typeof c.getDerivedStateFromError!="function"?null:w.render(),o.flags|=1,r!==null&&h?(o.child=Qn(o,r.child,null,y),o.child=Qn(o,null,c,y)):zt(r,o,c,y),o.memoizedState=w.state,r=o.child):r=qa(r,o,y),r}function d0(r,o,c,h){return Fn(),o.flags|=256,zt(r,o,c,h),o.child}var Gu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Fu(r){return{baseLanes:r,cachePool:Zp()}}function Ju(r,o,c){return r=r!==null?r.childLanes&~c:0,o&&(r|=Ss),r}function u0(r,o,c){var h=o.pendingProps,y=!1,w=(o.flags&128)!==0,j;if((j=w)||(j=r!==null&&r.memoizedState===null?!1:(bt.current&2)!==0),j&&(y=!0,o.flags&=-129),j=(o.flags&32)!==0,o.flags&=-33,r===null){if(Ge){if(y?yn(o):vn(),(r=ut)?(r=vx(r,Gs),r=r!==null&&r.data!=="&"?r:null,r!==null&&(o.memoizedState={dehydrated:r,treeContext:un!==null?{id:xa,overflow:ya}:null,retryLane:536870912,hydrationErrors:null},c=Hp(r),c.return=o,o.child=c,Bt=o,ut=null)):r=null,r===null)throw fn(o);return Ah(r)?o.lanes=32:o.lanes=536870912,null}var k=h.children;return h=h.fallback,y?(vn(),y=o.mode,k=Kl({mode:"hidden",children:k},y),h=Gn(h,y,c,null),k.return=o,h.return=o,k.sibling=h,o.child=k,h=o.child,h.memoizedState=Fu(c),h.childLanes=Ju(r,j,c),o.memoizedState=Gu,ci(null,h)):(yn(o),Ku(o,k))}var B=r.memoizedState;if(B!==null&&(k=B.dehydrated,k!==null)){if(w)o.flags&256?(yn(o),o.flags&=-257,o=Yu(r,o,c)):o.memoizedState!==null?(vn(),o.child=r.child,o.flags|=128,o=null):(vn(),k=h.fallback,y=o.mode,h=Kl({mode:"visible",children:h.children},y),k=Gn(k,y,c,null),k.flags|=2,h.return=o,k.return=o,h.sibling=k,o.child=h,Qn(o,r.child,null,c),h=o.child,h.memoizedState=Fu(c),h.childLanes=Ju(r,j,c),o.memoizedState=Gu,o=ci(null,h));else if(yn(o),Ah(k)){if(j=k.nextSibling&&k.nextSibling.dataset,j)var X=j.dgst;j=X,h=Error(n(419)),h.stack="",h.digest=j,Xo({value:h,source:null,stack:null}),o=Yu(r,o,c)}else if(Et||Ir(r,o,c,!1),j=(c&r.childLanes)!==0,Et||j){if(j=ot,j!==null&&(h=Xm(j,c),h!==0&&h!==B.retryLane))throw B.retryLane=h,Hn(r,h),fs(j,r,h),Vu;Th(k)||ac(),o=Yu(r,o,c)}else Th(k)?(o.flags|=192,o.child=r.child,o=null):(r=B.treeContext,ut=Js(k.nextSibling),Bt=o,Ge=!0,hn=null,Gs=!1,r!==null&&Jp(o,r),o=Ku(o,h.children),o.flags|=4096);return o}return y?(vn(),k=h.fallback,y=o.mode,B=r.child,X=B.sibling,h=Ia(B,{mode:"hidden",children:h.children}),h.subtreeFlags=B.subtreeFlags&65011712,X!==null?k=Ia(X,k):(k=Gn(k,y,c,null),k.flags|=2),k.return=o,h.return=o,h.sibling=k,o.child=h,ci(null,h),h=o.child,k=r.child.memoizedState,k===null?k=Fu(c):(y=k.cachePool,y!==null?(B=St._currentValue,y=y.parent!==B?{parent:B,pool:B}:y):y=Zp(),k={baseLanes:k.baseLanes|c,cachePool:y}),h.memoizedState=k,h.childLanes=Ju(r,j,c),o.memoizedState=Gu,ci(r.child,h)):(yn(o),c=r.child,r=c.sibling,c=Ia(c,{mode:"visible",children:h.children}),c.return=o,c.sibling=null,r!==null&&(j=o.deletions,j===null?(o.deletions=[r],o.flags|=16):j.push(r)),o.child=c,o.memoizedState=null,c)}function Ku(r,o){return o=Kl({mode:"visible",children:o},r.mode),o.return=r,r.child=o}function Kl(r,o){return r=bs(22,r,null,o),r.lanes=0,r}function Yu(r,o,c){return Qn(o,r.child,null,c),r=Ku(o,o.pendingProps.children),r.flags|=2,o.memoizedState=null,r}function h0(r,o,c){r.lanes|=o;var h=r.alternate;h!==null&&(h.lanes|=o),du(r.return,o,c)}function Wu(r,o,c,h,y,w){var j=r.memoizedState;j===null?r.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:h,tail:c,tailMode:y,treeForkCount:w}:(j.isBackwards=o,j.rendering=null,j.renderingStartTime=0,j.last=h,j.tail=c,j.tailMode=y,j.treeForkCount=w)}function f0(r,o,c){var h=o.pendingProps,y=h.revealOrder,w=h.tail;h=h.children;var j=bt.current,k=(j&2)!==0;if(k?(j=j&1|2,o.flags|=128):j&=1,te(bt,j),zt(r,o,h,c),h=Ge?Wo:0,!k&&r!==null&&(r.flags&128)!==0)e:for(r=o.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&h0(r,c,o);else if(r.tag===19)h0(r,c,o);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===o)break e;for(;r.sibling===null;){if(r.return===null||r.return===o)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(y){case"forwards":for(c=o.child,y=null;c!==null;)r=c.alternate,r!==null&&Ul(r)===null&&(y=c),c=c.sibling;c=y,c===null?(y=o.child,o.child=null):(y=c.sibling,c.sibling=null),Wu(o,!1,y,c,w,h);break;case"backwards":case"unstable_legacy-backwards":for(c=null,y=o.child,o.child=null;y!==null;){if(r=y.alternate,r!==null&&Ul(r)===null){o.child=y;break}r=y.sibling,y.sibling=c,c=y,y=r}Wu(o,!0,c,null,w,h);break;case"together":Wu(o,!1,null,null,void 0,h);break;default:o.memoizedState=null}return o.child}function qa(r,o,c){if(r!==null&&(o.dependencies=r.dependencies),Nn|=o.lanes,(c&o.childLanes)===0)if(r!==null){if(Ir(r,o,c,!1),(c&o.childLanes)===0)return null}else return null;if(r!==null&&o.child!==r.child)throw Error(n(153));if(o.child!==null){for(r=o.child,c=Ia(r,r.pendingProps),o.child=c,c.return=o;r.sibling!==null;)r=r.sibling,c=c.sibling=Ia(r,r.pendingProps),c.return=o;c.sibling=null}return o.child}function Xu(r,o){return(r.lanes&o)!==0?!0:(r=r.dependencies,!!(r!==null&&Tl(r)))}function kS(r,o,c){switch(o.tag){case 3:je(o,o.stateNode.containerInfo),mn(o,St,r.memoizedState.cache),Fn();break;case 27:case 5:Ne(o);break;case 4:je(o,o.stateNode.containerInfo);break;case 10:mn(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,Nu(o),null;break;case 13:var h=o.memoizedState;if(h!==null)return h.dehydrated!==null?(yn(o),o.flags|=128,null):(c&o.child.childLanes)!==0?u0(r,o,c):(yn(o),r=qa(r,o,c),r!==null?r.sibling:null);yn(o);break;case 19:var y=(r.flags&128)!==0;if(h=(c&o.childLanes)!==0,h||(Ir(r,o,c,!1),h=(c&o.childLanes)!==0),y){if(h)return f0(r,o,c);o.flags|=128}if(y=o.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),te(bt,bt.current),h)break;return null;case 22:return o.lanes=0,r0(r,o,c,o.pendingProps);case 24:mn(o,St,r.memoizedState.cache)}return qa(r,o,c)}function m0(r,o,c){if(r!==null)if(r.memoizedProps!==o.pendingProps)Et=!0;else{if(!Xu(r,c)&&(o.flags&128)===0)return Et=!1,kS(r,o,c);Et=(r.flags&131072)!==0}else Et=!1,Ge&&(o.flags&1048576)!==0&&Fp(o,Wo,o.index);switch(o.lanes=0,o.tag){case 16:e:{var h=o.pendingProps;if(r=Wn(o.elementType),o.type=r,typeof r=="function")su(r)?(h=er(r,h),o.tag=1,o=c0(null,o,r,h,c)):(o.tag=0,o=Hu(null,o,r,h,c));else{if(r!=null){var y=r.$$typeof;if(y===M){o.tag=11,o=s0(null,o,r,h,c);break e}else if(y===G){o.tag=14,o=a0(null,o,r,h,c);break e}}throw o=ie(r)||r,Error(n(306,o,""))}}return o;case 0:return Hu(r,o,o.type,o.pendingProps,c);case 1:return h=o.type,y=er(h,o.pendingProps),c0(r,o,h,y,c);case 3:e:{if(je(o,o.stateNode.containerInfo),r===null)throw Error(n(387));h=o.pendingProps;var w=o.memoizedState;y=w.element,xu(r,o),ni(o,h,null,c);var j=o.memoizedState;if(h=j.cache,mn(o,St,h),h!==w.cache&&uu(o,[St],c,!0),ai(),h=j.element,w.isDehydrated)if(w={element:h,isDehydrated:!1,cache:j.cache},o.updateQueue.baseState=w,o.memoizedState=w,o.flags&256){o=d0(r,o,h,c);break e}else if(h!==y){y=zs(Error(n(424)),o),Xo(y),o=d0(r,o,h,c);break e}else{switch(r=o.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(ut=Js(r.firstChild),Bt=o,Ge=!0,hn=null,Gs=!0,c=rg(o,null,h,c),o.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(Fn(),h===y){o=qa(r,o,c);break e}zt(r,o,h,c)}o=o.child}return o;case 26:return Jl(r,o),r===null?(c=jx(o.type,null,o.pendingProps,null))?o.memoizedState=c:Ge||(c=o.type,r=o.pendingProps,h=dc(ee.current).createElement(c),h[qt]=o,h[is]=r,Vt(h,c,r),Pt(h),o.stateNode=h):o.memoizedState=jx(o.type,r.memoizedProps,o.pendingProps,r.memoizedState),null;case 27:return Ne(o),r===null&&Ge&&(h=o.stateNode=Nx(o.type,o.pendingProps,ee.current),Bt=o,Gs=!0,y=ut,Cn(o.type)?(Rh=y,ut=Js(h.firstChild)):ut=y),zt(r,o,o.pendingProps.children,c),Jl(r,o),r===null&&(o.flags|=4194304),o.child;case 5:return r===null&&Ge&&((y=h=ut)&&(h=ij(h,o.type,o.pendingProps,Gs),h!==null?(o.stateNode=h,Bt=o,ut=Js(h.firstChild),Gs=!1,y=!0):y=!1),y||fn(o)),Ne(o),y=o.type,w=o.pendingProps,j=r!==null?r.memoizedProps:null,h=w.children,jh(y,w)?h=null:j!==null&&jh(y,j)&&(o.flags|=32),o.memoizedState!==null&&(y=Su(r,o,NS,null,null,c),Si._currentValue=y),Jl(r,o),zt(r,o,h,c),o.child;case 6:return r===null&&Ge&&((r=c=ut)&&(c=lj(c,o.pendingProps,Gs),c!==null?(o.stateNode=c,Bt=o,ut=null,r=!0):r=!1),r||fn(o)),null;case 13:return u0(r,o,c);case 4:return je(o,o.stateNode.containerInfo),h=o.pendingProps,r===null?o.child=Qn(o,null,h,c):zt(r,o,h,c),o.child;case 11:return s0(r,o,o.type,o.pendingProps,c);case 7:return zt(r,o,o.pendingProps,c),o.child;case 8:return zt(r,o,o.pendingProps.children,c),o.child;case 12:return zt(r,o,o.pendingProps.children,c),o.child;case 10:return h=o.pendingProps,mn(o,o.type,h.value),zt(r,o,h.children,c),o.child;case 9:return y=o.type._context,h=o.pendingProps.children,Kn(o),y=$t(y),h=h(y),o.flags|=1,zt(r,o,h,c),o.child;case 14:return a0(r,o,o.type,o.pendingProps,c);case 15:return n0(r,o,o.type,o.pendingProps,c);case 19:return f0(r,o,c);case 31:return RS(r,o,c);case 22:return r0(r,o,c,o.pendingProps);case 24:return Kn(o),h=$t(St),r===null?(y=mu(),y===null&&(y=ot,w=hu(),y.pooledCache=w,w.refCount++,w!==null&&(y.pooledCacheLanes|=c),y=w),o.memoizedState={parent:h,cache:y},gu(o),mn(o,St,y)):((r.lanes&c)!==0&&(xu(r,o),ni(o,null,null,c),ai()),y=r.memoizedState,w=o.memoizedState,y.parent!==h?(y={parent:h,cache:h},o.memoizedState=y,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=y),mn(o,St,h)):(h=w.cache,mn(o,St,h),h!==y.cache&&uu(o,[St],c,!0))),zt(r,o,o.pendingProps.children,c),o.child;case 29:throw o.pendingProps}throw Error(n(156,o.tag))}function Ba(r){r.flags|=4}function Qu(r,o,c,h,y){if((o=(r.mode&32)!==0)&&(o=!1),o){if(r.flags|=16777216,(y&335544128)===y)if(r.stateNode.complete)r.flags|=8192;else if($0())r.flags|=8192;else throw Xn=Ml,pu}else r.flags&=-16777217}function p0(r,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!Rx(o))if($0())r.flags|=8192;else throw Xn=Ml,pu}function Yl(r,o){o!==null&&(r.flags|=4),r.flags&16384&&(o=r.tag!==22?Km():536870912,r.lanes|=o,Gr|=o)}function di(r,o){if(!Ge)switch(r.tailMode){case"hidden":o=r.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?r.tail=null:c.sibling=null;break;case"collapsed":c=r.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?o||r.tail===null?r.tail=null:r.tail.sibling=null:h.sibling=null}}function ht(r){var o=r.alternate!==null&&r.alternate.child===r.child,c=0,h=0;if(o)for(var y=r.child;y!==null;)c|=y.lanes|y.childLanes,h|=y.subtreeFlags&65011712,h|=y.flags&65011712,y.return=r,y=y.sibling;else for(y=r.child;y!==null;)c|=y.lanes|y.childLanes,h|=y.subtreeFlags,h|=y.flags,y.return=r,y=y.sibling;return r.subtreeFlags|=h,r.childLanes=c,o}function MS(r,o,c){var h=o.pendingProps;switch(ou(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ht(o),null;case 1:return ht(o),null;case 3:return c=o.stateNode,h=null,r!==null&&(h=r.memoizedState.cache),o.memoizedState.cache!==h&&(o.flags|=2048),Ua(St),pe(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(r===null||r.child===null)&&(Mr(o)?Ba(o):r===null||r.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,lu())),ht(o),null;case 26:var y=o.type,w=o.memoizedState;return r===null?(Ba(o),w!==null?(ht(o),p0(o,w)):(ht(o),Qu(o,y,null,h,c))):w?w!==r.memoizedState?(Ba(o),ht(o),p0(o,w)):(ht(o),o.flags&=-16777217):(r=r.memoizedProps,r!==h&&Ba(o),ht(o),Qu(o,y,r,h,c)),null;case 27:if(Me(o),c=ee.current,y=o.type,r!==null&&o.stateNode!=null)r.memoizedProps!==h&&Ba(o);else{if(!h){if(o.stateNode===null)throw Error(n(166));return ht(o),null}r=se.current,Mr(o)?Kp(o):(r=Nx(y,h,c),o.stateNode=r,Ba(o))}return ht(o),null;case 5:if(Me(o),y=o.type,r!==null&&o.stateNode!=null)r.memoizedProps!==h&&Ba(o);else{if(!h){if(o.stateNode===null)throw Error(n(166));return ht(o),null}if(w=se.current,Mr(o))Kp(o);else{var j=dc(ee.current);switch(w){case 1:w=j.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:w=j.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":w=j.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":w=j.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":w=j.createElement("div"),w.innerHTML="<script><\/script>",w=w.removeChild(w.firstChild);break;case"select":w=typeof h.is=="string"?j.createElement("select",{is:h.is}):j.createElement("select"),h.multiple?w.multiple=!0:h.size&&(w.size=h.size);break;default:w=typeof h.is=="string"?j.createElement(y,{is:h.is}):j.createElement(y)}}w[qt]=o,w[is]=h;e:for(j=o.child;j!==null;){if(j.tag===5||j.tag===6)w.appendChild(j.stateNode);else if(j.tag!==4&&j.tag!==27&&j.child!==null){j.child.return=j,j=j.child;continue}if(j===o)break e;for(;j.sibling===null;){if(j.return===null||j.return===o)break e;j=j.return}j.sibling.return=j.return,j=j.sibling}o.stateNode=w;e:switch(Vt(w,y,h),y){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&Ba(o)}}return ht(o),Qu(o,o.type,r===null?null:r.memoizedProps,o.pendingProps,c),null;case 6:if(r&&o.stateNode!=null)r.memoizedProps!==h&&Ba(o);else{if(typeof h!="string"&&o.stateNode===null)throw Error(n(166));if(r=ee.current,Mr(o)){if(r=o.stateNode,c=o.memoizedProps,h=null,y=Bt,y!==null)switch(y.tag){case 27:case 5:h=y.memoizedProps}r[qt]=o,r=!!(r.nodeValue===c||h!==null&&h.suppressHydrationWarning===!0||ux(r.nodeValue,c)),r||fn(o,!0)}else r=dc(r).createTextNode(h),r[qt]=o,o.stateNode=r}return ht(o),null;case 31:if(c=o.memoizedState,r===null||r.memoizedState!==null){if(h=Mr(o),c!==null){if(r===null){if(!h)throw Error(n(318));if(r=o.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(557));r[qt]=o}else Fn(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;ht(o),r=!1}else c=lu(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=c),r=!0;if(!r)return o.flags&256?(Ns(o),o):(Ns(o),null);if((o.flags&128)!==0)throw Error(n(558))}return ht(o),null;case 13:if(h=o.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(y=Mr(o),h!==null&&h.dehydrated!==null){if(r===null){if(!y)throw Error(n(318));if(y=o.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(n(317));y[qt]=o}else Fn(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;ht(o),y=!1}else y=lu(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=y),y=!0;if(!y)return o.flags&256?(Ns(o),o):(Ns(o),null)}return Ns(o),(o.flags&128)!==0?(o.lanes=c,o):(c=h!==null,r=r!==null&&r.memoizedState!==null,c&&(h=o.child,y=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(y=h.alternate.memoizedState.cachePool.pool),w=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(w=h.memoizedState.cachePool.pool),w!==y&&(h.flags|=2048)),c!==r&&c&&(o.child.flags|=8192),Yl(o,o.updateQueue),ht(o),null);case 4:return pe(),r===null&&bh(o.stateNode.containerInfo),ht(o),null;case 10:return Ua(o.type),ht(o),null;case 19:if(D(bt),h=o.memoizedState,h===null)return ht(o),null;if(y=(o.flags&128)!==0,w=h.rendering,w===null)if(y)di(h,!1);else{if(yt!==0||r!==null&&(r.flags&128)!==0)for(r=o.child;r!==null;){if(w=Ul(r),w!==null){for(o.flags|=128,di(h,!1),r=w.updateQueue,o.updateQueue=r,Yl(o,r),o.subtreeFlags=0,r=c,c=o.child;c!==null;)Vp(c,r),c=c.sibling;return te(bt,bt.current&1|2),Ge&&Da(o,h.treeForkCount),o.child}r=r.sibling}h.tail!==null&&He()>ec&&(o.flags|=128,y=!0,di(h,!1),o.lanes=4194304)}else{if(!y)if(r=Ul(w),r!==null){if(o.flags|=128,y=!0,r=r.updateQueue,o.updateQueue=r,Yl(o,r),di(h,!0),h.tail===null&&h.tailMode==="hidden"&&!w.alternate&&!Ge)return ht(o),null}else 2*He()-h.renderingStartTime>ec&&c!==536870912&&(o.flags|=128,y=!0,di(h,!1),o.lanes=4194304);h.isBackwards?(w.sibling=o.child,o.child=w):(r=h.last,r!==null?r.sibling=w:o.child=w,h.last=w)}return h.tail!==null?(r=h.tail,h.rendering=r,h.tail=r.sibling,h.renderingStartTime=He(),r.sibling=null,c=bt.current,te(bt,y?c&1|2:c&1),Ge&&Da(o,h.treeForkCount),r):(ht(o),null);case 22:case 23:return Ns(o),wu(),h=o.memoizedState!==null,r!==null?r.memoizedState!==null!==h&&(o.flags|=8192):h&&(o.flags|=8192),h?(c&536870912)!==0&&(o.flags&128)===0&&(ht(o),o.subtreeFlags&6&&(o.flags|=8192)):ht(o),c=o.updateQueue,c!==null&&Yl(o,c.retryQueue),c=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),h=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),h!==c&&(o.flags|=2048),r!==null&&D(Yn),null;case 24:return c=null,r!==null&&(c=r.memoizedState.cache),o.memoizedState.cache!==c&&(o.flags|=2048),Ua(St),ht(o),null;case 25:return null;case 30:return null}throw Error(n(156,o.tag))}function IS(r,o){switch(ou(o),o.tag){case 1:return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 3:return Ua(St),pe(),r=o.flags,(r&65536)!==0&&(r&128)===0?(o.flags=r&-65537|128,o):null;case 26:case 27:case 5:return Me(o),null;case 31:if(o.memoizedState!==null){if(Ns(o),o.alternate===null)throw Error(n(340));Fn()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 13:if(Ns(o),r=o.memoizedState,r!==null&&r.dehydrated!==null){if(o.alternate===null)throw Error(n(340));Fn()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 19:return D(bt),null;case 4:return pe(),null;case 10:return Ua(o.type),null;case 22:case 23:return Ns(o),wu(),r!==null&&D(Yn),r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 24:return Ua(St),null;case 25:return null;default:return null}}function g0(r,o){switch(ou(o),o.tag){case 3:Ua(St),pe();break;case 26:case 27:case 5:Me(o);break;case 4:pe();break;case 31:o.memoizedState!==null&&Ns(o);break;case 13:Ns(o);break;case 19:D(bt);break;case 10:Ua(o.type);break;case 22:case 23:Ns(o),wu(),r!==null&&D(Yn);break;case 24:Ua(St)}}function ui(r,o){try{var c=o.updateQueue,h=c!==null?c.lastEffect:null;if(h!==null){var y=h.next;c=y;do{if((c.tag&r)===r){h=void 0;var w=c.create,j=c.inst;h=w(),j.destroy=h}c=c.next}while(c!==y)}}catch(k){st(o,o.return,k)}}function bn(r,o,c){try{var h=o.updateQueue,y=h!==null?h.lastEffect:null;if(y!==null){var w=y.next;h=w;do{if((h.tag&r)===r){var j=h.inst,k=j.destroy;if(k!==void 0){j.destroy=void 0,y=o;var B=c,X=k;try{X()}catch(oe){st(y,B,oe)}}}h=h.next}while(h!==w)}}catch(oe){st(o,o.return,oe)}}function x0(r){var o=r.updateQueue;if(o!==null){var c=r.stateNode;try{ig(o,c)}catch(h){st(r,r.return,h)}}}function y0(r,o,c){c.props=er(r.type,r.memoizedProps),c.state=r.memoizedState;try{c.componentWillUnmount()}catch(h){st(r,o,h)}}function hi(r,o){try{var c=r.ref;if(c!==null){switch(r.tag){case 26:case 27:case 5:var h=r.stateNode;break;case 30:h=r.stateNode;break;default:h=r.stateNode}typeof c=="function"?r.refCleanup=c(h):c.current=h}}catch(y){st(r,o,y)}}function va(r,o){var c=r.ref,h=r.refCleanup;if(c!==null)if(typeof h=="function")try{h()}catch(y){st(r,o,y)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(y){st(r,o,y)}else c.current=null}function v0(r){var o=r.type,c=r.memoizedProps,h=r.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":c.autoFocus&&h.focus();break e;case"img":c.src?h.src=c.src:c.srcSet&&(h.srcset=c.srcSet)}}catch(y){st(r,r.return,y)}}function Zu(r,o,c){try{var h=r.stateNode;tj(h,r.type,c,o),h[is]=o}catch(y){st(r,r.return,y)}}function b0(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Cn(r.type)||r.tag===4}function eh(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||b0(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Cn(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function th(r,o,c){var h=r.tag;if(h===5||h===6)r=r.stateNode,o?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(r,o):(o=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,o.appendChild(r),c=c._reactRootContainer,c!=null||o.onclick!==null||(o.onclick=ka));else if(h!==4&&(h===27&&Cn(r.type)&&(c=r.stateNode,o=null),r=r.child,r!==null))for(th(r,o,c),r=r.sibling;r!==null;)th(r,o,c),r=r.sibling}function Wl(r,o,c){var h=r.tag;if(h===5||h===6)r=r.stateNode,o?c.insertBefore(r,o):c.appendChild(r);else if(h!==4&&(h===27&&Cn(r.type)&&(c=r.stateNode),r=r.child,r!==null))for(Wl(r,o,c),r=r.sibling;r!==null;)Wl(r,o,c),r=r.sibling}function w0(r){var o=r.stateNode,c=r.memoizedProps;try{for(var h=r.type,y=o.attributes;y.length;)o.removeAttributeNode(y[0]);Vt(o,h,c),o[qt]=r,o[is]=c}catch(w){st(r,r.return,w)}}var $a=!1,Ct=!1,sh=!1,N0=typeof WeakSet=="function"?WeakSet:Set,Ut=null;function DS(r,o){if(r=r.containerInfo,_h=xc,r=Dp(r),Yd(r)){if("selectionStart"in r)var c={start:r.selectionStart,end:r.selectionEnd};else e:{c=(c=r.ownerDocument)&&c.defaultView||window;var h=c.getSelection&&c.getSelection();if(h&&h.rangeCount!==0){c=h.anchorNode;var y=h.anchorOffset,w=h.focusNode;h=h.focusOffset;try{c.nodeType,w.nodeType}catch{c=null;break e}var j=0,k=-1,B=-1,X=0,oe=0,de=r,Z=null;t:for(;;){for(var ae;de!==c||y!==0&&de.nodeType!==3||(k=j+y),de!==w||h!==0&&de.nodeType!==3||(B=j+h),de.nodeType===3&&(j+=de.nodeValue.length),(ae=de.firstChild)!==null;)Z=de,de=ae;for(;;){if(de===r)break t;if(Z===c&&++X===y&&(k=j),Z===w&&++oe===h&&(B=j),(ae=de.nextSibling)!==null)break;de=Z,Z=de.parentNode}de=ae}c=k===-1||B===-1?null:{start:k,end:B}}else c=null}c=c||{start:0,end:0}}else c=null;for(Sh={focusedElem:r,selectionRange:c},xc=!1,Ut=o;Ut!==null;)if(o=Ut,r=o.child,(o.subtreeFlags&1028)!==0&&r!==null)r.return=o,Ut=r;else for(;Ut!==null;){switch(o=Ut,w=o.alternate,r=o.flags,o.tag){case 0:if((r&4)!==0&&(r=o.updateQueue,r=r!==null?r.events:null,r!==null))for(c=0;c<r.length;c++)y=r[c],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&w!==null){r=void 0,c=o,y=w.memoizedProps,w=w.memoizedState,h=c.stateNode;try{var xe=er(c.type,y);r=h.getSnapshotBeforeUpdate(xe,w),h.__reactInternalSnapshotBeforeUpdate=r}catch(Ee){st(c,c.return,Ee)}}break;case 3:if((r&1024)!==0){if(r=o.stateNode.containerInfo,c=r.nodeType,c===9)Ch(r);else if(c===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Ch(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(n(163))}if(r=o.sibling,r!==null){r.return=o.return,Ut=r;break}Ut=o.return}}function _0(r,o,c){var h=c.flags;switch(c.tag){case 0:case 11:case 15:Va(r,c),h&4&&ui(5,c);break;case 1:if(Va(r,c),h&4)if(r=c.stateNode,o===null)try{r.componentDidMount()}catch(j){st(c,c.return,j)}else{var y=er(c.type,o.memoizedProps);o=o.memoizedState;try{r.componentDidUpdate(y,o,r.__reactInternalSnapshotBeforeUpdate)}catch(j){st(c,c.return,j)}}h&64&&x0(c),h&512&&hi(c,c.return);break;case 3:if(Va(r,c),h&64&&(r=c.updateQueue,r!==null)){if(o=null,c.child!==null)switch(c.child.tag){case 27:case 5:o=c.child.stateNode;break;case 1:o=c.child.stateNode}try{ig(r,o)}catch(j){st(c,c.return,j)}}break;case 27:o===null&&h&4&&w0(c);case 26:case 5:Va(r,c),o===null&&h&4&&v0(c),h&512&&hi(c,c.return);break;case 12:Va(r,c);break;case 31:Va(r,c),h&4&&E0(r,c);break;case 13:Va(r,c),h&4&&C0(r,c),h&64&&(r=c.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(c=VS.bind(null,c),cj(r,c))));break;case 22:if(h=c.memoizedState!==null||$a,!h){o=o!==null&&o.memoizedState!==null||Ct,y=$a;var w=Ct;$a=h,(Ct=o)&&!w?Ha(r,c,(c.subtreeFlags&8772)!==0):Va(r,c),$a=y,Ct=w}break;case 30:break;default:Va(r,c)}}function S0(r){var o=r.alternate;o!==null&&(r.alternate=null,S0(o)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(o=r.stateNode,o!==null&&Md(o)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var ft=null,cs=!1;function za(r,o,c){for(c=c.child;c!==null;)j0(r,o,c),c=c.sibling}function j0(r,o,c){if(_t&&typeof _t.onCommitFiberUnmount=="function")try{_t.onCommitFiberUnmount(Os,c)}catch{}switch(c.tag){case 26:Ct||va(c,o),za(r,o,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Ct||va(c,o);var h=ft,y=cs;Cn(c.type)&&(ft=c.stateNode,cs=!1),za(r,o,c),wi(c.stateNode),ft=h,cs=y;break;case 5:Ct||va(c,o);case 6:if(h=ft,y=cs,ft=null,za(r,o,c),ft=h,cs=y,ft!==null)if(cs)try{(ft.nodeType===9?ft.body:ft.nodeName==="HTML"?ft.ownerDocument.body:ft).removeChild(c.stateNode)}catch(w){st(c,o,w)}else try{ft.removeChild(c.stateNode)}catch(w){st(c,o,w)}break;case 18:ft!==null&&(cs?(r=ft,xx(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,c.stateNode),Zr(r)):xx(ft,c.stateNode));break;case 4:h=ft,y=cs,ft=c.stateNode.containerInfo,cs=!0,za(r,o,c),ft=h,cs=y;break;case 0:case 11:case 14:case 15:bn(2,c,o),Ct||bn(4,c,o),za(r,o,c);break;case 1:Ct||(va(c,o),h=c.stateNode,typeof h.componentWillUnmount=="function"&&y0(c,o,h)),za(r,o,c);break;case 21:za(r,o,c);break;case 22:Ct=(h=Ct)||c.memoizedState!==null,za(r,o,c),Ct=h;break;default:za(r,o,c)}}function E0(r,o){if(o.memoizedState===null&&(r=o.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{Zr(r)}catch(c){st(o,o.return,c)}}}function C0(r,o){if(o.memoizedState===null&&(r=o.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Zr(r)}catch(c){st(o,o.return,c)}}function PS(r){switch(r.tag){case 31:case 13:case 19:var o=r.stateNode;return o===null&&(o=r.stateNode=new N0),o;case 22:return r=r.stateNode,o=r._retryCache,o===null&&(o=r._retryCache=new N0),o;default:throw Error(n(435,r.tag))}}function Xl(r,o){var c=PS(r);o.forEach(function(h){if(!c.has(h)){c.add(h);var y=HS.bind(null,r,h);h.then(y,y)}})}function ds(r,o){var c=o.deletions;if(c!==null)for(var h=0;h<c.length;h++){var y=c[h],w=r,j=o,k=j;e:for(;k!==null;){switch(k.tag){case 27:if(Cn(k.type)){ft=k.stateNode,cs=!1;break e}break;case 5:ft=k.stateNode,cs=!1;break e;case 3:case 4:ft=k.stateNode.containerInfo,cs=!0;break e}k=k.return}if(ft===null)throw Error(n(160));j0(w,j,y),ft=null,cs=!1,w=y.alternate,w!==null&&(w.return=null),y.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)T0(o,r),o=o.sibling}var na=null;function T0(r,o){var c=r.alternate,h=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:ds(o,r),us(r),h&4&&(bn(3,r,r.return),ui(3,r),bn(5,r,r.return));break;case 1:ds(o,r),us(r),h&512&&(Ct||c===null||va(c,c.return)),h&64&&$a&&(r=r.updateQueue,r!==null&&(h=r.callbacks,h!==null&&(c=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=c===null?h:c.concat(h))));break;case 26:var y=na;if(ds(o,r),us(r),h&512&&(Ct||c===null||va(c,c.return)),h&4){var w=c!==null?c.memoizedState:null;if(h=r.memoizedState,c===null)if(h===null)if(r.stateNode===null){e:{h=r.type,c=r.memoizedProps,y=y.ownerDocument||y;t:switch(h){case"title":w=y.getElementsByTagName("title")[0],(!w||w[qo]||w[qt]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=y.createElement(h),y.head.insertBefore(w,y.querySelector("head > title"))),Vt(w,h,c),w[qt]=r,Pt(w),h=w;break e;case"link":var j=Tx("link","href",y).get(h+(c.href||""));if(j){for(var k=0;k<j.length;k++)if(w=j[k],w.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&w.getAttribute("rel")===(c.rel==null?null:c.rel)&&w.getAttribute("title")===(c.title==null?null:c.title)&&w.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){j.splice(k,1);break t}}w=y.createElement(h),Vt(w,h,c),y.head.appendChild(w);break;case"meta":if(j=Tx("meta","content",y).get(h+(c.content||""))){for(k=0;k<j.length;k++)if(w=j[k],w.getAttribute("content")===(c.content==null?null:""+c.content)&&w.getAttribute("name")===(c.name==null?null:c.name)&&w.getAttribute("property")===(c.property==null?null:c.property)&&w.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&w.getAttribute("charset")===(c.charSet==null?null:c.charSet)){j.splice(k,1);break t}}w=y.createElement(h),Vt(w,h,c),y.head.appendChild(w);break;default:throw Error(n(468,h))}w[qt]=r,Pt(w),h=w}r.stateNode=h}else Ax(y,r.type,r.stateNode);else r.stateNode=Cx(y,h,r.memoizedProps);else w!==h?(w===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):w.count--,h===null?Ax(y,r.type,r.stateNode):Cx(y,h,r.memoizedProps)):h===null&&r.stateNode!==null&&Zu(r,r.memoizedProps,c.memoizedProps)}break;case 27:ds(o,r),us(r),h&512&&(Ct||c===null||va(c,c.return)),c!==null&&h&4&&Zu(r,r.memoizedProps,c.memoizedProps);break;case 5:if(ds(o,r),us(r),h&512&&(Ct||c===null||va(c,c.return)),r.flags&32){y=r.stateNode;try{Nr(y,"")}catch(xe){st(r,r.return,xe)}}h&4&&r.stateNode!=null&&(y=r.memoizedProps,Zu(r,y,c!==null?c.memoizedProps:y)),h&1024&&(sh=!0);break;case 6:if(ds(o,r),us(r),h&4){if(r.stateNode===null)throw Error(n(162));h=r.memoizedProps,c=r.stateNode;try{c.nodeValue=h}catch(xe){st(r,r.return,xe)}}break;case 3:if(fc=null,y=na,na=uc(o.containerInfo),ds(o,r),na=y,us(r),h&4&&c!==null&&c.memoizedState.isDehydrated)try{Zr(o.containerInfo)}catch(xe){st(r,r.return,xe)}sh&&(sh=!1,A0(r));break;case 4:h=na,na=uc(r.stateNode.containerInfo),ds(o,r),us(r),na=h;break;case 12:ds(o,r),us(r);break;case 31:ds(o,r),us(r),h&4&&(h=r.updateQueue,h!==null&&(r.updateQueue=null,Xl(r,h)));break;case 13:ds(o,r),us(r),r.child.flags&8192&&r.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Zl=He()),h&4&&(h=r.updateQueue,h!==null&&(r.updateQueue=null,Xl(r,h)));break;case 22:y=r.memoizedState!==null;var B=c!==null&&c.memoizedState!==null,X=$a,oe=Ct;if($a=X||y,Ct=oe||B,ds(o,r),Ct=oe,$a=X,us(r),h&8192)e:for(o=r.stateNode,o._visibility=y?o._visibility&-2:o._visibility|1,y&&(c===null||B||$a||Ct||tr(r)),c=null,o=r;;){if(o.tag===5||o.tag===26){if(c===null){B=c=o;try{if(w=B.stateNode,y)j=w.style,typeof j.setProperty=="function"?j.setProperty("display","none","important"):j.display="none";else{k=B.stateNode;var de=B.memoizedProps.style,Z=de!=null&&de.hasOwnProperty("display")?de.display:null;k.style.display=Z==null||typeof Z=="boolean"?"":(""+Z).trim()}}catch(xe){st(B,B.return,xe)}}}else if(o.tag===6){if(c===null){B=o;try{B.stateNode.nodeValue=y?"":B.memoizedProps}catch(xe){st(B,B.return,xe)}}}else if(o.tag===18){if(c===null){B=o;try{var ae=B.stateNode;y?yx(ae,!0):yx(B.stateNode,!1)}catch(xe){st(B,B.return,xe)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===r)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break e;for(;o.sibling===null;){if(o.return===null||o.return===r)break e;c===o&&(c=null),o=o.return}c===o&&(c=null),o.sibling.return=o.return,o=o.sibling}h&4&&(h=r.updateQueue,h!==null&&(c=h.retryQueue,c!==null&&(h.retryQueue=null,Xl(r,c))));break;case 19:ds(o,r),us(r),h&4&&(h=r.updateQueue,h!==null&&(r.updateQueue=null,Xl(r,h)));break;case 30:break;case 21:break;default:ds(o,r),us(r)}}function us(r){var o=r.flags;if(o&2){try{for(var c,h=r.return;h!==null;){if(b0(h)){c=h;break}h=h.return}if(c==null)throw Error(n(160));switch(c.tag){case 27:var y=c.stateNode,w=eh(r);Wl(r,w,y);break;case 5:var j=c.stateNode;c.flags&32&&(Nr(j,""),c.flags&=-33);var k=eh(r);Wl(r,k,j);break;case 3:case 4:var B=c.stateNode.containerInfo,X=eh(r);th(r,X,B);break;default:throw Error(n(161))}}catch(oe){st(r,r.return,oe)}r.flags&=-3}o&4096&&(r.flags&=-4097)}function A0(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var o=r;A0(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),r=r.sibling}}function Va(r,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)_0(r,o.alternate,o),o=o.sibling}function tr(r){for(r=r.child;r!==null;){var o=r;switch(o.tag){case 0:case 11:case 14:case 15:bn(4,o,o.return),tr(o);break;case 1:va(o,o.return);var c=o.stateNode;typeof c.componentWillUnmount=="function"&&y0(o,o.return,c),tr(o);break;case 27:wi(o.stateNode);case 26:case 5:va(o,o.return),tr(o);break;case 22:o.memoizedState===null&&tr(o);break;case 30:tr(o);break;default:tr(o)}r=r.sibling}}function Ha(r,o,c){for(c=c&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var h=o.alternate,y=r,w=o,j=w.flags;switch(w.tag){case 0:case 11:case 15:Ha(y,w,c),ui(4,w);break;case 1:if(Ha(y,w,c),h=w,y=h.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(X){st(h,h.return,X)}if(h=w,y=h.updateQueue,y!==null){var k=h.stateNode;try{var B=y.shared.hiddenCallbacks;if(B!==null)for(y.shared.hiddenCallbacks=null,y=0;y<B.length;y++)og(B[y],k)}catch(X){st(h,h.return,X)}}c&&j&64&&x0(w),hi(w,w.return);break;case 27:w0(w);case 26:case 5:Ha(y,w,c),c&&h===null&&j&4&&v0(w),hi(w,w.return);break;case 12:Ha(y,w,c);break;case 31:Ha(y,w,c),c&&j&4&&E0(y,w);break;case 13:Ha(y,w,c),c&&j&4&&C0(y,w);break;case 22:w.memoizedState===null&&Ha(y,w,c),hi(w,w.return);break;case 30:break;default:Ha(y,w,c)}o=o.sibling}}function ah(r,o){var c=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),r=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(r=o.memoizedState.cachePool.pool),r!==c&&(r!=null&&r.refCount++,c!=null&&Qo(c))}function nh(r,o){r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&Qo(r))}function ra(r,o,c,h){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)R0(r,o,c,h),o=o.sibling}function R0(r,o,c,h){var y=o.flags;switch(o.tag){case 0:case 11:case 15:ra(r,o,c,h),y&2048&&ui(9,o);break;case 1:ra(r,o,c,h);break;case 3:ra(r,o,c,h),y&2048&&(r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&Qo(r)));break;case 12:if(y&2048){ra(r,o,c,h),r=o.stateNode;try{var w=o.memoizedProps,j=w.id,k=w.onPostCommit;typeof k=="function"&&k(j,o.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(B){st(o,o.return,B)}}else ra(r,o,c,h);break;case 31:ra(r,o,c,h);break;case 13:ra(r,o,c,h);break;case 23:break;case 22:w=o.stateNode,j=o.alternate,o.memoizedState!==null?w._visibility&2?ra(r,o,c,h):fi(r,o):w._visibility&2?ra(r,o,c,h):(w._visibility|=2,zr(r,o,c,h,(o.subtreeFlags&10256)!==0||!1)),y&2048&&ah(j,o);break;case 24:ra(r,o,c,h),y&2048&&nh(o.alternate,o);break;default:ra(r,o,c,h)}}function zr(r,o,c,h,y){for(y=y&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var w=r,j=o,k=c,B=h,X=j.flags;switch(j.tag){case 0:case 11:case 15:zr(w,j,k,B,y),ui(8,j);break;case 23:break;case 22:var oe=j.stateNode;j.memoizedState!==null?oe._visibility&2?zr(w,j,k,B,y):fi(w,j):(oe._visibility|=2,zr(w,j,k,B,y)),y&&X&2048&&ah(j.alternate,j);break;case 24:zr(w,j,k,B,y),y&&X&2048&&nh(j.alternate,j);break;default:zr(w,j,k,B,y)}o=o.sibling}}function fi(r,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var c=r,h=o,y=h.flags;switch(h.tag){case 22:fi(c,h),y&2048&&ah(h.alternate,h);break;case 24:fi(c,h),y&2048&&nh(h.alternate,h);break;default:fi(c,h)}o=o.sibling}}var mi=8192;function Vr(r,o,c){if(r.subtreeFlags&mi)for(r=r.child;r!==null;)k0(r,o,c),r=r.sibling}function k0(r,o,c){switch(r.tag){case 26:Vr(r,o,c),r.flags&mi&&r.memoizedState!==null&&wj(c,na,r.memoizedState,r.memoizedProps);break;case 5:Vr(r,o,c);break;case 3:case 4:var h=na;na=uc(r.stateNode.containerInfo),Vr(r,o,c),na=h;break;case 22:r.memoizedState===null&&(h=r.alternate,h!==null&&h.memoizedState!==null?(h=mi,mi=16777216,Vr(r,o,c),mi=h):Vr(r,o,c));break;default:Vr(r,o,c)}}function M0(r){var o=r.alternate;if(o!==null&&(r=o.child,r!==null)){o.child=null;do o=r.sibling,r.sibling=null,r=o;while(r!==null)}}function pi(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var h=o[c];Ut=h,D0(h,r)}M0(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)I0(r),r=r.sibling}function I0(r){switch(r.tag){case 0:case 11:case 15:pi(r),r.flags&2048&&bn(9,r,r.return);break;case 3:pi(r);break;case 12:pi(r);break;case 22:var o=r.stateNode;r.memoizedState!==null&&o._visibility&2&&(r.return===null||r.return.tag!==13)?(o._visibility&=-3,Ql(r)):pi(r);break;default:pi(r)}}function Ql(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var h=o[c];Ut=h,D0(h,r)}M0(r)}for(r=r.child;r!==null;){switch(o=r,o.tag){case 0:case 11:case 15:bn(8,o,o.return),Ql(o);break;case 22:c=o.stateNode,c._visibility&2&&(c._visibility&=-3,Ql(o));break;default:Ql(o)}r=r.sibling}}function D0(r,o){for(;Ut!==null;){var c=Ut;switch(c.tag){case 0:case 11:case 15:bn(8,c,o);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var h=c.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:Qo(c.memoizedState.cache)}if(h=c.child,h!==null)h.return=c,Ut=h;else e:for(c=r;Ut!==null;){h=Ut;var y=h.sibling,w=h.return;if(S0(h),h===c){Ut=null;break e}if(y!==null){y.return=w,Ut=y;break e}Ut=w}}}var US={getCacheForType:function(r){var o=$t(St),c=o.data.get(r);return c===void 0&&(c=r(),o.data.set(r,c)),c},cacheSignal:function(){return $t(St).controller.signal}},LS=typeof WeakMap=="function"?WeakMap:Map,Ze=0,ot=null,Be=null,ze=0,tt=0,_s=null,wn=!1,Hr=!1,rh=!1,Ga=0,yt=0,Nn=0,sr=0,oh=0,Ss=0,Gr=0,gi=null,hs=null,ih=!1,Zl=0,P0=0,ec=1/0,tc=null,_n=null,kt=0,Sn=null,Fr=null,Fa=0,lh=0,ch=null,U0=null,xi=0,dh=null;function js(){return(Ze&2)!==0&&ze!==0?ze&-ze:P.T!==null?gh():Qm()}function L0(){if(Ss===0)if((ze&536870912)===0||Ge){var r=cl;cl<<=1,(cl&3932160)===0&&(cl=262144),Ss=r}else Ss=536870912;return r=ws.current,r!==null&&(r.flags|=32),Ss}function fs(r,o,c){(r===ot&&(tt===2||tt===9)||r.cancelPendingCommit!==null)&&(Jr(r,0),jn(r,ze,Ss,!1)),Oo(r,c),((Ze&2)===0||r!==ot)&&(r===ot&&((Ze&2)===0&&(sr|=c),yt===4&&jn(r,ze,Ss,!1)),ba(r))}function O0(r,o,c){if((Ze&6)!==0)throw Error(n(327));var h=!c&&(o&127)===0&&(o&r.expiredLanes)===0||Lo(r,o),y=h?BS(r,o):hh(r,o,!0),w=h;do{if(y===0){Hr&&!h&&jn(r,o,0,!1);break}else{if(c=r.current.alternate,w&&!OS(c)){y=hh(r,o,!1),w=!1;continue}if(y===2){if(w=o,r.errorRecoveryDisabledLanes&w)var j=0;else j=r.pendingLanes&-536870913,j=j!==0?j:j&536870912?536870912:0;if(j!==0){o=j;e:{var k=r;y=gi;var B=k.current.memoizedState.isDehydrated;if(B&&(Jr(k,j).flags|=256),j=hh(k,j,!1),j!==2){if(rh&&!B){k.errorRecoveryDisabledLanes|=w,sr|=w,y=4;break e}w=hs,hs=y,w!==null&&(hs===null?hs=w:hs.push.apply(hs,w))}y=j}if(w=!1,y!==2)continue}}if(y===1){Jr(r,0),jn(r,o,0,!0);break}e:{switch(h=r,w=y,w){case 0:case 1:throw Error(n(345));case 4:if((o&4194048)!==o)break;case 6:jn(h,o,Ss,!wn);break e;case 2:hs=null;break;case 3:case 5:break;default:throw Error(n(329))}if((o&62914560)===o&&(y=Zl+300-He(),10<y)){if(jn(h,o,Ss,!wn),ul(h,0,!0)!==0)break e;Fa=o,h.timeoutHandle=px(q0.bind(null,h,c,hs,tc,ih,o,Ss,sr,Gr,wn,w,"Throttled",-0,0),y);break e}q0(h,c,hs,tc,ih,o,Ss,sr,Gr,wn,w,null,-0,0)}}break}while(!0);ba(r)}function q0(r,o,c,h,y,w,j,k,B,X,oe,de,Z,ae){if(r.timeoutHandle=-1,de=o.subtreeFlags,de&8192||(de&16785408)===16785408){de={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ka},k0(o,w,de);var xe=(w&62914560)===w?Zl-He():(w&4194048)===w?P0-He():0;if(xe=Nj(de,xe),xe!==null){Fa=w,r.cancelPendingCommit=xe(J0.bind(null,r,o,w,c,h,y,j,k,B,oe,de,null,Z,ae)),jn(r,w,j,!X);return}}J0(r,o,w,c,h,y,j,k,B)}function OS(r){for(var o=r;;){var c=o.tag;if((c===0||c===11||c===15)&&o.flags&16384&&(c=o.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var h=0;h<c.length;h++){var y=c[h],w=y.getSnapshot;y=y.value;try{if(!vs(w(),y))return!1}catch{return!1}}if(c=o.child,o.subtreeFlags&16384&&c!==null)c.return=o,o=c;else{if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function jn(r,o,c,h){o&=~oh,o&=~sr,r.suspendedLanes|=o,r.pingedLanes&=~o,h&&(r.warmLanes|=o),h=r.expirationTimes;for(var y=o;0<y;){var w=31-et(y),j=1<<w;h[w]=-1,y&=~j}c!==0&&Ym(r,c,o)}function sc(){return(Ze&6)===0?(yi(0),!1):!0}function uh(){if(Be!==null){if(tt===0)var r=Be.return;else r=Be,Pa=Jn=null,Cu(r),Lr=null,ei=0,r=Be;for(;r!==null;)g0(r.alternate,r),r=r.return;Be=null}}function Jr(r,o){var c=r.timeoutHandle;c!==-1&&(r.timeoutHandle=-1,nj(c)),c=r.cancelPendingCommit,c!==null&&(r.cancelPendingCommit=null,c()),Fa=0,uh(),ot=r,Be=c=Ia(r.current,null),ze=o,tt=0,_s=null,wn=!1,Hr=Lo(r,o),rh=!1,Gr=Ss=oh=sr=Nn=yt=0,hs=gi=null,ih=!1,(o&8)!==0&&(o|=o&32);var h=r.entangledLanes;if(h!==0)for(r=r.entanglements,h&=o;0<h;){var y=31-et(h),w=1<<y;o|=r[y],h&=~w}return Ga=o,_l(),c}function B0(r,o){De=null,P.H=li,o===Ur||o===kl?(o=sg(),tt=3):o===pu?(o=sg(),tt=4):tt=o===Vu?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,_s=o,Be===null&&(yt=1,Gl(r,zs(o,r.current)))}function $0(){var r=ws.current;return r===null?!0:(ze&4194048)===ze?Fs===null:(ze&62914560)===ze||(ze&536870912)!==0?r===Fs:!1}function z0(){var r=P.H;return P.H=li,r===null?li:r}function V0(){var r=P.A;return P.A=US,r}function ac(){yt=4,wn||(ze&4194048)!==ze&&ws.current!==null||(Hr=!0),(Nn&134217727)===0&&(sr&134217727)===0||ot===null||jn(ot,ze,Ss,!1)}function hh(r,o,c){var h=Ze;Ze|=2;var y=z0(),w=V0();(ot!==r||ze!==o)&&(tc=null,Jr(r,o)),o=!1;var j=yt;e:do try{if(tt!==0&&Be!==null){var k=Be,B=_s;switch(tt){case 8:uh(),j=6;break e;case 3:case 2:case 9:case 6:ws.current===null&&(o=!0);var X=tt;if(tt=0,_s=null,Kr(r,k,B,X),c&&Hr){j=0;break e}break;default:X=tt,tt=0,_s=null,Kr(r,k,B,X)}}qS(),j=yt;break}catch(oe){B0(r,oe)}while(!0);return o&&r.shellSuspendCounter++,Pa=Jn=null,Ze=h,P.H=y,P.A=w,Be===null&&(ot=null,ze=0,_l()),j}function qS(){for(;Be!==null;)H0(Be)}function BS(r,o){var c=Ze;Ze|=2;var h=z0(),y=V0();ot!==r||ze!==o?(tc=null,ec=He()+500,Jr(r,o)):Hr=Lo(r,o);e:do try{if(tt!==0&&Be!==null){o=Be;var w=_s;t:switch(tt){case 1:tt=0,_s=null,Kr(r,o,w,1);break;case 2:case 9:if(eg(w)){tt=0,_s=null,G0(o);break}o=function(){tt!==2&&tt!==9||ot!==r||(tt=7),ba(r)},w.then(o,o);break e;case 3:tt=7;break e;case 4:tt=5;break e;case 7:eg(w)?(tt=0,_s=null,G0(o)):(tt=0,_s=null,Kr(r,o,w,7));break;case 5:var j=null;switch(Be.tag){case 26:j=Be.memoizedState;case 5:case 27:var k=Be;if(j?Rx(j):k.stateNode.complete){tt=0,_s=null;var B=k.sibling;if(B!==null)Be=B;else{var X=k.return;X!==null?(Be=X,nc(X)):Be=null}break t}}tt=0,_s=null,Kr(r,o,w,5);break;case 6:tt=0,_s=null,Kr(r,o,w,6);break;case 8:uh(),yt=6;break e;default:throw Error(n(462))}}$S();break}catch(oe){B0(r,oe)}while(!0);return Pa=Jn=null,P.H=h,P.A=y,Ze=c,Be!==null?0:(ot=null,ze=0,_l(),yt)}function $S(){for(;Be!==null&&!Ae();)H0(Be)}function H0(r){var o=m0(r.alternate,r,Ga);r.memoizedProps=r.pendingProps,o===null?nc(r):Be=o}function G0(r){var o=r,c=o.alternate;switch(o.tag){case 15:case 0:o=l0(c,o,o.pendingProps,o.type,void 0,ze);break;case 11:o=l0(c,o,o.pendingProps,o.type.render,o.ref,ze);break;case 5:Cu(o);default:g0(c,o),o=Be=Vp(o,Ga),o=m0(c,o,Ga)}r.memoizedProps=r.pendingProps,o===null?nc(r):Be=o}function Kr(r,o,c,h){Pa=Jn=null,Cu(o),Lr=null,ei=0;var y=o.return;try{if(AS(r,y,o,c,ze)){yt=1,Gl(r,zs(c,r.current)),Be=null;return}}catch(w){if(y!==null)throw Be=y,w;yt=1,Gl(r,zs(c,r.current)),Be=null;return}o.flags&32768?(Ge||h===1?r=!0:Hr||(ze&536870912)!==0?r=!1:(wn=r=!0,(h===2||h===9||h===3||h===6)&&(h=ws.current,h!==null&&h.tag===13&&(h.flags|=16384))),F0(o,r)):nc(o)}function nc(r){var o=r;do{if((o.flags&32768)!==0){F0(o,wn);return}r=o.return;var c=MS(o.alternate,o,Ga);if(c!==null){Be=c;return}if(o=o.sibling,o!==null){Be=o;return}Be=o=r}while(o!==null);yt===0&&(yt=5)}function F0(r,o){do{var c=IS(r.alternate,r);if(c!==null){c.flags&=32767,Be=c;return}if(c=r.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!o&&(r=r.sibling,r!==null)){Be=r;return}Be=r=c}while(r!==null);yt=6,Be=null}function J0(r,o,c,h,y,w,j,k,B){r.cancelPendingCommit=null;do rc();while(kt!==0);if((Ze&6)!==0)throw Error(n(327));if(o!==null){if(o===r.current)throw Error(n(177));if(w=o.lanes|o.childLanes,w|=eu,b_(r,c,w,j,k,B),r===ot&&(Be=ot=null,ze=0),Fr=o,Sn=r,Fa=c,lh=w,ch=y,U0=h,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,GS(Je,function(){return Q0(),null})):(r.callbackNode=null,r.callbackPriority=0),h=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||h){h=P.T,P.T=null,y=O.p,O.p=2,j=Ze,Ze|=4;try{DS(r,o,c)}finally{Ze=j,O.p=y,P.T=h}}kt=1,K0(),Y0(),W0()}}function K0(){if(kt===1){kt=0;var r=Sn,o=Fr,c=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||c){c=P.T,P.T=null;var h=O.p;O.p=2;var y=Ze;Ze|=4;try{T0(o,r);var w=Sh,j=Dp(r.containerInfo),k=w.focusedElem,B=w.selectionRange;if(j!==k&&k&&k.ownerDocument&&Ip(k.ownerDocument.documentElement,k)){if(B!==null&&Yd(k)){var X=B.start,oe=B.end;if(oe===void 0&&(oe=X),"selectionStart"in k)k.selectionStart=X,k.selectionEnd=Math.min(oe,k.value.length);else{var de=k.ownerDocument||document,Z=de&&de.defaultView||window;if(Z.getSelection){var ae=Z.getSelection(),xe=k.textContent.length,Ee=Math.min(B.start,xe),rt=B.end===void 0?Ee:Math.min(B.end,xe);!ae.extend&&Ee>rt&&(j=rt,rt=Ee,Ee=j);var J=Mp(k,Ee),V=Mp(k,rt);if(J&&V&&(ae.rangeCount!==1||ae.anchorNode!==J.node||ae.anchorOffset!==J.offset||ae.focusNode!==V.node||ae.focusOffset!==V.offset)){var W=de.createRange();W.setStart(J.node,J.offset),ae.removeAllRanges(),Ee>rt?(ae.addRange(W),ae.extend(V.node,V.offset)):(W.setEnd(V.node,V.offset),ae.addRange(W))}}}}for(de=[],ae=k;ae=ae.parentNode;)ae.nodeType===1&&de.push({element:ae,left:ae.scrollLeft,top:ae.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<de.length;k++){var ce=de[k];ce.element.scrollLeft=ce.left,ce.element.scrollTop=ce.top}}xc=!!_h,Sh=_h=null}finally{Ze=y,O.p=h,P.T=c}}r.current=o,kt=2}}function Y0(){if(kt===2){kt=0;var r=Sn,o=Fr,c=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||c){c=P.T,P.T=null;var h=O.p;O.p=2;var y=Ze;Ze|=4;try{_0(r,o.alternate,o)}finally{Ze=y,O.p=h,P.T=c}}kt=3}}function W0(){if(kt===4||kt===3){kt=0,be();var r=Sn,o=Fr,c=Fa,h=U0;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?kt=5:(kt=0,Fr=Sn=null,X0(r,r.pendingLanes));var y=r.pendingLanes;if(y===0&&(_n=null),Rd(c),o=o.stateNode,_t&&typeof _t.onCommitFiberRoot=="function")try{_t.onCommitFiberRoot(Os,o,void 0,(o.current.flags&128)===128)}catch{}if(h!==null){o=P.T,y=O.p,O.p=2,P.T=null;try{for(var w=r.onRecoverableError,j=0;j<h.length;j++){var k=h[j];w(k.value,{componentStack:k.stack})}}finally{P.T=o,O.p=y}}(Fa&3)!==0&&rc(),ba(r),y=r.pendingLanes,(c&261930)!==0&&(y&42)!==0?r===dh?xi++:(xi=0,dh=r):xi=0,yi(0)}}function X0(r,o){(r.pooledCacheLanes&=o)===0&&(o=r.pooledCache,o!=null&&(r.pooledCache=null,Qo(o)))}function rc(){return K0(),Y0(),W0(),Q0()}function Q0(){if(kt!==5)return!1;var r=Sn,o=lh;lh=0;var c=Rd(Fa),h=P.T,y=O.p;try{O.p=32>c?32:c,P.T=null,c=ch,ch=null;var w=Sn,j=Fa;if(kt=0,Fr=Sn=null,Fa=0,(Ze&6)!==0)throw Error(n(331));var k=Ze;if(Ze|=4,I0(w.current),R0(w,w.current,j,c),Ze=k,yi(0,!1),_t&&typeof _t.onPostCommitFiberRoot=="function")try{_t.onPostCommitFiberRoot(Os,w)}catch{}return!0}finally{O.p=y,P.T=h,X0(r,o)}}function Z0(r,o,c){o=zs(c,o),o=zu(r.stateNode,o,2),r=xn(r,o,2),r!==null&&(Oo(r,2),ba(r))}function st(r,o,c){if(r.tag===3)Z0(r,r,c);else for(;o!==null;){if(o.tag===3){Z0(o,r,c);break}else if(o.tag===1){var h=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(_n===null||!_n.has(h))){r=zs(c,r),c=e0(2),h=xn(o,c,2),h!==null&&(t0(c,h,o,r),Oo(h,2),ba(h));break}}o=o.return}}function fh(r,o,c){var h=r.pingCache;if(h===null){h=r.pingCache=new LS;var y=new Set;h.set(o,y)}else y=h.get(o),y===void 0&&(y=new Set,h.set(o,y));y.has(c)||(rh=!0,y.add(c),r=zS.bind(null,r,o,c),o.then(r,r))}function zS(r,o,c){var h=r.pingCache;h!==null&&h.delete(o),r.pingedLanes|=r.suspendedLanes&c,r.warmLanes&=~c,ot===r&&(ze&c)===c&&(yt===4||yt===3&&(ze&62914560)===ze&&300>He()-Zl?(Ze&2)===0&&Jr(r,0):oh|=c,Gr===ze&&(Gr=0)),ba(r)}function ex(r,o){o===0&&(o=Km()),r=Hn(r,o),r!==null&&(Oo(r,o),ba(r))}function VS(r){var o=r.memoizedState,c=0;o!==null&&(c=o.retryLane),ex(r,c)}function HS(r,o){var c=0;switch(r.tag){case 31:case 13:var h=r.stateNode,y=r.memoizedState;y!==null&&(c=y.retryLane);break;case 19:h=r.stateNode;break;case 22:h=r.stateNode._retryCache;break;default:throw Error(n(314))}h!==null&&h.delete(o),ex(r,c)}function GS(r,o){return sa(r,o)}var oc=null,Yr=null,mh=!1,ic=!1,ph=!1,En=0;function ba(r){r!==Yr&&r.next===null&&(Yr===null?oc=Yr=r:Yr=Yr.next=r),ic=!0,mh||(mh=!0,JS())}function yi(r,o){if(!ph&&ic){ph=!0;do for(var c=!1,h=oc;h!==null;){if(r!==0){var y=h.pendingLanes;if(y===0)var w=0;else{var j=h.suspendedLanes,k=h.pingedLanes;w=(1<<31-et(42|r)+1)-1,w&=y&~(j&~k),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(c=!0,nx(h,w))}else w=ze,w=ul(h,h===ot?w:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(w&3)===0||Lo(h,w)||(c=!0,nx(h,w));h=h.next}while(c);ph=!1}}function FS(){tx()}function tx(){ic=mh=!1;var r=0;En!==0&&aj()&&(r=En);for(var o=He(),c=null,h=oc;h!==null;){var y=h.next,w=sx(h,o);w===0?(h.next=null,c===null?oc=y:c.next=y,y===null&&(Yr=c)):(c=h,(r!==0||(w&3)!==0)&&(ic=!0)),h=y}kt!==0&&kt!==5||yi(r),En!==0&&(En=0)}function sx(r,o){for(var c=r.suspendedLanes,h=r.pingedLanes,y=r.expirationTimes,w=r.pendingLanes&-62914561;0<w;){var j=31-et(w),k=1<<j,B=y[j];B===-1?((k&c)===0||(k&h)!==0)&&(y[j]=v_(k,o)):B<=o&&(r.expiredLanes|=k),w&=~k}if(o=ot,c=ze,c=ul(r,r===o?c:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),h=r.callbackNode,c===0||r===o&&(tt===2||tt===9)||r.cancelPendingCommit!==null)return h!==null&&h!==null&&ga(h),r.callbackNode=null,r.callbackPriority=0;if((c&3)===0||Lo(r,c)){if(o=c&-c,o===r.callbackPriority)return o;switch(h!==null&&ga(h),Rd(c)){case 2:case 8:c=Nt;break;case 32:c=Je;break;case 268435456:c=ys;break;default:c=Je}return h=ax.bind(null,r),c=sa(c,h),r.callbackPriority=o,r.callbackNode=c,o}return h!==null&&h!==null&&ga(h),r.callbackPriority=2,r.callbackNode=null,2}function ax(r,o){if(kt!==0&&kt!==5)return r.callbackNode=null,r.callbackPriority=0,null;var c=r.callbackNode;if(rc()&&r.callbackNode!==c)return null;var h=ze;return h=ul(r,r===ot?h:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),h===0?null:(O0(r,h,o),sx(r,He()),r.callbackNode!=null&&r.callbackNode===c?ax.bind(null,r):null)}function nx(r,o){if(rc())return null;O0(r,o,!0)}function JS(){rj(function(){(Ze&6)!==0?sa(Rt,FS):tx()})}function gh(){if(En===0){var r=Dr;r===0&&(r=ll,ll<<=1,(ll&261888)===0&&(ll=256)),En=r}return En}function rx(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:pl(""+r)}function ox(r,o){var c=o.ownerDocument.createElement("input");return c.name=o.name,c.value=o.value,r.id&&c.setAttribute("form",r.id),o.parentNode.insertBefore(c,o),r=new FormData(r),c.parentNode.removeChild(c),r}function KS(r,o,c,h,y){if(o==="submit"&&c&&c.stateNode===y){var w=rx((y[is]||null).action),j=h.submitter;j&&(o=(o=j[is]||null)?rx(o.formAction):j.getAttribute("formAction"),o!==null&&(w=o,j=null));var k=new vl("action","action",null,h,y);r.push({event:k,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(En!==0){var B=j?ox(y,j):new FormData(y);Uu(c,{pending:!0,data:B,method:y.method,action:w},null,B)}}else typeof w=="function"&&(k.preventDefault(),B=j?ox(y,j):new FormData(y),Uu(c,{pending:!0,data:B,method:y.method,action:w},w,B))},currentTarget:y}]})}}for(var xh=0;xh<Zd.length;xh++){var yh=Zd[xh],YS=yh.toLowerCase(),WS=yh[0].toUpperCase()+yh.slice(1);aa(YS,"on"+WS)}aa(Lp,"onAnimationEnd"),aa(Op,"onAnimationIteration"),aa(qp,"onAnimationStart"),aa("dblclick","onDoubleClick"),aa("focusin","onFocus"),aa("focusout","onBlur"),aa(hS,"onTransitionRun"),aa(fS,"onTransitionStart"),aa(mS,"onTransitionCancel"),aa(Bp,"onTransitionEnd"),br("onMouseEnter",["mouseout","mouseover"]),br("onMouseLeave",["mouseout","mouseover"]),br("onPointerEnter",["pointerout","pointerover"]),br("onPointerLeave",["pointerout","pointerover"]),Bn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Bn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Bn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Bn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Bn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Bn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),XS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(vi));function ix(r,o){o=(o&4)!==0;for(var c=0;c<r.length;c++){var h=r[c],y=h.event;h=h.listeners;e:{var w=void 0;if(o)for(var j=h.length-1;0<=j;j--){var k=h[j],B=k.instance,X=k.currentTarget;if(k=k.listener,B!==w&&y.isPropagationStopped())break e;w=k,y.currentTarget=X;try{w(y)}catch(oe){Nl(oe)}y.currentTarget=null,w=B}else for(j=0;j<h.length;j++){if(k=h[j],B=k.instance,X=k.currentTarget,k=k.listener,B!==w&&y.isPropagationStopped())break e;w=k,y.currentTarget=X;try{w(y)}catch(oe){Nl(oe)}y.currentTarget=null,w=B}}}}function $e(r,o){var c=o[kd];c===void 0&&(c=o[kd]=new Set);var h=r+"__bubble";c.has(h)||(lx(o,r,2,!1),c.add(h))}function vh(r,o,c){var h=0;o&&(h|=4),lx(c,r,h,o)}var lc="_reactListening"+Math.random().toString(36).slice(2);function bh(r){if(!r[lc]){r[lc]=!0,tp.forEach(function(c){c!=="selectionchange"&&(XS.has(c)||vh(c,!1,r),vh(c,!0,r))});var o=r.nodeType===9?r:r.ownerDocument;o===null||o[lc]||(o[lc]=!0,vh("selectionchange",!1,o))}}function lx(r,o,c,h){switch(Lx(o)){case 2:var y=jj;break;case 8:y=Ej;break;default:y=Ph}c=y.bind(null,o,c,r),y=void 0,!Bd||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(y=!0),h?y!==void 0?r.addEventListener(o,c,{capture:!0,passive:y}):r.addEventListener(o,c,!0):y!==void 0?r.addEventListener(o,c,{passive:y}):r.addEventListener(o,c,!1)}function wh(r,o,c,h,y){var w=h;if((o&1)===0&&(o&2)===0&&h!==null)e:for(;;){if(h===null)return;var j=h.tag;if(j===3||j===4){var k=h.stateNode.containerInfo;if(k===y)break;if(j===4)for(j=h.return;j!==null;){var B=j.tag;if((B===3||B===4)&&j.stateNode.containerInfo===y)return;j=j.return}for(;k!==null;){if(j=xr(k),j===null)return;if(B=j.tag,B===5||B===6||B===26||B===27){h=w=j;continue e}k=k.parentNode}}h=h.return}fp(function(){var X=w,oe=Od(c),de=[];e:{var Z=$p.get(r);if(Z!==void 0){var ae=vl,xe=r;switch(r){case"keypress":if(xl(c)===0)break e;case"keydown":case"keyup":ae=H_;break;case"focusin":xe="focus",ae=Hd;break;case"focusout":xe="blur",ae=Hd;break;case"beforeblur":case"afterblur":ae=Hd;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=gp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=M_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=J_;break;case Lp:case Op:case qp:ae=P_;break;case Bp:ae=Y_;break;case"scroll":case"scrollend":ae=R_;break;case"wheel":ae=X_;break;case"copy":case"cut":case"paste":ae=L_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=yp;break;case"toggle":case"beforetoggle":ae=Z_}var Ee=(o&4)!==0,rt=!Ee&&(r==="scroll"||r==="scrollend"),J=Ee?Z!==null?Z+"Capture":null:Z;Ee=[];for(var V=X,W;V!==null;){var ce=V;if(W=ce.stateNode,ce=ce.tag,ce!==5&&ce!==26&&ce!==27||W===null||J===null||(ce=$o(V,J),ce!=null&&Ee.push(bi(V,ce,W))),rt)break;V=V.return}0<Ee.length&&(Z=new ae(Z,xe,null,c,oe),de.push({event:Z,listeners:Ee}))}}if((o&7)===0){e:{if(Z=r==="mouseover"||r==="pointerover",ae=r==="mouseout"||r==="pointerout",Z&&c!==Ld&&(xe=c.relatedTarget||c.fromElement)&&(xr(xe)||xe[gr]))break e;if((ae||Z)&&(Z=oe.window===oe?oe:(Z=oe.ownerDocument)?Z.defaultView||Z.parentWindow:window,ae?(xe=c.relatedTarget||c.toElement,ae=X,xe=xe?xr(xe):null,xe!==null&&(rt=l(xe),Ee=xe.tag,xe!==rt||Ee!==5&&Ee!==27&&Ee!==6)&&(xe=null)):(ae=null,xe=X),ae!==xe)){if(Ee=gp,ce="onMouseLeave",J="onMouseEnter",V="mouse",(r==="pointerout"||r==="pointerover")&&(Ee=yp,ce="onPointerLeave",J="onPointerEnter",V="pointer"),rt=ae==null?Z:Bo(ae),W=xe==null?Z:Bo(xe),Z=new Ee(ce,V+"leave",ae,c,oe),Z.target=rt,Z.relatedTarget=W,ce=null,xr(oe)===X&&(Ee=new Ee(J,V+"enter",xe,c,oe),Ee.target=W,Ee.relatedTarget=rt,ce=Ee),rt=ce,ae&&xe)t:{for(Ee=QS,J=ae,V=xe,W=0,ce=J;ce;ce=Ee(ce))W++;ce=0;for(var we=V;we;we=Ee(we))ce++;for(;0<W-ce;)J=Ee(J),W--;for(;0<ce-W;)V=Ee(V),ce--;for(;W--;){if(J===V||V!==null&&J===V.alternate){Ee=J;break t}J=Ee(J),V=Ee(V)}Ee=null}else Ee=null;ae!==null&&cx(de,Z,ae,Ee,!1),xe!==null&&rt!==null&&cx(de,rt,xe,Ee,!0)}}e:{if(Z=X?Bo(X):window,ae=Z.nodeName&&Z.nodeName.toLowerCase(),ae==="select"||ae==="input"&&Z.type==="file")var Ye=Ep;else if(Sp(Z))if(Cp)Ye=cS;else{Ye=iS;var ye=oS}else ae=Z.nodeName,!ae||ae.toLowerCase()!=="input"||Z.type!=="checkbox"&&Z.type!=="radio"?X&&Ud(X.elementType)&&(Ye=Ep):Ye=lS;if(Ye&&(Ye=Ye(r,X))){jp(de,Ye,c,oe);break e}ye&&ye(r,Z,X),r==="focusout"&&X&&Z.type==="number"&&X.memoizedProps.value!=null&&Pd(Z,"number",Z.value)}switch(ye=X?Bo(X):window,r){case"focusin":(Sp(ye)||ye.contentEditable==="true")&&(Er=ye,Wd=X,Yo=null);break;case"focusout":Yo=Wd=Er=null;break;case"mousedown":Xd=!0;break;case"contextmenu":case"mouseup":case"dragend":Xd=!1,Pp(de,c,oe);break;case"selectionchange":if(uS)break;case"keydown":case"keyup":Pp(de,c,oe)}var Le;if(Fd)e:{switch(r){case"compositionstart":var Ve="onCompositionStart";break e;case"compositionend":Ve="onCompositionEnd";break e;case"compositionupdate":Ve="onCompositionUpdate";break e}Ve=void 0}else jr?Np(r,c)&&(Ve="onCompositionEnd"):r==="keydown"&&c.keyCode===229&&(Ve="onCompositionStart");Ve&&(vp&&c.locale!=="ko"&&(jr||Ve!=="onCompositionStart"?Ve==="onCompositionEnd"&&jr&&(Le=mp()):(dn=oe,$d="value"in dn?dn.value:dn.textContent,jr=!0)),ye=cc(X,Ve),0<ye.length&&(Ve=new xp(Ve,r,null,c,oe),de.push({event:Ve,listeners:ye}),Le?Ve.data=Le:(Le=_p(c),Le!==null&&(Ve.data=Le)))),(Le=tS?sS(r,c):aS(r,c))&&(Ve=cc(X,"onBeforeInput"),0<Ve.length&&(ye=new xp("onBeforeInput","beforeinput",null,c,oe),de.push({event:ye,listeners:Ve}),ye.data=Le)),KS(de,r,X,c,oe)}ix(de,o)})}function bi(r,o,c){return{instance:r,listener:o,currentTarget:c}}function cc(r,o){for(var c=o+"Capture",h=[];r!==null;){var y=r,w=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||w===null||(y=$o(r,c),y!=null&&h.unshift(bi(r,y,w)),y=$o(r,o),y!=null&&h.push(bi(r,y,w))),r.tag===3)return h;r=r.return}return[]}function QS(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function cx(r,o,c,h,y){for(var w=o._reactName,j=[];c!==null&&c!==h;){var k=c,B=k.alternate,X=k.stateNode;if(k=k.tag,B!==null&&B===h)break;k!==5&&k!==26&&k!==27||X===null||(B=X,y?(X=$o(c,w),X!=null&&j.unshift(bi(c,X,B))):y||(X=$o(c,w),X!=null&&j.push(bi(c,X,B)))),c=c.return}j.length!==0&&r.push({event:o,listeners:j})}var ZS=/\r\n?/g,ej=/\u0000|\uFFFD/g;function dx(r){return(typeof r=="string"?r:""+r).replace(ZS,`
`).replace(ej,"")}function ux(r,o){return o=dx(o),dx(r)===o}function nt(r,o,c,h,y,w){switch(c){case"children":typeof h=="string"?o==="body"||o==="textarea"&&h===""||Nr(r,h):(typeof h=="number"||typeof h=="bigint")&&o!=="body"&&Nr(r,""+h);break;case"className":fl(r,"class",h);break;case"tabIndex":fl(r,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":fl(r,c,h);break;case"style":up(r,h,w);break;case"data":if(o!=="object"){fl(r,"data",h);break}case"src":case"href":if(h===""&&(o!=="a"||c!=="href")){r.removeAttribute(c);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){r.removeAttribute(c);break}h=pl(""+h),r.setAttribute(c,h);break;case"action":case"formAction":if(typeof h=="function"){r.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(c==="formAction"?(o!=="input"&&nt(r,o,"name",y.name,y,null),nt(r,o,"formEncType",y.formEncType,y,null),nt(r,o,"formMethod",y.formMethod,y,null),nt(r,o,"formTarget",y.formTarget,y,null)):(nt(r,o,"encType",y.encType,y,null),nt(r,o,"method",y.method,y,null),nt(r,o,"target",y.target,y,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){r.removeAttribute(c);break}h=pl(""+h),r.setAttribute(c,h);break;case"onClick":h!=null&&(r.onclick=ka);break;case"onScroll":h!=null&&$e("scroll",r);break;case"onScrollEnd":h!=null&&$e("scrollend",r);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(n(61));if(c=h.__html,c!=null){if(y.children!=null)throw Error(n(60));r.innerHTML=c}}break;case"multiple":r.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":r.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){r.removeAttribute("xlink:href");break}c=pl(""+h),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?r.setAttribute(c,""+h):r.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?r.setAttribute(c,""):r.removeAttribute(c);break;case"capture":case"download":h===!0?r.setAttribute(c,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?r.setAttribute(c,h):r.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?r.setAttribute(c,h):r.removeAttribute(c);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?r.removeAttribute(c):r.setAttribute(c,h);break;case"popover":$e("beforetoggle",r),$e("toggle",r),hl(r,"popover",h);break;case"xlinkActuate":Ra(r,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":Ra(r,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":Ra(r,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":Ra(r,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":Ra(r,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":Ra(r,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":Ra(r,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":Ra(r,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":Ra(r,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":hl(r,"is",h);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=T_.get(c)||c,hl(r,c,h))}}function Nh(r,o,c,h,y,w){switch(c){case"style":up(r,h,w);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(n(61));if(c=h.__html,c!=null){if(y.children!=null)throw Error(n(60));r.innerHTML=c}}break;case"children":typeof h=="string"?Nr(r,h):(typeof h=="number"||typeof h=="bigint")&&Nr(r,""+h);break;case"onScroll":h!=null&&$e("scroll",r);break;case"onScrollEnd":h!=null&&$e("scrollend",r);break;case"onClick":h!=null&&(r.onclick=ka);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!sp.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(y=c.endsWith("Capture"),o=c.slice(2,y?c.length-7:void 0),w=r[is]||null,w=w!=null?w[c]:null,typeof w=="function"&&r.removeEventListener(o,w,y),typeof h=="function")){typeof w!="function"&&w!==null&&(c in r?r[c]=null:r.hasAttribute(c)&&r.removeAttribute(c)),r.addEventListener(o,h,y);break e}c in r?r[c]=h:h===!0?r.setAttribute(c,""):hl(r,c,h)}}}function Vt(r,o,c){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":$e("error",r),$e("load",r);var h=!1,y=!1,w;for(w in c)if(c.hasOwnProperty(w)){var j=c[w];if(j!=null)switch(w){case"src":h=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:nt(r,o,w,j,c,null)}}y&&nt(r,o,"srcSet",c.srcSet,c,null),h&&nt(r,o,"src",c.src,c,null);return;case"input":$e("invalid",r);var k=w=j=y=null,B=null,X=null;for(h in c)if(c.hasOwnProperty(h)){var oe=c[h];if(oe!=null)switch(h){case"name":y=oe;break;case"type":j=oe;break;case"checked":B=oe;break;case"defaultChecked":X=oe;break;case"value":w=oe;break;case"defaultValue":k=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(n(137,o));break;default:nt(r,o,h,oe,c,null)}}ip(r,w,k,B,X,j,y,!1);return;case"select":$e("invalid",r),h=j=w=null;for(y in c)if(c.hasOwnProperty(y)&&(k=c[y],k!=null))switch(y){case"value":w=k;break;case"defaultValue":j=k;break;case"multiple":h=k;default:nt(r,o,y,k,c,null)}o=w,c=j,r.multiple=!!h,o!=null?wr(r,!!h,o,!1):c!=null&&wr(r,!!h,c,!0);return;case"textarea":$e("invalid",r),w=y=h=null;for(j in c)if(c.hasOwnProperty(j)&&(k=c[j],k!=null))switch(j){case"value":h=k;break;case"defaultValue":y=k;break;case"children":w=k;break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(n(91));break;default:nt(r,o,j,k,c,null)}cp(r,h,y,w);return;case"option":for(B in c)if(c.hasOwnProperty(B)&&(h=c[B],h!=null))switch(B){case"selected":r.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:nt(r,o,B,h,c,null)}return;case"dialog":$e("beforetoggle",r),$e("toggle",r),$e("cancel",r),$e("close",r);break;case"iframe":case"object":$e("load",r);break;case"video":case"audio":for(h=0;h<vi.length;h++)$e(vi[h],r);break;case"image":$e("error",r),$e("load",r);break;case"details":$e("toggle",r);break;case"embed":case"source":case"link":$e("error",r),$e("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(X in c)if(c.hasOwnProperty(X)&&(h=c[X],h!=null))switch(X){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:nt(r,o,X,h,c,null)}return;default:if(Ud(o)){for(oe in c)c.hasOwnProperty(oe)&&(h=c[oe],h!==void 0&&Nh(r,o,oe,h,c,void 0));return}}for(k in c)c.hasOwnProperty(k)&&(h=c[k],h!=null&&nt(r,o,k,h,c,null))}function tj(r,o,c,h){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,w=null,j=null,k=null,B=null,X=null,oe=null;for(ae in c){var de=c[ae];if(c.hasOwnProperty(ae)&&de!=null)switch(ae){case"checked":break;case"value":break;case"defaultValue":B=de;default:h.hasOwnProperty(ae)||nt(r,o,ae,null,h,de)}}for(var Z in h){var ae=h[Z];if(de=c[Z],h.hasOwnProperty(Z)&&(ae!=null||de!=null))switch(Z){case"type":w=ae;break;case"name":y=ae;break;case"checked":X=ae;break;case"defaultChecked":oe=ae;break;case"value":j=ae;break;case"defaultValue":k=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(n(137,o));break;default:ae!==de&&nt(r,o,Z,ae,h,de)}}Dd(r,j,k,B,X,oe,w,y);return;case"select":ae=j=k=Z=null;for(w in c)if(B=c[w],c.hasOwnProperty(w)&&B!=null)switch(w){case"value":break;case"multiple":ae=B;default:h.hasOwnProperty(w)||nt(r,o,w,null,h,B)}for(y in h)if(w=h[y],B=c[y],h.hasOwnProperty(y)&&(w!=null||B!=null))switch(y){case"value":Z=w;break;case"defaultValue":k=w;break;case"multiple":j=w;default:w!==B&&nt(r,o,y,w,h,B)}o=k,c=j,h=ae,Z!=null?wr(r,!!c,Z,!1):!!h!=!!c&&(o!=null?wr(r,!!c,o,!0):wr(r,!!c,c?[]:"",!1));return;case"textarea":ae=Z=null;for(k in c)if(y=c[k],c.hasOwnProperty(k)&&y!=null&&!h.hasOwnProperty(k))switch(k){case"value":break;case"children":break;default:nt(r,o,k,null,h,y)}for(j in h)if(y=h[j],w=c[j],h.hasOwnProperty(j)&&(y!=null||w!=null))switch(j){case"value":Z=y;break;case"defaultValue":ae=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(n(91));break;default:y!==w&&nt(r,o,j,y,h,w)}lp(r,Z,ae);return;case"option":for(var xe in c)if(Z=c[xe],c.hasOwnProperty(xe)&&Z!=null&&!h.hasOwnProperty(xe))switch(xe){case"selected":r.selected=!1;break;default:nt(r,o,xe,null,h,Z)}for(B in h)if(Z=h[B],ae=c[B],h.hasOwnProperty(B)&&Z!==ae&&(Z!=null||ae!=null))switch(B){case"selected":r.selected=Z&&typeof Z!="function"&&typeof Z!="symbol";break;default:nt(r,o,B,Z,h,ae)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ee in c)Z=c[Ee],c.hasOwnProperty(Ee)&&Z!=null&&!h.hasOwnProperty(Ee)&&nt(r,o,Ee,null,h,Z);for(X in h)if(Z=h[X],ae=c[X],h.hasOwnProperty(X)&&Z!==ae&&(Z!=null||ae!=null))switch(X){case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(n(137,o));break;default:nt(r,o,X,Z,h,ae)}return;default:if(Ud(o)){for(var rt in c)Z=c[rt],c.hasOwnProperty(rt)&&Z!==void 0&&!h.hasOwnProperty(rt)&&Nh(r,o,rt,void 0,h,Z);for(oe in h)Z=h[oe],ae=c[oe],!h.hasOwnProperty(oe)||Z===ae||Z===void 0&&ae===void 0||Nh(r,o,oe,Z,h,ae);return}}for(var J in c)Z=c[J],c.hasOwnProperty(J)&&Z!=null&&!h.hasOwnProperty(J)&&nt(r,o,J,null,h,Z);for(de in h)Z=h[de],ae=c[de],!h.hasOwnProperty(de)||Z===ae||Z==null&&ae==null||nt(r,o,de,Z,h,ae)}function hx(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function sj(){if(typeof performance.getEntriesByType=="function"){for(var r=0,o=0,c=performance.getEntriesByType("resource"),h=0;h<c.length;h++){var y=c[h],w=y.transferSize,j=y.initiatorType,k=y.duration;if(w&&k&&hx(j)){for(j=0,k=y.responseEnd,h+=1;h<c.length;h++){var B=c[h],X=B.startTime;if(X>k)break;var oe=B.transferSize,de=B.initiatorType;oe&&hx(de)&&(B=B.responseEnd,j+=oe*(B<k?1:(k-X)/(B-X)))}if(--h,o+=8*(w+j)/(y.duration/1e3),r++,10<r)break}}if(0<r)return o/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var _h=null,Sh=null;function dc(r){return r.nodeType===9?r:r.ownerDocument}function fx(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function mx(r,o){if(r===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&o==="foreignObject"?0:r}function jh(r,o){return r==="textarea"||r==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Eh=null;function aj(){var r=window.event;return r&&r.type==="popstate"?r===Eh?!1:(Eh=r,!0):(Eh=null,!1)}var px=typeof setTimeout=="function"?setTimeout:void 0,nj=typeof clearTimeout=="function"?clearTimeout:void 0,gx=typeof Promise=="function"?Promise:void 0,rj=typeof queueMicrotask=="function"?queueMicrotask:typeof gx<"u"?function(r){return gx.resolve(null).then(r).catch(oj)}:px;function oj(r){setTimeout(function(){throw r})}function Cn(r){return r==="head"}function xx(r,o){var c=o,h=0;do{var y=c.nextSibling;if(r.removeChild(c),y&&y.nodeType===8)if(c=y.data,c==="/$"||c==="/&"){if(h===0){r.removeChild(y),Zr(o);return}h--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")h++;else if(c==="html")wi(r.ownerDocument.documentElement);else if(c==="head"){c=r.ownerDocument.head,wi(c);for(var w=c.firstChild;w;){var j=w.nextSibling,k=w.nodeName;w[qo]||k==="SCRIPT"||k==="STYLE"||k==="LINK"&&w.rel.toLowerCase()==="stylesheet"||c.removeChild(w),w=j}}else c==="body"&&wi(r.ownerDocument.body);c=y}while(c);Zr(o)}function yx(r,o){var c=r;r=0;do{var h=c.nextSibling;if(c.nodeType===1?o?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(o?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),h&&h.nodeType===8)if(c=h.data,c==="/$"){if(r===0)break;r--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||r++;c=h}while(c)}function Ch(r){var o=r.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var c=o;switch(o=o.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":Ch(c),Md(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}r.removeChild(c)}}function ij(r,o,c,h){for(;r.nodeType===1;){var y=c;if(r.nodeName.toLowerCase()!==o.toLowerCase()){if(!h&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(h){if(!r[qo])switch(o){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(w=r.getAttribute("rel"),w==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(w!==y.rel||r.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||r.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||r.getAttribute("title")!==(y.title==null?null:y.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(w=r.getAttribute("src"),(w!==(y.src==null?null:y.src)||r.getAttribute("type")!==(y.type==null?null:y.type)||r.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&w&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(o==="input"&&r.type==="hidden"){var w=y.name==null?null:""+y.name;if(y.type==="hidden"&&r.getAttribute("name")===w)return r}else return r;if(r=Js(r.nextSibling),r===null)break}return null}function lj(r,o,c){if(o==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!c||(r=Js(r.nextSibling),r===null))return null;return r}function vx(r,o){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=Js(r.nextSibling),r===null))return null;return r}function Th(r){return r.data==="$?"||r.data==="$~"}function Ah(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function cj(r,o){var c=r.ownerDocument;if(r.data==="$~")r._reactRetry=o;else if(r.data!=="$?"||c.readyState!=="loading")o();else{var h=function(){o(),c.removeEventListener("DOMContentLoaded",h)};c.addEventListener("DOMContentLoaded",h),r._reactRetry=h}}function Js(r){for(;r!=null;r=r.nextSibling){var o=r.nodeType;if(o===1||o===3)break;if(o===8){if(o=r.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return r}var Rh=null;function bx(r){r=r.nextSibling;for(var o=0;r;){if(r.nodeType===8){var c=r.data;if(c==="/$"||c==="/&"){if(o===0)return Js(r.nextSibling);o--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||o++}r=r.nextSibling}return null}function wx(r){r=r.previousSibling;for(var o=0;r;){if(r.nodeType===8){var c=r.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(o===0)return r;o--}else c!=="/$"&&c!=="/&"||o++}r=r.previousSibling}return null}function Nx(r,o,c){switch(o=dc(c),r){case"html":if(r=o.documentElement,!r)throw Error(n(452));return r;case"head":if(r=o.head,!r)throw Error(n(453));return r;case"body":if(r=o.body,!r)throw Error(n(454));return r;default:throw Error(n(451))}}function wi(r){for(var o=r.attributes;o.length;)r.removeAttributeNode(o[0]);Md(r)}var Ks=new Map,_x=new Set;function uc(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Ja=O.d;O.d={f:dj,r:uj,D:hj,C:fj,L:mj,m:pj,X:xj,S:gj,M:yj};function dj(){var r=Ja.f(),o=sc();return r||o}function uj(r){var o=yr(r);o!==null&&o.tag===5&&o.type==="form"?Bg(o):Ja.r(r)}var Wr=typeof document>"u"?null:document;function Sx(r,o,c){var h=Wr;if(h&&typeof o=="string"&&o){var y=Bs(o);y='link[rel="'+r+'"][href="'+y+'"]',typeof c=="string"&&(y+='[crossorigin="'+c+'"]'),_x.has(y)||(_x.add(y),r={rel:r,crossOrigin:c,href:o},h.querySelector(y)===null&&(o=h.createElement("link"),Vt(o,"link",r),Pt(o),h.head.appendChild(o)))}}function hj(r){Ja.D(r),Sx("dns-prefetch",r,null)}function fj(r,o){Ja.C(r,o),Sx("preconnect",r,o)}function mj(r,o,c){Ja.L(r,o,c);var h=Wr;if(h&&r&&o){var y='link[rel="preload"][as="'+Bs(o)+'"]';o==="image"&&c&&c.imageSrcSet?(y+='[imagesrcset="'+Bs(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(y+='[imagesizes="'+Bs(c.imageSizes)+'"]')):y+='[href="'+Bs(r)+'"]';var w=y;switch(o){case"style":w=Xr(r);break;case"script":w=Qr(r)}Ks.has(w)||(r=v({rel:"preload",href:o==="image"&&c&&c.imageSrcSet?void 0:r,as:o},c),Ks.set(w,r),h.querySelector(y)!==null||o==="style"&&h.querySelector(Ni(w))||o==="script"&&h.querySelector(_i(w))||(o=h.createElement("link"),Vt(o,"link",r),Pt(o),h.head.appendChild(o)))}}function pj(r,o){Ja.m(r,o);var c=Wr;if(c&&r){var h=o&&typeof o.as=="string"?o.as:"script",y='link[rel="modulepreload"][as="'+Bs(h)+'"][href="'+Bs(r)+'"]',w=y;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=Qr(r)}if(!Ks.has(w)&&(r=v({rel:"modulepreload",href:r},o),Ks.set(w,r),c.querySelector(y)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(_i(w)))return}h=c.createElement("link"),Vt(h,"link",r),Pt(h),c.head.appendChild(h)}}}function gj(r,o,c){Ja.S(r,o,c);var h=Wr;if(h&&r){var y=vr(h).hoistableStyles,w=Xr(r);o=o||"default";var j=y.get(w);if(!j){var k={loading:0,preload:null};if(j=h.querySelector(Ni(w)))k.loading=5;else{r=v({rel:"stylesheet",href:r,"data-precedence":o},c),(c=Ks.get(w))&&kh(r,c);var B=j=h.createElement("link");Pt(B),Vt(B,"link",r),B._p=new Promise(function(X,oe){B.onload=X,B.onerror=oe}),B.addEventListener("load",function(){k.loading|=1}),B.addEventListener("error",function(){k.loading|=2}),k.loading|=4,hc(j,o,h)}j={type:"stylesheet",instance:j,count:1,state:k},y.set(w,j)}}}function xj(r,o){Ja.X(r,o);var c=Wr;if(c&&r){var h=vr(c).hoistableScripts,y=Qr(r),w=h.get(y);w||(w=c.querySelector(_i(y)),w||(r=v({src:r,async:!0},o),(o=Ks.get(y))&&Mh(r,o),w=c.createElement("script"),Pt(w),Vt(w,"link",r),c.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},h.set(y,w))}}function yj(r,o){Ja.M(r,o);var c=Wr;if(c&&r){var h=vr(c).hoistableScripts,y=Qr(r),w=h.get(y);w||(w=c.querySelector(_i(y)),w||(r=v({src:r,async:!0,type:"module"},o),(o=Ks.get(y))&&Mh(r,o),w=c.createElement("script"),Pt(w),Vt(w,"link",r),c.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},h.set(y,w))}}function jx(r,o,c,h){var y=(y=ee.current)?uc(y):null;if(!y)throw Error(n(446));switch(r){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(o=Xr(c.href),c=vr(y).hoistableStyles,h=c.get(o),h||(h={type:"style",instance:null,count:0,state:null},c.set(o,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){r=Xr(c.href);var w=vr(y).hoistableStyles,j=w.get(r);if(j||(y=y.ownerDocument||y,j={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(r,j),(w=y.querySelector(Ni(r)))&&!w._p&&(j.instance=w,j.state.loading=5),Ks.has(r)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Ks.set(r,c),w||vj(y,r,c,j.state))),o&&h===null)throw Error(n(528,""));return j}if(o&&h!==null)throw Error(n(529,""));return null;case"script":return o=c.async,c=c.src,typeof c=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Qr(c),c=vr(y).hoistableScripts,h=c.get(o),h||(h={type:"script",instance:null,count:0,state:null},c.set(o,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,r))}}function Xr(r){return'href="'+Bs(r)+'"'}function Ni(r){return'link[rel="stylesheet"]['+r+"]"}function Ex(r){return v({},r,{"data-precedence":r.precedence,precedence:null})}function vj(r,o,c,h){r.querySelector('link[rel="preload"][as="style"]['+o+"]")?h.loading=1:(o=r.createElement("link"),h.preload=o,o.addEventListener("load",function(){return h.loading|=1}),o.addEventListener("error",function(){return h.loading|=2}),Vt(o,"link",c),Pt(o),r.head.appendChild(o))}function Qr(r){return'[src="'+Bs(r)+'"]'}function _i(r){return"script[async]"+r}function Cx(r,o,c){if(o.count++,o.instance===null)switch(o.type){case"style":var h=r.querySelector('style[data-href~="'+Bs(c.href)+'"]');if(h)return o.instance=h,Pt(h),h;var y=v({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return h=(r.ownerDocument||r).createElement("style"),Pt(h),Vt(h,"style",y),hc(h,c.precedence,r),o.instance=h;case"stylesheet":y=Xr(c.href);var w=r.querySelector(Ni(y));if(w)return o.state.loading|=4,o.instance=w,Pt(w),w;h=Ex(c),(y=Ks.get(y))&&kh(h,y),w=(r.ownerDocument||r).createElement("link"),Pt(w);var j=w;return j._p=new Promise(function(k,B){j.onload=k,j.onerror=B}),Vt(w,"link",h),o.state.loading|=4,hc(w,c.precedence,r),o.instance=w;case"script":return w=Qr(c.src),(y=r.querySelector(_i(w)))?(o.instance=y,Pt(y),y):(h=c,(y=Ks.get(w))&&(h=v({},c),Mh(h,y)),r=r.ownerDocument||r,y=r.createElement("script"),Pt(y),Vt(y,"link",h),r.head.appendChild(y),o.instance=y);case"void":return null;default:throw Error(n(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(h=o.instance,o.state.loading|=4,hc(h,c.precedence,r));return o.instance}function hc(r,o,c){for(var h=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=h.length?h[h.length-1]:null,w=y,j=0;j<h.length;j++){var k=h[j];if(k.dataset.precedence===o)w=k;else if(w!==y)break}w?w.parentNode.insertBefore(r,w.nextSibling):(o=c.nodeType===9?c.head:c,o.insertBefore(r,o.firstChild))}function kh(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.title==null&&(r.title=o.title)}function Mh(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.integrity==null&&(r.integrity=o.integrity)}var fc=null;function Tx(r,o,c){if(fc===null){var h=new Map,y=fc=new Map;y.set(c,h)}else y=fc,h=y.get(c),h||(h=new Map,y.set(c,h));if(h.has(r))return h;for(h.set(r,null),c=c.getElementsByTagName(r),y=0;y<c.length;y++){var w=c[y];if(!(w[qo]||w[qt]||r==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var j=w.getAttribute(o)||"";j=r+j;var k=h.get(j);k?k.push(w):h.set(j,[w])}}return h}function Ax(r,o,c){r=r.ownerDocument||r,r.head.insertBefore(c,o==="title"?r.querySelector("head > title"):null)}function bj(r,o,c){if(c===1||o.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return r=o.disabled,typeof o.precedence=="string"&&r==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function Rx(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function wj(r,o,c,h){if(c.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var y=Xr(h.href),w=o.querySelector(Ni(y));if(w){o=w._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(r.count++,r=mc.bind(r),o.then(r,r)),c.state.loading|=4,c.instance=w,Pt(w);return}w=o.ownerDocument||o,h=Ex(h),(y=Ks.get(y))&&kh(h,y),w=w.createElement("link"),Pt(w);var j=w;j._p=new Promise(function(k,B){j.onload=k,j.onerror=B}),Vt(w,"link",h),c.instance=w}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(c,o),(o=c.state.preload)&&(c.state.loading&3)===0&&(r.count++,c=mc.bind(r),o.addEventListener("load",c),o.addEventListener("error",c))}}var Ih=0;function Nj(r,o){return r.stylesheets&&r.count===0&&gc(r,r.stylesheets),0<r.count||0<r.imgCount?function(c){var h=setTimeout(function(){if(r.stylesheets&&gc(r,r.stylesheets),r.unsuspend){var w=r.unsuspend;r.unsuspend=null,w()}},6e4+o);0<r.imgBytes&&Ih===0&&(Ih=62500*sj());var y=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&gc(r,r.stylesheets),r.unsuspend)){var w=r.unsuspend;r.unsuspend=null,w()}},(r.imgBytes>Ih?50:800)+o);return r.unsuspend=c,function(){r.unsuspend=null,clearTimeout(h),clearTimeout(y)}}:null}function mc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)gc(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var pc=null;function gc(r,o){r.stylesheets=null,r.unsuspend!==null&&(r.count++,pc=new Map,o.forEach(_j,r),pc=null,mc.call(r))}function _j(r,o){if(!(o.state.loading&4)){var c=pc.get(r);if(c)var h=c.get(null);else{c=new Map,pc.set(r,c);for(var y=r.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<y.length;w++){var j=y[w];(j.nodeName==="LINK"||j.getAttribute("media")!=="not all")&&(c.set(j.dataset.precedence,j),h=j)}h&&c.set(null,h)}y=o.instance,j=y.getAttribute("data-precedence"),w=c.get(j)||h,w===h&&c.set(null,y),c.set(j,y),this.count++,h=mc.bind(this),y.addEventListener("load",h),y.addEventListener("error",h),w?w.parentNode.insertBefore(y,w.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(y,r.firstChild)),o.state.loading|=4}}var Si={$$typeof:A,Provider:null,Consumer:null,_currentValue:Y,_currentValue2:Y,_threadCount:0};function Sj(r,o,c,h,y,w,j,k,B){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Td(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Td(0),this.hiddenUpdates=Td(null),this.identifierPrefix=h,this.onUncaughtError=y,this.onCaughtError=w,this.onRecoverableError=j,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=B,this.incompleteTransitions=new Map}function kx(r,o,c,h,y,w,j,k,B,X,oe,de){return r=new Sj(r,o,c,j,B,X,oe,de,k),o=1,w===!0&&(o|=24),w=bs(3,null,null,o),r.current=w,w.stateNode=r,o=hu(),o.refCount++,r.pooledCache=o,o.refCount++,w.memoizedState={element:h,isDehydrated:c,cache:o},gu(w),r}function Mx(r){return r?(r=Ar,r):Ar}function Ix(r,o,c,h,y,w){y=Mx(y),h.context===null?h.context=y:h.pendingContext=y,h=gn(o),h.payload={element:c},w=w===void 0?null:w,w!==null&&(h.callback=w),c=xn(r,h,o),c!==null&&(fs(c,r,o),si(c,r,o))}function Dx(r,o){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var c=r.retryLane;r.retryLane=c!==0&&c<o?c:o}}function Dh(r,o){Dx(r,o),(r=r.alternate)&&Dx(r,o)}function Px(r){if(r.tag===13||r.tag===31){var o=Hn(r,67108864);o!==null&&fs(o,r,67108864),Dh(r,67108864)}}function Ux(r){if(r.tag===13||r.tag===31){var o=js();o=Ad(o);var c=Hn(r,o);c!==null&&fs(c,r,o),Dh(r,o)}}var xc=!0;function jj(r,o,c,h){var y=P.T;P.T=null;var w=O.p;try{O.p=2,Ph(r,o,c,h)}finally{O.p=w,P.T=y}}function Ej(r,o,c,h){var y=P.T;P.T=null;var w=O.p;try{O.p=8,Ph(r,o,c,h)}finally{O.p=w,P.T=y}}function Ph(r,o,c,h){if(xc){var y=Uh(h);if(y===null)wh(r,o,h,yc,c),Ox(r,h);else if(Tj(y,r,o,c,h))h.stopPropagation();else if(Ox(r,h),o&4&&-1<Cj.indexOf(r)){for(;y!==null;){var w=yr(y);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var j=qn(w.pendingLanes);if(j!==0){var k=w;for(k.pendingLanes|=2,k.entangledLanes|=2;j;){var B=1<<31-et(j);k.entanglements[1]|=B,j&=~B}ba(w),(Ze&6)===0&&(ec=He()+500,yi(0))}}break;case 31:case 13:k=Hn(w,2),k!==null&&fs(k,w,2),sc(),Dh(w,2)}if(w=Uh(h),w===null&&wh(r,o,h,yc,c),w===y)break;y=w}y!==null&&h.stopPropagation()}else wh(r,o,h,null,c)}}function Uh(r){return r=Od(r),Lh(r)}var yc=null;function Lh(r){if(yc=null,r=xr(r),r!==null){var o=l(r);if(o===null)r=null;else{var c=o.tag;if(c===13){if(r=d(o),r!==null)return r;r=null}else if(c===31){if(r=u(o),r!==null)return r;r=null}else if(c===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;r=null}else o!==r&&(r=null)}}return yc=r,null}function Lx(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(lt()){case Rt:return 2;case Nt:return 8;case Je:case Jt:return 32;case ys:return 268435456;default:return 32}default:return 32}}var Oh=!1,Tn=null,An=null,Rn=null,ji=new Map,Ei=new Map,kn=[],Cj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ox(r,o){switch(r){case"focusin":case"focusout":Tn=null;break;case"dragenter":case"dragleave":An=null;break;case"mouseover":case"mouseout":Rn=null;break;case"pointerover":case"pointerout":ji.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ei.delete(o.pointerId)}}function Ci(r,o,c,h,y,w){return r===null||r.nativeEvent!==w?(r={blockedOn:o,domEventName:c,eventSystemFlags:h,nativeEvent:w,targetContainers:[y]},o!==null&&(o=yr(o),o!==null&&Px(o)),r):(r.eventSystemFlags|=h,o=r.targetContainers,y!==null&&o.indexOf(y)===-1&&o.push(y),r)}function Tj(r,o,c,h,y){switch(o){case"focusin":return Tn=Ci(Tn,r,o,c,h,y),!0;case"dragenter":return An=Ci(An,r,o,c,h,y),!0;case"mouseover":return Rn=Ci(Rn,r,o,c,h,y),!0;case"pointerover":var w=y.pointerId;return ji.set(w,Ci(ji.get(w)||null,r,o,c,h,y)),!0;case"gotpointercapture":return w=y.pointerId,Ei.set(w,Ci(Ei.get(w)||null,r,o,c,h,y)),!0}return!1}function qx(r){var o=xr(r.target);if(o!==null){var c=l(o);if(c!==null){if(o=c.tag,o===13){if(o=d(c),o!==null){r.blockedOn=o,Zm(r.priority,function(){Ux(c)});return}}else if(o===31){if(o=u(c),o!==null){r.blockedOn=o,Zm(r.priority,function(){Ux(c)});return}}else if(o===3&&c.stateNode.current.memoizedState.isDehydrated){r.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}r.blockedOn=null}function vc(r){if(r.blockedOn!==null)return!1;for(var o=r.targetContainers;0<o.length;){var c=Uh(r.nativeEvent);if(c===null){c=r.nativeEvent;var h=new c.constructor(c.type,c);Ld=h,c.target.dispatchEvent(h),Ld=null}else return o=yr(c),o!==null&&Px(o),r.blockedOn=c,!1;o.shift()}return!0}function Bx(r,o,c){vc(r)&&c.delete(o)}function Aj(){Oh=!1,Tn!==null&&vc(Tn)&&(Tn=null),An!==null&&vc(An)&&(An=null),Rn!==null&&vc(Rn)&&(Rn=null),ji.forEach(Bx),Ei.forEach(Bx)}function bc(r,o){r.blockedOn===o&&(r.blockedOn=null,Oh||(Oh=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Aj)))}var wc=null;function $x(r){wc!==r&&(wc=r,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){wc===r&&(wc=null);for(var o=0;o<r.length;o+=3){var c=r[o],h=r[o+1],y=r[o+2];if(typeof h!="function"){if(Lh(h||c)===null)continue;break}var w=yr(c);w!==null&&(r.splice(o,3),o-=3,Uu(w,{pending:!0,data:y,method:c.method,action:h},h,y))}}))}function Zr(r){function o(B){return bc(B,r)}Tn!==null&&bc(Tn,r),An!==null&&bc(An,r),Rn!==null&&bc(Rn,r),ji.forEach(o),Ei.forEach(o);for(var c=0;c<kn.length;c++){var h=kn[c];h.blockedOn===r&&(h.blockedOn=null)}for(;0<kn.length&&(c=kn[0],c.blockedOn===null);)qx(c),c.blockedOn===null&&kn.shift();if(c=(r.ownerDocument||r).$$reactFormReplay,c!=null)for(h=0;h<c.length;h+=3){var y=c[h],w=c[h+1],j=y[is]||null;if(typeof w=="function")j||$x(c);else if(j){var k=null;if(w&&w.hasAttribute("formAction")){if(y=w,j=w[is]||null)k=j.formAction;else if(Lh(y)!==null)continue}else k=j.action;typeof k=="function"?c[h+1]=k:(c.splice(h,3),h-=3),$x(c)}}}function zx(){function r(w){w.canIntercept&&w.info==="react-transition"&&w.intercept({handler:function(){return new Promise(function(j){return y=j})},focusReset:"manual",scroll:"manual"})}function o(){y!==null&&(y(),y=null),h||setTimeout(c,20)}function c(){if(!h&&!navigation.transition){var w=navigation.currentEntry;w&&w.url!=null&&navigation.navigate(w.url,{state:w.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,y=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(c,100),function(){h=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),y!==null&&(y(),y=null)}}}function qh(r){this._internalRoot=r}Nc.prototype.render=qh.prototype.render=function(r){var o=this._internalRoot;if(o===null)throw Error(n(409));var c=o.current,h=js();Ix(c,h,r,o,null,null)},Nc.prototype.unmount=qh.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var o=r.containerInfo;Ix(r.current,2,null,r,null,null),sc(),o[gr]=null}};function Nc(r){this._internalRoot=r}Nc.prototype.unstable_scheduleHydration=function(r){if(r){var o=Qm();r={blockedOn:null,target:r,priority:o};for(var c=0;c<kn.length&&o!==0&&o<kn[c].priority;c++);kn.splice(c,0,r),c===0&&qx(r)}};var Vx=e.version;if(Vx!=="19.2.3")throw Error(n(527,Vx,"19.2.3"));O.findDOMNode=function(r){var o=r._reactInternals;if(o===void 0)throw typeof r.render=="function"?Error(n(188)):(r=Object.keys(r).join(","),Error(n(268,r)));return r=m(o),r=r!==null?g(r):null,r=r===null?null:r.stateNode,r};var Rj={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _c=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_c.isDisabled&&_c.supportsFiber)try{Os=_c.inject(Rj),_t=_c}catch{}}return Ai.createRoot=function(r,o){if(!i(r))throw Error(n(299));var c=!1,h="",y=Wg,w=Xg,j=Qg;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(h=o.identifierPrefix),o.onUncaughtError!==void 0&&(y=o.onUncaughtError),o.onCaughtError!==void 0&&(w=o.onCaughtError),o.onRecoverableError!==void 0&&(j=o.onRecoverableError)),o=kx(r,1,!1,null,null,c,h,null,y,w,j,zx),r[gr]=o.current,bh(r),new qh(o)},Ai.hydrateRoot=function(r,o,c){if(!i(r))throw Error(n(299));var h=!1,y="",w=Wg,j=Xg,k=Qg,B=null;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onUncaughtError!==void 0&&(w=c.onUncaughtError),c.onCaughtError!==void 0&&(j=c.onCaughtError),c.onRecoverableError!==void 0&&(k=c.onRecoverableError),c.formState!==void 0&&(B=c.formState)),o=kx(r,1,!0,o,c??null,h,y,B,w,j,k,zx),o.context=Mx(null),c=o.current,h=js(),h=Ad(h),y=gn(h),y.callback=null,xn(c,y,h),c=h,o.current.lanes=c,Oo(o,c),ba(o),r[gr]=o.current,bh(r),new Nc(o)},Ai.version="19.2.3",Ai}var Zx;function $j(){if(Zx)return $h.exports;Zx=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),$h.exports=Bj(),$h.exports}var zj=$j();const Vj=fr(zj);var N=gm();const qe=fr(N);/**
 * react-router v7.11.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var ey="popstate";function Hj(t={}){function e(n,i){let{pathname:l,search:d,hash:u}=n.location;return Mf("",{pathname:l,search:d,hash:u},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function s(n,i){return typeof i=="string"?i:Ki(i)}return Fj(e,s,null,t)}function mt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ks(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Gj(){return Math.random().toString(36).substring(2,10)}function ty(t,e){return{usr:t.state,key:t.key,idx:e}}function Mf(t,e,s=null,n){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?ko(e):e,state:s,key:e&&e.key||n||Gj()}}function Ki({pathname:t="/",search:e="",hash:s=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function ko(t){let e={};if(t){let s=t.indexOf("#");s>=0&&(e.hash=t.substring(s),t=t.substring(0,s));let n=t.indexOf("?");n>=0&&(e.search=t.substring(n),t=t.substring(0,n)),t&&(e.pathname=t)}return e}function Fj(t,e,s,n={}){let{window:i=document.defaultView,v5Compat:l=!1}=n,d=i.history,u="POP",f=null,m=g();m==null&&(m=0,d.replaceState({...d.state,idx:m},""));function g(){return(d.state||{idx:null}).idx}function v(){u="POP";let C=g(),T=C==null?null:C-m;m=C,f&&f({action:u,location:E.location,delta:T})}function b(C,T){u="PUSH";let R=Mf(E.location,C,T);m=g()+1;let A=ty(R,m),M=E.createHref(R);try{d.pushState(A,"",M)}catch(z){if(z instanceof DOMException&&z.name==="DataCloneError")throw z;i.location.assign(M)}l&&f&&f({action:u,location:E.location,delta:1})}function _(C,T){u="REPLACE";let R=Mf(E.location,C,T);m=g();let A=ty(R,m),M=E.createHref(R);d.replaceState(A,"",M),l&&f&&f({action:u,location:E.location,delta:0})}function S(C){return Jj(C)}let E={get action(){return u},get location(){return t(i,d)},listen(C){if(f)throw new Error("A history only accepts one active listener");return i.addEventListener(ey,v),f=C,()=>{i.removeEventListener(ey,v),f=null}},createHref(C){return e(i,C)},createURL:S,encodeLocation(C){let T=S(C);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:b,replace:_,go(C){return d.go(C)}};return E}function Jj(t,e=!1){let s="http://localhost";typeof window<"u"&&(s=window.location.origin!=="null"?window.location.origin:window.location.href),mt(s,"No window.location.(origin|href) available to create URL");let n=typeof t=="string"?t:Ki(t);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=s+n),new URL(n,s)}function Zb(t,e,s="/"){return Kj(t,e,s,!1)}function Kj(t,e,s,n){let i=typeof e=="string"?ko(e):e,l=Qa(i.pathname||"/",s);if(l==null)return null;let d=ew(t);Yj(d);let u=null;for(let f=0;u==null&&f<d.length;++f){let m=o1(l);u=n1(d[f],m,n)}return u}function ew(t,e=[],s=[],n="",i=!1){let l=(d,u,f=i,m)=>{let g={relativePath:m===void 0?d.path||"":m,caseSensitive:d.caseSensitive===!0,childrenIndex:u,route:d};if(g.relativePath.startsWith("/")){if(!g.relativePath.startsWith(n)&&f)return;mt(g.relativePath.startsWith(n),`Absolute route path "${g.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(n.length)}let v=Xa([n,g.relativePath]),b=s.concat(g);d.children&&d.children.length>0&&(mt(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),ew(d.children,e,b,v,f)),!(d.path==null&&!d.index)&&e.push({path:v,score:s1(v,d.index),routesMeta:b})};return t.forEach((d,u)=>{var f;if(d.path===""||!((f=d.path)!=null&&f.includes("?")))l(d,u);else for(let m of tw(d.path))l(d,u,!0,m)}),e}function tw(t){let e=t.split("/");if(e.length===0)return[];let[s,...n]=e,i=s.endsWith("?"),l=s.replace(/\?$/,"");if(n.length===0)return i?[l,""]:[l];let d=tw(n.join("/")),u=[];return u.push(...d.map(f=>f===""?l:[l,f].join("/"))),i&&u.push(...d),u.map(f=>t.startsWith("/")&&f===""?"/":f)}function Yj(t){t.sort((e,s)=>e.score!==s.score?s.score-e.score:a1(e.routesMeta.map(n=>n.childrenIndex),s.routesMeta.map(n=>n.childrenIndex)))}var Wj=/^:[\w-]+$/,Xj=3,Qj=2,Zj=1,e1=10,t1=-2,sy=t=>t==="*";function s1(t,e){let s=t.split("/"),n=s.length;return s.some(sy)&&(n+=t1),e&&(n+=Qj),s.filter(i=>!sy(i)).reduce((i,l)=>i+(Wj.test(l)?Xj:l===""?Zj:e1),n)}function a1(t,e){return t.length===e.length&&t.slice(0,-1).every((n,i)=>n===e[i])?t[t.length-1]-e[e.length-1]:0}function n1(t,e,s=!1){let{routesMeta:n}=t,i={},l="/",d=[];for(let u=0;u<n.length;++u){let f=n[u],m=u===n.length-1,g=l==="/"?e:e.slice(l.length)||"/",v=Xc({path:f.relativePath,caseSensitive:f.caseSensitive,end:m},g),b=f.route;if(!v&&m&&s&&!n[n.length-1].route.index&&(v=Xc({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},g)),!v)return null;Object.assign(i,v.params),d.push({params:i,pathname:Xa([l,v.pathname]),pathnameBase:d1(Xa([l,v.pathnameBase])),route:b}),v.pathnameBase!=="/"&&(l=Xa([l,v.pathnameBase]))}return d}function Xc(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[s,n]=r1(t.path,t.caseSensitive,t.end),i=e.match(s);if(!i)return null;let l=i[0],d=l.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:n.reduce((m,{paramName:g,isOptional:v},b)=>{if(g==="*"){let S=u[b]||"";d=l.slice(0,l.length-S.length).replace(/(.)\/+$/,"$1")}const _=u[b];return v&&!_?m[g]=void 0:m[g]=(_||"").replace(/%2F/g,"/"),m},{}),pathname:l,pathnameBase:d,pattern:t}}function r1(t,e=!1,s=!0){ks(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let n=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,u,f)=>(n.push({paramName:u,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(n.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function o1(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ks(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Qa(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let s=e.endsWith("/")?e.length-1:e.length,n=t.charAt(s);return n&&n!=="/"?null:t.slice(s)||"/"}var sw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,i1=t=>sw.test(t);function l1(t,e="/"){let{pathname:s,search:n="",hash:i=""}=typeof t=="string"?ko(t):t,l;if(s)if(i1(s))l=s;else{if(s.includes("//")){let d=s;s=s.replace(/\/\/+/g,"/"),ks(!1,`Pathnames cannot have embedded double slashes - normalizing ${d} -> ${s}`)}s.startsWith("/")?l=ay(s.substring(1),"/"):l=ay(s,e)}else l=e;return{pathname:l,search:u1(n),hash:h1(i)}}function ay(t,e){let s=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?s.length>1&&s.pop():i!=="."&&s.push(i)}),s.length>1?s.join("/"):"/"}function Fh(t,e,s,n){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${s}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function c1(t){return t.filter((e,s)=>s===0||e.route.path&&e.route.path.length>0)}function xm(t){let e=c1(t);return e.map((s,n)=>n===e.length-1?s.pathname:s.pathnameBase)}function ym(t,e,s,n=!1){let i;typeof t=="string"?i=ko(t):(i={...t},mt(!i.pathname||!i.pathname.includes("?"),Fh("?","pathname","search",i)),mt(!i.pathname||!i.pathname.includes("#"),Fh("#","pathname","hash",i)),mt(!i.search||!i.search.includes("#"),Fh("#","search","hash",i)));let l=t===""||i.pathname==="",d=l?"/":i.pathname,u;if(d==null)u=s;else{let v=e.length-1;if(!n&&d.startsWith("..")){let b=d.split("/");for(;b[0]==="..";)b.shift(),v-=1;i.pathname=b.join("/")}u=v>=0?e[v]:"/"}let f=l1(i,u),m=d&&d!=="/"&&d.endsWith("/"),g=(l||d===".")&&s.endsWith("/");return!f.pathname.endsWith("/")&&(m||g)&&(f.pathname+="/"),f}var Xa=t=>t.join("/").replace(/\/\/+/g,"/"),d1=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),u1=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,h1=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,f1=class{constructor(t,e,s,n=!1){this.status=t,this.statusText=e||"",this.internal=n,s instanceof Error?(this.data=s.toString(),this.error=s):this.data=s}};function m1(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function p1(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var aw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function nw(t,e){let s=t;if(typeof s!="string"||!sw.test(s))return{absoluteURL:void 0,isExternal:!1,to:s};let n=s,i=!1;if(aw)try{let l=new URL(window.location.href),d=s.startsWith("//")?new URL(l.protocol+s):new URL(s),u=Qa(d.pathname,e);d.origin===l.origin&&u!=null?s=u+d.search+d.hash:i=!0}catch{ks(!1,`<Link to="${s}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:n,isExternal:i,to:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var rw=["POST","PUT","PATCH","DELETE"];new Set(rw);var g1=["GET",...rw];new Set(g1);var Mo=N.createContext(null);Mo.displayName="DataRouter";var dd=N.createContext(null);dd.displayName="DataRouterState";var x1=N.createContext(!1),ow=N.createContext({isTransitioning:!1});ow.displayName="ViewTransition";var y1=N.createContext(new Map);y1.displayName="Fetchers";var v1=N.createContext(null);v1.displayName="Await";var Is=N.createContext(null);Is.displayName="Navigation";var al=N.createContext(null);al.displayName="Location";var ta=N.createContext({outlet:null,matches:[],isDataRoute:!1});ta.displayName="Route";var vm=N.createContext(null);vm.displayName="RouteError";var iw="REACT_ROUTER_ERROR",b1="REDIRECT",w1="ROUTE_ERROR_RESPONSE";function N1(t){if(t.startsWith(`${iw}:${b1}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function _1(t){if(t.startsWith(`${iw}:${w1}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new f1(e.status,e.statusText,e.data)}catch{}}function S1(t,{relative:e}={}){mt(Io(),"useHref() may be used only in the context of a <Router> component.");let{basename:s,navigator:n}=N.useContext(Is),{hash:i,pathname:l,search:d}=nl(t,{relative:e}),u=l;return s!=="/"&&(u=l==="/"?s:Xa([s,l])),n.createHref({pathname:u,search:d,hash:i})}function Io(){return N.useContext(al)!=null}function Ds(){return mt(Io(),"useLocation() may be used only in the context of a <Router> component."),N.useContext(al).location}var lw="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function cw(t){N.useContext(Is).static||N.useLayoutEffect(t)}function Xt(){let{isDataRoute:t}=N.useContext(ta);return t?q1():j1()}function j1(){mt(Io(),"useNavigate() may be used only in the context of a <Router> component.");let t=N.useContext(Mo),{basename:e,navigator:s}=N.useContext(Is),{matches:n}=N.useContext(ta),{pathname:i}=Ds(),l=JSON.stringify(xm(n)),d=N.useRef(!1);return cw(()=>{d.current=!0}),N.useCallback((f,m={})=>{if(ks(d.current,lw),!d.current)return;if(typeof f=="number"){s.go(f);return}let g=ym(f,JSON.parse(l),i,m.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:Xa([e,g.pathname])),(m.replace?s.replace:s.push)(g,m.state,m)},[e,s,l,i,t])}var E1=N.createContext(null);function C1(t){let e=N.useContext(ta).outlet;return N.useMemo(()=>e&&N.createElement(E1.Provider,{value:t},e),[e,t])}function ud(){let{matches:t}=N.useContext(ta),e=t[t.length-1];return e?e.params:{}}function nl(t,{relative:e}={}){let{matches:s}=N.useContext(ta),{pathname:n}=Ds(),i=JSON.stringify(xm(s));return N.useMemo(()=>ym(t,JSON.parse(i),n,e==="path"),[t,i,n,e])}function T1(t,e){return dw(t,e)}function dw(t,e,s,n,i){var R;mt(Io(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=N.useContext(Is),{matches:d}=N.useContext(ta),u=d[d.length-1],f=u?u.params:{},m=u?u.pathname:"/",g=u?u.pathnameBase:"/",v=u&&u.route;{let A=v&&v.path||"";hw(m,!v||A.endsWith("*")||A.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${A}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${A}"> to <Route path="${A==="/"?"*":`${A}/*`}">.`)}let b=Ds(),_;if(e){let A=typeof e=="string"?ko(e):e;mt(g==="/"||((R=A.pathname)==null?void 0:R.startsWith(g)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${A.pathname}" was given in the \`location\` prop.`),_=A}else _=b;let S=_.pathname||"/",E=S;if(g!=="/"){let A=g.replace(/^\//,"").split("/");E="/"+S.replace(/^\//,"").split("/").slice(A.length).join("/")}let C=Zb(t,{pathname:E});ks(v||C!=null,`No routes matched location "${_.pathname}${_.search}${_.hash}" `),ks(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${_.pathname}${_.search}${_.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let T=I1(C&&C.map(A=>Object.assign({},A,{params:Object.assign({},f,A.params),pathname:Xa([g,l.encodeLocation?l.encodeLocation(A.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?g:Xa([g,l.encodeLocation?l.encodeLocation(A.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:A.pathnameBase])})),d,s,n,i);return e&&T?N.createElement(al.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",..._},navigationType:"POP"}},T):T}function A1(){let t=O1(),e=m1(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),s=t instanceof Error?t.stack:null,n="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:n},l={padding:"2px 4px",backgroundColor:n},d=null;return console.error("Error handled by React Router default ErrorBoundary:",t),d=N.createElement(N.Fragment,null,N.createElement("p",null," Hey developer "),N.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",N.createElement("code",{style:l},"ErrorBoundary")," or"," ",N.createElement("code",{style:l},"errorElement")," prop on your route.")),N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),s?N.createElement("pre",{style:i},s):null,d)}var R1=N.createElement(A1,null),uw=class extends N.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const s=_1(t.digest);s&&(t=s)}let e=t!==void 0?N.createElement(ta.Provider,{value:this.props.routeContext},N.createElement(vm.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?N.createElement(k1,{error:t},e):e}};uw.contextType=x1;var Jh=new WeakMap;function k1({children:t,error:e}){let{basename:s}=N.useContext(Is);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let n=N1(e.digest);if(n){let i=Jh.get(e);if(i)throw i;let l=nw(n.location,s);if(aw&&!Jh.get(e))if(l.isExternal||n.reloadDocument)window.location.href=l.absoluteURL||l.to;else{const d=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(l.to,{replace:n.replace}));throw Jh.set(e,d),d}return N.createElement("meta",{httpEquiv:"refresh",content:`0;url=${l.absoluteURL||l.to}`})}}return t}function M1({routeContext:t,match:e,children:s}){let n=N.useContext(Mo);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),N.createElement(ta.Provider,{value:t},s)}function I1(t,e=[],s=null,n=null,i=null){if(t==null){if(!s)return null;if(s.errors)t=s.matches;else if(e.length===0&&!s.initialized&&s.matches.length>0)t=s.matches;else return null}let l=t,d=s==null?void 0:s.errors;if(d!=null){let g=l.findIndex(v=>v.route.id&&(d==null?void 0:d[v.route.id])!==void 0);mt(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),l=l.slice(0,Math.min(l.length,g+1))}let u=!1,f=-1;if(s)for(let g=0;g<l.length;g++){let v=l[g];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(f=g),v.route.id){let{loaderData:b,errors:_}=s,S=v.route.loader&&!b.hasOwnProperty(v.route.id)&&(!_||_[v.route.id]===void 0);if(v.route.lazy||S){u=!0,f>=0?l=l.slice(0,f+1):l=[l[0]];break}}}let m=s&&n?(g,v)=>{var b,_;n(g,{location:s.location,params:((_=(b=s.matches)==null?void 0:b[0])==null?void 0:_.params)??{},unstable_pattern:p1(s.matches),errorInfo:v})}:void 0;return l.reduceRight((g,v,b)=>{let _,S=!1,E=null,C=null;s&&(_=d&&v.route.id?d[v.route.id]:void 0,E=v.route.errorElement||R1,u&&(f<0&&b===0?(hw("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),S=!0,C=null):f===b&&(S=!0,C=v.route.hydrateFallbackElement||null)));let T=e.concat(l.slice(0,b+1)),R=()=>{let A;return _?A=E:S?A=C:v.route.Component?A=N.createElement(v.route.Component,null):v.route.element?A=v.route.element:A=g,N.createElement(M1,{match:v,routeContext:{outlet:g,matches:T,isDataRoute:s!=null},children:A})};return s&&(v.route.ErrorBoundary||v.route.errorElement||b===0)?N.createElement(uw,{location:s.location,revalidation:s.revalidation,component:E,error:_,children:R(),routeContext:{outlet:null,matches:T,isDataRoute:!0},onError:m}):R()},null)}function bm(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function D1(t){let e=N.useContext(Mo);return mt(e,bm(t)),e}function P1(t){let e=N.useContext(dd);return mt(e,bm(t)),e}function U1(t){let e=N.useContext(ta);return mt(e,bm(t)),e}function wm(t){let e=U1(t),s=e.matches[e.matches.length-1];return mt(s.route.id,`${t} can only be used on routes that contain a unique "id"`),s.route.id}function L1(){return wm("useRouteId")}function O1(){var n;let t=N.useContext(vm),e=P1("useRouteError"),s=wm("useRouteError");return t!==void 0?t:(n=e.errors)==null?void 0:n[s]}function q1(){let{router:t}=D1("useNavigate"),e=wm("useNavigate"),s=N.useRef(!1);return cw(()=>{s.current=!0}),N.useCallback(async(i,l={})=>{ks(s.current,lw),s.current&&(typeof i=="number"?await t.navigate(i):await t.navigate(i,{fromRouteId:e,...l}))},[t,e])}var ny={};function hw(t,e,s){!e&&!ny[t]&&(ny[t]=!0,ks(!1,s))}N.memo(B1);function B1({routes:t,future:e,state:s,onError:n}){return dw(t,void 0,s,n,e)}function fw({to:t,replace:e,state:s,relative:n}){mt(Io(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=N.useContext(Is);ks(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=N.useContext(ta),{pathname:d}=Ds(),u=Xt(),f=ym(t,xm(l),d,n==="path"),m=JSON.stringify(f);return N.useEffect(()=>{u(JSON.parse(m),{replace:e,state:s,relative:n})},[u,m,n,e,s]),null}function mw(t){return C1(t.context)}function Pe(t){mt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function $1({basename:t="/",children:e=null,location:s,navigationType:n="POP",navigator:i,static:l=!1,unstable_useTransitions:d}){mt(!Io(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=t.replace(/^\/*/,"/"),f=N.useMemo(()=>({basename:u,navigator:i,static:l,unstable_useTransitions:d,future:{}}),[u,i,l,d]);typeof s=="string"&&(s=ko(s));let{pathname:m="/",search:g="",hash:v="",state:b=null,key:_="default"}=s,S=N.useMemo(()=>{let E=Qa(m,u);return E==null?null:{location:{pathname:E,search:g,hash:v,state:b,key:_},navigationType:n}},[u,m,g,v,b,_,n]);return ks(S!=null,`<Router basename="${u}"> is not able to match the URL "${m}${g}${v}" because it does not start with the basename, so the <Router> won't render anything.`),S==null?null:N.createElement(Is.Provider,{value:f},N.createElement(al.Provider,{children:e,value:S}))}function z1({children:t,location:e}){return T1(If(t),e)}function If(t,e=[]){let s=[];return N.Children.forEach(t,(n,i)=>{if(!N.isValidElement(n))return;let l=[...e,i];if(n.type===N.Fragment){s.push.apply(s,If(n.props.children,l));return}mt(n.type===Pe,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),mt(!n.props.index||!n.props.children,"An index route cannot have child routes.");let d={id:n.props.id||l.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(d.children=If(n.props.children,l)),s.push(d)}),s}var Vc="get",Hc="application/x-www-form-urlencoded";function hd(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function V1(t){return hd(t)&&t.tagName.toLowerCase()==="button"}function H1(t){return hd(t)&&t.tagName.toLowerCase()==="form"}function G1(t){return hd(t)&&t.tagName.toLowerCase()==="input"}function F1(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function J1(t,e){return t.button===0&&(!e||e==="_self")&&!F1(t)}function Df(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,s)=>{let n=t[s];return e.concat(Array.isArray(n)?n.map(i=>[s,i]):[[s,n]])},[]))}function K1(t,e){let s=Df(t);return e&&e.forEach((n,i)=>{s.has(i)||e.getAll(i).forEach(l=>{s.append(i,l)})}),s}var Sc=null;function Y1(){if(Sc===null)try{new FormData(document.createElement("form"),0),Sc=!1}catch{Sc=!0}return Sc}var W1=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Kh(t){return t!=null&&!W1.has(t)?(ks(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Hc}"`),null):t}function X1(t,e){let s,n,i,l,d;if(H1(t)){let u=t.getAttribute("action");n=u?Qa(u,e):null,s=t.getAttribute("method")||Vc,i=Kh(t.getAttribute("enctype"))||Hc,l=new FormData(t)}else if(V1(t)||G1(t)&&(t.type==="submit"||t.type==="image")){let u=t.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=t.getAttribute("formaction")||u.getAttribute("action");if(n=f?Qa(f,e):null,s=t.getAttribute("formmethod")||u.getAttribute("method")||Vc,i=Kh(t.getAttribute("formenctype"))||Kh(u.getAttribute("enctype"))||Hc,l=new FormData(u,t),!Y1()){let{name:m,type:g,value:v}=t;if(g==="image"){let b=m?`${m}.`:"";l.append(`${b}x`,"0"),l.append(`${b}y`,"0")}else m&&l.append(m,v)}}else{if(hd(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');s=Vc,n=null,i=Hc,d=t}return l&&i==="text/plain"&&(d=l,l=void 0),{action:n,method:s.toLowerCase(),encType:i,formData:l,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Nm(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Q1(t,e,s){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname=`_root.${s}`:e&&Qa(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${s}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${s}`,n}async function Z1(t,e){if(t.id in e)return e[t.id];try{let s=await import(t.module);return e[t.id]=s,s}catch(s){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(s),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function eE(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function tE(t,e,s){let n=await Promise.all(t.map(async i=>{let l=e.routes[i.route.id];if(l){let d=await Z1(l,s);return d.links?d.links():[]}return[]}));return rE(n.flat(1).filter(eE).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function ry(t,e,s,n,i,l){let d=(f,m)=>s[m]?f.route.id!==s[m].route.id:!0,u=(f,m)=>{var g;return s[m].pathname!==f.pathname||((g=s[m].route.path)==null?void 0:g.endsWith("*"))&&s[m].params["*"]!==f.params["*"]};return l==="assets"?e.filter((f,m)=>d(f,m)||u(f,m)):l==="data"?e.filter((f,m)=>{var v;let g=n.routes[f.route.id];if(!g||!g.hasLoader)return!1;if(d(f,m)||u(f,m))return!0;if(f.route.shouldRevalidate){let b=f.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((v=s[0])==null?void 0:v.params)||{},nextUrl:new URL(t,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function sE(t,e,{includeHydrateFallback:s}={}){return aE(t.map(n=>{let i=e.routes[n.route.id];if(!i)return[];let l=[i.module];return i.clientActionModule&&(l=l.concat(i.clientActionModule)),i.clientLoaderModule&&(l=l.concat(i.clientLoaderModule)),s&&i.hydrateFallbackModule&&(l=l.concat(i.hydrateFallbackModule)),i.imports&&(l=l.concat(i.imports)),l}).flat(1))}function aE(t){return[...new Set(t)]}function nE(t){let e={},s=Object.keys(t).sort();for(let n of s)e[n]=t[n];return e}function rE(t,e){let s=new Set;return new Set(e),t.reduce((n,i)=>{let l=JSON.stringify(nE(i));return s.has(l)||(s.add(l),n.push({key:l,link:i})),n},[])}function pw(){let t=N.useContext(Mo);return Nm(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function oE(){let t=N.useContext(dd);return Nm(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var _m=N.createContext(void 0);_m.displayName="FrameworkContext";function gw(){let t=N.useContext(_m);return Nm(t,"You must render this element inside a <HydratedRouter> element"),t}function iE(t,e){let s=N.useContext(_m),[n,i]=N.useState(!1),[l,d]=N.useState(!1),{onFocus:u,onBlur:f,onMouseEnter:m,onMouseLeave:g,onTouchStart:v}=e,b=N.useRef(null);N.useEffect(()=>{if(t==="render"&&d(!0),t==="viewport"){let E=T=>{T.forEach(R=>{d(R.isIntersecting)})},C=new IntersectionObserver(E,{threshold:.5});return b.current&&C.observe(b.current),()=>{C.disconnect()}}},[t]),N.useEffect(()=>{if(n){let E=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(E)}}},[n]);let _=()=>{i(!0)},S=()=>{i(!1),d(!1)};return s?t!=="intent"?[l,b,{}]:[l,b,{onFocus:Ri(u,_),onBlur:Ri(f,S),onMouseEnter:Ri(m,_),onMouseLeave:Ri(g,S),onTouchStart:Ri(v,_)}]:[!1,b,{}]}function Ri(t,e){return s=>{t&&t(s),s.defaultPrevented||e(s)}}function lE({page:t,...e}){let{router:s}=pw(),n=N.useMemo(()=>Zb(s.routes,t,s.basename),[s.routes,t,s.basename]);return n?N.createElement(dE,{page:t,matches:n,...e}):null}function cE(t){let{manifest:e,routeModules:s}=gw(),[n,i]=N.useState([]);return N.useEffect(()=>{let l=!1;return tE(t,e,s).then(d=>{l||i(d)}),()=>{l=!0}},[t,e,s]),n}function dE({page:t,matches:e,...s}){let n=Ds(),{manifest:i,routeModules:l}=gw(),{basename:d}=pw(),{loaderData:u,matches:f}=oE(),m=N.useMemo(()=>ry(t,e,f,i,n,"data"),[t,e,f,i,n]),g=N.useMemo(()=>ry(t,e,f,i,n,"assets"),[t,e,f,i,n]),v=N.useMemo(()=>{if(t===n.pathname+n.search+n.hash)return[];let S=new Set,E=!1;if(e.forEach(T=>{var A;let R=i.routes[T.route.id];!R||!R.hasLoader||(!m.some(M=>M.route.id===T.route.id)&&T.route.id in u&&((A=l[T.route.id])!=null&&A.shouldRevalidate)||R.hasClientLoader?E=!0:S.add(T.route.id))}),S.size===0)return[];let C=Q1(t,d,"data");return E&&S.size>0&&C.searchParams.set("_routes",e.filter(T=>S.has(T.route.id)).map(T=>T.route.id).join(",")),[C.pathname+C.search]},[d,u,n,i,m,e,t,l]),b=N.useMemo(()=>sE(g,i),[g,i]),_=cE(g);return N.createElement(N.Fragment,null,v.map(S=>N.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...s})),b.map(S=>N.createElement("link",{key:S,rel:"modulepreload",href:S,...s})),_.map(({key:S,link:E})=>N.createElement("link",{key:S,nonce:s.nonce,...E})))}function uE(...t){return e=>{t.forEach(s=>{typeof s=="function"?s(e):s!=null&&(s.current=e)})}}var hE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{hE&&(window.__reactRouterVersion="7.11.0")}catch{}function fE({basename:t,children:e,unstable_useTransitions:s,window:n}){let i=N.useRef();i.current==null&&(i.current=Hj({window:n,v5Compat:!0}));let l=i.current,[d,u]=N.useState({action:l.action,location:l.location}),f=N.useCallback(m=>{s===!1?u(m):N.startTransition(()=>u(m))},[s]);return N.useLayoutEffect(()=>l.listen(f),[l,f]),N.createElement($1,{basename:t,children:e,location:d.location,navigationType:d.action,navigator:l,unstable_useTransitions:s})}var xw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Se=N.forwardRef(function({onClick:e,discover:s="render",prefetch:n="none",relative:i,reloadDocument:l,replace:d,state:u,target:f,to:m,preventScrollReset:g,viewTransition:v,unstable_defaultShouldRevalidate:b,..._},S){let{basename:E,unstable_useTransitions:C}=N.useContext(Is),T=typeof m=="string"&&xw.test(m),R=nw(m,E);m=R.to;let A=S1(m,{relative:i}),[M,z,F]=iE(n,_),G=gE(m,{replace:d,state:u,target:f,preventScrollReset:g,relative:i,viewTransition:v,unstable_defaultShouldRevalidate:b,unstable_useTransitions:C});function K(U){e&&e(U),U.defaultPrevented||G(U)}let I=N.createElement("a",{..._,...F,href:R.absoluteURL||A,onClick:R.isExternal||l?e:K,ref:uE(S,z),target:f,"data-discover":!T&&s==="render"?"true":void 0});return M&&!T?N.createElement(N.Fragment,null,I,N.createElement(lE,{page:A})):I});Se.displayName="Link";var Qc=N.forwardRef(function({"aria-current":e="page",caseSensitive:s=!1,className:n="",end:i=!1,style:l,to:d,viewTransition:u,children:f,...m},g){let v=nl(d,{relative:m.relative}),b=Ds(),_=N.useContext(dd),{navigator:S,basename:E}=N.useContext(Is),C=_!=null&&NE(v)&&u===!0,T=S.encodeLocation?S.encodeLocation(v).pathname:v.pathname,R=b.pathname,A=_&&_.navigation&&_.navigation.location?_.navigation.location.pathname:null;s||(R=R.toLowerCase(),A=A?A.toLowerCase():null,T=T.toLowerCase()),A&&E&&(A=Qa(A,E)||A);const M=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let z=R===T||!i&&R.startsWith(T)&&R.charAt(M)==="/",F=A!=null&&(A===T||!i&&A.startsWith(T)&&A.charAt(T.length)==="/"),G={isActive:z,isPending:F,isTransitioning:C},K=z?e:void 0,I;typeof n=="function"?I=n(G):I=[n,z?"active":null,F?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let U=typeof l=="function"?l(G):l;return N.createElement(Se,{...m,"aria-current":K,className:I,ref:g,style:U,to:d,viewTransition:u},typeof f=="function"?f(G):f)});Qc.displayName="NavLink";var mE=N.forwardRef(({discover:t="render",fetcherKey:e,navigate:s,reloadDocument:n,replace:i,state:l,method:d=Vc,action:u,onSubmit:f,relative:m,preventScrollReset:g,viewTransition:v,unstable_defaultShouldRevalidate:b,..._},S)=>{let{unstable_useTransitions:E}=N.useContext(Is),C=bE(),T=wE(u,{relative:m}),R=d.toLowerCase()==="get"?"get":"post",A=typeof u=="string"&&xw.test(u),M=z=>{if(f&&f(z),z.defaultPrevented)return;z.preventDefault();let F=z.nativeEvent.submitter,G=(F==null?void 0:F.getAttribute("formmethod"))||d,K=()=>C(F||z.currentTarget,{fetcherKey:e,method:G,navigate:s,replace:i,state:l,relative:m,preventScrollReset:g,viewTransition:v,unstable_defaultShouldRevalidate:b});E&&s!==!1?N.startTransition(()=>K()):K()};return N.createElement("form",{ref:S,method:R,action:T,onSubmit:n?f:M,..._,"data-discover":!A&&t==="render"?"true":void 0})});mE.displayName="Form";function pE(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function yw(t){let e=N.useContext(Mo);return mt(e,pE(t)),e}function gE(t,{target:e,replace:s,state:n,preventScrollReset:i,relative:l,viewTransition:d,unstable_defaultShouldRevalidate:u,unstable_useTransitions:f}={}){let m=Xt(),g=Ds(),v=nl(t,{relative:l});return N.useCallback(b=>{if(J1(b,e)){b.preventDefault();let _=s!==void 0?s:Ki(g)===Ki(v),S=()=>m(t,{replace:_,state:n,preventScrollReset:i,relative:l,viewTransition:d,unstable_defaultShouldRevalidate:u});f?N.startTransition(()=>S()):S()}},[g,m,v,s,n,e,t,i,l,d,u,f])}function xE(t){ks(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=N.useRef(Df(t)),s=N.useRef(!1),n=Ds(),i=N.useMemo(()=>K1(n.search,s.current?null:e.current),[n.search]),l=Xt(),d=N.useCallback((u,f)=>{const m=Df(typeof u=="function"?u(new URLSearchParams(i)):u);s.current=!0,l("?"+m,f)},[l,i]);return[i,d]}var yE=0,vE=()=>`__${String(++yE)}__`;function bE(){let{router:t}=yw("useSubmit"),{basename:e}=N.useContext(Is),s=L1(),n=t.fetch,i=t.navigate;return N.useCallback(async(l,d={})=>{let{action:u,method:f,encType:m,formData:g,body:v}=X1(l,e);if(d.navigate===!1){let b=d.fetcherKey||vE();await n(b,s,d.action||u,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:g,body:v,formMethod:d.method||f,formEncType:d.encType||m,flushSync:d.flushSync})}else await i(d.action||u,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:g,body:v,formMethod:d.method||f,formEncType:d.encType||m,replace:d.replace,state:d.state,fromRouteId:s,flushSync:d.flushSync,viewTransition:d.viewTransition})},[n,i,e,s])}function wE(t,{relative:e}={}){let{basename:s}=N.useContext(Is),n=N.useContext(ta);mt(n,"useFormAction must be used inside a RouteContext");let[i]=n.matches.slice(-1),l={...nl(t||".",{relative:e})},d=Ds();if(t==null){l.search=d.search;let u=new URLSearchParams(l.search),f=u.getAll("index");if(f.some(g=>g==="")){u.delete("index"),f.filter(v=>v).forEach(v=>u.append("index",v));let g=u.toString();l.search=g?`?${g}`:""}}return(!t||t===".")&&i.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),s!=="/"&&(l.pathname=l.pathname==="/"?s:Xa([s,l.pathname])),Ki(l)}function NE(t,{relative:e}={}){let s=N.useContext(ow);mt(s!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=yw("useViewTransitionState"),i=nl(t,{relative:e});if(!s.isTransitioning)return!1;let l=Qa(s.currentLocation.pathname,n)||s.currentLocation.pathname,d=Qa(s.nextLocation.pathname,n)||s.nextLocation.pathname;return Xc(i.pathname,d)!=null||Xc(i.pathname,l)!=null}var vw=Qb();const bw=()=>a.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})}),It=({className:t="w-8 h-8"})=>a.jsx("svg",{className:t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})});var Pf=function(t,e){return Pf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(s,n){s.__proto__=n}||function(s,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(s[i]=n[i])},Pf(t,e)};function _E(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Pf(t,e);function s(){this.constructor=t}t.prototype=e===null?Object.create(e):(s.prototype=e.prototype,new s)}var Lt=function(){return Lt=Object.assign||function(e){for(var s,n=1,i=arguments.length;n<i;n++){s=arguments[n];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(e[l]=s[l])}return e},Lt.apply(this,arguments)};function fd(t,e){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(s[n[i]]=t[n[i]]);return s}function SE(t,e,s,n){function i(l){return l instanceof s?l:new s(function(d){d(l)})}return new(s||(s=Promise))(function(l,d){function u(g){try{m(n.next(g))}catch(v){d(v)}}function f(g){try{m(n.throw(g))}catch(v){d(v)}}function m(g){g.done?l(g.value):i(g.value).then(u,f)}m((n=n.apply(t,e||[])).next())})}const jE=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class Sm extends Error{constructor(e,s="FunctionsError",n){super(e),this.name=s,this.context=n}}class EE extends Sm{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class oy extends Sm{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class iy extends Sm{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Uf;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Uf||(Uf={}));class CE{constructor(e,{headers:s={},customFetch:n,region:i=Uf.Any}={}){this.url=e,this.headers=s,this.region=i,this.fetch=jE(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return SE(this,arguments,void 0,function*(s,n={}){var i;let l,d;try{const{headers:u,method:f,body:m,signal:g,timeout:v}=n;let b={},{region:_}=n;_||(_=this.region);const S=new URL(`${this.url}/${s}`);_&&_!=="any"&&(b["x-region"]=_,S.searchParams.set("forceFunctionRegion",_));let E;m&&(u&&!Object.prototype.hasOwnProperty.call(u,"Content-Type")||!u)?typeof Blob<"u"&&m instanceof Blob||m instanceof ArrayBuffer?(b["Content-Type"]="application/octet-stream",E=m):typeof m=="string"?(b["Content-Type"]="text/plain",E=m):typeof FormData<"u"&&m instanceof FormData?E=m:(b["Content-Type"]="application/json",E=JSON.stringify(m)):E=m;let C=g;v&&(d=new AbortController,l=setTimeout(()=>d.abort(),v),g?(C=d.signal,g.addEventListener("abort",()=>d.abort())):C=d.signal);const T=yield this.fetch(S.toString(),{method:f||"POST",headers:Object.assign(Object.assign(Object.assign({},b),this.headers),u),body:E,signal:C}).catch(z=>{throw new EE(z)}),R=T.headers.get("x-relay-error");if(R&&R==="true")throw new oy(T);if(!T.ok)throw new iy(T);let A=((i=T.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),M;return A==="application/json"?M=yield T.json():A==="application/octet-stream"||A==="application/pdf"?M=yield T.blob():A==="text/event-stream"?M=T:A==="multipart/form-data"?M=yield T.formData():M=yield T.text(),{data:M,error:null,response:T}}catch(u){return{data:null,error:u,response:u instanceof iy||u instanceof oy?u.context:void 0}}finally{l&&clearTimeout(l)}})}}var TE=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},AE=class{constructor(t){var e,s;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(s=t.isMaybeSingle)!==null&&s!==void 0?s:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var s=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let i=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{let d=null,u=null,f=null,m=l.status,g=l.statusText;if(l.ok){var v,b;if(s.method!=="HEAD"){var _;const T=await l.text();T===""||(s.headers.get("Accept")==="text/csv"||s.headers.get("Accept")&&(!((_=s.headers.get("Accept"))===null||_===void 0)&&_.includes("application/vnd.pgrst.plan+text"))?u=T:u=JSON.parse(T))}const E=(v=s.headers.get("Prefer"))===null||v===void 0?void 0:v.match(/count=(exact|planned|estimated)/),C=(b=l.headers.get("content-range"))===null||b===void 0?void 0:b.split("/");E&&C&&C.length>1&&(f=parseInt(C[1])),s.isMaybeSingle&&s.method==="GET"&&Array.isArray(u)&&(u.length>1?(d={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,f=null,m=406,g="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{var S;const E=await l.text();try{d=JSON.parse(E),Array.isArray(d)&&l.status===404&&(u=[],d=null,m=200,g="OK")}catch{l.status===404&&E===""?(m=204,g="No Content"):d={message:E}}if(d&&s.isMaybeSingle&&(!(d==null||(S=d.details)===null||S===void 0)&&S.includes("0 rows"))&&(d=null,m=200,g="OK"),d&&s.shouldThrowOnError)throw new TE(d)}return{error:d,data:u,count:f,status:m,statusText:g}});return this.shouldThrowOnError||(i=i.catch(l=>{var d;let u="";const f=l==null?void 0:l.cause;if(f){var m,g,v,b;const S=(m=f==null?void 0:f.message)!==null&&m!==void 0?m:"",E=(g=f==null?void 0:f.code)!==null&&g!==void 0?g:"";u=`${(v=l==null?void 0:l.name)!==null&&v!==void 0?v:"FetchError"}: ${l==null?void 0:l.message}`,u+=`

Caused by: ${(b=f==null?void 0:f.name)!==null&&b!==void 0?b:"Error"}: ${S}`,E&&(u+=` (${E})`),f!=null&&f.stack&&(u+=`
${f.stack}`)}else{var _;u=(_=l==null?void 0:l.stack)!==null&&_!==void 0?_:""}return{error:{message:`${(d=l==null?void 0:l.name)!==null&&d!==void 0?d:"FetchError"}: ${l==null?void 0:l.message}`,details:u,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),i.then(t,e)}returns(){return this}overrideTypes(){return this}},RE=class extends AE{select(t){let e=!1;const s=(t??"*").split("").map(n=>/\s/.test(n)&&!e?"":(n==='"'&&(e=!e),n)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:s,foreignTable:n,referencedTable:i=n}={}){const l=i?`${i}.order`:"order",d=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${d?`${d},`:""}${t}.${e?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:s=e}={}){const n=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(n,`${t}`),this}range(t,e,{foreignTable:s,referencedTable:n=s}={}){const i=typeof n>"u"?"offset":`${n}.offset`,l=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(l,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:s=!1,buffers:n=!1,wal:i=!1,format:l="text"}={}){var d;const u=[t?"analyze":null,e?"verbose":null,s?"settings":null,n?"buffers":null,i?"wal":null].filter(Boolean).join("|"),f=(d=this.headers.get("Accept"))!==null&&d!==void 0?d:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${l}; for="${f}"; options=${u};`),l==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const ly=new RegExp("[,()]");var io=class extends RE{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const s=Array.from(new Set(e)).map(n=>typeof n=="string"&&ly.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(t,`in.(${s})`),this}notIn(t,e){const s=Array.from(new Set(e)).map(n=>typeof n=="string"&&ly.test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(t,`not.in.(${s})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:s,type:n}={}){let i="";n==="plain"?i="pl":n==="phrase"?i="ph":n==="websearch"&&(i="w");const l=s===void 0?"":`(${s})`;return this.url.searchParams.append(t,`${i}fts${l}.${e}`),this}match(t){return Object.entries(t).forEach(([e,s])=>{this.url.searchParams.append(e,`eq.${s}`)}),this}not(t,e,s){return this.url.searchParams.append(t,`not.${e}.${s}`),this}or(t,{foreignTable:e,referencedTable:s=e}={}){const n=s?`${s}.or`:"or";return this.url.searchParams.append(n,`(${t})`),this}filter(t,e,s){return this.url.searchParams.append(t,`${e}.${s}`),this}},kE=class{constructor(t,{headers:e={},schema:s,fetch:n}){this.url=t,this.headers=new Headers(e),this.schema=s,this.fetch=n}select(t,e){const{head:s=!1,count:n}=e??{},i=s?"HEAD":"GET";let l=!1;const d=(t??"*").split("").map(u=>/\s/.test(u)&&!l?"":(u==='"'&&(l=!l),u)).join("");return this.url.searchParams.set("select",d),n&&this.headers.append("Prefer",`count=${n}`),new io({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:s=!0}={}){var n;const i="POST";if(e&&this.headers.append("Prefer",`count=${e}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const l=t.reduce((d,u)=>d.concat(Object.keys(u)),[]);if(l.length>0){const d=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",d.join(","))}}return new io({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:s=!1,count:n,defaultToNull:i=!0}={}){var l;const d="POST";if(this.headers.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),e!==void 0&&this.url.searchParams.set("on_conflict",e),n&&this.headers.append("Prefer",`count=${n}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const u=t.reduce((f,m)=>f.concat(Object.keys(m)),[]);if(u.length>0){const f=[...new Set(u)].map(m=>`"${m}"`);this.url.searchParams.set("columns",f.join(","))}}return new io({method:d,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}update(t,{count:e}={}){var s;const n="PATCH";return e&&this.headers.append("Prefer",`count=${e}`),new io({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}delete({count:t}={}){var e;const s="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new io({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},ME=class ww{constructor(e,{headers:s={},schema:n,fetch:i}={}){this.url=e,this.headers=new Headers(s),this.schemaName=n,this.fetch=i}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new kE(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new ww(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,s={},{head:n=!1,get:i=!1,count:l}={}){var d;let u;const f=new URL(`${this.url}/rpc/${e}`);let m;n||i?(u=n?"HEAD":"GET",Object.entries(s).filter(([v,b])=>b!==void 0).map(([v,b])=>[v,Array.isArray(b)?`{${b.join(",")}}`:`${b}`]).forEach(([v,b])=>{f.searchParams.append(v,b)})):(u="POST",m=s);const g=new Headers(this.headers);return l&&g.set("Prefer",`count=${l}`),new io({method:u,url:f,headers:g,schema:this.schemaName,body:m,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}};class IE{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const s=process.versions;if(s&&s.node){const n=s.node,i=parseInt(n.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let s=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(s+=`

Suggested solution: ${e.workaround}`),new Error(s)}static createWebSocket(e,s){const n=this.getWebSocketConstructor();return new n(e,s)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const DE="2.89.0",PE=`realtime-js/${DE}`,Nw="1.0.0",UE="2.0.0",cy=Nw,Lf=1e4,LE=1e3,OE=100;var In;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(In||(In={}));var Mt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Mt||(Mt={}));var la;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(la||(la={}));var Of;(function(t){t.websocket="websocket"})(Of||(Of={}));var ir;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(ir||(ir={}));class qE{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,s){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return s(this._binaryEncodeUserBroadcastPush(e));let n=[e.join_ref,e.ref,e.topic,e.event,e.payload];return s(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(e){var s;return this._isArrayBuffer((s=e.payload)===null||s===void 0?void 0:s.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var s,n;const i=(n=(s=e.payload)===null||s===void 0?void 0:s.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(e){var s,n;const i=(n=(s=e.payload)===null||s===void 0?void 0:s.payload)!==null&&n!==void 0?n:{},d=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,d)}_encodeUserBroadcastPush(e,s,n){var i,l;const d=e.topic,u=(i=e.ref)!==null&&i!==void 0?i:"",f=(l=e.join_ref)!==null&&l!==void 0?l:"",m=e.payload.event,g=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},v=Object.keys(g).length===0?"":JSON.stringify(g);if(f.length>255)throw new Error(`joinRef length ${f.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`ref length ${u.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`topic length ${d.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`userEvent length ${m.length} exceeds maximum of 255`);if(v.length>255)throw new Error(`metadata length ${v.length} exceeds maximum of 255`);const b=this.USER_BROADCAST_PUSH_META_LENGTH+f.length+u.length+d.length+m.length+v.length,_=new ArrayBuffer(this.HEADER_LENGTH+b);let S=new DataView(_),E=0;S.setUint8(E++,this.KINDS.userBroadcastPush),S.setUint8(E++,f.length),S.setUint8(E++,u.length),S.setUint8(E++,d.length),S.setUint8(E++,m.length),S.setUint8(E++,v.length),S.setUint8(E++,s),Array.from(f,T=>S.setUint8(E++,T.charCodeAt(0))),Array.from(u,T=>S.setUint8(E++,T.charCodeAt(0))),Array.from(d,T=>S.setUint8(E++,T.charCodeAt(0))),Array.from(m,T=>S.setUint8(E++,T.charCodeAt(0))),Array.from(v,T=>S.setUint8(E++,T.charCodeAt(0)));var C=new Uint8Array(_.byteLength+n.byteLength);return C.set(new Uint8Array(_),0),C.set(new Uint8Array(n),_.byteLength),C.buffer}decode(e,s){if(this._isArrayBuffer(e)){let n=this._binaryDecode(e);return s(n)}if(typeof e=="string"){const n=JSON.parse(e),[i,l,d,u,f]=n;return s({join_ref:i,ref:l,topic:d,event:u,payload:f})}return s({})}_binaryDecode(e){const s=new DataView(e),n=s.getUint8(0),i=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,s,i)}}_decodeUserBroadcast(e,s,n){const i=s.getUint8(1),l=s.getUint8(2),d=s.getUint8(3),u=s.getUint8(4);let f=this.HEADER_LENGTH+4;const m=n.decode(e.slice(f,f+i));f=f+i;const g=n.decode(e.slice(f,f+l));f=f+l;const v=n.decode(e.slice(f,f+d));f=f+d;const b=e.slice(f,e.byteLength),_=u===this.JSON_ENCODING?JSON.parse(n.decode(b)):b,S={type:this.BROADCAST_EVENT,event:g,payload:_};return d>0&&(S.meta=JSON.parse(v)),{join_ref:null,ref:null,topic:m,event:this.BROADCAST_EVENT,payload:S}}_isArrayBuffer(e){var s;return e instanceof ArrayBuffer||((s=e==null?void 0:e.constructor)===null||s===void 0?void 0:s.name)==="ArrayBuffer"}_pick(e,s){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([n])=>s.includes(n)))}}class _w{constructor(e,s){this.callback=e,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ct;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(ct||(ct={}));const dy=(t,e,s={})=>{var n;const i=(n=s.skipTypes)!==null&&n!==void 0?n:[];return e?Object.keys(e).reduce((l,d)=>(l[d]=BE(d,t,e,i),l),{}):{}},BE=(t,e,s,n)=>{const i=e.find(u=>u.name===t),l=i==null?void 0:i.type,d=s[t];return l&&!n.includes(l)?Sw(l,d):qf(d)},Sw=(t,e)=>{if(t.charAt(0)==="_"){const s=t.slice(1,t.length);return HE(e,s)}switch(t){case ct.bool:return $E(e);case ct.float4:case ct.float8:case ct.int2:case ct.int4:case ct.int8:case ct.numeric:case ct.oid:return zE(e);case ct.json:case ct.jsonb:return VE(e);case ct.timestamp:return GE(e);case ct.abstime:case ct.date:case ct.daterange:case ct.int4range:case ct.int8range:case ct.money:case ct.reltime:case ct.text:case ct.time:case ct.timestamptz:case ct.timetz:case ct.tsrange:case ct.tstzrange:return qf(e);default:return qf(e)}},qf=t=>t,$E=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},zE=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},VE=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},HE=(t,e)=>{if(typeof t!="string")return t;const s=t.length-1,n=t[s];if(t[0]==="{"&&n==="}"){let l;const d=t.slice(1,s);try{l=JSON.parse("["+d+"]")}catch{l=d?d.split(","):[]}return l.map(u=>Sw(e,u))}return t},GE=t=>typeof t=="string"?t.replace(" ","T"):t,jw=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Yh{constructor(e,s,n={},i=Lf){this.channel=e,this.event=s,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,s){var n;return this._hasReceived(e)&&s((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:s}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(s))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var uy;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(uy||(uy={}));class Gi{constructor(e,s){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:l,onLeave:d,onSync:u}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Gi.syncState(this.state,i,l,d),this.pendingDiffs.forEach(f=>{this.state=Gi.syncDiff(this.state,f,l,d)}),this.pendingDiffs=[],u()}),this.channel._on(n.diff,{},i=>{const{onJoin:l,onLeave:d,onSync:u}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Gi.syncDiff(this.state,i,l,d),u())}),this.onJoin((i,l,d)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:l,newPresences:d})}),this.onLeave((i,l,d)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:l,leftPresences:d})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,s,n,i){const l=this.cloneDeep(e),d=this.transformState(s),u={},f={};return this.map(l,(m,g)=>{d[m]||(f[m]=g)}),this.map(d,(m,g)=>{const v=l[m];if(v){const b=g.map(C=>C.presence_ref),_=v.map(C=>C.presence_ref),S=g.filter(C=>_.indexOf(C.presence_ref)<0),E=v.filter(C=>b.indexOf(C.presence_ref)<0);S.length>0&&(u[m]=S),E.length>0&&(f[m]=E)}else u[m]=g}),this.syncDiff(l,{joins:u,leaves:f},n,i)}static syncDiff(e,s,n,i){const{joins:l,leaves:d}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(l,(u,f)=>{var m;const g=(m=e[u])!==null&&m!==void 0?m:[];if(e[u]=this.cloneDeep(f),g.length>0){const v=e[u].map(_=>_.presence_ref),b=g.filter(_=>v.indexOf(_.presence_ref)<0);e[u].unshift(...b)}n(u,g,f)}),this.map(d,(u,f)=>{let m=e[u];if(!m)return;const g=f.map(v=>v.presence_ref);m=m.filter(v=>g.indexOf(v.presence_ref)<0),e[u]=m,i(u,m,f),m.length===0&&delete e[u]}),e}static map(e,s){return Object.getOwnPropertyNames(e).map(n=>s(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((s,n)=>{const i=e[n];return"metas"in i?s[n]=i.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):s[n]=i,s},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var hy;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(hy||(hy={}));var Fi;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Fi||(Fi={}));var Ya;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Ya||(Ya={}));class ho{constructor(e,s={config:{}},n){var i,l;if(this.topic=e,this.params=s,this.socket=n,this.bindings={},this.state=Mt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new Yh(this,la.join,this.params,this.timeout),this.rejoinTimer=new _w(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Mt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(d=>d.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Mt.closed,this.socket._remove(this)}),this._onError(d=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,d),this.state=Mt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Mt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",d=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,d),this.state=Mt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(la.reply,{},(d,u)=>{this._trigger(this._replyEventName(u),d)}),this.presence=new Gi(this),this.broadcastEndpointURL=jw(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((l=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||l===void 0)&&l.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,s=this.timeout){var n,i,l;if(this.socket.isConnected()||this.socket.connect(),this.state==Mt.closed){const{config:{broadcast:d,presence:u,private:f}}=this.params,m=(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(_=>_.filter))!==null&&i!==void 0?i:[],g=!!this.bindings[Fi.PRESENCE]&&this.bindings[Fi.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,v={},b={broadcast:d,presence:Object.assign(Object.assign({},u),{enabled:g}),postgres_changes:m,private:f};this.socket.accessTokenValue&&(v.access_token=this.socket.accessTokenValue),this._onError(_=>e==null?void 0:e(Ya.CHANNEL_ERROR,_)),this._onClose(()=>e==null?void 0:e(Ya.CLOSED)),this.updateJoinPayload(Object.assign({config:b},v)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:_})=>{var S;if(this.socket._isManualToken()||this.socket.setAuth(),_===void 0){e==null||e(Ya.SUBSCRIBED);return}else{const E=this.bindings.postgres_changes,C=(S=E==null?void 0:E.length)!==null&&S!==void 0?S:0,T=[];for(let R=0;R<C;R++){const A=E[R],{filter:{event:M,schema:z,table:F,filter:G}}=A,K=_&&_[R];if(K&&K.event===M&&ho.isFilterValueEqual(K.schema,z)&&ho.isFilterValueEqual(K.table,F)&&ho.isFilterValueEqual(K.filter,G))T.push(Object.assign(Object.assign({},A),{id:K.id}));else{this.unsubscribe(),this.state=Mt.errored,e==null||e(Ya.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=T,e&&e(Ya.SUBSCRIBED);return}}).receive("error",_=>{this.state=Mt.errored,e==null||e(Ya.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(_).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Ya.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,s={}){return await this.send({type:"presence",event:"track",payload:e},s.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,s,n){return this.state===Mt.joined&&e===Fi.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,s,n)}async httpSend(e,s,n={}){var i;if(s==null)return Promise.reject("Payload is required for httpSend()");const l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const d={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:s,private:this.private}]})},u=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);if(u.status===202)return{success:!0};let f=u.statusText;try{const m=await u.json();f=m.error||m.message||f}catch{}return Promise.reject(new Error(f))}async send(e,s={}){var n,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:l,payload:d}=e,u={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(u.Authorization=`Bearer ${this.socket.accessTokenValue}`);const f={method:"POST",headers:u,body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:d,private:this.private}]})};try{const m=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(n=s.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=m.body)===null||i===void 0?void 0:i.cancel()),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var d,u,f;const m=this._push(e.type,e,s.timeout||this.timeout);e.type==="broadcast"&&!(!((f=(u=(d=this.params)===null||d===void 0?void 0:d.config)===null||u===void 0?void 0:u.broadcast)===null||f===void 0)&&f.ack)&&l("ok"),m.receive("ok",()=>l("ok")),m.receive("error",()=>l("error")),m.receive("timeout",()=>l("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Mt.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(la.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(i=>{n=new Yh(this,la.leave,{},e),n.receive("ok",()=>{s(),i("ok")}).receive("timeout",()=>{s(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Mt.closed,this.bindings={}}async _fetchWithTimeout(e,s,n){const i=new AbortController,l=setTimeout(()=>i.abort(),n),d=await this.socket.fetch(e,Object.assign(Object.assign({},s),{signal:i.signal}));return clearTimeout(l),d}_push(e,s,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Yh(this,e,s,n);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>OE){const s=this.pushBuffer.shift();s&&(s.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${s.event}`,s.payload))}}_onMessage(e,s,n){return s}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,s,n){var i,l;const d=e.toLocaleLowerCase(),{close:u,error:f,leave:m,join:g}=la;if(n&&[u,f,m,g].indexOf(d)>=0&&n!==this._joinRef())return;let b=this._onMessage(d,s,n);if(s&&!b)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(d)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(_=>{var S,E,C;return((S=_.filter)===null||S===void 0?void 0:S.event)==="*"||((C=(E=_.filter)===null||E===void 0?void 0:E.event)===null||C===void 0?void 0:C.toLocaleLowerCase())===d}).map(_=>_.callback(b,n)):(l=this.bindings[d])===null||l===void 0||l.filter(_=>{var S,E,C,T,R,A;if(["broadcast","presence","postgres_changes"].includes(d))if("id"in _){const M=_.id,z=(S=_.filter)===null||S===void 0?void 0:S.event;return M&&((E=s.ids)===null||E===void 0?void 0:E.includes(M))&&(z==="*"||(z==null?void 0:z.toLocaleLowerCase())===((C=s.data)===null||C===void 0?void 0:C.type.toLocaleLowerCase()))}else{const M=(R=(T=_==null?void 0:_.filter)===null||T===void 0?void 0:T.event)===null||R===void 0?void 0:R.toLocaleLowerCase();return M==="*"||M===((A=s==null?void 0:s.event)===null||A===void 0?void 0:A.toLocaleLowerCase())}else return _.type.toLocaleLowerCase()===d}).map(_=>{if(typeof b=="object"&&"ids"in b){const S=b.data,{schema:E,table:C,commit_timestamp:T,type:R,errors:A}=S;b=Object.assign(Object.assign({},{schema:E,table:C,commit_timestamp:T,eventType:R,new:{},old:{},errors:A}),this._getPayloadRecords(S))}_.callback(b,n)})}_isClosed(){return this.state===Mt.closed}_isJoined(){return this.state===Mt.joined}_isJoining(){return this.state===Mt.joining}_isLeaving(){return this.state===Mt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,s,n){const i=e.toLocaleLowerCase(),l={type:i,filter:s,callback:n};return this.bindings[i]?this.bindings[i].push(l):this.bindings[i]=[l],this}_off(e,s){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(i=>{var l;return!(((l=i.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===n&&ho.isEqual(i.filter,s))})),this}static isEqual(e,s){if(Object.keys(e).length!==Object.keys(s).length)return!1;for(const n in e)if(e[n]!==s[n])return!1;return!0}static isFilterValueEqual(e,s){return(e??void 0)===(s??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(la.close,{},e)}_onError(e){this._on(la.error,{},s=>e(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Mt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const s={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(s.new=dy(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(s.old=dy(e.columns,e.old_record)),s}}const Wh=()=>{},jc={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},FE=[1e3,2e3,5e3,1e4],JE=1e4,KE=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class YE{constructor(e,s){var n;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Lf,this.transport=null,this.heartbeatIntervalMs=jc.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Wh,this.ref=0,this.reconnectTimer=null,this.vsn=cy,this.logger=Wh,this.conn=null,this.sendBuffer=[],this.serializer=new qE,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...l)=>i(...l):(...l)=>fetch(...l),!(!((n=s==null?void 0:s.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=s.params.apikey,this.endPoint=`${e}/${Of.websocket}`,this.httpEndpoint=jw(e),this._initializeOptions(s),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(s==null?void 0:s.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=IE.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const s=e.message;throw s.includes("Node.js")?new Error(`${s}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${s}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,s){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,s??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const s=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const e=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,s,n){this.logger(e,s,n)}connectionState(){switch(this.conn&&this.conn.readyState){case In.connecting:return ir.Connecting;case In.open:return ir.Open;case In.closing:return ir.Closing;default:return ir.Closed}}isConnected(){return this.connectionState()===ir.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,s={config:{}}){const n=`realtime:${e}`,i=this.getChannels().find(l=>l.topic===n);if(i)return i;{const l=new ho(`realtime:${e}`,s,this);return this.channels.push(l),l}}push(e){const{topic:s,event:n,payload:i,ref:l}=e,d=()=>{this.encode(e,u=>{var f;(f=this.conn)===null||f===void 0||f.send(u)})};this.log("push",`${s} ${n} (${l})`,i),this.isConnected()?d():this.sendBuffer.push(d)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(s){this.log("error","error in heartbeat callback",s)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(s){this.log("error","error in heartbeat callback",s)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(LE,"heartbeat timeout"),setTimeout(()=>{var s;this.isConnected()||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout()},jc.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(s){this.log("error","error in heartbeat callback",s)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let s=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${e}"`),s.unsubscribe())}_remove(e){this.channels=this.channels.filter(s=>s.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,s=>{if(s.topic==="phoenix"&&s.event==="phx_reply")try{this.heartbeatCallback(s.payload.status==="ok"?"ok":"error")}catch(m){this.log("error","error in heartbeat callback",m)}s.ref&&s.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:i,payload:l,ref:d}=s,u=d?`(${d})`:"",f=l.status||"";this.log("receive",`${f} ${n} ${i} ${u}`.trim(),l),this.channels.filter(m=>m._isMember(n)).forEach(m=>m._trigger(i,l,d)),this._triggerStateCallbacks("message",s)})}_clearTimer(e){var s;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((s=this.reconnectTimer)===null||s===void 0||s.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===In.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===In.open||this.conn.readyState===In.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(s=>{this.log("error","error waiting for auth on connect",s),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this._terminateWorker()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var s;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(la.error))}_appendParams(e,s){if(Object.keys(s).length===0)return e;const n=e.match(/\?/)?"&":"?",i=new URLSearchParams(s);return`${e}${n}${i}`}_workerObjectUrl(e){let s;if(e)s=e;else{const n=new Blob([KE],{type:"application/javascript"});s=URL.createObjectURL(n)}return s}_setConnectionState(e,s=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=s)}async _performAuth(e=null){let s,n=!1;if(e)s=e,n=!0;else if(this.accessToken)try{s=await this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),s=this.accessTokenValue}else s=this.accessTokenValue;n?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(i=>{const l={access_token:s,version:PE};s&&i.updateJoinPayload(l),i.joinedOnce&&i._isJoined()&&i._push(la.access_token,{access_token:s})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(s=>{this.log("error",`Error setting auth in ${e}`,s)})}_triggerStateCallbacks(e,s){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(s)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new _w(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},jc.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var s,n,i,l,d,u,f,m,g,v,b,_;switch(this.transport=(s=e==null?void 0:e.transport)!==null&&s!==void 0?s:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:Lf,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:jc.HEARTBEAT_INTERVAL,this.worker=(l=e==null?void 0:e.worker)!==null&&l!==void 0?l:!1,this.accessToken=(d=e==null?void 0:e.accessToken)!==null&&d!==void 0?d:null,this.heartbeatCallback=(u=e==null?void 0:e.heartbeatCallback)!==null&&u!==void 0?u:Wh,this.vsn=(f=e==null?void 0:e.vsn)!==null&&f!==void 0?f:cy,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(m=e==null?void 0:e.reconnectAfterMs)!==null&&m!==void 0?m:(S=>FE[S-1]||JE),this.vsn){case Nw:this.encode=(g=e==null?void 0:e.encode)!==null&&g!==void 0?g:((S,E)=>E(JSON.stringify(S))),this.decode=(v=e==null?void 0:e.decode)!==null&&v!==void 0?v:((S,E)=>E(JSON.parse(S)));break;case UE:this.encode=(b=e==null?void 0:e.encode)!==null&&b!==void 0?b:this.serializer.encode.bind(this.serializer),this.decode=(_=e==null?void 0:e.decode)!==null&&_!==void 0?_:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var Yi=class extends Error{constructor(t,e){var s;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((s=e.icebergType)==null?void 0:s.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function WE(t,e,s){const n=new URL(e,t);if(s)for(const[i,l]of Object.entries(s))l!==void 0&&n.searchParams.set(i,l);return n.toString()}async function XE(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function QE(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:s,path:n,query:i,body:l,headers:d}){const u=WE(t.baseUrl,n,i),f=await XE(t.auth),m=await e(u,{method:s,headers:{...l?{"Content-Type":"application/json"}:{},...f,...d},body:l?JSON.stringify(l):void 0}),g=await m.text(),v=(m.headers.get("content-type")||"").includes("application/json"),b=v&&g?JSON.parse(g):g;if(!m.ok){const _=v?b:void 0,S=_==null?void 0:_.error;throw new Yi((S==null?void 0:S.message)??`Request failed with status ${m.status}`,{status:m.status,icebergType:S==null?void 0:S.type,icebergCode:S==null?void 0:S.code,details:_})}return{status:m.status,headers:m.headers,data:b}}}}function Ec(t){return t.join("")}var ZE=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:Ec(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(t,e){const s={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:s})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Ec(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Ec(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Ec(t.namespace)}`}),!0}catch(e){if(e instanceof Yi&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(s){if(s instanceof Yi&&s.status===409)return;throw s}}};function eo(t){return t.join("")}var e2=class{constructor(t,e="",s){this.client=t,this.prefix=e,this.accessDelegation=s}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${eo(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const s={};return this.accessDelegation&&(s["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${eo(t.namespace)}/tables`,body:e,headers:s})).data.metadata}async updateTable(t,e){const s=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${eo(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":s.data["metadata-location"],metadata:s.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${eo(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${eo(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${eo(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(s){if(s instanceof Yi&&s.status===404)return!1;throw s}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(s){if(s instanceof Yi&&s.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw s}}},t2=class{constructor(t){var n;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const s=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=QE({baseUrl:s,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(n=t.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new ZE(this.client,e),this.tableOps=new e2(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},md=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function gt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var s2=class extends md{constructor(t,e,s){super(t),this.name="StorageApiError",this.status=e,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Bf=class extends md{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};const jm=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),a2=()=>Response,$f=t=>{if(Array.isArray(t))return t.map(s=>$f(s));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([s,n])=>{const i=s.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[i]=$f(n)}),e},n2=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},r2=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function Wi(t){"@babel/helpers - typeof";return Wi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wi(t)}function o2(t,e){if(Wi(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,e);if(Wi(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function i2(t){var e=o2(t,"string");return Wi(e)=="symbol"?e:e+""}function l2(t,e,s){return(e=i2(e))in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function fy(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),s.push.apply(s,n)}return s}function Te(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?fy(Object(s),!0).forEach(function(n){l2(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):fy(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}const Xh=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},c2=async(t,e,s)=>{t instanceof await a2()&&!(s!=null&&s.noResolveJson)?t.json().then(n=>{const i=t.status||500,l=(n==null?void 0:n.statusCode)||i+"";e(new s2(Xh(n),i,l))}).catch(n=>{e(new Bf(Xh(n),n))}):e(new Bf(Xh(t),t))},d2=(t,e,s,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!n?i:(n2(n)?(i.headers=Te({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(n)):i.body=n,e!=null&&e.duplex&&(i.duplex=e.duplex),Te(Te({},i),s))};async function rl(t,e,s,n,i,l){return new Promise((d,u)=>{t(s,d2(e,n,i,l)).then(f=>{if(!f.ok)throw f;return n!=null&&n.noResolveJson?f:f.json()}).then(f=>d(f)).catch(f=>c2(f,u,n))})}async function Xi(t,e,s,n){return rl(t,"GET",e,s,n)}async function ia(t,e,s,n,i){return rl(t,"POST",e,n,i,s)}async function zf(t,e,s,n,i){return rl(t,"PUT",e,n,i,s)}async function u2(t,e,s,n){return rl(t,"HEAD",e,Te(Te({},s),{},{noResolveJson:!0}),n)}async function Em(t,e,s,n,i){return rl(t,"DELETE",e,n,i,s)}var h2=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(gt(e))return{data:null,error:e};throw e}}};let Ew;Ew=Symbol.toStringTag;var f2=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[Ew]="BlobDownloadBuilder",this.promise=null}asStream(){return new h2(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(gt(e))return{data:null,error:e};throw e}}};const m2={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},my={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var p2=class{constructor(t,e={},s,n){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.bucketId=s,this.fetch=jm(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(t,e,s,n){var i=this;try{let l;const d=Te(Te({},my),n);let u=Te(Te({},i.headers),t==="POST"&&{"x-upsert":String(d.upsert)});const f=d.metadata;typeof Blob<"u"&&s instanceof Blob?(l=new FormData,l.append("cacheControl",d.cacheControl),f&&l.append("metadata",i.encodeMetadata(f)),l.append("",s)):typeof FormData<"u"&&s instanceof FormData?(l=s,l.has("cacheControl")||l.append("cacheControl",d.cacheControl),f&&!l.has("metadata")&&l.append("metadata",i.encodeMetadata(f))):(l=s,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType,f&&(u["x-metadata"]=i.toBase64(i.encodeMetadata(f))),(typeof ReadableStream<"u"&&l instanceof ReadableStream||l&&typeof l=="object"&&"pipe"in l&&typeof l.pipe=="function")&&!d.duplex&&(d.duplex="half")),n!=null&&n.headers&&(u=Te(Te({},u),n.headers));const m=i._removeEmptyFolders(e),g=i._getFinalPath(m),v=await(t=="PUT"?zf:ia)(i.fetch,`${i.url}/object/${g}`,l,Te({headers:u},d!=null&&d.duplex?{duplex:d.duplex}:{}));return{data:{path:m,id:v.Id,fullPath:v.Key},error:null}}catch(l){if(i.shouldThrowOnError)throw l;if(gt(l))return{data:null,error:l};throw l}}async upload(t,e,s){return this.uploadOrUpdate("POST",t,e,s)}async uploadToSignedUrl(t,e,s,n){var i=this;const l=i._removeEmptyFolders(t),d=i._getFinalPath(l),u=new URL(i.url+`/object/upload/sign/${d}`);u.searchParams.set("token",e);try{let f;const m=Te({upsert:my.upsert},n),g=Te(Te({},i.headers),{"x-upsert":String(m.upsert)});return typeof Blob<"u"&&s instanceof Blob?(f=new FormData,f.append("cacheControl",m.cacheControl),f.append("",s)):typeof FormData<"u"&&s instanceof FormData?(f=s,f.append("cacheControl",m.cacheControl)):(f=s,g["cache-control"]=`max-age=${m.cacheControl}`,g["content-type"]=m.contentType),{data:{path:l,fullPath:(await zf(i.fetch,u.toString(),f,{headers:g})).Key},error:null}}catch(f){if(i.shouldThrowOnError)throw f;if(gt(f))return{data:null,error:f};throw f}}async createSignedUploadUrl(t,e){var s=this;try{let n=s._getFinalPath(t);const i=Te({},s.headers);e!=null&&e.upsert&&(i["x-upsert"]="true");const l=await ia(s.fetch,`${s.url}/object/upload/sign/${n}`,{},{headers:i}),d=new URL(s.url+l.url),u=d.searchParams.get("token");if(!u)throw new md("No token returned by API");return{data:{signedUrl:d.toString(),path:t,token:u},error:null}}catch(n){if(s.shouldThrowOnError)throw n;if(gt(n))return{data:null,error:n};throw n}}async update(t,e,s){return this.uploadOrUpdate("PUT",t,e,s)}async move(t,e,s){var n=this;try{return{data:await ia(n.fetch,`${n.url}/object/move`,{bucketId:n.bucketId,sourceKey:t,destinationKey:e,destinationBucket:s==null?void 0:s.destinationBucket},{headers:n.headers}),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(gt(i))return{data:null,error:i};throw i}}async copy(t,e,s){var n=this;try{return{data:{path:(await ia(n.fetch,`${n.url}/object/copy`,{bucketId:n.bucketId,sourceKey:t,destinationKey:e,destinationBucket:s==null?void 0:s.destinationBucket},{headers:n.headers})).Key},error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(gt(i))return{data:null,error:i};throw i}}async createSignedUrl(t,e,s){var n=this;try{let i=n._getFinalPath(t),l=await ia(n.fetch,`${n.url}/object/sign/${i}`,Te({expiresIn:e},s!=null&&s.transform?{transform:s.transform}:{}),{headers:n.headers});const d=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return l={signedUrl:encodeURI(`${n.url}${l.signedURL}${d}`)},{data:l,error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(gt(i))return{data:null,error:i};throw i}}async createSignedUrls(t,e,s){var n=this;try{const i=await ia(n.fetch,`${n.url}/object/sign/${n.bucketId}`,{expiresIn:e,paths:t},{headers:n.headers}),l=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{data:i.map(d=>Te(Te({},d),{},{signedUrl:d.signedURL?encodeURI(`${n.url}${d.signedURL}${l}`):null})),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(gt(i))return{data:null,error:i};throw i}}download(t,e){const s=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",n=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),i=n?`?${n}`:"",l=this._getFinalPath(t),d=()=>Xi(this.fetch,`${this.url}/${s}/${l}${i}`,{headers:this.headers,noResolveJson:!0});return new f2(d,this.shouldThrowOnError)}async info(t){var e=this;const s=e._getFinalPath(t);try{return{data:$f(await Xi(e.fetch,`${e.url}/object/info/${s}`,{headers:e.headers})),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(gt(n))return{data:null,error:n};throw n}}async exists(t){var e=this;const s=e._getFinalPath(t);try{return await u2(e.fetch,`${e.url}/object/${s}`,{headers:e.headers}),{data:!0,error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(gt(n)&&n instanceof Bf){const i=n.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:n}}throw n}}getPublicUrl(t,e){const s=this._getFinalPath(t),n=[],i=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";i!==""&&n.push(i);const l=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",d=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});d!==""&&n.push(d);let u=n.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${s}${u}`)}}}async remove(t){var e=this;try{return{data:await Em(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(gt(s))return{data:null,error:s};throw s}}async list(t,e,s){var n=this;try{const i=Te(Te(Te({},m2),e),{},{prefix:t||""});return{data:await ia(n.fetch,`${n.url}/object/list/${n.bucketId}`,i,{headers:n.headers},s),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(gt(i))return{data:null,error:i};throw i}}async listV2(t,e){var s=this;try{const n=Te({},t);return{data:await ia(s.fetch,`${s.url}/object/list-v2/${s.bucketId}`,n,{headers:s.headers},e),error:null}}catch(n){if(s.shouldThrowOnError)throw n;if(gt(n))return{data:null,error:n};throw n}}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const Cw="2.89.0",Tw={"X-Client-Info":`storage-js/${Cw}`};var g2=class{constructor(t,e={},s,n){this.shouldThrowOnError=!1;const i=new URL(t);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Te(Te({},Tw),e),this.fetch=jm(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(t){var e=this;try{const s=e.listBucketOptionsToQueryString(t);return{data:await Xi(e.fetch,`${e.url}/bucket${s}`,{headers:e.headers}),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(gt(s))return{data:null,error:s};throw s}}async getBucket(t){var e=this;try{return{data:await Xi(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(gt(s))return{data:null,error:s};throw s}}async createBucket(t,e={public:!1}){var s=this;try{return{data:await ia(s.fetch,`${s.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:s.headers}),error:null}}catch(n){if(s.shouldThrowOnError)throw n;if(gt(n))return{data:null,error:n};throw n}}async updateBucket(t,e){var s=this;try{return{data:await zf(s.fetch,`${s.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:s.headers}),error:null}}catch(n){if(s.shouldThrowOnError)throw n;if(gt(n))return{data:null,error:n};throw n}}async emptyBucket(t){var e=this;try{return{data:await ia(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(gt(s))return{data:null,error:s};throw s}}async deleteBucket(t){var e=this;try{return{data:await Em(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(gt(s))return{data:null,error:s};throw s}}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},x2=class{constructor(t,e={},s){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Te(Te({},Tw),e),this.fetch=jm(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await ia(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(gt(s))return{data:null,error:s};throw s}}async listBuckets(t){var e=this;try{const s=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&s.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&s.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&s.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&s.set("sortOrder",t.sortOrder),t!=null&&t.search&&s.set("search",t.search);const n=s.toString(),i=n?`${e.url}/bucket?${n}`:`${e.url}/bucket`;return{data:await Xi(e.fetch,i,{headers:e.headers}),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(gt(s))return{data:null,error:s};throw s}}async deleteBucket(t){var e=this;try{return{data:await Em(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(gt(s))return{data:null,error:s};throw s}}from(t){var e=this;if(!r2(t))throw new md("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const s=new t2({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),n=this.shouldThrowOnError;return new Proxy(s,{get(i,l){const d=i[l];return typeof d!="function"?d:async(...u)=>{try{return{data:await d.apply(i,u),error:null}}catch(f){if(n)throw f;return{data:null,error:f}}}}})}};const Cm={"X-Client-Info":`storage-js/${Cw}`,"Content-Type":"application/json"};var Aw=class extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function Cs(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}var Qh=class extends Aw{constructor(t,e,s){super(t),this.name="StorageVectorsApiError",this.status=e,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},y2=class extends Aw{constructor(t,e){super(t),this.name="StorageVectorsUnknownError",this.originalError=e}};const Tm=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),v2=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},py=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),b2=async(t,e,s)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(s!=null&&s.noResolveJson)){const n=t.status||500,i=t;if(typeof i.json=="function")i.json().then(l=>{const d=(l==null?void 0:l.statusCode)||(l==null?void 0:l.code)||n+"";e(new Qh(py(l),n,d))}).catch(()=>{const l=n+"";e(new Qh(i.statusText||`HTTP ${n} error`,n,l))});else{const l=n+"";e(new Qh(i.statusText||`HTTP ${n} error`,n,l))}}else e(new y2(py(t),t))},w2=(t,e,s,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return n?(v2(n)?(i.headers=Te({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(n)):i.body=n,Te(Te({},i),s)):i};async function N2(t,e,s,n,i,l){return new Promise((d,u)=>{t(s,w2(e,n,i,l)).then(f=>{if(!f.ok)throw f;if(n!=null&&n.noResolveJson)return f;const m=f.headers.get("content-type");return!m||!m.includes("application/json")?{}:f.json()}).then(f=>d(f)).catch(f=>b2(f,u,n))})}async function Ts(t,e,s,n,i){return N2(t,"POST",e,n,i,s)}var _2=class{constructor(t,e={},s){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Te(Te({},Cm),e),this.fetch=Tm(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(t){var e=this;try{return{data:await Ts(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{},error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(Cs(s))return{data:null,error:s};throw s}}async getIndex(t,e){var s=this;try{return{data:await Ts(s.fetch,`${s.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:s.headers}),error:null}}catch(n){if(s.shouldThrowOnError)throw n;if(Cs(n))return{data:null,error:n};throw n}}async listIndexes(t){var e=this;try{return{data:await Ts(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(Cs(s))return{data:null,error:s};throw s}}async deleteIndex(t,e){var s=this;try{return{data:await Ts(s.fetch,`${s.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:s.headers})||{},error:null}}catch(n){if(s.shouldThrowOnError)throw n;if(Cs(n))return{data:null,error:n};throw n}}},S2=class{constructor(t,e={},s){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Te(Te({},Cm),e),this.fetch=Tm(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(t){var e=this;try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await Ts(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{},error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(Cs(s))return{data:null,error:s};throw s}}async getVectors(t){var e=this;try{return{data:await Ts(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(Cs(s))return{data:null,error:s};throw s}}async listVectors(t){var e=this;try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:await Ts(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(Cs(s))return{data:null,error:s};throw s}}async queryVectors(t){var e=this;try{return{data:await Ts(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(Cs(s))return{data:null,error:s};throw s}}async deleteVectors(t){var e=this;try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await Ts(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{},error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(Cs(s))return{data:null,error:s};throw s}}},j2=class{constructor(t,e={},s){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Te(Te({},Cm),e),this.fetch=Tm(s)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await Ts(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(Cs(s))return{data:null,error:s};throw s}}async getBucket(t){var e=this;try{return{data:await Ts(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(Cs(s))return{data:null,error:s};throw s}}async listBuckets(t={}){var e=this;try{return{data:await Ts(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}),error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(Cs(s))return{data:null,error:s};throw s}}async deleteBucket(t){var e=this;try{return{data:await Ts(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(s){if(e.shouldThrowOnError)throw s;if(Cs(s))return{data:null,error:s};throw s}}},E2=class extends j2{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new C2(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,s=this;return e().call(s,t)}async getBucket(t){var e=()=>super.getBucket,s=this;return e().call(s,t)}async listBuckets(t={}){var e=()=>super.listBuckets,s=this;return e().call(s,t)}async deleteBucket(t){var e=()=>super.deleteBucket,s=this;return e().call(s,t)}},C2=class extends _2{constructor(t,e,s,n){super(t,e,n),this.vectorBucketName=s}async createIndex(t){var e=()=>super.createIndex,s=this;return e().call(s,Te(Te({},t),{},{vectorBucketName:s.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,s=this;return e().call(s,Te(Te({},t),{},{vectorBucketName:s.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,s=this;return e().call(s,s.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,s=this;return e().call(s,s.vectorBucketName,t)}index(t){return new T2(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},T2=class extends S2{constructor(t,e,s,n,i){super(t,e,i),this.vectorBucketName=s,this.indexName=n}async putVectors(t){var e=()=>super.putVectors,s=this;return e().call(s,Te(Te({},t),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async getVectors(t){var e=()=>super.getVectors,s=this;return e().call(s,Te(Te({},t),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,s=this;return e().call(s,Te(Te({},t),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,s=this;return e().call(s,Te(Te({},t),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,s=this;return e().call(s,Te(Te({},t),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}},A2=class extends g2{constructor(t,e={},s,n){super(t,e,s,n)}from(t){return new p2(this.url,this.headers,t,this.fetch)}get vectors(){return new E2(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new x2(this.url+"/iceberg",this.headers,this.fetch)}};const Rw="2.89.0",lo=30*1e3,Vf=3,Zh=Vf*lo,R2="http://localhost:9999",k2="supabase.auth.token",M2={"X-Client-Info":`gotrue-js/${Rw}`},Hf="X-Supabase-Api-Version",kw={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},I2=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,D2=600*1e3;class Qi extends Error{constructor(e,s,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=n}}function ve(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class P2 extends Qi{constructor(e,s,n){super(e,s,n),this.name="AuthApiError",this.status=s,this.code=n}}function U2(t){return ve(t)&&t.name==="AuthApiError"}class lr extends Qi{constructor(e,s){super(e),this.name="AuthUnknownError",this.originalError=s}}class an extends Qi{constructor(e,s,n,i){super(e,n,i),this.name=s,this.status=n}}class Es extends an{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function L2(t){return ve(t)&&t.name==="AuthSessionMissingError"}class to extends an{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Cc extends an{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Tc extends an{constructor(e,s=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function O2(t){return ve(t)&&t.name==="AuthImplicitGrantRedirectError"}class gy extends an{constructor(e,s=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class q2 extends an{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Gf extends an{constructor(e,s){super(e,"AuthRetryableFetchError",s,void 0)}}function ef(t){return ve(t)&&t.name==="AuthRetryableFetchError"}class xy extends an{constructor(e,s,n){super(e,"AuthWeakPasswordError",s,"weak_password"),this.reasons=n}}class Ff extends an{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Zc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),yy=` 	
\r=`.split(""),B2=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<yy.length;e+=1)t[yy[e].charCodeAt(0)]=-2;for(let e=0;e<Zc.length;e+=1)t[Zc[e].charCodeAt(0)]=e;return t})();function vy(t,e,s){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;s(Zc[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;s(Zc[n]),e.queuedBits-=6}}function Mw(t,e,s){const n=B2[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)s(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function by(t){const e=[],s=d=>{e.push(String.fromCodePoint(d))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},l=d=>{V2(d,n,s)};for(let d=0;d<t.length;d+=1)Mw(t.charCodeAt(d),i,l);return e.join("")}function $2(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function z2(t,e){for(let s=0;s<t.length;s+=1){let n=t.charCodeAt(s);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(t.charCodeAt(s+1)-56320&65535|i)+65536,s+=1}$2(n,e)}}function V2(t,e,s){if(e.utf8seq===0){if(t<=127){s(t);return}for(let n=1;n<6;n+=1)if((t>>7-n&1)===0){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&s(e.codepoint)}}function po(t){const e=[],s={queue:0,queuedBits:0},n=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)Mw(t.charCodeAt(i),s,n);return new Uint8Array(e)}function H2(t){const e=[];return z2(t,s=>e.push(s)),new Uint8Array(e)}function cr(t){const e=[],s={queue:0,queuedBits:0},n=i=>{e.push(i)};return t.forEach(i=>vy(i,s,n)),vy(null,s,n),e.join("")}function G2(t){return Math.round(Date.now()/1e3)+t}function F2(){return Symbol("auth-callback")}const Gt=()=>typeof window<"u"&&typeof document<"u",ar={tested:!1,writable:!1},Iw=()=>{if(!Gt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ar.tested)return ar.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),ar.tested=!0,ar.writable=!0}catch{ar.tested=!0,ar.writable=!1}return ar.writable};function J2(t){const e={},s=new URL(t);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((i,l)=>{e[l]=i})}catch{}return s.searchParams.forEach((n,i)=>{e[i]=n}),e}const Dw=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),K2=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",co=async(t,e,s)=>{await t.setItem(e,JSON.stringify(s))},nr=async(t,e)=>{const s=await t.getItem(e);if(!s)return null;try{return JSON.parse(s)}catch{return s}},Ht=async(t,e)=>{await t.removeItem(e)};class pd{constructor(){this.promise=new pd.promiseConstructor((e,s)=>{this.resolve=e,this.reject=s})}}pd.promiseConstructor=Promise;function tf(t){const e=t.split(".");if(e.length!==3)throw new Ff("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!I2.test(e[n]))throw new Ff("JWT not in base64url format");return{header:JSON.parse(by(e[0])),payload:JSON.parse(by(e[1])),signature:po(e[2]),raw:{header:e[0],payload:e[1]}}}async function Y2(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function W2(t,e){return new Promise((n,i)=>{(async()=>{for(let l=0;l<1/0;l++)try{const d=await t(l);if(!e(l,null,d)){n(d);return}}catch(d){if(!e(l,d)){i(d);return}}})()})}function X2(t){return("0"+t.toString(16)).substr(-2)}function Q2(){const e=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=s.length;let i="";for(let l=0;l<56;l++)i+=s.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(e),Array.from(e,X2).join("")}async function Z2(t){const s=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",s),i=new Uint8Array(n);return Array.from(i).map(l=>String.fromCharCode(l)).join("")}async function eC(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const s=await Z2(t);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function so(t,e,s=!1){const n=Q2();let i=n;s&&(i+="/PASSWORD_RECOVERY"),await co(t,`${e}-code-verifier`,i);const l=await eC(n);return[l,n===l?"plain":"s256"]}const tC=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function sC(t){const e=t.headers.get(Hf);if(!e||!e.match(tC))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function aC(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function nC(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const rC=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ao(t){if(!rC.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function sf(){const t={};return new Proxy(t,{get:(e,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const n=s.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function oC(t,e){return new Proxy(t,{get:(s,n,i)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const l=n.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)"||l==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(s,n,i)}return!e.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(s,n,i)}})}function wy(t){return JSON.parse(JSON.stringify(t))}const rr=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),iC=[502,503,504];async function Ny(t){var e;if(!K2(t))throw new Gf(rr(t),0);if(iC.includes(t.status))throw new Gf(rr(t),t.status);let s;try{s=await t.json()}catch(l){throw new lr(rr(l),l)}let n;const i=sC(t);if(i&&i.getTime()>=kw["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?n=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(n=s.error_code),n){if(n==="weak_password")throw new xy(rr(s),t.status,((e=s.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Es}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((l,d)=>l&&typeof d=="string",!0))throw new xy(rr(s),t.status,s.weak_password.reasons);throw new P2(rr(s),t.status||500,n)}const lC=(t,e,s,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),s))};async function Ce(t,e,s,n){var i;const l=Object.assign({},n==null?void 0:n.headers);l[Hf]||(l[Hf]=kw["2024-01-01"].name),n!=null&&n.jwt&&(l.Authorization=`Bearer ${n.jwt}`);const d=(i=n==null?void 0:n.query)!==null&&i!==void 0?i:{};n!=null&&n.redirectTo&&(d.redirect_to=n.redirectTo);const u=Object.keys(d).length?"?"+new URLSearchParams(d).toString():"",f=await cC(t,e,s+u,{headers:l,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(f):{data:Object.assign({},f),error:null}}async function cC(t,e,s,n,i,l){const d=lC(e,n,i,l);let u;try{u=await t(s,Object.assign({},d))}catch(f){throw console.error(f),new Gf(rr(f),0)}if(u.ok||await Ny(u),n!=null&&n.noResolveJson)return u;try{return await u.json()}catch(f){await Ny(f)}}function oa(t){var e;let s=null;hC(t)&&(s=Object.assign({},t),t.expires_at||(s.expires_at=G2(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:s,user:n},error:null}}function _y(t){const e=oa(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((s,n)=>s&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Dn(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function dC(t){return{data:t,error:null}}function uC(t){const{action_link:e,email_otp:s,hashed_token:n,redirect_to:i,verification_type:l}=t,d=fd(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),u={action_link:e,email_otp:s,hashed_token:n,redirect_to:i,verification_type:l},f=Object.assign({},d);return{data:{properties:u,user:f},error:null}}function Sy(t){return t}function hC(t){return t.access_token&&t.refresh_token&&t.expires_in}const af=["global","local","others"];class fC{constructor({url:e="",headers:s={},fetch:n}){this.url=e,this.headers=s,this.fetch=Dw(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,s=af[0]){if(af.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${af.join(", ")}`);try{return await Ce(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ve(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,s={}){try{return await Ce(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:Dn})}catch(n){if(ve(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:s}=e,n=fd(e,["options"]),i=Object.assign(Object.assign({},n),s);return"newEmail"in n&&(i.new_email=n==null?void 0:n.newEmail,delete i.newEmail),await Ce(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:uC,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(ve(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(e){try{return await Ce(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Dn})}catch(s){if(ve(s))return{data:{user:null},error:s};throw s}}async listUsers(e){var s,n,i,l,d,u,f;try{const m={nextPage:null,lastPage:0,total:0},g=await Ce(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(s=e==null?void 0:e.page)===null||s===void 0?void 0:s.toString())!==null&&n!==void 0?n:"",per_page:(l=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&l!==void 0?l:""},xform:Sy});if(g.error)throw g.error;const v=await g.json(),b=(d=g.headers.get("x-total-count"))!==null&&d!==void 0?d:0,_=(f=(u=g.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&f!==void 0?f:[];return _.length>0&&(_.forEach(S=>{const E=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(S.split(";")[1].split("=")[1]);m[`${C}Page`]=E}),m.total=parseInt(b)),{data:Object.assign(Object.assign({},v),m),error:null}}catch(m){if(ve(m))return{data:{users:[]},error:m};throw m}}async getUserById(e){ao(e);try{return await Ce(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Dn})}catch(s){if(ve(s))return{data:{user:null},error:s};throw s}}async updateUserById(e,s){ao(e);try{return await Ce(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:s,headers:this.headers,xform:Dn})}catch(n){if(ve(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,s=!1){ao(e);try{return await Ce(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:s},xform:Dn})}catch(n){if(ve(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){ao(e.userId);try{const{data:s,error:n}=await Ce(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:s,error:n}}catch(s){if(ve(s))return{data:null,error:s};throw s}}async _deleteFactor(e){ao(e.userId),ao(e.id);try{return{data:await Ce(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(s){if(ve(s))return{data:null,error:s};throw s}}async _listOAuthClients(e){var s,n,i,l,d,u,f;try{const m={nextPage:null,lastPage:0,total:0},g=await Ce(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(s=e==null?void 0:e.page)===null||s===void 0?void 0:s.toString())!==null&&n!==void 0?n:"",per_page:(l=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&l!==void 0?l:""},xform:Sy});if(g.error)throw g.error;const v=await g.json(),b=(d=g.headers.get("x-total-count"))!==null&&d!==void 0?d:0,_=(f=(u=g.headers.get("link"))===null||u===void 0?void 0:u.split(","))!==null&&f!==void 0?f:[];return _.length>0&&(_.forEach(S=>{const E=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(S.split(";")[1].split("=")[1]);m[`${C}Page`]=E}),m.total=parseInt(b)),{data:Object.assign(Object.assign({},v),m),error:null}}catch(m){if(ve(m))return{data:{clients:[]},error:m};throw m}}async _createOAuthClient(e){try{return await Ce(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(ve(s))return{data:null,error:s};throw s}}async _getOAuthClient(e){try{return await Ce(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(ve(s))return{data:null,error:s};throw s}}async _updateOAuthClient(e,s){try{return await Ce(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:s,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ve(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await Ce(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(s){if(ve(s))return{data:null,error:s};throw s}}async _regenerateOAuthClientSecret(e){try{return await Ce(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(ve(s))return{data:null,error:s};throw s}}}function jy(t={}){return{getItem:e=>t[e]||null,setItem:(e,s)=>{t[e]=s},removeItem:e=>{delete t[e]}}}const no={debug:!!(globalThis&&Iw()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Pw extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class mC extends Pw{}async function pC(t,e,s){no.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),no.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){no.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await s()}finally{no.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw no.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new mC(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(no.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}function gC(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Uw(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function xC(t){return parseInt(t,16)}function yC(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}function vC(t){var e;const{chainId:s,domain:n,expirationTime:i,issuedAt:l=new Date,nonce:d,notBefore:u,requestId:f,resources:m,scheme:g,uri:v,version:b}=t;{if(!Number.isInteger(s))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${s}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(d&&d.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${d}`);if(!v)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(b!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${b}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const _=Uw(t.address),S=g?`${g}://${n}`:n,E=t.statement?`${t.statement}
`:"",C=`${S} wants you to sign in with your Ethereum account:
${_}

${E}`;let T=`URI: ${v}
Version: ${b}
Chain ID: ${s}${d?`
Nonce: ${d}`:""}
Issued At: ${l.toISOString()}`;if(i&&(T+=`
Expiration Time: ${i.toISOString()}`),u&&(T+=`
Not Before: ${u.toISOString()}`),f&&(T+=`
Request ID: ${f}`),m){let R=`
Resources:`;for(const A of m){if(!A||typeof A!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${A}`);R+=`
- ${A}`}T+=R}return`${C}
${T}`}class Tt extends Error{constructor({message:e,code:s,cause:n,name:i}){var l;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=(l=i??(n instanceof Error?n.name:void 0))!==null&&l!==void 0?l:"Unknown Error",this.code=s}}class ed extends Tt{constructor(e,s){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s,message:e}),this.name="WebAuthnUnknownError",this.originalError=s}}function bC({error:t,options:e}){var s,n,i;const{publicKey:l}=e;if(!l)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Tt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((s=l.authenticatorSelection)===null||s===void 0?void 0:s.requireResidentKey)===!0)return new Tt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((n=l.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new Tt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=l.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Tt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Tt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Tt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return l.pubKeyCredParams.filter(u=>u.type==="public-key").length===0?new Tt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Tt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const d=window.location.hostname;if(Lw(d)){if(l.rp.id!==d)return new Tt({message:`The RP ID "${l.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Tt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(l.user.id.byteLength<1||l.user.id.byteLength>64)return new Tt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Tt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Tt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function wC({error:t,options:e}){const{publicKey:s}=e;if(!s)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Tt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Tt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const n=window.location.hostname;if(Lw(n)){if(s.rpId!==n)return new Tt({message:`The RP ID "${s.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Tt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Tt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Tt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class NC{createNewAbortSignal(){if(this.controller){const s=new Error("Cancelling existing WebAuthn API call for new one");s.name="AbortError",this.controller.abort(s)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const _C=new NC;function SC(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:s,excludeCredentials:n}=t,i=fd(t,["challenge","user","excludeCredentials"]),l=po(e).buffer,d=Object.assign(Object.assign({},s),{id:po(s.id).buffer}),u=Object.assign(Object.assign({},i),{challenge:l,user:d});if(n&&n.length>0){u.excludeCredentials=new Array(n.length);for(let f=0;f<n.length;f++){const m=n[f];u.excludeCredentials[f]=Object.assign(Object.assign({},m),{id:po(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return u}function jC(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:s}=t,n=fd(t,["challenge","allowCredentials"]),i=po(e).buffer,l=Object.assign(Object.assign({},n),{challenge:i});if(s&&s.length>0){l.allowCredentials=new Array(s.length);for(let d=0;d<s.length;d++){const u=s[d];l.allowCredentials[d]=Object.assign(Object.assign({},u),{id:po(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return l}function EC(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const s=t;return{id:t.id,rawId:t.id,response:{attestationObject:cr(new Uint8Array(t.response.attestationObject)),clientDataJSON:cr(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=s.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function CC(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const s=t,n=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:cr(new Uint8Array(i.authenticatorData)),clientDataJSON:cr(new Uint8Array(i.clientDataJSON)),signature:cr(new Uint8Array(i.signature)),userHandle:i.userHandle?cr(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(e=s.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Lw(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function Ey(){var t,e;return!!(Gt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function TC(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new ed("Browser returned unexpected credential type",e)}:{data:null,error:new ed("Empty credential response",e)}}catch(e){return{data:null,error:bC({error:e,options:t})}}}async function AC(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new ed("Browser returned unexpected credential type",e)}:{data:null,error:new ed("Empty credential response",e)}}catch(e){return{data:null,error:wC({error:e,options:t})}}}const RC={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},kC={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function td(...t){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),s=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),n={};for(const i of t)if(i)for(const l in i){const d=i[l];if(d!==void 0)if(Array.isArray(d))n[l]=d;else if(s(d))n[l]=d;else if(e(d)){const u=n[l];e(u)?n[l]=td(u,d):n[l]=td(d)}else n[l]=d}return n}function MC(t,e){return td(RC,t,e||{})}function IC(t,e){return td(kC,t,e||{})}class DC{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:s,friendlyName:n,signal:i},l){try{const{data:d,error:u}=await this.client.mfa.challenge({factorId:e,webauthn:s});if(!d)return{data:null,error:u};const f=i??_C.createNewAbortSignal();if(d.webauthn.type==="create"){const{user:m}=d.webauthn.credential_options.publicKey;m.name||(m.name=`${m.id}:${n}`),m.displayName||(m.displayName=m.name)}switch(d.webauthn.type){case"create":{const m=MC(d.webauthn.credential_options.publicKey,l==null?void 0:l.create),{data:g,error:v}=await TC({publicKey:m,signal:f});return g?{data:{factorId:e,challengeId:d.id,webauthn:{type:d.webauthn.type,credential_response:g}},error:null}:{data:null,error:v}}case"request":{const m=IC(d.webauthn.credential_options.publicKey,l==null?void 0:l.request),{data:g,error:v}=await AC(Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:m,signal:f}));return g?{data:{factorId:e,challengeId:d.id,webauthn:{type:d.webauthn.type,credential_response:g}},error:null}:{data:null,error:v}}}}catch(d){return ve(d)?{data:null,error:d}:{data:null,error:new lr("Unexpected error in challenge",d)}}}async _verify({challengeId:e,factorId:s,webauthn:n}){return this.client.mfa.verify({factorId:s,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},l){if(!s)return{data:null,error:new Qi("rpId is required for WebAuthn authentication")};try{if(!Ey())return{data:null,error:new lr("Browser does not support WebAuthn",null)};const{data:d,error:u}=await this.challenge({factorId:e,webauthn:{rpId:s,rpOrigins:n},signal:i},{request:l});if(!d)return{data:null,error:u};const{webauthn:f}=d;return this._verify({factorId:e,challengeId:d.challengeId,webauthn:{type:f.type,rpId:s,rpOrigins:n,credential_response:f.credential_response}})}catch(d){return ve(d)?{data:null,error:d}:{data:null,error:new lr("Unexpected error in authenticate",d)}}}async _register({friendlyName:e,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},l){if(!s)return{data:null,error:new Qi("rpId is required for WebAuthn registration")};try{if(!Ey())return{data:null,error:new lr("Browser does not support WebAuthn",null)};const{data:d,error:u}=await this._enroll({friendlyName:e});if(!d)return await this.client.mfa.listFactors().then(g=>{var v;return(v=g.data)===null||v===void 0?void 0:v.all.find(b=>b.factor_type==="webauthn"&&b.friendly_name===e&&b.status!=="unverified")}).then(g=>g?this.client.mfa.unenroll({factorId:g==null?void 0:g.id}):void 0),{data:null,error:u};const{data:f,error:m}=await this._challenge({factorId:d.id,friendlyName:d.friendly_name,webauthn:{rpId:s,rpOrigins:n},signal:i},{create:l});return f?this._verify({factorId:d.id,challengeId:f.challengeId,webauthn:{rpId:s,rpOrigins:n,type:f.webauthn.type,credential_response:f.webauthn.credential_response}}):{data:null,error:m}}catch(d){return ve(d)?{data:null,error:d}:{data:null,error:new lr("Unexpected error in register",d)}}}}gC();const PC={url:R2,storageKey:k2,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:M2,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Cy(t,e,s){return await s()}const ro={};class Zi{get jwks(){var e,s;return(s=(e=ro[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(e){ro[this.storageKey]=Object.assign(Object.assign({},ro[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,s;return(s=(e=ro[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){ro[this.storageKey]=Object.assign(Object.assign({},ro[this.storageKey]),{cachedAt:e})}constructor(e){var s,n,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const l=Object.assign(Object.assign({},PC),e);if(this.storageKey=l.storageKey,this.instanceID=(s=Zi.nextInstanceID[this.storageKey])!==null&&s!==void 0?s:0,Zi.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.instanceID>0&&Gt()){const d=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(d),this.logDebugMessages&&console.trace(d)}if(this.persistSession=l.persistSession,this.autoRefreshToken=l.autoRefreshToken,this.admin=new fC({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=Dw(l.fetch),this.lock=l.lock||Cy,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,this.throwOnError=l.throwOnError,l.lock?this.lock=l.lock:this.persistSession&&Gt()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=pC:this.lock=Cy,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new DC(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:Iw()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=jy(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=jy(this.memoryStorage)),Gt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(d){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",d)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async d=>{this._debug("received broadcast notification from other tab or client",d),await this._notifyAllSubscribers(d.data.event,d.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Rw}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let s={},n="none";if(Gt()&&(s=J2(window.location.href),this._isImplicitGrantCallback(s)?n="implicit":await this._isPKCECallback(s)&&(n="pkce")),Gt()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:l}=await this._getSessionFromURL(s,n);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),O2(l)){const f=(e=l.details)===null||e===void 0?void 0:e.code;if(f==="identity_already_exists"||f==="identity_not_found"||f==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:d,redirectType:u}=i;return this._debug("#_initialize()","detected session in URL",d,"redirect type",u),await this._saveSession(d),setTimeout(async()=>{u==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",d):await this._notifyAllSubscribers("SIGNED_IN",d)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return ve(s)?this._returnResult({error:s}):this._returnResult({error:new lr("Unexpected error during initialization",s)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var s,n,i;try{const l=await Ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:oa}),{data:d,error:u}=l;if(u||!d)return this._returnResult({data:{user:null,session:null},error:u});const f=d.session,m=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",f)),this._returnResult({data:{user:m,session:f},error:null})}catch(l){if(ve(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signUp(e){var s,n,i;try{let l;if("email"in e){const{email:g,password:v,options:b}=e;let _=null,S=null;this.flowType==="pkce"&&([_,S]=await so(this.storage,this.storageKey)),l=await Ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:b==null?void 0:b.emailRedirectTo,body:{email:g,password:v,data:(s=b==null?void 0:b.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken},code_challenge:_,code_challenge_method:S},xform:oa})}else if("phone"in e){const{phone:g,password:v,options:b}=e;l=await Ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:v,data:(n=b==null?void 0:b.data)!==null&&n!==void 0?n:{},channel:(i=b==null?void 0:b.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken}},xform:oa})}else throw new Cc("You must provide either an email or phone number and a password");const{data:d,error:u}=l;if(u||!d)return await Ht(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:u});const f=d.session,m=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",f)),this._returnResult({data:{user:m,session:f},error:null})}catch(l){if(await Ht(this.storage,`${this.storageKey}-code-verifier`),ve(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithPassword(e){try{let s;if("email"in e){const{email:l,password:d,options:u}=e;s=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:d,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:_y})}else if("phone"in e){const{phone:l,password:d,options:u}=e;s=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:d,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:_y})}else throw new Cc("You must provide either an email or phone number and a password");const{data:n,error:i}=s;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!n||!n.session||!n.user){const l=new to;return this._returnResult({data:{user:null,session:null},error:l})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(s){if(ve(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOAuth(e){var s,n,i,l;return await this._handleProviderSignIn(e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(l=e.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:s}=e;switch(s){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}}async signInWithEthereum(e){var s,n,i,l,d,u,f,m,g,v,b;let _,S;if("message"in e)_=e.message,S=e.signature;else{const{chain:E,wallet:C,statement:T,options:R}=e;let A;if(Gt())if(typeof C=="object")A=C;else{const I=window;if("ethereum"in I&&typeof I.ethereum=="object"&&"request"in I.ethereum&&typeof I.ethereum.request=="function")A=I.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!(R!=null&&R.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");A=C}const M=new URL((s=R==null?void 0:R.url)!==null&&s!==void 0?s:window.location.href),z=await A.request({method:"eth_requestAccounts"}).then(I=>I).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!z||z.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const F=Uw(z[0]);let G=(n=R==null?void 0:R.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!G){const I=await A.request({method:"eth_chainId"});G=xC(I)}const K={domain:M.host,address:F,statement:T,uri:M.href,version:"1",chainId:G,nonce:(i=R==null?void 0:R.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(d=(l=R==null?void 0:R.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&d!==void 0?d:new Date,expirationTime:(u=R==null?void 0:R.signInWithEthereum)===null||u===void 0?void 0:u.expirationTime,notBefore:(f=R==null?void 0:R.signInWithEthereum)===null||f===void 0?void 0:f.notBefore,requestId:(m=R==null?void 0:R.signInWithEthereum)===null||m===void 0?void 0:m.requestId,resources:(g=R==null?void 0:R.signInWithEthereum)===null||g===void 0?void 0:g.resources};_=vC(K),S=await A.request({method:"personal_sign",params:[yC(_),F]})}try{const{data:E,error:C}=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:_,signature:S},!((v=e.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(b=e.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:oa});if(C)throw C;if(!E||!E.session||!E.user){const T=new to;return this._returnResult({data:{user:null,session:null},error:T})}return E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),this._returnResult({data:Object.assign({},E),error:C})}catch(E){if(ve(E))return this._returnResult({data:{user:null,session:null},error:E});throw E}}async signInWithSolana(e){var s,n,i,l,d,u,f,m,g,v,b,_;let S,E;if("message"in e)S=e.message,E=e.signature;else{const{chain:C,wallet:T,statement:R,options:A}=e;let M;if(Gt())if(typeof T=="object")M=T;else{const F=window;if("solana"in F&&typeof F.solana=="object"&&("signIn"in F.solana&&typeof F.solana.signIn=="function"||"signMessage"in F.solana&&typeof F.solana.signMessage=="function"))M=F.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof T!="object"||!(A!=null&&A.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");M=T}const z=new URL((s=A==null?void 0:A.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in M&&M.signIn){const F=await M.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},A==null?void 0:A.signInWithSolana),{version:"1",domain:z.host,uri:z.href}),R?{statement:R}:null));let G;if(Array.isArray(F)&&F[0]&&typeof F[0]=="object")G=F[0];else if(F&&typeof F=="object"&&"signedMessage"in F&&"signature"in F)G=F;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in G&&"signature"in G&&(typeof G.signedMessage=="string"||G.signedMessage instanceof Uint8Array)&&G.signature instanceof Uint8Array)S=typeof G.signedMessage=="string"?G.signedMessage:new TextDecoder().decode(G.signedMessage),E=G.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in M)||typeof M.signMessage!="function"||!("publicKey"in M)||typeof M!="object"||!M.publicKey||!("toBase58"in M.publicKey)||typeof M.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");S=[`${z.host} wants you to sign in with your Solana account:`,M.publicKey.toBase58(),...R?["",R,""]:[""],"Version: 1",`URI: ${z.href}`,`Issued At: ${(i=(n=A==null?void 0:A.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((l=A==null?void 0:A.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${A.signInWithSolana.notBefore}`]:[],...!((d=A==null?void 0:A.signInWithSolana)===null||d===void 0)&&d.expirationTime?[`Expiration Time: ${A.signInWithSolana.expirationTime}`]:[],...!((u=A==null?void 0:A.signInWithSolana)===null||u===void 0)&&u.chainId?[`Chain ID: ${A.signInWithSolana.chainId}`]:[],...!((f=A==null?void 0:A.signInWithSolana)===null||f===void 0)&&f.nonce?[`Nonce: ${A.signInWithSolana.nonce}`]:[],...!((m=A==null?void 0:A.signInWithSolana)===null||m===void 0)&&m.requestId?[`Request ID: ${A.signInWithSolana.requestId}`]:[],...!((v=(g=A==null?void 0:A.signInWithSolana)===null||g===void 0?void 0:g.resources)===null||v===void 0)&&v.length?["Resources",...A.signInWithSolana.resources.map(G=>`- ${G}`)]:[]].join(`
`);const F=await M.signMessage(new TextEncoder().encode(S),"utf8");if(!F||!(F instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");E=F}}try{const{data:C,error:T}=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:S,signature:cr(E)},!((b=e.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(_=e.options)===null||_===void 0?void 0:_.captchaToken}}:null),xform:oa});if(T)throw T;if(!C||!C.session||!C.user){const R=new to;return this._returnResult({data:{user:null,session:null},error:R})}return C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),this._returnResult({data:Object.assign({},C),error:T})}catch(C){if(ve(C))return this._returnResult({data:{user:null,session:null},error:C});throw C}}async _exchangeCodeForSession(e){const s=await nr(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(s??"").split("/");try{if(!n&&this.flowType==="pkce")throw new q2;const{data:l,error:d}=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:oa});if(await Ht(this.storage,`${this.storageKey}-code-verifier`),d)throw d;if(!l||!l.session||!l.user){const u=new to;return this._returnResult({data:{user:null,session:null,redirectType:null},error:u})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign(Object.assign({},l),{redirectType:i??null}),error:d})}catch(l){if(await Ht(this.storage,`${this.storageKey}-code-verifier`),ve(l))return this._returnResult({data:{user:null,session:null,redirectType:null},error:l});throw l}}async signInWithIdToken(e){try{const{options:s,provider:n,token:i,access_token:l,nonce:d}=e,u=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:l,nonce:d,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:oa}),{data:f,error:m}=u;if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!f||!f.session||!f.user){const g=new to;return this._returnResult({data:{user:null,session:null},error:g})}return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),this._returnResult({data:f,error:m})}catch(s){if(ve(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOtp(e){var s,n,i,l,d;try{if("email"in e){const{email:u,options:f}=e;let m=null,g=null;this.flowType==="pkce"&&([m,g]=await so(this.storage,this.storageKey));const{error:v}=await Ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:u,data:(s=f==null?void 0:f.data)!==null&&s!==void 0?s:{},create_user:(n=f==null?void 0:f.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:m,code_challenge_method:g},redirectTo:f==null?void 0:f.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:v})}if("phone"in e){const{phone:u,options:f}=e,{data:m,error:g}=await Ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:u,data:(i=f==null?void 0:f.data)!==null&&i!==void 0?i:{},create_user:(l=f==null?void 0:f.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},channel:(d=f==null?void 0:f.channel)!==null&&d!==void 0?d:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:m==null?void 0:m.message_id},error:g})}throw new Cc("You must provide either an email or phone number.")}catch(u){if(await Ht(this.storage,`${this.storageKey}-code-verifier`),ve(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async verifyOtp(e){var s,n;try{let i,l;"options"in e&&(i=(s=e.options)===null||s===void 0?void 0:s.redirectTo,l=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:d,error:u}=await Ce(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:l}}),redirectTo:i,xform:oa});if(u)throw u;if(!d)throw new Error("An error occurred on token verification.");const f=d.session,m=d.user;return f!=null&&f.access_token&&(await this._saveSession(f),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",f)),this._returnResult({data:{user:m,session:f},error:null})}catch(i){if(ve(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var s,n,i,l,d;try{let u=null,f=null;this.flowType==="pkce"&&([u,f]=await so(this.storage,this.storageKey));const m=await Ce(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(s=e.options)===null||s===void 0?void 0:s.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:u,code_challenge_method:f}),headers:this.headers,xform:dC});return!((l=m.data)===null||l===void 0)&&l.url&&Gt()&&!(!((d=e.options)===null||d===void 0)&&d.skipBrowserRedirect)&&window.location.assign(m.data.url),this._returnResult(m)}catch(u){if(await Ht(this.storage,`${this.storageKey}-code-verifier`),ve(u))return this._returnResult({data:null,error:u});throw u}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:s},error:n}=e;if(n)throw n;if(!s)throw new Es;const{error:i}=await Ce(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(ve(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const s=`${this.url}/resend`;if("email"in e){const{email:n,type:i,options:l}=e,{error:d}=await Ce(this.fetch,"POST",s,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}else if("phone"in e){const{phone:n,type:i,options:l}=e,{data:d,error:u}=await Ce(this.fetch,"POST",s,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u})}throw new Cc("You must provide either an email or phone number and a type")}catch(s){if(ve(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(e,s){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await s()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=s();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await e(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const s=await nr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?e=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<Zh:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const d=await nr(this.userStorage,this.storageKey+"-user");d!=null&&d.user?e.user=d.user:e.user=sf()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const d={value:this.suppressGetSessionWarning};e.user=oC(e.user,d),d.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{session:null},error:l}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const s=await this._acquireLock(-1,async()=>await this._getUser());return s.data.user&&(this.suppressGetSessionWarning=!0),s}async _getUser(e){try{return e?await Ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Dn}):await this._useSession(async s=>{var n,i,l;const{data:d,error:u}=s;if(u)throw u;return!(!((n=d.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Es}:await Ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(i=d.session)===null||i===void 0?void 0:i.access_token)!==null&&l!==void 0?l:void 0,xform:Dn})})}catch(s){if(ve(s))return L2(s)&&(await this._removeSession(),await Ht(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:s});throw s}}async updateUser(e,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,s))}async _updateUser(e,s={}){try{return await this._useSession(async n=>{const{data:i,error:l}=n;if(l)throw l;if(!i.session)throw new Es;const d=i.session;let u=null,f=null;this.flowType==="pkce"&&e.email!=null&&([u,f]=await so(this.storage,this.storageKey));const{data:m,error:g}=await Ce(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:u,code_challenge_method:f}),jwt:d.access_token,xform:Dn});if(g)throw g;return d.user=m.user,await this._saveSession(d),await this._notifyAllSubscribers("USER_UPDATED",d),this._returnResult({data:{user:d.user},error:null})})}catch(n){if(await Ht(this.storage,`${this.storageKey}-code-verifier`),ve(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Es;const s=Date.now()/1e3;let n=s,i=!0,l=null;const{payload:d}=tf(e.access_token);if(d.exp&&(n=d.exp,i=n<=s),i){const{data:u,error:f}=await this._callRefreshToken(e.refresh_token);if(f)return this._returnResult({data:{user:null,session:null},error:f});if(!u)return{data:{user:null,session:null},error:null};l=u}else{const{data:u,error:f}=await this._getUser(e.access_token);if(f)throw f;l={access_token:e.access_token,refresh_token:e.refresh_token,user:u.user,token_type:"bearer",expires_in:n-s,expires_at:n},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return this._returnResult({data:{user:l.user,session:l},error:null})}catch(s){if(ve(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async s=>{var n;if(!e){const{data:d,error:u}=s;if(u)throw u;e=(n=d.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new Es;const{data:i,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{user:null,session:null},error:l}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(s){if(ve(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async _getSessionFromURL(e,s){try{if(!Gt())throw new Tc("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Tc(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new gy("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Tc("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new gy("No code detected.");const{data:R,error:A}=await this._exchangeCodeForSession(e.code);if(A)throw A;const M=new URL(window.location.href);return M.searchParams.delete("code"),window.history.replaceState(window.history.state,"",M.toString()),{data:{session:R.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:l,refresh_token:d,expires_in:u,expires_at:f,token_type:m}=e;if(!l||!u||!d||!m)throw new Tc("No session defined in URL");const g=Math.round(Date.now()/1e3),v=parseInt(u);let b=g+v;f&&(b=parseInt(f));const _=b-g;_*1e3<=lo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${_}s, should have been closer to ${v}s`);const S=b-v;g-S>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",S,b,g):g-S<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",S,b,g);const{data:E,error:C}=await this._getUser(l);if(C)throw C;const T={provider_token:n,provider_refresh_token:i,access_token:l,expires_in:v,expires_at:b,refresh_token:d,token_type:m,user:E.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:T,redirectType:e.type},error:null})}catch(n){if(ve(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const s=await nr(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&s)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async s=>{var n;const{data:i,error:l}=s;if(l)return this._returnResult({error:l});const d=(n=i.session)===null||n===void 0?void 0:n.access_token;if(d){const{error:u}=await this.admin.signOut(d,e);if(u&&!(U2(u)&&(u.status===404||u.status===401||u.status===403)))return this._returnResult({error:u})}return e!=="others"&&(await this._removeSession(),await Ht(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const s=F2(),n={id:s,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async s=>{var n,i;try{const{data:{session:l},error:d}=s;if(d)throw d;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}})}async resetPasswordForEmail(e,s={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await so(this.storage,this.storageKey,!0));try{return await Ce(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(l){if(await Ht(this.storage,`${this.storageKey}-code-verifier`),ve(l))return this._returnResult({data:null,error:l});throw l}}async getUserIdentities(){var e;try{const{data:s,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(e=s.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(s){if(ve(s))return this._returnResult({data:null,error:s});throw s}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var s;try{const{data:n,error:i}=await this._useSession(async l=>{var d,u,f,m,g;const{data:v,error:b}=l;if(b)throw b;const _=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(d=e.options)===null||d===void 0?void 0:d.redirectTo,scopes:(u=e.options)===null||u===void 0?void 0:u.scopes,queryParams:(f=e.options)===null||f===void 0?void 0:f.queryParams,skipBrowserRedirect:!0});return await Ce(this.fetch,"GET",_,{headers:this.headers,jwt:(g=(m=v.session)===null||m===void 0?void 0:m.access_token)!==null&&g!==void 0?g:void 0})});if(i)throw i;return Gt()&&!(!((s=e.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:e.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(ve(n))return this._returnResult({data:{provider:e.provider,url:null},error:n});throw n}}async linkIdentityIdToken(e){return await this._useSession(async s=>{var n;try{const{error:i,data:{session:l}}=s;if(i)throw i;const{options:d,provider:u,token:f,access_token:m,nonce:g}=e,v=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=l==null?void 0:l.access_token)!==null&&n!==void 0?n:void 0,body:{provider:u,id_token:f,access_token:m,nonce:g,link_identity:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:oa}),{data:b,error:_}=v;return _?this._returnResult({data:{user:null,session:null},error:_}):!b||!b.session||!b.user?this._returnResult({data:{user:null,session:null},error:new to}):(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("USER_UPDATED",b.session)),this._returnResult({data:b,error:_}))}catch(i){if(await Ht(this.storage,`${this.storageKey}-code-verifier`),ve(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async s=>{var n,i;const{data:l,error:d}=s;if(d)throw d;return await Ce(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(n=l.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(s){if(ve(s))return this._returnResult({data:null,error:s});throw s}}async _refreshAccessToken(e){const s=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{const n=Date.now();return await W2(async i=>(i>0&&await Y2(200*Math.pow(2,i-1)),this._debug(s,"refreshing attempt",i),await Ce(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:oa})),(i,l)=>{const d=200*Math.pow(2,i);return l&&ef(l)&&Date.now()+d-n<lo})}catch(n){if(this._debug(s,"error",n),ve(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(s,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,s){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",s,"url",n),Gt()&&!s.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,s;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await nr(this.storage,this.storageKey);if(i&&this.userStorage){let d=await nr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!d&&(d={user:i.user},await co(this.userStorage,this.storageKey+"-user",d)),i.user=(e=d==null?void 0:d.user)!==null&&e!==void 0?e:sf()}else if(i&&!i.user&&!i.user){const d=await nr(this.storage,this.storageKey+"-user");d&&(d!=null&&d.user)?(i.user=d.user,await Ht(this.storage,this.storageKey+"-user"),await co(this.storage,this.storageKey,i)):i.user=sf()}if(this._debug(n,"session from storage",i),!this._isValidSession(i)){this._debug(n,"session is not valid"),i!==null&&await this._removeSession();return}const l=((s=i.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<Zh;if(this._debug(n,`session has${l?"":" not"} expired with margin of ${Zh}s`),l){if(this.autoRefreshToken&&i.refresh_token){const{error:d}=await this._callRefreshToken(i.refresh_token);d&&(console.error(d),ef(d)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",d),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:d,error:u}=await this._getUser(i.access_token);!u&&(d!=null&&d.user)?(i.user=d.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(d){console.error("Error getting user data:",d),this._debug(n,"error getting user data, skipping SIGNED_IN notification",d)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(n,"error",i),console.error(i);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var s,n;if(!e)throw new Es;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new pd;const{data:l,error:d}=await this._refreshAccessToken(e);if(d)throw d;if(!l.session)throw new Es;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const u={data:l.session,error:null};return this.refreshingDeferred.resolve(u),u}catch(l){if(this._debug(i,"error",l),ve(l)){const d={data:null,error:l};return ef(l)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(d),d}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(l),l}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,s,n=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",s,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:s});const l=[],d=Array.from(this.stateChangeEmitters.values()).map(async u=>{try{await u.callback(e,s)}catch(f){l.push(f)}});if(await Promise.all(d),l.length>0){for(let u=0;u<l.length;u+=1)console.error(l[u]);throw l[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Ht(this.storage,`${this.storageKey}-code-verifier`);const s=Object.assign({},e),n=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&s.user&&await co(this.userStorage,this.storageKey+"-user",{user:s.user});const i=Object.assign({},s);delete i.user;const l=wy(i);await co(this.storage,this.storageKey,l)}else{const i=wy(s);await co(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Ht(this.storage,this.storageKey),await Ht(this.storage,this.storageKey+"-code-verifier"),await Ht(this.storage,this.storageKey+"-user"),this.userStorage&&await Ht(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Gt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),lo);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async s=>{const{data:{session:n}}=s;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-e)/lo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${lo}ms, refresh threshold is ${Vf} ticks`),i<=Vf&&await this._callRefreshToken(n.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Pw)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Gt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const s=`#_onVisibilityChanged(${e})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,s,n){const i=[`provider=${encodeURIComponent(s)}`];if(n!=null&&n.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[l,d]=await so(this.storage,this.storageKey),u=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(d)}`});i.push(u.toString())}if(n!=null&&n.queryParams){const l=new URLSearchParams(n.queryParams);i.push(l.toString())}return n!=null&&n.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async s=>{var n;const{data:i,error:l}=s;return l?this._returnResult({data:null,error:l}):await Ce(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(ve(s))return this._returnResult({data:null,error:s});throw s}}async _enroll(e){try{return await this._useSession(async s=>{var n,i;const{data:l,error:d}=s;if(d)return this._returnResult({data:null,error:d});const u=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:f,error:m}=await Ce(this.fetch,"POST",`${this.url}/factors`,{body:u,headers:this.headers,jwt:(n=l==null?void 0:l.session)===null||n===void 0?void 0:n.access_token});return m?this._returnResult({data:null,error:m}):(e.factorType==="totp"&&f.type==="totp"&&(!((i=f==null?void 0:f.totp)===null||i===void 0)&&i.qr_code)&&(f.totp.qr_code=`data:image/svg+xml;utf-8,${f.totp.qr_code}`),this._returnResult({data:f,error:null}))})}catch(s){if(ve(s))return this._returnResult({data:null,error:s});throw s}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:i,error:l}=s;if(l)return this._returnResult({data:null,error:l});const d=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?EC(e.webauthn.credential_response):CC(e.webauthn.credential_response)})}:{code:e.code}),{data:u,error:f}=await Ce(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:d,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return f?this._returnResult({data:null,error:f}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),this._returnResult({data:u,error:f}))})}catch(s){if(ve(s))return this._returnResult({data:null,error:s});throw s}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:i,error:l}=s;if(l)return this._returnResult({data:null,error:l});const d=await Ce(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});if(d.error)return d;const{data:u}=d;if(u.type!=="webauthn")return{data:u,error:null};switch(u.webauthn.type){case"create":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:SC(u.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},u),{webauthn:Object.assign(Object.assign({},u.webauthn),{credential_options:Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:jC(u.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(s){if(ve(s))return this._returnResult({data:null,error:s});throw s}})}async _challengeAndVerify(e){const{data:s,error:n}=await this._challenge({factorId:e.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:e.factorId,challengeId:s.id,code:e.code})}async _listFactors(){var e;const{data:{user:s},error:n}=await this.getUser();if(n)return{data:null,error:n};const i={all:[],phone:[],totp:[],webauthn:[]};for(const l of(e=s==null?void 0:s.factors)!==null&&e!==void 0?e:[])i.all.push(l),l.status==="verified"&&i[l.factor_type].push(l);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var e,s;const{data:{session:n},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=tf(n.access_token);let d=null;l.aal&&(d=l.aal);let u=d;((s=(e=n.user.factors)===null||e===void 0?void 0:e.filter(g=>g.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(u="aal2");const m=l.amr||[];return{data:{currentLevel:d,nextLevel:u,currentAuthenticationMethods:m},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async s=>{const{data:{session:n},error:i}=s;return i?this._returnResult({data:null,error:i}):n?await Ce(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:n.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new Es})})}catch(s){if(ve(s))return this._returnResult({data:null,error:s});throw s}}async _approveAuthorization(e,s){try{return await this._useSession(async n=>{const{data:{session:i},error:l}=n;if(l)return this._returnResult({data:null,error:l});if(!i)return this._returnResult({data:null,error:new Es});const d=await Ce(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:u=>({data:u,error:null})});return d.data&&d.data.redirect_url&&Gt()&&!(s!=null&&s.skipBrowserRedirect)&&window.location.assign(d.data.redirect_url),d})}catch(n){if(ve(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(e,s){try{return await this._useSession(async n=>{const{data:{session:i},error:l}=n;if(l)return this._returnResult({data:null,error:l});if(!i)return this._returnResult({data:null,error:new Es});const d=await Ce(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:u=>({data:u,error:null})});return d.data&&d.data.redirect_url&&Gt()&&!(s!=null&&s.skipBrowserRedirect)&&window.location.assign(d.data.redirect_url),d})}catch(n){if(ve(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:s},error:n}=e;return n?this._returnResult({data:null,error:n}):s?await Ce(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Es})})}catch(e){if(ve(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async s=>{const{data:{session:n},error:i}=s;return i?this._returnResult({data:null,error:i}):n?(await Ce(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Es})})}catch(s){if(ve(s))return this._returnResult({data:null,error:s});throw s}}async fetchJwk(e,s={keys:[]}){let n=s.keys.find(u=>u.kid===e);if(n)return n;const i=Date.now();if(n=this.jwks.keys.find(u=>u.kid===e),n&&this.jwks_cached_at+D2>i)return n;const{data:l,error:d}=await Ce(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(d)throw d;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=i,n=l.keys.find(u=>u.kid===e),!n)?null:n}async getClaims(e,s={}){try{let n=e;if(!n){const{data:_,error:S}=await this.getSession();if(S||!_.session)return this._returnResult({data:null,error:S});n=_.session.access_token}const{header:i,payload:l,signature:d,raw:{header:u,payload:f}}=tf(n);s!=null&&s.allowExpired||aC(l.exp);const m=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,s!=null&&s.keys?{keys:s.keys}:s==null?void 0:s.jwks);if(!m){const{error:_}=await this.getUser(n);if(_)throw _;return{data:{claims:l,header:i,signature:d},error:null}}const g=nC(i.alg),v=await crypto.subtle.importKey("jwk",m,g,!0,["verify"]);if(!await crypto.subtle.verify(g,v,d,H2(`${u}.${f}`)))throw new Ff("Invalid JWT signature");return{data:{claims:l,header:i,signature:d},error:null}}catch(n){if(ve(n))return this._returnResult({data:null,error:n});throw n}}}Zi.nextInstanceID={};const UC=Zi,LC="2.89.0";let $i="";typeof Deno<"u"?$i="deno":typeof document<"u"?$i="web":typeof navigator<"u"&&navigator.product==="ReactNative"?$i="react-native":$i="node";const OC={"X-Client-Info":`supabase-js-${$i}/${LC}`},qC={headers:OC},BC={schema:"public"},$C={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},zC={};function el(t){"@babel/helpers - typeof";return el=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},el(t)}function VC(t,e){if(el(t)!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,e);if(el(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function HC(t){var e=VC(t,"string");return el(e)=="symbol"?e:e+""}function GC(t,e,s){return(e=HC(e))in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function Ty(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),s.push.apply(s,n)}return s}function vt(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?Ty(Object(s),!0).forEach(function(n){GC(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Ty(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}const FC=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),JC=()=>Headers,KC=(t,e,s)=>{const n=FC(s),i=JC();return async(l,d)=>{var u;const f=(u=await e())!==null&&u!==void 0?u:t;let m=new i(d==null?void 0:d.headers);return m.has("apikey")||m.set("apikey",t),m.has("Authorization")||m.set("Authorization",`Bearer ${f}`),n(l,vt(vt({},d),{},{headers:m}))}};function YC(t){return t.endsWith("/")?t:t+"/"}function WC(t,e){var s,n;const{db:i,auth:l,realtime:d,global:u}=t,{db:f,auth:m,realtime:g,global:v}=e,b={db:vt(vt({},f),i),auth:vt(vt({},m),l),realtime:vt(vt({},g),d),storage:{},global:vt(vt(vt({},v),u),{},{headers:vt(vt({},(s=v==null?void 0:v.headers)!==null&&s!==void 0?s:{}),(n=u==null?void 0:u.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return t.accessToken?b.accessToken=t.accessToken:delete b.accessToken,b}function XC(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(YC(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var QC=class extends UC{constructor(t){super(t)}},ZC=class{constructor(t,e,s){var n,i;this.supabaseUrl=t,this.supabaseKey=e;const l=XC(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const d=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:BC,realtime:zC,auth:vt(vt({},$C),{},{storageKey:d}),global:qC},f=WC(s??{},u);if(this.storageKey=(n=f.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(i=f.global.headers)!==null&&i!==void 0?i:{},f.accessToken)this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(g,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}});else{var m;this.auth=this._initSupabaseAuthClient((m=f.auth)!==null&&m!==void 0?m:{},this.headers,f.global.fetch)}this.fetch=KC(e,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(vt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.accessToken&&this.accessToken().then(g=>this.realtime.setAuth(g)).catch(g=>console.warn("Failed to set initial Realtime auth token:",g)),this.rest=new ME(new URL("rest/v1",l).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new A2(this.storageUrl.href,this.headers,this.fetch,s==null?void 0:s.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new CE(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},s={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,s)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,s;if(t.accessToken)return await t.accessToken();const{data:n}=await t.auth.getSession();return(e=(s=n.session)===null||s===void 0?void 0:s.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:s,storage:n,userStorage:i,storageKey:l,flowType:d,lock:u,debug:f,throwOnError:m},g,v){const b={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new QC({url:this.authUrl.href,headers:vt(vt({},b),g),storageKey:l,autoRefreshToken:t,persistSession:e,detectSessionInUrl:s,storage:n,userStorage:i,flowType:d,lock:u,debug:f,throwOnError:m,fetch:v,hasCustomAuthorizationHeader:Object.keys(this.headers).some(_=>_.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new YE(this.realtimeUrl.href,vt(vt({},t),{},{params:vt(vt({},{apikey:this.supabaseKey}),t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(t,e,s){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==s?(this.changedAccessToken=s,this.realtime.setAuth(s)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const eT=(t,e,s)=>new ZC(t,e,s);function tT(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}tT()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Jf="https://bfyobbpzprdnfntwqfph.supabase.co",sT="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJmeW9iYnB6cHJkbmZudHdxZnBoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAxNTIwMTIsImV4cCI6MjA3NTcyODAxMn0.Zd5v-knZVXLAxOnyA6PqB-7cPYoYc5bhtEIOtACT_oA";let aT=Jf;try{new URL(Jf)}catch{console.warn("Invalid Supabase URL detected, using fallback or potentially failing.",Jf)}const Q=eT(aT,sT,{auth:{autoRefreshToken:!0,persistSession:!0}}),he=t=>{if(t==null)return"Ocorreu um erro desconhecido.";if(typeof t=="string"&&t!=="[object Object]")return t;let e="";if(t instanceof Error)e=t.message;else if(typeof t=="object"){const s=t.message||t.msg||t.error_description||(t.error&&typeof t.error=="string"?t.error:null)||(t.data&&typeof t.data.message=="string"?t.data.message:null)||t.code||null;if(s)e=String(s);else try{const n=JSON.stringify(t);e=n==="{}"?"Erro tcnico sem descrio":`Erro: ${n}`}catch{e="Erro de sistema no serializvel"}}else e=String(t);if(e==="[object Object]"||e.includes("object Object"))try{return`Erro tcnico (JSON): ${JSON.stringify(t)}`}catch{return"Erro de processamento de dados (consulte o suporte)."}return e};var nT={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let rT,oT;function iT(){return{geminiUrl:rT,vertexUrl:oT}}function lT(t,e,s,n){var i,l;if(!(t!=null&&t.baseUrl)){const d=iT();return e?(i=d.vertexUrl)!==null&&i!==void 0?i:s:(l=d.geminiUrl)!==null&&l!==void 0?l:n}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nn{}function ge(t,e){const s=/\{([^}]+)\}/g;return t.replace(s,(n,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const l=e[i];return l!=null?String(l):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function x(t,e,s){for(let l=0;l<e.length-1;l++){const d=e[l];if(d.endsWith("[]")){const u=d.slice(0,-2);if(!(u in t))if(Array.isArray(s))t[u]=Array.from({length:s.length},()=>({}));else throw new Error(`Value must be a list given an array path ${d}`);if(Array.isArray(t[u])){const f=t[u];if(Array.isArray(s))for(let m=0;m<f.length;m++){const g=f[m];x(g,e.slice(l+1),s[m])}else for(const m of f)x(m,e.slice(l+1),s)}return}else if(d.endsWith("[0]")){const u=d.slice(0,-3);u in t||(t[u]=[{}]);const f=t[u];x(f[0],e.slice(l+1),s);return}(!t[d]||typeof t[d]!="object")&&(t[d]={}),t=t[d]}const n=e[e.length-1],i=t[n];if(i!==void 0){if(!s||typeof s=="object"&&Object.keys(s).length===0||s===i)return;if(typeof i=="object"&&typeof s=="object"&&i!==null&&s!==null)Object.assign(i,s);else throw new Error(`Cannot set value for an existing key. Key: ${n}`)}else n==="_self"&&typeof s=="object"&&s!==null&&!Array.isArray(s)?Object.assign(t,s):t[n]=s}function p(t,e,s=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let n=0;n<e.length;n++){if(typeof t!="object"||t===null)return s;const i=e[n];if(i.endsWith("[]")){const l=i.slice(0,-2);if(l in t){const d=t[l];return Array.isArray(d)?d.map(u=>p(u,e.slice(n+1),s)):s}else return s}else t=t[i]}return t}catch(n){if(n instanceof TypeError)return s;throw n}}function cT(t,e){for(const[s,n]of Object.entries(e)){const i=s.split("."),l=n.split("."),d=new Set;let u=-1;for(let f=0;f<i.length;f++)if(i[f]==="*"){u=f;break}if(u!==-1&&l.length>u)for(let f=u;f<l.length;f++){const m=l[f];m!=="*"&&!m.endsWith("[]")&&!m.endsWith("[0]")&&d.add(m)}Kf(t,i,l,0,d)}}function Kf(t,e,s,n,i){if(n>=e.length||typeof t!="object"||t===null)return;const l=e[n];if(l.endsWith("[]")){const d=l.slice(0,-2),u=t;if(d in u&&Array.isArray(u[d]))for(const f of u[d])Kf(f,e,s,n+1,i)}else if(l==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const d=t,u=Object.keys(d).filter(m=>!m.startsWith("_")&&!i.has(m)),f={};for(const m of u)f[m]=d[m];for(const[m,g]of Object.entries(f)){const v=[];for(const b of s.slice(n))b==="*"?v.push(m):v.push(b);x(d,v,g)}for(const m of u)delete d[m]}}else{const d=t;l in d&&Kf(d[l],e,s,n+1,i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Am(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dT(t){const e={},s=p(t,["operationName"]);s!=null&&x(e,["operationName"],s);const n=p(t,["resourceName"]);return n!=null&&x(e,["_url","resourceName"],n),e}function uT(t){const e={},s=p(t,["name"]);s!=null&&x(e,["name"],s);const n=p(t,["metadata"]);n!=null&&x(e,["metadata"],n);const i=p(t,["done"]);i!=null&&x(e,["done"],i);const l=p(t,["error"]);l!=null&&x(e,["error"],l);const d=p(t,["response","generateVideoResponse"]);return d!=null&&x(e,["response"],fT(d)),e}function hT(t){const e={},s=p(t,["name"]);s!=null&&x(e,["name"],s);const n=p(t,["metadata"]);n!=null&&x(e,["metadata"],n);const i=p(t,["done"]);i!=null&&x(e,["done"],i);const l=p(t,["error"]);l!=null&&x(e,["error"],l);const d=p(t,["response"]);return d!=null&&x(e,["response"],mT(d)),e}function fT(t){const e={},s=p(t,["generatedSamples"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(d=>pT(d))),x(e,["generatedVideos"],l)}const n=p(t,["raiMediaFilteredCount"]);n!=null&&x(e,["raiMediaFilteredCount"],n);const i=p(t,["raiMediaFilteredReasons"]);return i!=null&&x(e,["raiMediaFilteredReasons"],i),e}function mT(t){const e={},s=p(t,["videos"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(d=>gT(d))),x(e,["generatedVideos"],l)}const n=p(t,["raiMediaFilteredCount"]);n!=null&&x(e,["raiMediaFilteredCount"],n);const i=p(t,["raiMediaFilteredReasons"]);return i!=null&&x(e,["raiMediaFilteredReasons"],i),e}function pT(t){const e={},s=p(t,["video"]);return s!=null&&x(e,["video"],NT(s)),e}function gT(t){const e={},s=p(t,["_self"]);return s!=null&&x(e,["video"],_T(s)),e}function xT(t){const e={},s=p(t,["operationName"]);return s!=null&&x(e,["_url","operationName"],s),e}function yT(t){const e={},s=p(t,["operationName"]);return s!=null&&x(e,["_url","operationName"],s),e}function vT(t){const e={},s=p(t,["name"]);s!=null&&x(e,["name"],s);const n=p(t,["metadata"]);n!=null&&x(e,["metadata"],n);const i=p(t,["done"]);i!=null&&x(e,["done"],i);const l=p(t,["error"]);l!=null&&x(e,["error"],l);const d=p(t,["response"]);return d!=null&&x(e,["response"],bT(d)),e}function bT(t){const e={},s=p(t,["sdkHttpResponse"]);s!=null&&x(e,["sdkHttpResponse"],s);const n=p(t,["parent"]);n!=null&&x(e,["parent"],n);const i=p(t,["documentName"]);return i!=null&&x(e,["documentName"],i),e}function Ow(t){const e={},s=p(t,["name"]);s!=null&&x(e,["name"],s);const n=p(t,["metadata"]);n!=null&&x(e,["metadata"],n);const i=p(t,["done"]);i!=null&&x(e,["done"],i);const l=p(t,["error"]);l!=null&&x(e,["error"],l);const d=p(t,["response"]);return d!=null&&x(e,["response"],wT(d)),e}function wT(t){const e={},s=p(t,["sdkHttpResponse"]);s!=null&&x(e,["sdkHttpResponse"],s);const n=p(t,["parent"]);n!=null&&x(e,["parent"],n);const i=p(t,["documentName"]);return i!=null&&x(e,["documentName"],i),e}function NT(t){const e={},s=p(t,["uri"]);s!=null&&x(e,["uri"],s);const n=p(t,["encodedVideo"]);n!=null&&x(e,["videoBytes"],Am(n));const i=p(t,["encoding"]);return i!=null&&x(e,["mimeType"],i),e}function _T(t){const e={},s=p(t,["gcsUri"]);s!=null&&x(e,["uri"],s);const n=p(t,["bytesBase64Encoded"]);n!=null&&x(e,["videoBytes"],Am(n));const i=p(t,["mimeType"]);return i!=null&&x(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ay;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Ay||(Ay={}));var Ry;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Ry||(Ry={}));var ky;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(ky||(ky={}));var Ke;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Ke||(Ke={}));var My;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(My||(My={}));var Iy;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Iy||(Iy={}));var Dy;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(Dy||(Dy={}));var Py;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Py||(Py={}));var Uy;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Uy||(Uy={}));var Ly;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(Ly||(Ly={}));var Oy;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Oy||(Oy={}));var qy;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(qy||(qy={}));var By;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(By||(By={}));var $y;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})($y||($y={}));var zy;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(zy||(zy={}));var Vy;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Vy||(Vy={}));var Hy;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Hy||(Hy={}));var Gy;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(Gy||(Gy={}));var Fy;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Fy||(Fy={}));var sd;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(sd||(sd={}));var Jy;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Jy||(Jy={}));var Ky;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Ky||(Ky={}));var Yy;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Yy||(Yy={}));var Yf;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Yf||(Yf={}));var Wy;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Wy||(Wy={}));var Xy;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(Xy||(Xy={}));var Qy;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(Qy||(Qy={}));var Zy;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Zy||(Zy={}));var ev;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(ev||(ev={}));var tv;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(tv||(tv={}));var sv;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(sv||(sv={}));var av;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(av||(av={}));var nv;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(nv||(nv={}));var rv;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(rv||(rv={}));var ov;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(ov||(ov={}));var iv;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(iv||(iv={}));var lv;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(lv||(lv={}));var cv;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(cv||(cv={}));var dv;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(dv||(dv={}));var uv;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(uv||(uv={}));var hv;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(hv||(hv={}));var fv;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(fv||(fv={}));var mv;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(mv||(mv={}));var pv;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(pv||(pv={}));var gv;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(gv||(gv={}));var xv;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(xv||(xv={}));var yv;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(yv||(yv={}));var vv;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(vv||(vv={}));var bv;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(bv||(bv={}));var wv;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(wv||(wv={}));var Nv;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Nv||(Nv={}));var _v;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(_v||(_v={}));var Sv;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Sv||(Sv={}));var jv;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(jv||(jv={}));var Ev;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(Ev||(Ev={}));var fo;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(fo||(fo={}));class Wf{constructor(e){const s={};for(const n of e.headers.entries())s[n[0]]=n[1];this.headers=s,this.responseInternal=e}json(){return this.responseInternal.json()}}class ki{get text(){var e,s,n,i,l,d,u,f;if(((i=(n=(s=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||s===void 0?void 0:s.content)===null||n===void 0?void 0:n.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",g=!1;const v=[];for(const b of(f=(u=(d=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||d===void 0?void 0:d.content)===null||u===void 0?void 0:u.parts)!==null&&f!==void 0?f:[]){for(const[_,S]of Object.entries(b))_!=="text"&&_!=="thought"&&_!=="thoughtSignature"&&(S!==null||S!==void 0)&&v.push(_);if(typeof b.text=="string"){if(typeof b.thought=="boolean"&&b.thought)continue;g=!0,m+=b.text}}return v.length>0&&console.warn(`there are non-text parts ${v} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),g?m:void 0}get data(){var e,s,n,i,l,d,u,f;if(((i=(n=(s=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||s===void 0?void 0:s.content)===null||n===void 0?void 0:n.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const g=[];for(const v of(f=(u=(d=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||d===void 0?void 0:d.content)===null||u===void 0?void 0:u.parts)!==null&&f!==void 0?f:[]){for(const[b,_]of Object.entries(v))b!=="inlineData"&&(_!==null||_!==void 0)&&g.push(b);v.inlineData&&typeof v.inlineData.data=="string"&&(m+=atob(v.inlineData.data))}return g.length>0&&console.warn(`there are non-data parts ${g} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var e,s,n,i,l,d,u,f;if(((i=(n=(s=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||s===void 0?void 0:s.content)===null||n===void 0?void 0:n.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(f=(u=(d=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||d===void 0?void 0:d.content)===null||u===void 0?void 0:u.parts)===null||f===void 0?void 0:f.filter(g=>g.functionCall).map(g=>g.functionCall).filter(g=>g!==void 0);if((m==null?void 0:m.length)!==0)return m}get executableCode(){var e,s,n,i,l,d,u,f,m;if(((i=(n=(s=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||s===void 0?void 0:s.content)===null||n===void 0?void 0:n.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const g=(f=(u=(d=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||d===void 0?void 0:d.content)===null||u===void 0?void 0:u.parts)===null||f===void 0?void 0:f.filter(v=>v.executableCode).map(v=>v.executableCode).filter(v=>v!==void 0);if((g==null?void 0:g.length)!==0)return(m=g==null?void 0:g[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var e,s,n,i,l,d,u,f,m;if(((i=(n=(s=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||s===void 0?void 0:s.content)===null||n===void 0?void 0:n.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const g=(f=(u=(d=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||d===void 0?void 0:d.content)===null||u===void 0?void 0:u.parts)===null||f===void 0?void 0:f.filter(v=>v.codeExecutionResult).map(v=>v.codeExecutionResult).filter(v=>v!==void 0);if((g==null?void 0:g.length)!==0)return(m=g==null?void 0:g[0])===null||m===void 0?void 0:m.output}}class Cv{}class Tv{}class ST{}class jT{}class ET{}class CT{}class Av{}class Rv{}class kv{}class TT{}class ad{_fromAPIResponse({apiResponse:e,_isVertexAI:s}){const n=new ad;let i;const l=e;return s?i=hT(l):i=uT(l),Object.assign(n,i),n}}class Mv{}class Iv{}class Dv{}class Pv{}class AT{}class RT{}class kT{}class Rm{_fromAPIResponse({apiResponse:e,_isVertexAI:s}){const n=new Rm,l=vT(e);return Object.assign(n,l),n}}class MT{}class IT{}class DT{}class Uv{}class PT{get text(){var e,s,n;let i="",l=!1;const d=[];for(const u of(n=(s=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||s===void 0?void 0:s.parts)!==null&&n!==void 0?n:[]){for(const[f,m]of Object.entries(u))f!=="text"&&f!=="thought"&&m!==null&&d.push(f);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;l=!0,i+=u.text}}return d.length>0&&console.warn(`there are non-text parts ${d} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?i:void 0}get data(){var e,s,n;let i="";const l=[];for(const d of(n=(s=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||s===void 0?void 0:s.parts)!==null&&n!==void 0?n:[]){for(const[u,f]of Object.entries(d))u!=="inlineData"&&f!==null&&l.push(u);d.inlineData&&typeof d.inlineData.data=="string"&&(i+=atob(d.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class UT{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class km{_fromAPIResponse({apiResponse:e,_isVertexAI:s}){const n=new km,l=Ow(e);return Object.assign(n,l),n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Qe(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const s=e.split("/",2);return`publishers/${s[0]}/models/${s[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function qw(t,e){const s=Qe(t,e);return s?s.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${s}`:s.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${s}`:s:""}function Bw(t){return Array.isArray(t)?t.map(e=>nd(e)):[nd(t)]}function nd(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function $w(t){const e=nd(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function zw(t){const e=nd(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Lv(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function Vw(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Lv(e)):[Lv(t)]}function Xf(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Ov(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function qv(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Yt(t){if(t==null)throw new Error("ContentUnion is required");return Xf(t)?t:{role:"user",parts:Vw(t)}}function Mm(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(s=>{const n=Yt(s);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]});if(t.isVertexAI()){const s=Yt(e);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]}return Array.isArray(e)?e.map(s=>Yt(s)):[Yt(e)]}function Qs(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Ov(t)||qv(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Yt(t)]}const e=[],s=[],n=Xf(t[0]);for(const i of t){const l=Xf(i);if(l!=n)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(i);else{if(Ov(i)||qv(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");s.push(i)}}return n||e.push({role:"user",parts:Vw(s)}),e}function LT(t,e){t.includes("null")&&(e.nullable=!0);const s=t.filter(n=>n!=="null");if(s.length===1)e.type=Object.values(Ke).includes(s[0].toUpperCase())?s[0].toUpperCase():Ke.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const n of s)e.anyOf.push({type:Object.values(Ke).includes(n.toUpperCase())?n.toUpperCase():Ke.TYPE_UNSPECIFIED})}}function go(t){const e={},s=["items"],n=["anyOf"],i=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=t.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,t=l[1]):l[1].type==="null"&&(e.nullable=!0,t=l[0])),t.type instanceof Array&&LT(t.type,e);for(const[d,u]of Object.entries(t))if(u!=null)if(d=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;e.type=Object.values(Ke).includes(u.toUpperCase())?u.toUpperCase():Ke.TYPE_UNSPECIFIED}else if(s.includes(d))e[d]=go(u);else if(n.includes(d)){const f=[];for(const m of u){if(m.type=="null"){e.nullable=!0;continue}f.push(go(m))}e[d]=f}else if(i.includes(d)){const f={};for(const[m,g]of Object.entries(u))f[m]=go(g);e[d]=f}else{if(d==="additionalProperties")continue;e[d]=u}return e}function Im(t){return go(t)}function Dm(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Pm(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Do(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=go(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=go(e.response));return t}function Po(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const s of t)e.push(s);return e}function OT(t,e,s,n=1){const i=!e.startsWith(`${s}/`)&&e.split("/").length===n;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${s}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${s}/${e}`:e:i?`${s}/${e}`:e}function rn(t,e){if(typeof e!="string")throw new Error("name must be a string");return OT(t,e,"cachedContents")}function Hw(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Un(t){return Am(t)}function qT(t){return t!=null&&typeof t=="object"&&"name"in t}function BT(t){return t!=null&&typeof t=="object"&&"video"in t}function $T(t){return t!=null&&typeof t=="object"&&"uri"in t}function Gw(t){var e;let s;if(qT(t)&&(s=t.name),!($T(t)&&(s=t.uri,s===void 0))&&!(BT(t)&&(s=(e=t.video)===null||e===void 0?void 0:e.uri,s===void 0))){if(typeof t=="string"&&(s=t),s===void 0)throw new Error("Could not extract file name from the provided input.");if(s.startsWith("https://")){const i=s.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${s}`);s=i[0]}else s.startsWith("files/")&&(s=s.split("files/")[1]);return s}}function Fw(t,e){let s;return t.isVertexAI()?s=e?"publishers/google/models":"models":s=e?"models":"tunedModels",s}function Jw(t){for(const e of["models","tunedModels","publisherModels"])if(zT(t,e))return t[e];return[]}function zT(t,e){return t!==null&&typeof t=="object"&&e in t}function VT(t,e={}){const s=t,n={name:s.name,description:s.description,parametersJsonSchema:s.inputSchema};return s.outputSchema&&(n.responseJsonSchema=s.outputSchema),e.behavior&&(n.behavior=e.behavior),{functionDeclarations:[n]}}function HT(t,e={}){const s=[],n=new Set;for(const i of t){const l=i.name;if(n.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);n.add(l);const d=VT(i,e);d.functionDeclarations&&s.push(...d.functionDeclarations)}return{functionDeclarations:s}}function Kw(t,e){let s;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))s={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))s={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))s={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");s={inlinedRequests:e}}else s=e;const n=[s.gcsUri,s.bigqueryUri].filter(Boolean).length,i=[s.inlinedRequests,s.fileName].filter(Boolean).length;if(t.isVertexAI()){if(i>0||n!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(n>0||i!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return s}function GT(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Yw(t){if(typeof t!="object"||t===null)return{};const e=t,s=e.inlinedResponses;if(typeof s!="object"||s===null)return t;const i=s.inlinedResponses;if(!Array.isArray(i)||i.length===0)return t;let l=!1;for(const d of i){if(typeof d!="object"||d===null)continue;const f=d.response;if(typeof f!="object"||f===null)continue;if(f.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Uo(t,e){const s=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(s))return s.split("/").pop();throw new Error(`Invalid batch job name: ${s}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(s))return s.split("/").pop();if(/^\d+$/.test(s))return s;throw new Error(`Invalid batch job name: ${s}.`)}function Ww(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function FT(t){const e={},s=p(t,["responsesFile"]);s!=null&&x(e,["fileName"],s);const n=p(t,["inlinedResponses","inlinedResponses"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(d=>EA(d))),x(e,["inlinedResponses"],l)}const i=p(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(d=>d)),x(e,["inlinedEmbedContentResponses"],l)}return e}function JT(t){const e={},s=p(t,["predictionsFormat"]);s!=null&&x(e,["format"],s);const n=p(t,["gcsDestination","outputUriPrefix"]);n!=null&&x(e,["gcsUri"],n);const i=p(t,["bigqueryDestination","outputUri"]);return i!=null&&x(e,["bigqueryUri"],i),e}function KT(t){const e={},s=p(t,["format"]);s!=null&&x(e,["predictionsFormat"],s);const n=p(t,["gcsUri"]);n!=null&&x(e,["gcsDestination","outputUriPrefix"],n);const i=p(t,["bigqueryUri"]);if(i!=null&&x(e,["bigqueryDestination","outputUri"],i),p(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(p(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(p(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Gc(t){const e={},s=p(t,["name"]);s!=null&&x(e,["name"],s);const n=p(t,["metadata","displayName"]);n!=null&&x(e,["displayName"],n);const i=p(t,["metadata","state"]);i!=null&&x(e,["state"],Ww(i));const l=p(t,["metadata","createTime"]);l!=null&&x(e,["createTime"],l);const d=p(t,["metadata","endTime"]);d!=null&&x(e,["endTime"],d);const u=p(t,["metadata","updateTime"]);u!=null&&x(e,["updateTime"],u);const f=p(t,["metadata","model"]);f!=null&&x(e,["model"],f);const m=p(t,["metadata","output"]);return m!=null&&x(e,["dest"],FT(Yw(m))),e}function Qf(t){const e={},s=p(t,["name"]);s!=null&&x(e,["name"],s);const n=p(t,["displayName"]);n!=null&&x(e,["displayName"],n);const i=p(t,["state"]);i!=null&&x(e,["state"],Ww(i));const l=p(t,["error"]);l!=null&&x(e,["error"],l);const d=p(t,["createTime"]);d!=null&&x(e,["createTime"],d);const u=p(t,["startTime"]);u!=null&&x(e,["startTime"],u);const f=p(t,["endTime"]);f!=null&&x(e,["endTime"],f);const m=p(t,["updateTime"]);m!=null&&x(e,["updateTime"],m);const g=p(t,["model"]);g!=null&&x(e,["model"],g);const v=p(t,["inputConfig"]);v!=null&&x(e,["src"],YT(v));const b=p(t,["outputConfig"]);b!=null&&x(e,["dest"],JT(Yw(b)));const _=p(t,["completionStats"]);return _!=null&&x(e,["completionStats"],_),e}function YT(t){const e={},s=p(t,["instancesFormat"]);s!=null&&x(e,["format"],s);const n=p(t,["gcsSource","uris"]);n!=null&&x(e,["gcsUri"],n);const i=p(t,["bigquerySource","inputUri"]);return i!=null&&x(e,["bigqueryUri"],i),e}function WT(t,e){const s={};if(p(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(p(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(p(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const n=p(e,["fileName"]);n!=null&&x(s,["fileName"],n);const i=p(e,["inlinedRequests"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(d=>jA(t,d))),x(s,["requests","requests"],l)}return s}function XT(t){const e={},s=p(t,["format"]);s!=null&&x(e,["instancesFormat"],s);const n=p(t,["gcsUri"]);n!=null&&x(e,["gcsSource","uris"],n);const i=p(t,["bigqueryUri"]);if(i!=null&&x(e,["bigquerySource","inputUri"],i),p(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(p(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function QT(t){const e={},s=p(t,["data"]);if(s!=null&&x(e,["data"],s),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["mimeType"]);return n!=null&&x(e,["mimeType"],n),e}function ZT(t,e){const s={},n=p(e,["name"]);return n!=null&&x(s,["_url","name"],Uo(t,n)),s}function eA(t,e){const s={},n=p(e,["name"]);return n!=null&&x(s,["_url","name"],Uo(t,n)),s}function tA(t){const e={},s=p(t,["content"]);s!=null&&x(e,["content"],s);const n=p(t,["citationMetadata"]);n!=null&&x(e,["citationMetadata"],sA(n));const i=p(t,["tokenCount"]);i!=null&&x(e,["tokenCount"],i);const l=p(t,["finishReason"]);l!=null&&x(e,["finishReason"],l);const d=p(t,["avgLogprobs"]);d!=null&&x(e,["avgLogprobs"],d);const u=p(t,["groundingMetadata"]);u!=null&&x(e,["groundingMetadata"],u);const f=p(t,["index"]);f!=null&&x(e,["index"],f);const m=p(t,["logprobsResult"]);m!=null&&x(e,["logprobsResult"],m);const g=p(t,["safetyRatings"]);if(g!=null){let b=g;Array.isArray(b)&&(b=b.map(_=>_)),x(e,["safetyRatings"],b)}const v=p(t,["urlContextMetadata"]);return v!=null&&x(e,["urlContextMetadata"],v),e}function sA(t){const e={},s=p(t,["citationSources"]);if(s!=null){let n=s;Array.isArray(n)&&(n=n.map(i=>i)),x(e,["citations"],n)}return e}function Xw(t){const e={},s=p(t,["parts"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(l=>IA(l))),x(e,["parts"],i)}const n=p(t,["role"]);return n!=null&&x(e,["role"],n),e}function aA(t,e){const s={},n=p(t,["displayName"]);if(e!==void 0&&n!=null&&x(e,["batch","displayName"],n),p(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return s}function nA(t,e){const s={},n=p(t,["displayName"]);e!==void 0&&n!=null&&x(e,["displayName"],n);const i=p(t,["dest"]);return e!==void 0&&i!=null&&x(e,["outputConfig"],KT(GT(i))),s}function Bv(t,e){const s={},n=p(e,["model"]);n!=null&&x(s,["_url","model"],Qe(t,n));const i=p(e,["src"]);i!=null&&x(s,["batch","inputConfig"],WT(t,Kw(t,i)));const l=p(e,["config"]);return l!=null&&aA(l,s),s}function rA(t,e){const s={},n=p(e,["model"]);n!=null&&x(s,["model"],Qe(t,n));const i=p(e,["src"]);i!=null&&x(s,["inputConfig"],XT(Kw(t,i)));const l=p(e,["config"]);return l!=null&&nA(l,s),s}function oA(t,e){const s={},n=p(t,["displayName"]);return e!==void 0&&n!=null&&x(e,["batch","displayName"],n),s}function iA(t,e){const s={},n=p(e,["model"]);n!=null&&x(s,["_url","model"],Qe(t,n));const i=p(e,["src"]);i!=null&&x(s,["batch","inputConfig"],mA(t,i));const l=p(e,["config"]);return l!=null&&oA(l,s),s}function lA(t,e){const s={},n=p(e,["name"]);return n!=null&&x(s,["_url","name"],Uo(t,n)),s}function cA(t,e){const s={},n=p(e,["name"]);return n!=null&&x(s,["_url","name"],Uo(t,n)),s}function dA(t){const e={},s=p(t,["sdkHttpResponse"]);s!=null&&x(e,["sdkHttpResponse"],s);const n=p(t,["name"]);n!=null&&x(e,["name"],n);const i=p(t,["done"]);i!=null&&x(e,["done"],i);const l=p(t,["error"]);return l!=null&&x(e,["error"],l),e}function uA(t){const e={},s=p(t,["sdkHttpResponse"]);s!=null&&x(e,["sdkHttpResponse"],s);const n=p(t,["name"]);n!=null&&x(e,["name"],n);const i=p(t,["done"]);i!=null&&x(e,["done"],i);const l=p(t,["error"]);return l!=null&&x(e,["error"],l),e}function hA(t,e){const s={},n=p(e,["contents"]);if(n!=null){let l=Mm(t,n);Array.isArray(l)&&(l=l.map(d=>d)),x(s,["requests[]","request","content"],l)}const i=p(e,["config"]);return i!=null&&(x(s,["_self"],fA(i,s)),cT(s,{"requests[].*":"requests[].request.*"})),s}function fA(t,e){const s={},n=p(t,["taskType"]);e!==void 0&&n!=null&&x(e,["requests[]","taskType"],n);const i=p(t,["title"]);e!==void 0&&i!=null&&x(e,["requests[]","title"],i);const l=p(t,["outputDimensionality"]);if(e!==void 0&&l!=null&&x(e,["requests[]","outputDimensionality"],l),p(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(p(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return s}function mA(t,e){const s={},n=p(e,["fileName"]);n!=null&&x(s,["file_name"],n);const i=p(e,["inlinedRequests"]);return i!=null&&x(s,["requests"],hA(t,i)),s}function pA(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=p(t,["fileUri"]);s!=null&&x(e,["fileUri"],s);const n=p(t,["mimeType"]);return n!=null&&x(e,["mimeType"],n),e}function gA(t){const e={},s=p(t,["id"]);s!=null&&x(e,["id"],s);const n=p(t,["args"]);n!=null&&x(e,["args"],n);const i=p(t,["name"]);if(i!=null&&x(e,["name"],i),p(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function xA(t){const e={},s=p(t,["mode"]);s!=null&&x(e,["mode"],s);const n=p(t,["allowedFunctionNames"]);if(n!=null&&x(e,["allowedFunctionNames"],n),p(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function yA(t,e,s){const n={},i=p(e,["systemInstruction"]);s!==void 0&&i!=null&&x(s,["systemInstruction"],Xw(Yt(i)));const l=p(e,["temperature"]);l!=null&&x(n,["temperature"],l);const d=p(e,["topP"]);d!=null&&x(n,["topP"],d);const u=p(e,["topK"]);u!=null&&x(n,["topK"],u);const f=p(e,["candidateCount"]);f!=null&&x(n,["candidateCount"],f);const m=p(e,["maxOutputTokens"]);m!=null&&x(n,["maxOutputTokens"],m);const g=p(e,["stopSequences"]);g!=null&&x(n,["stopSequences"],g);const v=p(e,["responseLogprobs"]);v!=null&&x(n,["responseLogprobs"],v);const b=p(e,["logprobs"]);b!=null&&x(n,["logprobs"],b);const _=p(e,["presencePenalty"]);_!=null&&x(n,["presencePenalty"],_);const S=p(e,["frequencyPenalty"]);S!=null&&x(n,["frequencyPenalty"],S);const E=p(e,["seed"]);E!=null&&x(n,["seed"],E);const C=p(e,["responseMimeType"]);C!=null&&x(n,["responseMimeType"],C);const T=p(e,["responseSchema"]);T!=null&&x(n,["responseSchema"],Im(T));const R=p(e,["responseJsonSchema"]);if(R!=null&&x(n,["responseJsonSchema"],R),p(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(p(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const A=p(e,["safetySettings"]);if(s!==void 0&&A!=null){let $=A;Array.isArray($)&&($=$.map(ie=>DA(ie))),x(s,["safetySettings"],$)}const M=p(e,["tools"]);if(s!==void 0&&M!=null){let $=Po(M);Array.isArray($)&&($=$.map(ie=>UA(Do(ie)))),x(s,["tools"],$)}const z=p(e,["toolConfig"]);if(s!==void 0&&z!=null&&x(s,["toolConfig"],PA(z)),p(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const F=p(e,["cachedContent"]);s!==void 0&&F!=null&&x(s,["cachedContent"],rn(t,F));const G=p(e,["responseModalities"]);G!=null&&x(n,["responseModalities"],G);const K=p(e,["mediaResolution"]);K!=null&&x(n,["mediaResolution"],K);const I=p(e,["speechConfig"]);if(I!=null&&x(n,["speechConfig"],Dm(I)),p(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=p(e,["thinkingConfig"]);U!=null&&x(n,["thinkingConfig"],U);const q=p(e,["imageConfig"]);q!=null&&x(n,["imageConfig"],SA(q));const H=p(e,["enableEnhancedCivicAnswers"]);return H!=null&&x(n,["enableEnhancedCivicAnswers"],H),n}function vA(t){const e={},s=p(t,["sdkHttpResponse"]);s!=null&&x(e,["sdkHttpResponse"],s);const n=p(t,["candidates"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(m=>tA(m))),x(e,["candidates"],f)}const i=p(t,["modelVersion"]);i!=null&&x(e,["modelVersion"],i);const l=p(t,["promptFeedback"]);l!=null&&x(e,["promptFeedback"],l);const d=p(t,["responseId"]);d!=null&&x(e,["responseId"],d);const u=p(t,["usageMetadata"]);return u!=null&&x(e,["usageMetadata"],u),e}function bA(t,e){const s={},n=p(e,["name"]);return n!=null&&x(s,["_url","name"],Uo(t,n)),s}function wA(t,e){const s={},n=p(e,["name"]);return n!=null&&x(s,["_url","name"],Uo(t,n)),s}function NA(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const s=p(t,["enableWidget"]);return s!=null&&x(e,["enableWidget"],s),e}function _A(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const s=p(t,["timeRangeFilter"]);return s!=null&&x(e,["timeRangeFilter"],s),e}function SA(t){const e={},s=p(t,["aspectRatio"]);s!=null&&x(e,["aspectRatio"],s);const n=p(t,["imageSize"]);if(n!=null&&x(e,["imageSize"],n),p(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(p(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function jA(t,e){const s={},n=p(e,["model"]);n!=null&&x(s,["request","model"],Qe(t,n));const i=p(e,["contents"]);if(i!=null){let u=Qs(i);Array.isArray(u)&&(u=u.map(f=>Xw(f))),x(s,["request","contents"],u)}const l=p(e,["metadata"]);l!=null&&x(s,["metadata"],l);const d=p(e,["config"]);return d!=null&&x(s,["request","generationConfig"],yA(t,d,p(s,["request"],{}))),s}function EA(t){const e={},s=p(t,["response"]);s!=null&&x(e,["response"],vA(s));const n=p(t,["error"]);return n!=null&&x(e,["error"],n),e}function CA(t,e){const s={},n=p(t,["pageSize"]);e!==void 0&&n!=null&&x(e,["_query","pageSize"],n);const i=p(t,["pageToken"]);if(e!==void 0&&i!=null&&x(e,["_query","pageToken"],i),p(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return s}function TA(t,e){const s={},n=p(t,["pageSize"]);e!==void 0&&n!=null&&x(e,["_query","pageSize"],n);const i=p(t,["pageToken"]);e!==void 0&&i!=null&&x(e,["_query","pageToken"],i);const l=p(t,["filter"]);return e!==void 0&&l!=null&&x(e,["_query","filter"],l),s}function AA(t){const e={},s=p(t,["config"]);return s!=null&&CA(s,e),e}function RA(t){const e={},s=p(t,["config"]);return s!=null&&TA(s,e),e}function kA(t){const e={},s=p(t,["sdkHttpResponse"]);s!=null&&x(e,["sdkHttpResponse"],s);const n=p(t,["nextPageToken"]);n!=null&&x(e,["nextPageToken"],n);const i=p(t,["operations"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(d=>Gc(d))),x(e,["batchJobs"],l)}return e}function MA(t){const e={},s=p(t,["sdkHttpResponse"]);s!=null&&x(e,["sdkHttpResponse"],s);const n=p(t,["nextPageToken"]);n!=null&&x(e,["nextPageToken"],n);const i=p(t,["batchPredictionJobs"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(d=>Qf(d))),x(e,["batchJobs"],l)}return e}function IA(t){const e={},s=p(t,["mediaResolution"]);s!=null&&x(e,["mediaResolution"],s);const n=p(t,["codeExecutionResult"]);n!=null&&x(e,["codeExecutionResult"],n);const i=p(t,["executableCode"]);i!=null&&x(e,["executableCode"],i);const l=p(t,["fileData"]);l!=null&&x(e,["fileData"],pA(l));const d=p(t,["functionCall"]);d!=null&&x(e,["functionCall"],gA(d));const u=p(t,["functionResponse"]);u!=null&&x(e,["functionResponse"],u);const f=p(t,["inlineData"]);f!=null&&x(e,["inlineData"],QT(f));const m=p(t,["text"]);m!=null&&x(e,["text"],m);const g=p(t,["thought"]);g!=null&&x(e,["thought"],g);const v=p(t,["thoughtSignature"]);v!=null&&x(e,["thoughtSignature"],v);const b=p(t,["videoMetadata"]);return b!=null&&x(e,["videoMetadata"],b),e}function DA(t){const e={},s=p(t,["category"]);if(s!=null&&x(e,["category"],s),p(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=p(t,["threshold"]);return n!=null&&x(e,["threshold"],n),e}function PA(t){const e={},s=p(t,["functionCallingConfig"]);s!=null&&x(e,["functionCallingConfig"],xA(s));const n=p(t,["retrievalConfig"]);return n!=null&&x(e,["retrievalConfig"],n),e}function UA(t){const e={},s=p(t,["functionDeclarations"]);if(s!=null){let g=s;Array.isArray(g)&&(g=g.map(v=>v)),x(e,["functionDeclarations"],g)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=p(t,["googleSearchRetrieval"]);n!=null&&x(e,["googleSearchRetrieval"],n);const i=p(t,["computerUse"]);i!=null&&x(e,["computerUse"],i);const l=p(t,["fileSearch"]);l!=null&&x(e,["fileSearch"],l);const d=p(t,["codeExecution"]);if(d!=null&&x(e,["codeExecution"],d),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=p(t,["googleMaps"]);u!=null&&x(e,["googleMaps"],NA(u));const f=p(t,["googleSearch"]);f!=null&&x(e,["googleSearch"],_A(f));const m=p(t,["urlContext"]);return m!=null&&x(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Za;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(Za||(Za={}));class mr{constructor(e,s,n,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=s,this.init(e,n,i)}init(e,s,n){var i,l;this.nameInternal=e,this.pageInternal=s[this.nameInternal]||[],this.sdkHttpResponseInternal=s==null?void 0:s.sdkHttpResponse,this.idxInternal=0;let d={config:{}};!n||Object.keys(n).length===0?d={config:{}}:typeof n=="object"?d=Object.assign({},n):d=n,d.config&&(d.config.pageToken=s.nextPageToken),this.paramsInternal=d,this.pageInternalSize=(l=(i=d.config)===null||i===void 0?void 0:i.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class LA extends nn{constructor(e){super(),this.apiClient=e,this.list=async(s={})=>new mr(Za.PAGED_ITEM_BATCH_JOBS,n=>this.listInternal(n),await this.listInternal(s),s),this.create=async s=>(this.apiClient.isVertexAI()&&(s.config=this.formatDestination(s.src,s.config)),this.createInternal(s)),this.createEmbeddings=async s=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(s)}}createInlinedGenerateContentRequest(e){const s=Bv(this.apiClient,e),n=s._url,i=ge("{model}:batchGenerateContent",n),u=s.batch.inputConfig.requests,f=u.requests,m=[];for(const g of f){const v=Object.assign({},g);if(v.systemInstruction){const b=v.systemInstruction;delete v.systemInstruction;const _=v.request;_.systemInstruction=b,v.request=_}m.push(v)}return u.requests=m,delete s.config,delete s._url,delete s._query,{path:i,body:s}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,s){const n=s?Object.assign({},s):{},i=Date.now().toString();if(n.displayName||(n.displayName=`genaiBatchJob_${i}`),n.dest===void 0){const l=this.getGcsUri(e),d=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?n.dest=`${l.slice(0,-6)}/dest`:n.dest=`${l}_dest_${i}`;else if(d)n.dest=`${d}_dest_${i}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return n}async createInternal(e){var s,n,i,l;let d,u="",f={};if(this.apiClient.isVertexAI()){const m=rA(this.apiClient,e);return u=ge("batchPredictionJobs",m._url),f=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(g=>g.json()),d.then(g=>Qf(g))}else{const m=Bv(this.apiClient,e);return u=ge("{model}:batchGenerateContent",m._url),f=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json()),d.then(g=>Gc(g))}}async createEmbeddingsInternal(e){var s,n;let i,l="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=iA(this.apiClient,e);return l=ge("{model}:asyncBatchEmbedContent",u._url),d=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),i.then(f=>Gc(f))}}async get(e){var s,n,i,l;let d,u="",f={};if(this.apiClient.isVertexAI()){const m=wA(this.apiClient,e);return u=ge("batchPredictionJobs/{name}",m._url),f=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(g=>g.json()),d.then(g=>Qf(g))}else{const m=bA(this.apiClient,e);return u=ge("batches/{name}",m._url),f=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json()),d.then(g=>Gc(g))}}async cancel(e){var s,n,i,l;let d="",u={};if(this.apiClient.isVertexAI()){const f=eA(this.apiClient,e);d=ge("batchPredictionJobs/{name}:cancel",f._url),u=f._query,delete f._url,delete f._query,await this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal})}else{const f=ZT(this.apiClient,e);d=ge("batches/{name}:cancel",f._url),u=f._query,delete f._url,delete f._query,await this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var s,n,i,l;let d,u="",f={};if(this.apiClient.isVertexAI()){const m=RA(e);return u=ge("batchPredictionJobs",m._url),f=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(g=>g.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:g.headers},b})),d.then(g=>{const v=MA(g),b=new Uv;return Object.assign(b,v),b})}else{const m=AA(e);return u=ge("batches",m._url),f=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:g.headers},b})),d.then(g=>{const v=kA(g),b=new Uv;return Object.assign(b,v),b})}}async delete(e){var s,n,i,l;let d,u="",f={};if(this.apiClient.isVertexAI()){const m=cA(this.apiClient,e);return u=ge("batchPredictionJobs/{name}",m._url),f=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(g=>g.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:g.headers},b})),d.then(g=>uA(g))}else{const m=lA(this.apiClient,e);return u=ge("batches/{name}",m._url),f=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:g.headers},b})),d.then(g=>dA(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function OA(t){const e={},s=p(t,["data"]);if(s!=null&&x(e,["data"],s),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["mimeType"]);return n!=null&&x(e,["mimeType"],n),e}function $v(t){const e={},s=p(t,["parts"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(l=>i4(l))),x(e,["parts"],i)}const n=p(t,["role"]);return n!=null&&x(e,["role"],n),e}function qA(t,e){const s={},n=p(t,["ttl"]);e!==void 0&&n!=null&&x(e,["ttl"],n);const i=p(t,["expireTime"]);e!==void 0&&i!=null&&x(e,["expireTime"],i);const l=p(t,["displayName"]);e!==void 0&&l!=null&&x(e,["displayName"],l);const d=p(t,["contents"]);if(e!==void 0&&d!=null){let g=Qs(d);Array.isArray(g)&&(g=g.map(v=>$v(v))),x(e,["contents"],g)}const u=p(t,["systemInstruction"]);e!==void 0&&u!=null&&x(e,["systemInstruction"],$v(Yt(u)));const f=p(t,["tools"]);if(e!==void 0&&f!=null){let g=f;Array.isArray(g)&&(g=g.map(v=>c4(v))),x(e,["tools"],g)}const m=p(t,["toolConfig"]);if(e!==void 0&&m!=null&&x(e,["toolConfig"],l4(m)),p(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return s}function BA(t,e){const s={},n=p(t,["ttl"]);e!==void 0&&n!=null&&x(e,["ttl"],n);const i=p(t,["expireTime"]);e!==void 0&&i!=null&&x(e,["expireTime"],i);const l=p(t,["displayName"]);e!==void 0&&l!=null&&x(e,["displayName"],l);const d=p(t,["contents"]);if(e!==void 0&&d!=null){let v=Qs(d);Array.isArray(v)&&(v=v.map(b=>b)),x(e,["contents"],v)}const u=p(t,["systemInstruction"]);e!==void 0&&u!=null&&x(e,["systemInstruction"],Yt(u));const f=p(t,["tools"]);if(e!==void 0&&f!=null){let v=f;Array.isArray(v)&&(v=v.map(b=>d4(b))),x(e,["tools"],v)}const m=p(t,["toolConfig"]);e!==void 0&&m!=null&&x(e,["toolConfig"],m);const g=p(t,["kmsKeyName"]);return e!==void 0&&g!=null&&x(e,["encryption_spec","kmsKeyName"],g),s}function $A(t,e){const s={},n=p(e,["model"]);n!=null&&x(s,["model"],qw(t,n));const i=p(e,["config"]);return i!=null&&qA(i,s),s}function zA(t,e){const s={},n=p(e,["model"]);n!=null&&x(s,["model"],qw(t,n));const i=p(e,["config"]);return i!=null&&BA(i,s),s}function VA(t,e){const s={},n=p(e,["name"]);return n!=null&&x(s,["_url","name"],rn(t,n)),s}function HA(t,e){const s={},n=p(e,["name"]);return n!=null&&x(s,["_url","name"],rn(t,n)),s}function GA(t){const e={},s=p(t,["sdkHttpResponse"]);return s!=null&&x(e,["sdkHttpResponse"],s),e}function FA(t){const e={},s=p(t,["sdkHttpResponse"]);return s!=null&&x(e,["sdkHttpResponse"],s),e}function JA(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=p(t,["fileUri"]);s!=null&&x(e,["fileUri"],s);const n=p(t,["mimeType"]);return n!=null&&x(e,["mimeType"],n),e}function KA(t){const e={},s=p(t,["id"]);s!=null&&x(e,["id"],s);const n=p(t,["args"]);n!=null&&x(e,["args"],n);const i=p(t,["name"]);if(i!=null&&x(e,["name"],i),p(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function YA(t){const e={},s=p(t,["mode"]);s!=null&&x(e,["mode"],s);const n=p(t,["allowedFunctionNames"]);if(n!=null&&x(e,["allowedFunctionNames"],n),p(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function WA(t){const e={};if(p(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const s=p(t,["description"]);s!=null&&x(e,["description"],s);const n=p(t,["name"]);n!=null&&x(e,["name"],n);const i=p(t,["parameters"]);i!=null&&x(e,["parameters"],i);const l=p(t,["parametersJsonSchema"]);l!=null&&x(e,["parametersJsonSchema"],l);const d=p(t,["response"]);d!=null&&x(e,["response"],d);const u=p(t,["responseJsonSchema"]);return u!=null&&x(e,["responseJsonSchema"],u),e}function XA(t,e){const s={},n=p(e,["name"]);return n!=null&&x(s,["_url","name"],rn(t,n)),s}function QA(t,e){const s={},n=p(e,["name"]);return n!=null&&x(s,["_url","name"],rn(t,n)),s}function ZA(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const s=p(t,["enableWidget"]);return s!=null&&x(e,["enableWidget"],s),e}function e4(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const s=p(t,["timeRangeFilter"]);return s!=null&&x(e,["timeRangeFilter"],s),e}function t4(t,e){const s={},n=p(t,["pageSize"]);e!==void 0&&n!=null&&x(e,["_query","pageSize"],n);const i=p(t,["pageToken"]);return e!==void 0&&i!=null&&x(e,["_query","pageToken"],i),s}function s4(t,e){const s={},n=p(t,["pageSize"]);e!==void 0&&n!=null&&x(e,["_query","pageSize"],n);const i=p(t,["pageToken"]);return e!==void 0&&i!=null&&x(e,["_query","pageToken"],i),s}function a4(t){const e={},s=p(t,["config"]);return s!=null&&t4(s,e),e}function n4(t){const e={},s=p(t,["config"]);return s!=null&&s4(s,e),e}function r4(t){const e={},s=p(t,["sdkHttpResponse"]);s!=null&&x(e,["sdkHttpResponse"],s);const n=p(t,["nextPageToken"]);n!=null&&x(e,["nextPageToken"],n);const i=p(t,["cachedContents"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(d=>d)),x(e,["cachedContents"],l)}return e}function o4(t){const e={},s=p(t,["sdkHttpResponse"]);s!=null&&x(e,["sdkHttpResponse"],s);const n=p(t,["nextPageToken"]);n!=null&&x(e,["nextPageToken"],n);const i=p(t,["cachedContents"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(d=>d)),x(e,["cachedContents"],l)}return e}function i4(t){const e={},s=p(t,["mediaResolution"]);s!=null&&x(e,["mediaResolution"],s);const n=p(t,["codeExecutionResult"]);n!=null&&x(e,["codeExecutionResult"],n);const i=p(t,["executableCode"]);i!=null&&x(e,["executableCode"],i);const l=p(t,["fileData"]);l!=null&&x(e,["fileData"],JA(l));const d=p(t,["functionCall"]);d!=null&&x(e,["functionCall"],KA(d));const u=p(t,["functionResponse"]);u!=null&&x(e,["functionResponse"],u);const f=p(t,["inlineData"]);f!=null&&x(e,["inlineData"],OA(f));const m=p(t,["text"]);m!=null&&x(e,["text"],m);const g=p(t,["thought"]);g!=null&&x(e,["thought"],g);const v=p(t,["thoughtSignature"]);v!=null&&x(e,["thoughtSignature"],v);const b=p(t,["videoMetadata"]);return b!=null&&x(e,["videoMetadata"],b),e}function l4(t){const e={},s=p(t,["functionCallingConfig"]);s!=null&&x(e,["functionCallingConfig"],YA(s));const n=p(t,["retrievalConfig"]);return n!=null&&x(e,["retrievalConfig"],n),e}function c4(t){const e={},s=p(t,["functionDeclarations"]);if(s!=null){let g=s;Array.isArray(g)&&(g=g.map(v=>v)),x(e,["functionDeclarations"],g)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=p(t,["googleSearchRetrieval"]);n!=null&&x(e,["googleSearchRetrieval"],n);const i=p(t,["computerUse"]);i!=null&&x(e,["computerUse"],i);const l=p(t,["fileSearch"]);l!=null&&x(e,["fileSearch"],l);const d=p(t,["codeExecution"]);if(d!=null&&x(e,["codeExecution"],d),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=p(t,["googleMaps"]);u!=null&&x(e,["googleMaps"],ZA(u));const f=p(t,["googleSearch"]);f!=null&&x(e,["googleSearch"],e4(f));const m=p(t,["urlContext"]);return m!=null&&x(e,["urlContext"],m),e}function d4(t){const e={},s=p(t,["functionDeclarations"]);if(s!=null){let v=s;Array.isArray(v)&&(v=v.map(b=>WA(b))),x(e,["functionDeclarations"],v)}const n=p(t,["retrieval"]);n!=null&&x(e,["retrieval"],n);const i=p(t,["googleSearchRetrieval"]);i!=null&&x(e,["googleSearchRetrieval"],i);const l=p(t,["computerUse"]);if(l!=null&&x(e,["computerUse"],l),p(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const d=p(t,["codeExecution"]);d!=null&&x(e,["codeExecution"],d);const u=p(t,["enterpriseWebSearch"]);u!=null&&x(e,["enterpriseWebSearch"],u);const f=p(t,["googleMaps"]);f!=null&&x(e,["googleMaps"],f);const m=p(t,["googleSearch"]);m!=null&&x(e,["googleSearch"],m);const g=p(t,["urlContext"]);return g!=null&&x(e,["urlContext"],g),e}function u4(t,e){const s={},n=p(t,["ttl"]);e!==void 0&&n!=null&&x(e,["ttl"],n);const i=p(t,["expireTime"]);return e!==void 0&&i!=null&&x(e,["expireTime"],i),s}function h4(t,e){const s={},n=p(t,["ttl"]);e!==void 0&&n!=null&&x(e,["ttl"],n);const i=p(t,["expireTime"]);return e!==void 0&&i!=null&&x(e,["expireTime"],i),s}function f4(t,e){const s={},n=p(e,["name"]);n!=null&&x(s,["_url","name"],rn(t,n));const i=p(e,["config"]);return i!=null&&u4(i,s),s}function m4(t,e){const s={},n=p(e,["name"]);n!=null&&x(s,["_url","name"],rn(t,n));const i=p(e,["config"]);return i!=null&&h4(i,s),s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class p4 extends nn{constructor(e){super(),this.apiClient=e,this.list=async(s={})=>new mr(Za.PAGED_ITEM_CACHED_CONTENTS,n=>this.listInternal(n),await this.listInternal(s),s)}async create(e){var s,n,i,l;let d,u="",f={};if(this.apiClient.isVertexAI()){const m=zA(this.apiClient,e);return u=ge("cachedContents",m._url),f=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(g=>g.json()),d.then(g=>g)}else{const m=$A(this.apiClient,e);return u=ge("cachedContents",m._url),f=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json()),d.then(g=>g)}}async get(e){var s,n,i,l;let d,u="",f={};if(this.apiClient.isVertexAI()){const m=QA(this.apiClient,e);return u=ge("{name}",m._url),f=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(g=>g.json()),d.then(g=>g)}else{const m=XA(this.apiClient,e);return u=ge("{name}",m._url),f=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json()),d.then(g=>g)}}async delete(e){var s,n,i,l;let d,u="",f={};if(this.apiClient.isVertexAI()){const m=HA(this.apiClient,e);return u=ge("{name}",m._url),f=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(g=>g.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:g.headers},b})),d.then(g=>{const v=FA(g),b=new Dv;return Object.assign(b,v),b})}else{const m=VA(this.apiClient,e);return u=ge("{name}",m._url),f=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:g.headers},b})),d.then(g=>{const v=GA(g),b=new Dv;return Object.assign(b,v),b})}}async update(e){var s,n,i,l;let d,u="",f={};if(this.apiClient.isVertexAI()){const m=m4(this.apiClient,e);return u=ge("{name}",m._url),f=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(g=>g.json()),d.then(g=>g)}else{const m=f4(this.apiClient,e);return u=ge("{name}",m._url),f=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json()),d.then(g=>g)}}async listInternal(e){var s,n,i,l;let d,u="",f={};if(this.apiClient.isVertexAI()){const m=n4(e);return u=ge("cachedContents",m._url),f=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(g=>g.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:g.headers},b})),d.then(g=>{const v=o4(g),b=new Pv;return Object.assign(b,v),b})}else{const m=a4(e);return u=ge("cachedContents",m._url),f=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:g.headers},b})),d.then(g=>{const v=r4(g),b=new Pv;return Object.assign(b,v),b})}}}function rd(t,e){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(s[n[i]]=t[n[i]]);return s}function zv(t){var e=typeof Symbol=="function"&&Symbol.iterator,s=e&&t[e],n=0;if(s)return s.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Re(t){return this instanceof Re?(this.v=t,this):new Re(t)}function ha(t,e,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=s.apply(t,e||[]),i,l=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",d),i[Symbol.asyncIterator]=function(){return this},i;function d(_){return function(S){return Promise.resolve(S).then(_,v)}}function u(_,S){n[_]&&(i[_]=function(E){return new Promise(function(C,T){l.push([_,E,C,T])>1||f(_,E)})},S&&(i[_]=S(i[_])))}function f(_,S){try{m(n[_](S))}catch(E){b(l[0][3],E)}}function m(_){_.value instanceof Re?Promise.resolve(_.value.v).then(g,v):b(l[0][2],_)}function g(_){f("next",_)}function v(_){f("throw",_)}function b(_,S){_(S),l.shift(),l.length&&f(l[0][0],l[0][1])}}function fa(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],s;return e?e.call(t):(t=typeof zv=="function"?zv(t):t[Symbol.iterator](),s={},n("next"),n("throw"),n("return"),s[Symbol.asyncIterator]=function(){return this},s);function n(l){s[l]=t[l]&&function(d){return new Promise(function(u,f){d=t[l](d),i(u,f,d.done,d.value)})}}function i(l,d,u,f){Promise.resolve(f).then(function(m){l({value:m,done:u})},d)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function g4(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const s=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return s===void 0?!1:Qw(s)}function Qw(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function x4(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Vv(t){if(t===void 0||t.length===0)return[];const e=[],s=t.length;let n=0;for(;n<s;)if(t[n].role==="user")e.push(t[n]),n++;else{const i=[];let l=!0;for(;n<s&&t[n].role==="model";)i.push(t[n]),l&&!Qw(t[n])&&(l=!1),n++;l?e.push(...i):e.pop()}return e}class y4{constructor(e,s){this.modelsModule=e,this.apiClient=s}create(e){return new v4(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class v4{constructor(e,s,n,i={},l=[]){this.apiClient=e,this.modelsModule=s,this.model=n,this.config=i,this.history=l,this.sendPromise=Promise.resolve(),x4(l)}async sendMessage(e){var s;await this.sendPromise;const n=Yt(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(n),config:(s=e.config)!==null&&s!==void 0?s:this.config});return this.sendPromise=(async()=>{var l,d,u;const f=await i,m=(d=(l=f.candidates)===null||l===void 0?void 0:l[0])===null||d===void 0?void 0:d.content,g=f.automaticFunctionCallingHistory,v=this.getHistory(!0).length;let b=[];g!=null&&(b=(u=g.slice(v))!==null&&u!==void 0?u:[]);const _=m?[m]:[];this.recordHistory(n,_,b)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var s;await this.sendPromise;const n=Yt(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(n),config:(s=e.config)!==null&&s!==void 0?s:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const l=await i;return this.processStreamResponse(l,n)}getHistory(e=!1){const s=e?Vv(this.history):this.history;return structuredClone(s)}processStreamResponse(e,s){return ha(this,arguments,function*(){var i,l,d,u,f,m;const g=[];try{for(var v=!0,b=fa(e),_;_=yield Re(b.next()),i=_.done,!i;v=!0){u=_.value,v=!1;const S=u;if(g4(S)){const E=(m=(f=S.candidates)===null||f===void 0?void 0:f[0])===null||m===void 0?void 0:m.content;E!==void 0&&g.push(E)}yield yield Re(S)}}catch(S){l={error:S}}finally{try{!v&&!i&&(d=b.return)&&(yield Re(d.call(b)))}finally{if(l)throw l.error}}this.recordHistory(s,g)})}recordHistory(e,s,n){let i=[];s.length>0&&s.every(l=>l.role!==void 0)?i=s:i.push({role:"model",parts:[]}),n&&n.length>0?this.history.push(...Vv(n)):this.history.push(e),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gd extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,gd.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function b4(t){const e={},s=p(t,["file"]);return s!=null&&x(e,["file"],s),e}function w4(t){const e={},s=p(t,["sdkHttpResponse"]);return s!=null&&x(e,["sdkHttpResponse"],s),e}function N4(t){const e={},s=p(t,["name"]);return s!=null&&x(e,["_url","file"],Gw(s)),e}function _4(t){const e={},s=p(t,["sdkHttpResponse"]);return s!=null&&x(e,["sdkHttpResponse"],s),e}function S4(t){const e={},s=p(t,["name"]);return s!=null&&x(e,["_url","file"],Gw(s)),e}function j4(t,e){const s={},n=p(t,["pageSize"]);e!==void 0&&n!=null&&x(e,["_query","pageSize"],n);const i=p(t,["pageToken"]);return e!==void 0&&i!=null&&x(e,["_query","pageToken"],i),s}function E4(t){const e={},s=p(t,["config"]);return s!=null&&j4(s,e),e}function C4(t){const e={},s=p(t,["sdkHttpResponse"]);s!=null&&x(e,["sdkHttpResponse"],s);const n=p(t,["nextPageToken"]);n!=null&&x(e,["nextPageToken"],n);const i=p(t,["files"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(d=>d)),x(e,["files"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class T4 extends nn{constructor(e){super(),this.apiClient=e,this.list=async(s={})=>new mr(Za.PAGED_ITEM_FILES,n=>this.listInternal(n),await this.listInternal(s),s)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(s=>s)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var s,n;let i,l="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=E4(e);return l=ge("files",u._url),d=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:f.headers},g})),i.then(f=>{const m=C4(f),g=new MT;return Object.assign(g,m),g})}}async createInternal(e){var s,n;let i,l="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=b4(e);return l=ge("upload/v1beta/files",u._url),d=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),i.then(f=>{const m=w4(f),g=new IT;return Object.assign(g,m),g})}}async get(e){var s,n;let i,l="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=S4(e);return l=ge("files/{file}",u._url),d=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),i.then(f=>f)}}async delete(e){var s,n;let i,l="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=N4(e);return l=ge("files/{file}",u._url),d=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:f.headers},g})),i.then(f=>{const m=_4(f),g=new DT;return Object.assign(g,m),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Fc(t){const e={},s=p(t,["data"]);if(s!=null&&x(e,["data"],s),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["mimeType"]);return n!=null&&x(e,["mimeType"],n),e}function A4(t){const e={},s=p(t,["parts"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(l=>G4(l))),x(e,["parts"],i)}const n=p(t,["role"]);return n!=null&&x(e,["role"],n),e}function R4(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=p(t,["fileUri"]);s!=null&&x(e,["fileUri"],s);const n=p(t,["mimeType"]);return n!=null&&x(e,["mimeType"],n),e}function k4(t){const e={},s=p(t,["id"]);s!=null&&x(e,["id"],s);const n=p(t,["args"]);n!=null&&x(e,["args"],n);const i=p(t,["name"]);if(i!=null&&x(e,["name"],i),p(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function M4(t){const e={};if(p(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const s=p(t,["description"]);s!=null&&x(e,["description"],s);const n=p(t,["name"]);n!=null&&x(e,["name"],n);const i=p(t,["parameters"]);i!=null&&x(e,["parameters"],i);const l=p(t,["parametersJsonSchema"]);l!=null&&x(e,["parametersJsonSchema"],l);const d=p(t,["response"]);d!=null&&x(e,["response"],d);const u=p(t,["responseJsonSchema"]);return u!=null&&x(e,["responseJsonSchema"],u),e}function I4(t){const e={},s=p(t,["modelSelectionConfig"]);s!=null&&x(e,["modelConfig"],s);const n=p(t,["responseJsonSchema"]);n!=null&&x(e,["responseJsonSchema"],n);const i=p(t,["audioTimestamp"]);i!=null&&x(e,["audioTimestamp"],i);const l=p(t,["candidateCount"]);l!=null&&x(e,["candidateCount"],l);const d=p(t,["enableAffectiveDialog"]);d!=null&&x(e,["enableAffectiveDialog"],d);const u=p(t,["frequencyPenalty"]);u!=null&&x(e,["frequencyPenalty"],u);const f=p(t,["logprobs"]);f!=null&&x(e,["logprobs"],f);const m=p(t,["maxOutputTokens"]);m!=null&&x(e,["maxOutputTokens"],m);const g=p(t,["mediaResolution"]);g!=null&&x(e,["mediaResolution"],g);const v=p(t,["presencePenalty"]);v!=null&&x(e,["presencePenalty"],v);const b=p(t,["responseLogprobs"]);b!=null&&x(e,["responseLogprobs"],b);const _=p(t,["responseMimeType"]);_!=null&&x(e,["responseMimeType"],_);const S=p(t,["responseModalities"]);S!=null&&x(e,["responseModalities"],S);const E=p(t,["responseSchema"]);E!=null&&x(e,["responseSchema"],E);const C=p(t,["routingConfig"]);C!=null&&x(e,["routingConfig"],C);const T=p(t,["seed"]);T!=null&&x(e,["seed"],T);const R=p(t,["speechConfig"]);R!=null&&x(e,["speechConfig"],R);const A=p(t,["stopSequences"]);A!=null&&x(e,["stopSequences"],A);const M=p(t,["temperature"]);M!=null&&x(e,["temperature"],M);const z=p(t,["thinkingConfig"]);z!=null&&x(e,["thinkingConfig"],z);const F=p(t,["topK"]);F!=null&&x(e,["topK"],F);const G=p(t,["topP"]);if(G!=null&&x(e,["topP"],G),p(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function D4(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const s=p(t,["enableWidget"]);return s!=null&&x(e,["enableWidget"],s),e}function P4(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const s=p(t,["timeRangeFilter"]);return s!=null&&x(e,["timeRangeFilter"],s),e}function U4(t,e){const s={},n=p(t,["generationConfig"]);e!==void 0&&n!=null&&x(e,["setup","generationConfig"],n);const i=p(t,["responseModalities"]);e!==void 0&&i!=null&&x(e,["setup","generationConfig","responseModalities"],i);const l=p(t,["temperature"]);e!==void 0&&l!=null&&x(e,["setup","generationConfig","temperature"],l);const d=p(t,["topP"]);e!==void 0&&d!=null&&x(e,["setup","generationConfig","topP"],d);const u=p(t,["topK"]);e!==void 0&&u!=null&&x(e,["setup","generationConfig","topK"],u);const f=p(t,["maxOutputTokens"]);e!==void 0&&f!=null&&x(e,["setup","generationConfig","maxOutputTokens"],f);const m=p(t,["mediaResolution"]);e!==void 0&&m!=null&&x(e,["setup","generationConfig","mediaResolution"],m);const g=p(t,["seed"]);e!==void 0&&g!=null&&x(e,["setup","generationConfig","seed"],g);const v=p(t,["speechConfig"]);e!==void 0&&v!=null&&x(e,["setup","generationConfig","speechConfig"],Pm(v));const b=p(t,["thinkingConfig"]);e!==void 0&&b!=null&&x(e,["setup","generationConfig","thinkingConfig"],b);const _=p(t,["enableAffectiveDialog"]);e!==void 0&&_!=null&&x(e,["setup","generationConfig","enableAffectiveDialog"],_);const S=p(t,["systemInstruction"]);e!==void 0&&S!=null&&x(e,["setup","systemInstruction"],A4(Yt(S)));const E=p(t,["tools"]);if(e!==void 0&&E!=null){let F=Po(E);Array.isArray(F)&&(F=F.map(G=>J4(Do(G)))),x(e,["setup","tools"],F)}const C=p(t,["sessionResumption"]);e!==void 0&&C!=null&&x(e,["setup","sessionResumption"],F4(C));const T=p(t,["inputAudioTranscription"]);e!==void 0&&T!=null&&x(e,["setup","inputAudioTranscription"],T);const R=p(t,["outputAudioTranscription"]);e!==void 0&&R!=null&&x(e,["setup","outputAudioTranscription"],R);const A=p(t,["realtimeInputConfig"]);e!==void 0&&A!=null&&x(e,["setup","realtimeInputConfig"],A);const M=p(t,["contextWindowCompression"]);e!==void 0&&M!=null&&x(e,["setup","contextWindowCompression"],M);const z=p(t,["proactivity"]);if(e!==void 0&&z!=null&&x(e,["setup","proactivity"],z),p(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return s}function L4(t,e){const s={},n=p(t,["generationConfig"]);e!==void 0&&n!=null&&x(e,["setup","generationConfig"],I4(n));const i=p(t,["responseModalities"]);e!==void 0&&i!=null&&x(e,["setup","generationConfig","responseModalities"],i);const l=p(t,["temperature"]);e!==void 0&&l!=null&&x(e,["setup","generationConfig","temperature"],l);const d=p(t,["topP"]);e!==void 0&&d!=null&&x(e,["setup","generationConfig","topP"],d);const u=p(t,["topK"]);e!==void 0&&u!=null&&x(e,["setup","generationConfig","topK"],u);const f=p(t,["maxOutputTokens"]);e!==void 0&&f!=null&&x(e,["setup","generationConfig","maxOutputTokens"],f);const m=p(t,["mediaResolution"]);e!==void 0&&m!=null&&x(e,["setup","generationConfig","mediaResolution"],m);const g=p(t,["seed"]);e!==void 0&&g!=null&&x(e,["setup","generationConfig","seed"],g);const v=p(t,["speechConfig"]);e!==void 0&&v!=null&&x(e,["setup","generationConfig","speechConfig"],Pm(v));const b=p(t,["thinkingConfig"]);e!==void 0&&b!=null&&x(e,["setup","generationConfig","thinkingConfig"],b);const _=p(t,["enableAffectiveDialog"]);e!==void 0&&_!=null&&x(e,["setup","generationConfig","enableAffectiveDialog"],_);const S=p(t,["systemInstruction"]);e!==void 0&&S!=null&&x(e,["setup","systemInstruction"],Yt(S));const E=p(t,["tools"]);if(e!==void 0&&E!=null){let G=Po(E);Array.isArray(G)&&(G=G.map(K=>K4(Do(K)))),x(e,["setup","tools"],G)}const C=p(t,["sessionResumption"]);e!==void 0&&C!=null&&x(e,["setup","sessionResumption"],C);const T=p(t,["inputAudioTranscription"]);e!==void 0&&T!=null&&x(e,["setup","inputAudioTranscription"],T);const R=p(t,["outputAudioTranscription"]);e!==void 0&&R!=null&&x(e,["setup","outputAudioTranscription"],R);const A=p(t,["realtimeInputConfig"]);e!==void 0&&A!=null&&x(e,["setup","realtimeInputConfig"],A);const M=p(t,["contextWindowCompression"]);e!==void 0&&M!=null&&x(e,["setup","contextWindowCompression"],M);const z=p(t,["proactivity"]);e!==void 0&&z!=null&&x(e,["setup","proactivity"],z);const F=p(t,["explicitVadSignal"]);return e!==void 0&&F!=null&&x(e,["setup","explicitVadSignal"],F),s}function O4(t,e){const s={},n=p(e,["model"]);n!=null&&x(s,["setup","model"],Qe(t,n));const i=p(e,["config"]);return i!=null&&x(s,["config"],U4(i,s)),s}function q4(t,e){const s={},n=p(e,["model"]);n!=null&&x(s,["setup","model"],Qe(t,n));const i=p(e,["config"]);return i!=null&&x(s,["config"],L4(i,s)),s}function B4(t){const e={},s=p(t,["musicGenerationConfig"]);return s!=null&&x(e,["musicGenerationConfig"],s),e}function $4(t){const e={},s=p(t,["weightedPrompts"]);if(s!=null){let n=s;Array.isArray(n)&&(n=n.map(i=>i)),x(e,["weightedPrompts"],n)}return e}function z4(t){const e={},s=p(t,["media"]);if(s!=null){let m=Bw(s);Array.isArray(m)&&(m=m.map(g=>Fc(g))),x(e,["mediaChunks"],m)}const n=p(t,["audio"]);n!=null&&x(e,["audio"],Fc(zw(n)));const i=p(t,["audioStreamEnd"]);i!=null&&x(e,["audioStreamEnd"],i);const l=p(t,["video"]);l!=null&&x(e,["video"],Fc($w(l)));const d=p(t,["text"]);d!=null&&x(e,["text"],d);const u=p(t,["activityStart"]);u!=null&&x(e,["activityStart"],u);const f=p(t,["activityEnd"]);return f!=null&&x(e,["activityEnd"],f),e}function V4(t){const e={},s=p(t,["media"]);if(s!=null){let m=Bw(s);Array.isArray(m)&&(m=m.map(g=>g)),x(e,["mediaChunks"],m)}const n=p(t,["audio"]);n!=null&&x(e,["audio"],zw(n));const i=p(t,["audioStreamEnd"]);i!=null&&x(e,["audioStreamEnd"],i);const l=p(t,["video"]);l!=null&&x(e,["video"],$w(l));const d=p(t,["text"]);d!=null&&x(e,["text"],d);const u=p(t,["activityStart"]);u!=null&&x(e,["activityStart"],u);const f=p(t,["activityEnd"]);return f!=null&&x(e,["activityEnd"],f),e}function H4(t){const e={},s=p(t,["setupComplete"]);s!=null&&x(e,["setupComplete"],s);const n=p(t,["serverContent"]);n!=null&&x(e,["serverContent"],n);const i=p(t,["toolCall"]);i!=null&&x(e,["toolCall"],i);const l=p(t,["toolCallCancellation"]);l!=null&&x(e,["toolCallCancellation"],l);const d=p(t,["usageMetadata"]);d!=null&&x(e,["usageMetadata"],Y4(d));const u=p(t,["goAway"]);u!=null&&x(e,["goAway"],u);const f=p(t,["sessionResumptionUpdate"]);f!=null&&x(e,["sessionResumptionUpdate"],f);const m=p(t,["voiceActivityDetectionSignal"]);return m!=null&&x(e,["voiceActivityDetectionSignal"],m),e}function G4(t){const e={},s=p(t,["mediaResolution"]);s!=null&&x(e,["mediaResolution"],s);const n=p(t,["codeExecutionResult"]);n!=null&&x(e,["codeExecutionResult"],n);const i=p(t,["executableCode"]);i!=null&&x(e,["executableCode"],i);const l=p(t,["fileData"]);l!=null&&x(e,["fileData"],R4(l));const d=p(t,["functionCall"]);d!=null&&x(e,["functionCall"],k4(d));const u=p(t,["functionResponse"]);u!=null&&x(e,["functionResponse"],u);const f=p(t,["inlineData"]);f!=null&&x(e,["inlineData"],Fc(f));const m=p(t,["text"]);m!=null&&x(e,["text"],m);const g=p(t,["thought"]);g!=null&&x(e,["thought"],g);const v=p(t,["thoughtSignature"]);v!=null&&x(e,["thoughtSignature"],v);const b=p(t,["videoMetadata"]);return b!=null&&x(e,["videoMetadata"],b),e}function F4(t){const e={},s=p(t,["handle"]);if(s!=null&&x(e,["handle"],s),p(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function J4(t){const e={},s=p(t,["functionDeclarations"]);if(s!=null){let g=s;Array.isArray(g)&&(g=g.map(v=>v)),x(e,["functionDeclarations"],g)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=p(t,["googleSearchRetrieval"]);n!=null&&x(e,["googleSearchRetrieval"],n);const i=p(t,["computerUse"]);i!=null&&x(e,["computerUse"],i);const l=p(t,["fileSearch"]);l!=null&&x(e,["fileSearch"],l);const d=p(t,["codeExecution"]);if(d!=null&&x(e,["codeExecution"],d),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=p(t,["googleMaps"]);u!=null&&x(e,["googleMaps"],D4(u));const f=p(t,["googleSearch"]);f!=null&&x(e,["googleSearch"],P4(f));const m=p(t,["urlContext"]);return m!=null&&x(e,["urlContext"],m),e}function K4(t){const e={},s=p(t,["functionDeclarations"]);if(s!=null){let v=s;Array.isArray(v)&&(v=v.map(b=>M4(b))),x(e,["functionDeclarations"],v)}const n=p(t,["retrieval"]);n!=null&&x(e,["retrieval"],n);const i=p(t,["googleSearchRetrieval"]);i!=null&&x(e,["googleSearchRetrieval"],i);const l=p(t,["computerUse"]);if(l!=null&&x(e,["computerUse"],l),p(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const d=p(t,["codeExecution"]);d!=null&&x(e,["codeExecution"],d);const u=p(t,["enterpriseWebSearch"]);u!=null&&x(e,["enterpriseWebSearch"],u);const f=p(t,["googleMaps"]);f!=null&&x(e,["googleMaps"],f);const m=p(t,["googleSearch"]);m!=null&&x(e,["googleSearch"],m);const g=p(t,["urlContext"]);return g!=null&&x(e,["urlContext"],g),e}function Y4(t){const e={},s=p(t,["promptTokenCount"]);s!=null&&x(e,["promptTokenCount"],s);const n=p(t,["cachedContentTokenCount"]);n!=null&&x(e,["cachedContentTokenCount"],n);const i=p(t,["candidatesTokenCount"]);i!=null&&x(e,["responseTokenCount"],i);const l=p(t,["toolUsePromptTokenCount"]);l!=null&&x(e,["toolUsePromptTokenCount"],l);const d=p(t,["thoughtsTokenCount"]);d!=null&&x(e,["thoughtsTokenCount"],d);const u=p(t,["totalTokenCount"]);u!=null&&x(e,["totalTokenCount"],u);const f=p(t,["promptTokensDetails"]);if(f!=null){let _=f;Array.isArray(_)&&(_=_.map(S=>S)),x(e,["promptTokensDetails"],_)}const m=p(t,["cacheTokensDetails"]);if(m!=null){let _=m;Array.isArray(_)&&(_=_.map(S=>S)),x(e,["cacheTokensDetails"],_)}const g=p(t,["candidatesTokensDetails"]);if(g!=null){let _=g;Array.isArray(_)&&(_=_.map(S=>S)),x(e,["responseTokensDetails"],_)}const v=p(t,["toolUsePromptTokensDetails"]);if(v!=null){let _=v;Array.isArray(_)&&(_=_.map(S=>S)),x(e,["toolUsePromptTokensDetails"],_)}const b=p(t,["trafficType"]);return b!=null&&x(e,["trafficType"],b),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function W4(t){const e={},s=p(t,["data"]);if(s!=null&&x(e,["data"],s),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["mimeType"]);return n!=null&&x(e,["mimeType"],n),e}function X4(t){const e={},s=p(t,["content"]);s!=null&&x(e,["content"],s);const n=p(t,["citationMetadata"]);n!=null&&x(e,["citationMetadata"],Q4(n));const i=p(t,["tokenCount"]);i!=null&&x(e,["tokenCount"],i);const l=p(t,["finishReason"]);l!=null&&x(e,["finishReason"],l);const d=p(t,["avgLogprobs"]);d!=null&&x(e,["avgLogprobs"],d);const u=p(t,["groundingMetadata"]);u!=null&&x(e,["groundingMetadata"],u);const f=p(t,["index"]);f!=null&&x(e,["index"],f);const m=p(t,["logprobsResult"]);m!=null&&x(e,["logprobsResult"],m);const g=p(t,["safetyRatings"]);if(g!=null){let b=g;Array.isArray(b)&&(b=b.map(_=>_)),x(e,["safetyRatings"],b)}const v=p(t,["urlContextMetadata"]);return v!=null&&x(e,["urlContextMetadata"],v),e}function Q4(t){const e={},s=p(t,["citationSources"]);if(s!=null){let n=s;Array.isArray(n)&&(n=n.map(i=>i)),x(e,["citations"],n)}return e}function Z4(t,e){const s={},n=p(e,["model"]);n!=null&&x(s,["_url","model"],Qe(t,n));const i=p(e,["contents"]);if(i!=null){let l=Qs(i);Array.isArray(l)&&(l=l.map(d=>d)),x(s,["contents"],l)}return s}function eR(t){const e={},s=p(t,["sdkHttpResponse"]);s!=null&&x(e,["sdkHttpResponse"],s);const n=p(t,["tokensInfo"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(l=>l)),x(e,["tokensInfo"],i)}return e}function tR(t){const e={},s=p(t,["values"]);s!=null&&x(e,["values"],s);const n=p(t,["statistics"]);return n!=null&&x(e,["statistics"],sR(n)),e}function sR(t){const e={},s=p(t,["truncated"]);s!=null&&x(e,["truncated"],s);const n=p(t,["token_count"]);return n!=null&&x(e,["tokenCount"],n),e}function xd(t){const e={},s=p(t,["parts"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(l=>uk(l))),x(e,["parts"],i)}const n=p(t,["role"]);return n!=null&&x(e,["role"],n),e}function aR(t){const e={},s=p(t,["controlType"]);s!=null&&x(e,["controlType"],s);const n=p(t,["enableControlImageComputation"]);return n!=null&&x(e,["computeControl"],n),e}function nR(t){const e={};if(p(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(p(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(p(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function rR(t,e){const s={},n=p(t,["systemInstruction"]);e!==void 0&&n!=null&&x(e,["systemInstruction"],Yt(n));const i=p(t,["tools"]);if(e!==void 0&&i!=null){let d=i;Array.isArray(d)&&(d=d.map(u=>sN(u))),x(e,["tools"],d)}const l=p(t,["generationConfig"]);return e!==void 0&&l!=null&&x(e,["generationConfig"],WR(l)),s}function oR(t,e){const s={},n=p(e,["model"]);n!=null&&x(s,["_url","model"],Qe(t,n));const i=p(e,["contents"]);if(i!=null){let d=Qs(i);Array.isArray(d)&&(d=d.map(u=>xd(u))),x(s,["contents"],d)}const l=p(e,["config"]);return l!=null&&nR(l),s}function iR(t,e){const s={},n=p(e,["model"]);n!=null&&x(s,["_url","model"],Qe(t,n));const i=p(e,["contents"]);if(i!=null){let d=Qs(i);Array.isArray(d)&&(d=d.map(u=>u)),x(s,["contents"],d)}const l=p(e,["config"]);return l!=null&&rR(l,s),s}function lR(t){const e={},s=p(t,["sdkHttpResponse"]);s!=null&&x(e,["sdkHttpResponse"],s);const n=p(t,["totalTokens"]);n!=null&&x(e,["totalTokens"],n);const i=p(t,["cachedContentTokenCount"]);return i!=null&&x(e,["cachedContentTokenCount"],i),e}function cR(t){const e={},s=p(t,["sdkHttpResponse"]);s!=null&&x(e,["sdkHttpResponse"],s);const n=p(t,["totalTokens"]);return n!=null&&x(e,["totalTokens"],n),e}function dR(t,e){const s={},n=p(e,["model"]);return n!=null&&x(s,["_url","name"],Qe(t,n)),s}function uR(t,e){const s={},n=p(e,["model"]);return n!=null&&x(s,["_url","name"],Qe(t,n)),s}function hR(t){const e={},s=p(t,["sdkHttpResponse"]);return s!=null&&x(e,["sdkHttpResponse"],s),e}function fR(t){const e={},s=p(t,["sdkHttpResponse"]);return s!=null&&x(e,["sdkHttpResponse"],s),e}function mR(t,e){const s={},n=p(t,["outputGcsUri"]);e!==void 0&&n!=null&&x(e,["parameters","storageUri"],n);const i=p(t,["negativePrompt"]);e!==void 0&&i!=null&&x(e,["parameters","negativePrompt"],i);const l=p(t,["numberOfImages"]);e!==void 0&&l!=null&&x(e,["parameters","sampleCount"],l);const d=p(t,["aspectRatio"]);e!==void 0&&d!=null&&x(e,["parameters","aspectRatio"],d);const u=p(t,["guidanceScale"]);e!==void 0&&u!=null&&x(e,["parameters","guidanceScale"],u);const f=p(t,["seed"]);e!==void 0&&f!=null&&x(e,["parameters","seed"],f);const m=p(t,["safetyFilterLevel"]);e!==void 0&&m!=null&&x(e,["parameters","safetySetting"],m);const g=p(t,["personGeneration"]);e!==void 0&&g!=null&&x(e,["parameters","personGeneration"],g);const v=p(t,["includeSafetyAttributes"]);e!==void 0&&v!=null&&x(e,["parameters","includeSafetyAttributes"],v);const b=p(t,["includeRaiReason"]);e!==void 0&&b!=null&&x(e,["parameters","includeRaiReason"],b);const _=p(t,["language"]);e!==void 0&&_!=null&&x(e,["parameters","language"],_);const S=p(t,["outputMimeType"]);e!==void 0&&S!=null&&x(e,["parameters","outputOptions","mimeType"],S);const E=p(t,["outputCompressionQuality"]);e!==void 0&&E!=null&&x(e,["parameters","outputOptions","compressionQuality"],E);const C=p(t,["addWatermark"]);e!==void 0&&C!=null&&x(e,["parameters","addWatermark"],C);const T=p(t,["labels"]);e!==void 0&&T!=null&&x(e,["labels"],T);const R=p(t,["editMode"]);e!==void 0&&R!=null&&x(e,["parameters","editMode"],R);const A=p(t,["baseSteps"]);return e!==void 0&&A!=null&&x(e,["parameters","editConfig","baseSteps"],A),s}function pR(t,e){const s={},n=p(e,["model"]);n!=null&&x(s,["_url","model"],Qe(t,n));const i=p(e,["prompt"]);i!=null&&x(s,["instances[0]","prompt"],i);const l=p(e,["referenceImages"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(f=>xk(f))),x(s,["instances[0]","referenceImages"],u)}const d=p(e,["config"]);return d!=null&&mR(d,s),s}function gR(t){const e={},s=p(t,["sdkHttpResponse"]);s!=null&&x(e,["sdkHttpResponse"],s);const n=p(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(l=>yd(l))),x(e,["generatedImages"],i)}return e}function xR(t,e){const s={},n=p(t,["taskType"]);e!==void 0&&n!=null&&x(e,["requests[]","taskType"],n);const i=p(t,["title"]);e!==void 0&&i!=null&&x(e,["requests[]","title"],i);const l=p(t,["outputDimensionality"]);if(e!==void 0&&l!=null&&x(e,["requests[]","outputDimensionality"],l),p(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(p(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return s}function yR(t,e){const s={},n=p(t,["taskType"]);e!==void 0&&n!=null&&x(e,["instances[]","task_type"],n);const i=p(t,["title"]);e!==void 0&&i!=null&&x(e,["instances[]","title"],i);const l=p(t,["outputDimensionality"]);e!==void 0&&l!=null&&x(e,["parameters","outputDimensionality"],l);const d=p(t,["mimeType"]);e!==void 0&&d!=null&&x(e,["instances[]","mimeType"],d);const u=p(t,["autoTruncate"]);return e!==void 0&&u!=null&&x(e,["parameters","autoTruncate"],u),s}function vR(t,e){const s={},n=p(e,["model"]);n!=null&&x(s,["_url","model"],Qe(t,n));const i=p(e,["contents"]);if(i!=null){let u=Mm(t,i);Array.isArray(u)&&(u=u.map(f=>f)),x(s,["requests[]","content"],u)}const l=p(e,["config"]);l!=null&&xR(l,s);const d=p(e,["model"]);return d!==void 0&&x(s,["requests[]","model"],Qe(t,d)),s}function bR(t,e){const s={},n=p(e,["model"]);n!=null&&x(s,["_url","model"],Qe(t,n));const i=p(e,["contents"]);if(i!=null){let d=Mm(t,i);Array.isArray(d)&&(d=d.map(u=>u)),x(s,["instances[]","content"],d)}const l=p(e,["config"]);return l!=null&&yR(l,s),s}function wR(t){const e={},s=p(t,["sdkHttpResponse"]);s!=null&&x(e,["sdkHttpResponse"],s);const n=p(t,["embeddings"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(d=>d)),x(e,["embeddings"],l)}const i=p(t,["metadata"]);return i!=null&&x(e,["metadata"],i),e}function NR(t){const e={},s=p(t,["sdkHttpResponse"]);s!=null&&x(e,["sdkHttpResponse"],s);const n=p(t,["predictions[]","embeddings"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(d=>tR(d))),x(e,["embeddings"],l)}const i=p(t,["metadata"]);return i!=null&&x(e,["metadata"],i),e}function _R(t){const e={},s=p(t,["endpoint"]);s!=null&&x(e,["name"],s);const n=p(t,["deployedModelId"]);return n!=null&&x(e,["deployedModelId"],n),e}function SR(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=p(t,["fileUri"]);s!=null&&x(e,["fileUri"],s);const n=p(t,["mimeType"]);return n!=null&&x(e,["mimeType"],n),e}function jR(t){const e={},s=p(t,["id"]);s!=null&&x(e,["id"],s);const n=p(t,["args"]);n!=null&&x(e,["args"],n);const i=p(t,["name"]);if(i!=null&&x(e,["name"],i),p(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function ER(t){const e={},s=p(t,["mode"]);s!=null&&x(e,["mode"],s);const n=p(t,["allowedFunctionNames"]);if(n!=null&&x(e,["allowedFunctionNames"],n),p(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function CR(t){const e={};if(p(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const s=p(t,["description"]);s!=null&&x(e,["description"],s);const n=p(t,["name"]);n!=null&&x(e,["name"],n);const i=p(t,["parameters"]);i!=null&&x(e,["parameters"],i);const l=p(t,["parametersJsonSchema"]);l!=null&&x(e,["parametersJsonSchema"],l);const d=p(t,["response"]);d!=null&&x(e,["response"],d);const u=p(t,["responseJsonSchema"]);return u!=null&&x(e,["responseJsonSchema"],u),e}function TR(t,e,s){const n={},i=p(e,["systemInstruction"]);s!==void 0&&i!=null&&x(s,["systemInstruction"],xd(Yt(i)));const l=p(e,["temperature"]);l!=null&&x(n,["temperature"],l);const d=p(e,["topP"]);d!=null&&x(n,["topP"],d);const u=p(e,["topK"]);u!=null&&x(n,["topK"],u);const f=p(e,["candidateCount"]);f!=null&&x(n,["candidateCount"],f);const m=p(e,["maxOutputTokens"]);m!=null&&x(n,["maxOutputTokens"],m);const g=p(e,["stopSequences"]);g!=null&&x(n,["stopSequences"],g);const v=p(e,["responseLogprobs"]);v!=null&&x(n,["responseLogprobs"],v);const b=p(e,["logprobs"]);b!=null&&x(n,["logprobs"],b);const _=p(e,["presencePenalty"]);_!=null&&x(n,["presencePenalty"],_);const S=p(e,["frequencyPenalty"]);S!=null&&x(n,["frequencyPenalty"],S);const E=p(e,["seed"]);E!=null&&x(n,["seed"],E);const C=p(e,["responseMimeType"]);C!=null&&x(n,["responseMimeType"],C);const T=p(e,["responseSchema"]);T!=null&&x(n,["responseSchema"],Im(T));const R=p(e,["responseJsonSchema"]);if(R!=null&&x(n,["responseJsonSchema"],R),p(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(p(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const A=p(e,["safetySettings"]);if(s!==void 0&&A!=null){let $=A;Array.isArray($)&&($=$.map(ie=>yk(ie))),x(s,["safetySettings"],$)}const M=p(e,["tools"]);if(s!==void 0&&M!=null){let $=Po(M);Array.isArray($)&&($=$.map(ie=>jk(Do(ie)))),x(s,["tools"],$)}const z=p(e,["toolConfig"]);if(s!==void 0&&z!=null&&x(s,["toolConfig"],Sk(z)),p(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const F=p(e,["cachedContent"]);s!==void 0&&F!=null&&x(s,["cachedContent"],rn(t,F));const G=p(e,["responseModalities"]);G!=null&&x(n,["responseModalities"],G);const K=p(e,["mediaResolution"]);K!=null&&x(n,["mediaResolution"],K);const I=p(e,["speechConfig"]);if(I!=null&&x(n,["speechConfig"],Dm(I)),p(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=p(e,["thinkingConfig"]);U!=null&&x(n,["thinkingConfig"],U);const q=p(e,["imageConfig"]);q!=null&&x(n,["imageConfig"],tk(q));const H=p(e,["enableEnhancedCivicAnswers"]);return H!=null&&x(n,["enableEnhancedCivicAnswers"],H),n}function AR(t,e,s){const n={},i=p(e,["systemInstruction"]);s!==void 0&&i!=null&&x(s,["systemInstruction"],Yt(i));const l=p(e,["temperature"]);l!=null&&x(n,["temperature"],l);const d=p(e,["topP"]);d!=null&&x(n,["topP"],d);const u=p(e,["topK"]);u!=null&&x(n,["topK"],u);const f=p(e,["candidateCount"]);f!=null&&x(n,["candidateCount"],f);const m=p(e,["maxOutputTokens"]);m!=null&&x(n,["maxOutputTokens"],m);const g=p(e,["stopSequences"]);g!=null&&x(n,["stopSequences"],g);const v=p(e,["responseLogprobs"]);v!=null&&x(n,["responseLogprobs"],v);const b=p(e,["logprobs"]);b!=null&&x(n,["logprobs"],b);const _=p(e,["presencePenalty"]);_!=null&&x(n,["presencePenalty"],_);const S=p(e,["frequencyPenalty"]);S!=null&&x(n,["frequencyPenalty"],S);const E=p(e,["seed"]);E!=null&&x(n,["seed"],E);const C=p(e,["responseMimeType"]);C!=null&&x(n,["responseMimeType"],C);const T=p(e,["responseSchema"]);T!=null&&x(n,["responseSchema"],Im(T));const R=p(e,["responseJsonSchema"]);R!=null&&x(n,["responseJsonSchema"],R);const A=p(e,["routingConfig"]);A!=null&&x(n,["routingConfig"],A);const M=p(e,["modelSelectionConfig"]);M!=null&&x(n,["modelConfig"],M);const z=p(e,["safetySettings"]);if(s!==void 0&&z!=null){let P=z;Array.isArray(P)&&(P=P.map(O=>O)),x(s,["safetySettings"],P)}const F=p(e,["tools"]);if(s!==void 0&&F!=null){let P=Po(F);Array.isArray(P)&&(P=P.map(O=>sN(Do(O)))),x(s,["tools"],P)}const G=p(e,["toolConfig"]);s!==void 0&&G!=null&&x(s,["toolConfig"],G);const K=p(e,["labels"]);s!==void 0&&K!=null&&x(s,["labels"],K);const I=p(e,["cachedContent"]);s!==void 0&&I!=null&&x(s,["cachedContent"],rn(t,I));const U=p(e,["responseModalities"]);U!=null&&x(n,["responseModalities"],U);const q=p(e,["mediaResolution"]);q!=null&&x(n,["mediaResolution"],q);const H=p(e,["speechConfig"]);H!=null&&x(n,["speechConfig"],Dm(H));const $=p(e,["audioTimestamp"]);$!=null&&x(n,["audioTimestamp"],$);const ie=p(e,["thinkingConfig"]);ie!=null&&x(n,["thinkingConfig"],ie);const re=p(e,["imageConfig"]);if(re!=null&&x(n,["imageConfig"],sk(re)),p(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return n}function Hv(t,e){const s={},n=p(e,["model"]);n!=null&&x(s,["_url","model"],Qe(t,n));const i=p(e,["contents"]);if(i!=null){let d=Qs(i);Array.isArray(d)&&(d=d.map(u=>xd(u))),x(s,["contents"],d)}const l=p(e,["config"]);return l!=null&&x(s,["generationConfig"],TR(t,l,s)),s}function Gv(t,e){const s={},n=p(e,["model"]);n!=null&&x(s,["_url","model"],Qe(t,n));const i=p(e,["contents"]);if(i!=null){let d=Qs(i);Array.isArray(d)&&(d=d.map(u=>u)),x(s,["contents"],d)}const l=p(e,["config"]);return l!=null&&x(s,["generationConfig"],AR(t,l,s)),s}function Fv(t){const e={},s=p(t,["sdkHttpResponse"]);s!=null&&x(e,["sdkHttpResponse"],s);const n=p(t,["candidates"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(m=>X4(m))),x(e,["candidates"],f)}const i=p(t,["modelVersion"]);i!=null&&x(e,["modelVersion"],i);const l=p(t,["promptFeedback"]);l!=null&&x(e,["promptFeedback"],l);const d=p(t,["responseId"]);d!=null&&x(e,["responseId"],d);const u=p(t,["usageMetadata"]);return u!=null&&x(e,["usageMetadata"],u),e}function Jv(t){const e={},s=p(t,["sdkHttpResponse"]);s!=null&&x(e,["sdkHttpResponse"],s);const n=p(t,["candidates"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(g=>g)),x(e,["candidates"],m)}const i=p(t,["createTime"]);i!=null&&x(e,["createTime"],i);const l=p(t,["modelVersion"]);l!=null&&x(e,["modelVersion"],l);const d=p(t,["promptFeedback"]);d!=null&&x(e,["promptFeedback"],d);const u=p(t,["responseId"]);u!=null&&x(e,["responseId"],u);const f=p(t,["usageMetadata"]);return f!=null&&x(e,["usageMetadata"],f),e}function RR(t,e){const s={};if(p(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(p(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const n=p(t,["numberOfImages"]);e!==void 0&&n!=null&&x(e,["parameters","sampleCount"],n);const i=p(t,["aspectRatio"]);e!==void 0&&i!=null&&x(e,["parameters","aspectRatio"],i);const l=p(t,["guidanceScale"]);if(e!==void 0&&l!=null&&x(e,["parameters","guidanceScale"],l),p(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const d=p(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&x(e,["parameters","safetySetting"],d);const u=p(t,["personGeneration"]);e!==void 0&&u!=null&&x(e,["parameters","personGeneration"],u);const f=p(t,["includeSafetyAttributes"]);e!==void 0&&f!=null&&x(e,["parameters","includeSafetyAttributes"],f);const m=p(t,["includeRaiReason"]);e!==void 0&&m!=null&&x(e,["parameters","includeRaiReason"],m);const g=p(t,["language"]);e!==void 0&&g!=null&&x(e,["parameters","language"],g);const v=p(t,["outputMimeType"]);e!==void 0&&v!=null&&x(e,["parameters","outputOptions","mimeType"],v);const b=p(t,["outputCompressionQuality"]);if(e!==void 0&&b!=null&&x(e,["parameters","outputOptions","compressionQuality"],b),p(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(p(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const _=p(t,["imageSize"]);if(e!==void 0&&_!=null&&x(e,["parameters","sampleImageSize"],_),p(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return s}function kR(t,e){const s={},n=p(t,["outputGcsUri"]);e!==void 0&&n!=null&&x(e,["parameters","storageUri"],n);const i=p(t,["negativePrompt"]);e!==void 0&&i!=null&&x(e,["parameters","negativePrompt"],i);const l=p(t,["numberOfImages"]);e!==void 0&&l!=null&&x(e,["parameters","sampleCount"],l);const d=p(t,["aspectRatio"]);e!==void 0&&d!=null&&x(e,["parameters","aspectRatio"],d);const u=p(t,["guidanceScale"]);e!==void 0&&u!=null&&x(e,["parameters","guidanceScale"],u);const f=p(t,["seed"]);e!==void 0&&f!=null&&x(e,["parameters","seed"],f);const m=p(t,["safetyFilterLevel"]);e!==void 0&&m!=null&&x(e,["parameters","safetySetting"],m);const g=p(t,["personGeneration"]);e!==void 0&&g!=null&&x(e,["parameters","personGeneration"],g);const v=p(t,["includeSafetyAttributes"]);e!==void 0&&v!=null&&x(e,["parameters","includeSafetyAttributes"],v);const b=p(t,["includeRaiReason"]);e!==void 0&&b!=null&&x(e,["parameters","includeRaiReason"],b);const _=p(t,["language"]);e!==void 0&&_!=null&&x(e,["parameters","language"],_);const S=p(t,["outputMimeType"]);e!==void 0&&S!=null&&x(e,["parameters","outputOptions","mimeType"],S);const E=p(t,["outputCompressionQuality"]);e!==void 0&&E!=null&&x(e,["parameters","outputOptions","compressionQuality"],E);const C=p(t,["addWatermark"]);e!==void 0&&C!=null&&x(e,["parameters","addWatermark"],C);const T=p(t,["labels"]);e!==void 0&&T!=null&&x(e,["labels"],T);const R=p(t,["imageSize"]);e!==void 0&&R!=null&&x(e,["parameters","sampleImageSize"],R);const A=p(t,["enhancePrompt"]);return e!==void 0&&A!=null&&x(e,["parameters","enhancePrompt"],A),s}function MR(t,e){const s={},n=p(e,["model"]);n!=null&&x(s,["_url","model"],Qe(t,n));const i=p(e,["prompt"]);i!=null&&x(s,["instances[0]","prompt"],i);const l=p(e,["config"]);return l!=null&&RR(l,s),s}function IR(t,e){const s={},n=p(e,["model"]);n!=null&&x(s,["_url","model"],Qe(t,n));const i=p(e,["prompt"]);i!=null&&x(s,["instances[0]","prompt"],i);const l=p(e,["config"]);return l!=null&&kR(l,s),s}function DR(t){const e={},s=p(t,["sdkHttpResponse"]);s!=null&&x(e,["sdkHttpResponse"],s);const n=p(t,["predictions"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(d=>FR(d))),x(e,["generatedImages"],l)}const i=p(t,["positivePromptSafetyAttributes"]);return i!=null&&x(e,["positivePromptSafetyAttributes"],eN(i)),e}function PR(t){const e={},s=p(t,["sdkHttpResponse"]);s!=null&&x(e,["sdkHttpResponse"],s);const n=p(t,["predictions"]);if(n!=null){let l=n;Array.isArray(l)&&(l=l.map(d=>yd(d))),x(e,["generatedImages"],l)}const i=p(t,["positivePromptSafetyAttributes"]);return i!=null&&x(e,["positivePromptSafetyAttributes"],tN(i)),e}function UR(t,e){const s={},n=p(t,["numberOfVideos"]);if(e!==void 0&&n!=null&&x(e,["parameters","sampleCount"],n),p(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(p(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const i=p(t,["durationSeconds"]);if(e!==void 0&&i!=null&&x(e,["parameters","durationSeconds"],i),p(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=p(t,["aspectRatio"]);e!==void 0&&l!=null&&x(e,["parameters","aspectRatio"],l);const d=p(t,["resolution"]);e!==void 0&&d!=null&&x(e,["parameters","resolution"],d);const u=p(t,["personGeneration"]);if(e!==void 0&&u!=null&&x(e,["parameters","personGeneration"],u),p(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const f=p(t,["negativePrompt"]);e!==void 0&&f!=null&&x(e,["parameters","negativePrompt"],f);const m=p(t,["enhancePrompt"]);if(e!==void 0&&m!=null&&x(e,["parameters","enhancePrompt"],m),p(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const g=p(t,["lastFrame"]);e!==void 0&&g!=null&&x(e,["instances[0]","lastFrame"],vd(g));const v=p(t,["referenceImages"]);if(e!==void 0&&v!=null){let b=v;Array.isArray(b)&&(b=b.map(_=>Ok(_))),x(e,["instances[0]","referenceImages"],b)}if(p(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(p(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return s}function LR(t,e){const s={},n=p(t,["numberOfVideos"]);e!==void 0&&n!=null&&x(e,["parameters","sampleCount"],n);const i=p(t,["outputGcsUri"]);e!==void 0&&i!=null&&x(e,["parameters","storageUri"],i);const l=p(t,["fps"]);e!==void 0&&l!=null&&x(e,["parameters","fps"],l);const d=p(t,["durationSeconds"]);e!==void 0&&d!=null&&x(e,["parameters","durationSeconds"],d);const u=p(t,["seed"]);e!==void 0&&u!=null&&x(e,["parameters","seed"],u);const f=p(t,["aspectRatio"]);e!==void 0&&f!=null&&x(e,["parameters","aspectRatio"],f);const m=p(t,["resolution"]);e!==void 0&&m!=null&&x(e,["parameters","resolution"],m);const g=p(t,["personGeneration"]);e!==void 0&&g!=null&&x(e,["parameters","personGeneration"],g);const v=p(t,["pubsubTopic"]);e!==void 0&&v!=null&&x(e,["parameters","pubsubTopic"],v);const b=p(t,["negativePrompt"]);e!==void 0&&b!=null&&x(e,["parameters","negativePrompt"],b);const _=p(t,["enhancePrompt"]);e!==void 0&&_!=null&&x(e,["parameters","enhancePrompt"],_);const S=p(t,["generateAudio"]);e!==void 0&&S!=null&&x(e,["parameters","generateAudio"],S);const E=p(t,["lastFrame"]);e!==void 0&&E!=null&&x(e,["instances[0]","lastFrame"],pa(E));const C=p(t,["referenceImages"]);if(e!==void 0&&C!=null){let A=C;Array.isArray(A)&&(A=A.map(M=>qk(M))),x(e,["instances[0]","referenceImages"],A)}const T=p(t,["mask"]);e!==void 0&&T!=null&&x(e,["instances[0]","mask"],Lk(T));const R=p(t,["compressionQuality"]);return e!==void 0&&R!=null&&x(e,["parameters","compressionQuality"],R),s}function OR(t){const e={},s=p(t,["name"]);s!=null&&x(e,["name"],s);const n=p(t,["metadata"]);n!=null&&x(e,["metadata"],n);const i=p(t,["done"]);i!=null&&x(e,["done"],i);const l=p(t,["error"]);l!=null&&x(e,["error"],l);const d=p(t,["response","generateVideoResponse"]);return d!=null&&x(e,["response"],zR(d)),e}function qR(t){const e={},s=p(t,["name"]);s!=null&&x(e,["name"],s);const n=p(t,["metadata"]);n!=null&&x(e,["metadata"],n);const i=p(t,["done"]);i!=null&&x(e,["done"],i);const l=p(t,["error"]);l!=null&&x(e,["error"],l);const d=p(t,["response"]);return d!=null&&x(e,["response"],VR(d)),e}function BR(t,e){const s={},n=p(e,["model"]);n!=null&&x(s,["_url","model"],Qe(t,n));const i=p(e,["prompt"]);i!=null&&x(s,["instances[0]","prompt"],i);const l=p(e,["image"]);l!=null&&x(s,["instances[0]","image"],vd(l));const d=p(e,["video"]);d!=null&&x(s,["instances[0]","video"],aN(d));const u=p(e,["source"]);u!=null&&HR(u,s);const f=p(e,["config"]);return f!=null&&UR(f,s),s}function $R(t,e){const s={},n=p(e,["model"]);n!=null&&x(s,["_url","model"],Qe(t,n));const i=p(e,["prompt"]);i!=null&&x(s,["instances[0]","prompt"],i);const l=p(e,["image"]);l!=null&&x(s,["instances[0]","image"],pa(l));const d=p(e,["video"]);d!=null&&x(s,["instances[0]","video"],nN(d));const u=p(e,["source"]);u!=null&&GR(u,s);const f=p(e,["config"]);return f!=null&&LR(f,s),s}function zR(t){const e={},s=p(t,["generatedSamples"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(d=>KR(d))),x(e,["generatedVideos"],l)}const n=p(t,["raiMediaFilteredCount"]);n!=null&&x(e,["raiMediaFilteredCount"],n);const i=p(t,["raiMediaFilteredReasons"]);return i!=null&&x(e,["raiMediaFilteredReasons"],i),e}function VR(t){const e={},s=p(t,["videos"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(d=>YR(d))),x(e,["generatedVideos"],l)}const n=p(t,["raiMediaFilteredCount"]);n!=null&&x(e,["raiMediaFilteredCount"],n);const i=p(t,["raiMediaFilteredReasons"]);return i!=null&&x(e,["raiMediaFilteredReasons"],i),e}function HR(t,e){const s={},n=p(t,["prompt"]);e!==void 0&&n!=null&&x(e,["instances[0]","prompt"],n);const i=p(t,["image"]);e!==void 0&&i!=null&&x(e,["instances[0]","image"],vd(i));const l=p(t,["video"]);return e!==void 0&&l!=null&&x(e,["instances[0]","video"],aN(l)),s}function GR(t,e){const s={},n=p(t,["prompt"]);e!==void 0&&n!=null&&x(e,["instances[0]","prompt"],n);const i=p(t,["image"]);e!==void 0&&i!=null&&x(e,["instances[0]","image"],pa(i));const l=p(t,["video"]);return e!==void 0&&l!=null&&x(e,["instances[0]","video"],nN(l)),s}function FR(t){const e={},s=p(t,["_self"]);s!=null&&x(e,["image"],ak(s));const n=p(t,["raiFilteredReason"]);n!=null&&x(e,["raiFilteredReason"],n);const i=p(t,["_self"]);return i!=null&&x(e,["safetyAttributes"],eN(i)),e}function yd(t){const e={},s=p(t,["_self"]);s!=null&&x(e,["image"],Zw(s));const n=p(t,["raiFilteredReason"]);n!=null&&x(e,["raiFilteredReason"],n);const i=p(t,["_self"]);i!=null&&x(e,["safetyAttributes"],tN(i));const l=p(t,["prompt"]);return l!=null&&x(e,["enhancedPrompt"],l),e}function JR(t){const e={},s=p(t,["_self"]);s!=null&&x(e,["mask"],Zw(s));const n=p(t,["labels"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(l=>l)),x(e,["labels"],i)}return e}function KR(t){const e={},s=p(t,["video"]);return s!=null&&x(e,["video"],Pk(s)),e}function YR(t){const e={},s=p(t,["_self"]);return s!=null&&x(e,["video"],Uk(s)),e}function WR(t){const e={},s=p(t,["modelSelectionConfig"]);s!=null&&x(e,["modelConfig"],s);const n=p(t,["responseJsonSchema"]);n!=null&&x(e,["responseJsonSchema"],n);const i=p(t,["audioTimestamp"]);i!=null&&x(e,["audioTimestamp"],i);const l=p(t,["candidateCount"]);l!=null&&x(e,["candidateCount"],l);const d=p(t,["enableAffectiveDialog"]);d!=null&&x(e,["enableAffectiveDialog"],d);const u=p(t,["frequencyPenalty"]);u!=null&&x(e,["frequencyPenalty"],u);const f=p(t,["logprobs"]);f!=null&&x(e,["logprobs"],f);const m=p(t,["maxOutputTokens"]);m!=null&&x(e,["maxOutputTokens"],m);const g=p(t,["mediaResolution"]);g!=null&&x(e,["mediaResolution"],g);const v=p(t,["presencePenalty"]);v!=null&&x(e,["presencePenalty"],v);const b=p(t,["responseLogprobs"]);b!=null&&x(e,["responseLogprobs"],b);const _=p(t,["responseMimeType"]);_!=null&&x(e,["responseMimeType"],_);const S=p(t,["responseModalities"]);S!=null&&x(e,["responseModalities"],S);const E=p(t,["responseSchema"]);E!=null&&x(e,["responseSchema"],E);const C=p(t,["routingConfig"]);C!=null&&x(e,["routingConfig"],C);const T=p(t,["seed"]);T!=null&&x(e,["seed"],T);const R=p(t,["speechConfig"]);R!=null&&x(e,["speechConfig"],R);const A=p(t,["stopSequences"]);A!=null&&x(e,["stopSequences"],A);const M=p(t,["temperature"]);M!=null&&x(e,["temperature"],M);const z=p(t,["thinkingConfig"]);z!=null&&x(e,["thinkingConfig"],z);const F=p(t,["topK"]);F!=null&&x(e,["topK"],F);const G=p(t,["topP"]);if(G!=null&&x(e,["topP"],G),p(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function XR(t,e){const s={},n=p(e,["model"]);return n!=null&&x(s,["_url","name"],Qe(t,n)),s}function QR(t,e){const s={},n=p(e,["model"]);return n!=null&&x(s,["_url","name"],Qe(t,n)),s}function ZR(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const s=p(t,["enableWidget"]);return s!=null&&x(e,["enableWidget"],s),e}function ek(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const s=p(t,["timeRangeFilter"]);return s!=null&&x(e,["timeRangeFilter"],s),e}function tk(t){const e={},s=p(t,["aspectRatio"]);s!=null&&x(e,["aspectRatio"],s);const n=p(t,["imageSize"]);if(n!=null&&x(e,["imageSize"],n),p(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(p(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function sk(t){const e={},s=p(t,["aspectRatio"]);s!=null&&x(e,["aspectRatio"],s);const n=p(t,["imageSize"]);n!=null&&x(e,["imageSize"],n);const i=p(t,["outputMimeType"]);i!=null&&x(e,["imageOutputOptions","mimeType"],i);const l=p(t,["outputCompressionQuality"]);return l!=null&&x(e,["imageOutputOptions","compressionQuality"],l),e}function ak(t){const e={},s=p(t,["bytesBase64Encoded"]);s!=null&&x(e,["imageBytes"],Un(s));const n=p(t,["mimeType"]);return n!=null&&x(e,["mimeType"],n),e}function Zw(t){const e={},s=p(t,["gcsUri"]);s!=null&&x(e,["gcsUri"],s);const n=p(t,["bytesBase64Encoded"]);n!=null&&x(e,["imageBytes"],Un(n));const i=p(t,["mimeType"]);return i!=null&&x(e,["mimeType"],i),e}function vd(t){const e={};if(p(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const s=p(t,["imageBytes"]);s!=null&&x(e,["bytesBase64Encoded"],Un(s));const n=p(t,["mimeType"]);return n!=null&&x(e,["mimeType"],n),e}function pa(t){const e={},s=p(t,["gcsUri"]);s!=null&&x(e,["gcsUri"],s);const n=p(t,["imageBytes"]);n!=null&&x(e,["bytesBase64Encoded"],Un(n));const i=p(t,["mimeType"]);return i!=null&&x(e,["mimeType"],i),e}function nk(t,e,s){const n={},i=p(e,["pageSize"]);s!==void 0&&i!=null&&x(s,["_query","pageSize"],i);const l=p(e,["pageToken"]);s!==void 0&&l!=null&&x(s,["_query","pageToken"],l);const d=p(e,["filter"]);s!==void 0&&d!=null&&x(s,["_query","filter"],d);const u=p(e,["queryBase"]);return s!==void 0&&u!=null&&x(s,["_url","models_url"],Fw(t,u)),n}function rk(t,e,s){const n={},i=p(e,["pageSize"]);s!==void 0&&i!=null&&x(s,["_query","pageSize"],i);const l=p(e,["pageToken"]);s!==void 0&&l!=null&&x(s,["_query","pageToken"],l);const d=p(e,["filter"]);s!==void 0&&d!=null&&x(s,["_query","filter"],d);const u=p(e,["queryBase"]);return s!==void 0&&u!=null&&x(s,["_url","models_url"],Fw(t,u)),n}function ok(t,e){const s={},n=p(e,["config"]);return n!=null&&nk(t,n,s),s}function ik(t,e){const s={},n=p(e,["config"]);return n!=null&&rk(t,n,s),s}function lk(t){const e={},s=p(t,["sdkHttpResponse"]);s!=null&&x(e,["sdkHttpResponse"],s);const n=p(t,["nextPageToken"]);n!=null&&x(e,["nextPageToken"],n);const i=p(t,["_self"]);if(i!=null){let l=Jw(i);Array.isArray(l)&&(l=l.map(d=>Zf(d))),x(e,["models"],l)}return e}function ck(t){const e={},s=p(t,["sdkHttpResponse"]);s!=null&&x(e,["sdkHttpResponse"],s);const n=p(t,["nextPageToken"]);n!=null&&x(e,["nextPageToken"],n);const i=p(t,["_self"]);if(i!=null){let l=Jw(i);Array.isArray(l)&&(l=l.map(d=>em(d))),x(e,["models"],l)}return e}function dk(t){const e={},s=p(t,["maskMode"]);s!=null&&x(e,["maskMode"],s);const n=p(t,["segmentationClasses"]);n!=null&&x(e,["maskClasses"],n);const i=p(t,["maskDilation"]);return i!=null&&x(e,["dilation"],i),e}function Zf(t){const e={},s=p(t,["name"]);s!=null&&x(e,["name"],s);const n=p(t,["displayName"]);n!=null&&x(e,["displayName"],n);const i=p(t,["description"]);i!=null&&x(e,["description"],i);const l=p(t,["version"]);l!=null&&x(e,["version"],l);const d=p(t,["_self"]);d!=null&&x(e,["tunedModelInfo"],Ek(d));const u=p(t,["inputTokenLimit"]);u!=null&&x(e,["inputTokenLimit"],u);const f=p(t,["outputTokenLimit"]);f!=null&&x(e,["outputTokenLimit"],f);const m=p(t,["supportedGenerationMethods"]);m!=null&&x(e,["supportedActions"],m);const g=p(t,["temperature"]);g!=null&&x(e,["temperature"],g);const v=p(t,["maxTemperature"]);v!=null&&x(e,["maxTemperature"],v);const b=p(t,["topP"]);b!=null&&x(e,["topP"],b);const _=p(t,["topK"]);_!=null&&x(e,["topK"],_);const S=p(t,["thinking"]);return S!=null&&x(e,["thinking"],S),e}function em(t){const e={},s=p(t,["name"]);s!=null&&x(e,["name"],s);const n=p(t,["displayName"]);n!=null&&x(e,["displayName"],n);const i=p(t,["description"]);i!=null&&x(e,["description"],i);const l=p(t,["versionId"]);l!=null&&x(e,["version"],l);const d=p(t,["deployedModels"]);if(d!=null){let v=d;Array.isArray(v)&&(v=v.map(b=>_R(b))),x(e,["endpoints"],v)}const u=p(t,["labels"]);u!=null&&x(e,["labels"],u);const f=p(t,["_self"]);f!=null&&x(e,["tunedModelInfo"],Ck(f));const m=p(t,["defaultCheckpointId"]);m!=null&&x(e,["defaultCheckpointId"],m);const g=p(t,["checkpoints"]);if(g!=null){let v=g;Array.isArray(v)&&(v=v.map(b=>b)),x(e,["checkpoints"],v)}return e}function uk(t){const e={},s=p(t,["mediaResolution"]);s!=null&&x(e,["mediaResolution"],s);const n=p(t,["codeExecutionResult"]);n!=null&&x(e,["codeExecutionResult"],n);const i=p(t,["executableCode"]);i!=null&&x(e,["executableCode"],i);const l=p(t,["fileData"]);l!=null&&x(e,["fileData"],SR(l));const d=p(t,["functionCall"]);d!=null&&x(e,["functionCall"],jR(d));const u=p(t,["functionResponse"]);u!=null&&x(e,["functionResponse"],u);const f=p(t,["inlineData"]);f!=null&&x(e,["inlineData"],W4(f));const m=p(t,["text"]);m!=null&&x(e,["text"],m);const g=p(t,["thought"]);g!=null&&x(e,["thought"],g);const v=p(t,["thoughtSignature"]);v!=null&&x(e,["thoughtSignature"],v);const b=p(t,["videoMetadata"]);return b!=null&&x(e,["videoMetadata"],b),e}function hk(t){const e={},s=p(t,["productImage"]);return s!=null&&x(e,["image"],pa(s)),e}function fk(t,e){const s={},n=p(t,["numberOfImages"]);e!==void 0&&n!=null&&x(e,["parameters","sampleCount"],n);const i=p(t,["baseSteps"]);e!==void 0&&i!=null&&x(e,["parameters","baseSteps"],i);const l=p(t,["outputGcsUri"]);e!==void 0&&l!=null&&x(e,["parameters","storageUri"],l);const d=p(t,["seed"]);e!==void 0&&d!=null&&x(e,["parameters","seed"],d);const u=p(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&x(e,["parameters","safetySetting"],u);const f=p(t,["personGeneration"]);e!==void 0&&f!=null&&x(e,["parameters","personGeneration"],f);const m=p(t,["addWatermark"]);e!==void 0&&m!=null&&x(e,["parameters","addWatermark"],m);const g=p(t,["outputMimeType"]);e!==void 0&&g!=null&&x(e,["parameters","outputOptions","mimeType"],g);const v=p(t,["outputCompressionQuality"]);e!==void 0&&v!=null&&x(e,["parameters","outputOptions","compressionQuality"],v);const b=p(t,["enhancePrompt"]);e!==void 0&&b!=null&&x(e,["parameters","enhancePrompt"],b);const _=p(t,["labels"]);return e!==void 0&&_!=null&&x(e,["labels"],_),s}function mk(t,e){const s={},n=p(e,["model"]);n!=null&&x(s,["_url","model"],Qe(t,n));const i=p(e,["source"]);i!=null&&gk(i,s);const l=p(e,["config"]);return l!=null&&fk(l,s),s}function pk(t){const e={},s=p(t,["predictions"]);if(s!=null){let n=s;Array.isArray(n)&&(n=n.map(i=>yd(i))),x(e,["generatedImages"],n)}return e}function gk(t,e){const s={},n=p(t,["prompt"]);e!==void 0&&n!=null&&x(e,["instances[0]","prompt"],n);const i=p(t,["personImage"]);e!==void 0&&i!=null&&x(e,["instances[0]","personImage","image"],pa(i));const l=p(t,["productImages"]);if(e!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(u=>hk(u))),x(e,["instances[0]","productImages"],d)}return s}function xk(t){const e={},s=p(t,["referenceImage"]);s!=null&&x(e,["referenceImage"],pa(s));const n=p(t,["referenceId"]);n!=null&&x(e,["referenceId"],n);const i=p(t,["referenceType"]);i!=null&&x(e,["referenceType"],i);const l=p(t,["maskImageConfig"]);l!=null&&x(e,["maskImageConfig"],dk(l));const d=p(t,["controlImageConfig"]);d!=null&&x(e,["controlImageConfig"],aR(d));const u=p(t,["styleImageConfig"]);u!=null&&x(e,["styleImageConfig"],u);const f=p(t,["subjectImageConfig"]);return f!=null&&x(e,["subjectImageConfig"],f),e}function eN(t){const e={},s=p(t,["safetyAttributes","categories"]);s!=null&&x(e,["categories"],s);const n=p(t,["safetyAttributes","scores"]);n!=null&&x(e,["scores"],n);const i=p(t,["contentType"]);return i!=null&&x(e,["contentType"],i),e}function tN(t){const e={},s=p(t,["safetyAttributes","categories"]);s!=null&&x(e,["categories"],s);const n=p(t,["safetyAttributes","scores"]);n!=null&&x(e,["scores"],n);const i=p(t,["contentType"]);return i!=null&&x(e,["contentType"],i),e}function yk(t){const e={},s=p(t,["category"]);if(s!=null&&x(e,["category"],s),p(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=p(t,["threshold"]);return n!=null&&x(e,["threshold"],n),e}function vk(t){const e={},s=p(t,["image"]);return s!=null&&x(e,["image"],pa(s)),e}function bk(t,e){const s={},n=p(t,["mode"]);e!==void 0&&n!=null&&x(e,["parameters","mode"],n);const i=p(t,["maxPredictions"]);e!==void 0&&i!=null&&x(e,["parameters","maxPredictions"],i);const l=p(t,["confidenceThreshold"]);e!==void 0&&l!=null&&x(e,["parameters","confidenceThreshold"],l);const d=p(t,["maskDilation"]);e!==void 0&&d!=null&&x(e,["parameters","maskDilation"],d);const u=p(t,["binaryColorThreshold"]);e!==void 0&&u!=null&&x(e,["parameters","binaryColorThreshold"],u);const f=p(t,["labels"]);return e!==void 0&&f!=null&&x(e,["labels"],f),s}function wk(t,e){const s={},n=p(e,["model"]);n!=null&&x(s,["_url","model"],Qe(t,n));const i=p(e,["source"]);i!=null&&_k(i,s);const l=p(e,["config"]);return l!=null&&bk(l,s),s}function Nk(t){const e={},s=p(t,["predictions"]);if(s!=null){let n=s;Array.isArray(n)&&(n=n.map(i=>JR(i))),x(e,["generatedMasks"],n)}return e}function _k(t,e){const s={},n=p(t,["prompt"]);e!==void 0&&n!=null&&x(e,["instances[0]","prompt"],n);const i=p(t,["image"]);e!==void 0&&i!=null&&x(e,["instances[0]","image"],pa(i));const l=p(t,["scribbleImage"]);return e!==void 0&&l!=null&&x(e,["instances[0]","scribble"],vk(l)),s}function Sk(t){const e={},s=p(t,["functionCallingConfig"]);s!=null&&x(e,["functionCallingConfig"],ER(s));const n=p(t,["retrievalConfig"]);return n!=null&&x(e,["retrievalConfig"],n),e}function jk(t){const e={},s=p(t,["functionDeclarations"]);if(s!=null){let g=s;Array.isArray(g)&&(g=g.map(v=>v)),x(e,["functionDeclarations"],g)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=p(t,["googleSearchRetrieval"]);n!=null&&x(e,["googleSearchRetrieval"],n);const i=p(t,["computerUse"]);i!=null&&x(e,["computerUse"],i);const l=p(t,["fileSearch"]);l!=null&&x(e,["fileSearch"],l);const d=p(t,["codeExecution"]);if(d!=null&&x(e,["codeExecution"],d),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=p(t,["googleMaps"]);u!=null&&x(e,["googleMaps"],ZR(u));const f=p(t,["googleSearch"]);f!=null&&x(e,["googleSearch"],ek(f));const m=p(t,["urlContext"]);return m!=null&&x(e,["urlContext"],m),e}function sN(t){const e={},s=p(t,["functionDeclarations"]);if(s!=null){let v=s;Array.isArray(v)&&(v=v.map(b=>CR(b))),x(e,["functionDeclarations"],v)}const n=p(t,["retrieval"]);n!=null&&x(e,["retrieval"],n);const i=p(t,["googleSearchRetrieval"]);i!=null&&x(e,["googleSearchRetrieval"],i);const l=p(t,["computerUse"]);if(l!=null&&x(e,["computerUse"],l),p(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const d=p(t,["codeExecution"]);d!=null&&x(e,["codeExecution"],d);const u=p(t,["enterpriseWebSearch"]);u!=null&&x(e,["enterpriseWebSearch"],u);const f=p(t,["googleMaps"]);f!=null&&x(e,["googleMaps"],f);const m=p(t,["googleSearch"]);m!=null&&x(e,["googleSearch"],m);const g=p(t,["urlContext"]);return g!=null&&x(e,["urlContext"],g),e}function Ek(t){const e={},s=p(t,["baseModel"]);s!=null&&x(e,["baseModel"],s);const n=p(t,["createTime"]);n!=null&&x(e,["createTime"],n);const i=p(t,["updateTime"]);return i!=null&&x(e,["updateTime"],i),e}function Ck(t){const e={},s=p(t,["labels","google-vertex-llm-tuning-base-model-id"]);s!=null&&x(e,["baseModel"],s);const n=p(t,["createTime"]);n!=null&&x(e,["createTime"],n);const i=p(t,["updateTime"]);return i!=null&&x(e,["updateTime"],i),e}function Tk(t,e){const s={},n=p(t,["displayName"]);e!==void 0&&n!=null&&x(e,["displayName"],n);const i=p(t,["description"]);e!==void 0&&i!=null&&x(e,["description"],i);const l=p(t,["defaultCheckpointId"]);return e!==void 0&&l!=null&&x(e,["defaultCheckpointId"],l),s}function Ak(t,e){const s={},n=p(t,["displayName"]);e!==void 0&&n!=null&&x(e,["displayName"],n);const i=p(t,["description"]);e!==void 0&&i!=null&&x(e,["description"],i);const l=p(t,["defaultCheckpointId"]);return e!==void 0&&l!=null&&x(e,["defaultCheckpointId"],l),s}function Rk(t,e){const s={},n=p(e,["model"]);n!=null&&x(s,["_url","name"],Qe(t,n));const i=p(e,["config"]);return i!=null&&Tk(i,s),s}function kk(t,e){const s={},n=p(e,["model"]);n!=null&&x(s,["_url","model"],Qe(t,n));const i=p(e,["config"]);return i!=null&&Ak(i,s),s}function Mk(t,e){const s={},n=p(t,["outputGcsUri"]);e!==void 0&&n!=null&&x(e,["parameters","storageUri"],n);const i=p(t,["safetyFilterLevel"]);e!==void 0&&i!=null&&x(e,["parameters","safetySetting"],i);const l=p(t,["personGeneration"]);e!==void 0&&l!=null&&x(e,["parameters","personGeneration"],l);const d=p(t,["includeRaiReason"]);e!==void 0&&d!=null&&x(e,["parameters","includeRaiReason"],d);const u=p(t,["outputMimeType"]);e!==void 0&&u!=null&&x(e,["parameters","outputOptions","mimeType"],u);const f=p(t,["outputCompressionQuality"]);e!==void 0&&f!=null&&x(e,["parameters","outputOptions","compressionQuality"],f);const m=p(t,["enhanceInputImage"]);e!==void 0&&m!=null&&x(e,["parameters","upscaleConfig","enhanceInputImage"],m);const g=p(t,["imagePreservationFactor"]);e!==void 0&&g!=null&&x(e,["parameters","upscaleConfig","imagePreservationFactor"],g);const v=p(t,["labels"]);e!==void 0&&v!=null&&x(e,["labels"],v);const b=p(t,["numberOfImages"]);e!==void 0&&b!=null&&x(e,["parameters","sampleCount"],b);const _=p(t,["mode"]);return e!==void 0&&_!=null&&x(e,["parameters","mode"],_),s}function Ik(t,e){const s={},n=p(e,["model"]);n!=null&&x(s,["_url","model"],Qe(t,n));const i=p(e,["image"]);i!=null&&x(s,["instances[0]","image"],pa(i));const l=p(e,["upscaleFactor"]);l!=null&&x(s,["parameters","upscaleConfig","upscaleFactor"],l);const d=p(e,["config"]);return d!=null&&Mk(d,s),s}function Dk(t){const e={},s=p(t,["sdkHttpResponse"]);s!=null&&x(e,["sdkHttpResponse"],s);const n=p(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(l=>yd(l))),x(e,["generatedImages"],i)}return e}function Pk(t){const e={},s=p(t,["uri"]);s!=null&&x(e,["uri"],s);const n=p(t,["encodedVideo"]);n!=null&&x(e,["videoBytes"],Un(n));const i=p(t,["encoding"]);return i!=null&&x(e,["mimeType"],i),e}function Uk(t){const e={},s=p(t,["gcsUri"]);s!=null&&x(e,["uri"],s);const n=p(t,["bytesBase64Encoded"]);n!=null&&x(e,["videoBytes"],Un(n));const i=p(t,["mimeType"]);return i!=null&&x(e,["mimeType"],i),e}function Lk(t){const e={},s=p(t,["image"]);s!=null&&x(e,["_self"],pa(s));const n=p(t,["maskMode"]);return n!=null&&x(e,["maskMode"],n),e}function Ok(t){const e={},s=p(t,["image"]);s!=null&&x(e,["image"],vd(s));const n=p(t,["referenceType"]);return n!=null&&x(e,["referenceType"],n),e}function qk(t){const e={},s=p(t,["image"]);s!=null&&x(e,["image"],pa(s));const n=p(t,["referenceType"]);return n!=null&&x(e,["referenceType"],n),e}function aN(t){const e={},s=p(t,["uri"]);s!=null&&x(e,["uri"],s);const n=p(t,["videoBytes"]);n!=null&&x(e,["encodedVideo"],Un(n));const i=p(t,["mimeType"]);return i!=null&&x(e,["encoding"],i),e}function nN(t){const e={},s=p(t,["uri"]);s!=null&&x(e,["gcsUri"],s);const n=p(t,["videoBytes"]);n!=null&&x(e,["bytesBase64Encoded"],Un(n));const i=p(t,["mimeType"]);return i!=null&&x(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Bk(t,e){const s={},n=p(t,["displayName"]);return e!==void 0&&n!=null&&x(e,["displayName"],n),s}function $k(t){const e={},s=p(t,["config"]);return s!=null&&Bk(s,e),e}function zk(t,e){const s={},n=p(t,["force"]);return e!==void 0&&n!=null&&x(e,["_query","force"],n),s}function Vk(t){const e={},s=p(t,["name"]);s!=null&&x(e,["_url","name"],s);const n=p(t,["config"]);return n!=null&&zk(n,e),e}function Hk(t){const e={},s=p(t,["name"]);return s!=null&&x(e,["_url","name"],s),e}function Gk(t,e){const s={},n=p(t,["customMetadata"]);if(e!==void 0&&n!=null){let l=n;Array.isArray(l)&&(l=l.map(d=>d)),x(e,["customMetadata"],l)}const i=p(t,["chunkingConfig"]);return e!==void 0&&i!=null&&x(e,["chunkingConfig"],i),s}function Fk(t){const e={},s=p(t,["name"]);s!=null&&x(e,["name"],s);const n=p(t,["metadata"]);n!=null&&x(e,["metadata"],n);const i=p(t,["done"]);i!=null&&x(e,["done"],i);const l=p(t,["error"]);l!=null&&x(e,["error"],l);const d=p(t,["response"]);return d!=null&&x(e,["response"],Kk(d)),e}function Jk(t){const e={},s=p(t,["fileSearchStoreName"]);s!=null&&x(e,["_url","file_search_store_name"],s);const n=p(t,["fileName"]);n!=null&&x(e,["fileName"],n);const i=p(t,["config"]);return i!=null&&Gk(i,e),e}function Kk(t){const e={},s=p(t,["sdkHttpResponse"]);s!=null&&x(e,["sdkHttpResponse"],s);const n=p(t,["parent"]);n!=null&&x(e,["parent"],n);const i=p(t,["documentName"]);return i!=null&&x(e,["documentName"],i),e}function Yk(t,e){const s={},n=p(t,["pageSize"]);e!==void 0&&n!=null&&x(e,["_query","pageSize"],n);const i=p(t,["pageToken"]);return e!==void 0&&i!=null&&x(e,["_query","pageToken"],i),s}function Wk(t){const e={},s=p(t,["config"]);return s!=null&&Yk(s,e),e}function Xk(t){const e={},s=p(t,["sdkHttpResponse"]);s!=null&&x(e,["sdkHttpResponse"],s);const n=p(t,["nextPageToken"]);n!=null&&x(e,["nextPageToken"],n);const i=p(t,["fileSearchStores"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(d=>d)),x(e,["fileSearchStores"],l)}return e}function rN(t,e){const s={},n=p(t,["mimeType"]);e!==void 0&&n!=null&&x(e,["mimeType"],n);const i=p(t,["displayName"]);e!==void 0&&i!=null&&x(e,["displayName"],i);const l=p(t,["customMetadata"]);if(e!==void 0&&l!=null){let u=l;Array.isArray(u)&&(u=u.map(f=>f)),x(e,["customMetadata"],u)}const d=p(t,["chunkingConfig"]);return e!==void 0&&d!=null&&x(e,["chunkingConfig"],d),s}function Qk(t){const e={},s=p(t,["fileSearchStoreName"]);s!=null&&x(e,["_url","file_search_store_name"],s);const n=p(t,["config"]);return n!=null&&rN(n,e),e}function Zk(t){const e={},s=p(t,["sdkHttpResponse"]);return s!=null&&x(e,["sdkHttpResponse"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const e5="Content-Type",t5="X-Server-Timeout",s5="User-Agent",tm="x-goog-api-client",a5="1.34.0",n5=`google-genai-sdk/${a5}`,r5="v1beta1",o5="v1beta";class i5{constructor(e){var s,n;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:r5,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:o5,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const n=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&n.push(e.apiVersion),n.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),s=new URL(e);return s.protocol=s.protocol=="http:"?"ws":"wss",s.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,s,n){const i=[this.getRequestUrlInternal(s)];return n&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let s=this.clientOptions.httpOptions;e.httpOptions&&(s=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const n=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,s,n);if(e.queryParams)for(const[d,u]of Object.entries(e.queryParams))i.searchParams.append(d,String(u));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,s,i.toString(),e.abortSignal),this.unaryApiCall(i,l,e.httpMethod)}patchHttpOptions(e,s){const n=JSON.parse(JSON.stringify(e));for(const[i,l]of Object.entries(s))typeof l=="object"?n[i]=Object.assign(Object.assign({},n[i]),l):l!==void 0&&(n[i]=l);return n}async requestStream(e){let s=this.clientOptions.httpOptions;e.httpOptions&&(s=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const n=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,s,n);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,s,i.toString(),e.abortSignal),this.streamApiCall(i,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,s,n,i){if(s&&s.timeout||i){const l=new AbortController,d=l.signal;if(s.timeout&&(s==null?void 0:s.timeout)>0){const u=setTimeout(()=>l.abort(),s.timeout);u&&typeof u.unref=="function"&&u.unref()}i&&i.addEventListener("abort",()=>{l.abort()}),e.signal=d}return s&&s.extraBody!==null&&l5(e,s.extraBody),e.headers=await this.getHeadersInternal(s,n),e}async unaryApiCall(e,s,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},s),{method:n})).then(async i=>(await Kv(i),new Wf(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,s,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},s),{method:n})).then(async i=>(await Kv(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){return ha(this,arguments,function*(){var n;const i=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),l=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let d="";const u="data:",f=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:m,value:g}=yield Re(i.read());if(m){if(d.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const v=l.decode(g,{stream:!0});try{const S=JSON.parse(v);if("error"in S){const E=JSON.parse(JSON.stringify(S.error)),C=E.status,T=E.code,R=`got status: ${C}. ${JSON.stringify(S)}`;if(T>=400&&T<600)throw new gd({message:R,status:T})}}catch(S){if(S.name==="ApiError")throw S}d+=v;let b=-1,_=0;for(;;){b=-1,_=0;for(const C of f){const T=d.indexOf(C);T!==-1&&(b===-1||T<b)&&(b=T,_=C.length)}if(b===-1)break;const S=d.substring(0,b);d=d.substring(b+_);const E=S.trim();if(E.startsWith(u)){const C=E.substring(u.length).trim();try{const T=new Response(C,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Re(new Wf(T))}catch(T){throw new Error(`exception parsing stream chunk ${C}. ${T}`)}}}}}finally{i.releaseLock()}})}async apiCall(e,s){return fetch(e,s).catch(n=>{throw new Error(`exception ${n} sending request`)})}getDefaultHeaders(){const e={},s=n5+" "+this.clientOptions.userAgentExtra;return e[s5]=s,e[tm]=s,e[e5]="application/json",e}async getHeadersInternal(e,s){const n=new Headers;if(e&&e.headers){for(const[i,l]of Object.entries(e.headers))n.append(i,l);e.timeout&&e.timeout>0&&n.append(t5,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n,s),n}getFileName(e){var s;let n="";return typeof e=="string"&&(n=e.replace(/[/\\]+$/,""),n=(s=n.split(/[/\\]/).pop())!==null&&s!==void 0?s:""),n}async uploadFile(e,s){var n;const i={};s!=null&&(i.mimeType=s.mimeType,i.name=s.name,i.displayName=s.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const l=this.clientOptions.uploader,d=await l.stat(e);i.sizeBytes=String(d.size);const u=(n=s==null?void 0:s.mimeType)!==null&&n!==void 0?n:d.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=u;const f={file:i},m=this.getFileName(e),g=ge("upload/v1beta/files",f._url),v=await this.fetchUploadUrl(g,i.sizeBytes,i.mimeType,m,f,s==null?void 0:s.httpOptions);return l.upload(e,v,this)}async uploadFileToFileSearchStore(e,s,n){var i;const l=this.clientOptions.uploader,d=await l.stat(s),u=String(d.size),f=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:d.type;if(f===void 0||f==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const m=`upload/v1beta/${e}:uploadToFileSearchStore`,g=this.getFileName(s),v={};n!=null&&rN(n,v);const b=await this.fetchUploadUrl(m,u,f,g,v,n==null?void 0:n.httpOptions);return l.uploadToFileSearchStore(s,b,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,s,n,i,l,d){var u;let f={};d?f=d:f={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${s}`,"X-Goog-Upload-Header-Content-Type":`${n}`},i?{"X-Goog-Upload-File-Name":i}:{})};const m=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:f});if(!m||!(m!=null&&m.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const g=(u=m==null?void 0:m.headers)===null||u===void 0?void 0:u["x-goog-upload-url"];if(g===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return g}}async function Kv(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const s=t.status;let n;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?n=await t.json():n={error:{message:await t.text(),code:t.status,status:t.statusText}};const i=JSON.stringify(n);throw s>=400&&s<600?new gd({message:i,status:s}):new Error(i)}}function l5(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let s={};if(typeof t.body=="string"&&t.body.length>0)try{const l=JSON.parse(t.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))s=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function n(l,d){const u=Object.assign({},l);for(const f in d)if(Object.prototype.hasOwnProperty.call(d,f)){const m=d[f],g=u[f];m&&typeof m=="object"&&!Array.isArray(m)&&g&&typeof g=="object"&&!Array.isArray(g)?u[f]=n(g,m):(g&&m&&typeof g!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${f}". Original type: ${typeof g}, New type: ${typeof m}. Overwriting.`),u[f]=m)}return u}const i=n(s,e);t.body=JSON.stringify(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const c5="mcp_used/unknown";let d5=!1;function oN(t){for(const e of t)if(u5(e)||typeof e=="object"&&"inputSchema"in e)return!0;return d5}function iN(t){var e;const s=(e=t[tm])!==null&&e!==void 0?e:"";t[tm]=(s+` ${c5}`).trimStart()}function u5(t){return t!==null&&typeof t=="object"&&t instanceof Um}function h5(t){return ha(this,arguments,function*(s,n=100){let i,l=0;for(;l<n;){const d=yield Re(s.listTools({cursor:i}));for(const u of d.tools)yield yield Re(u),l++;if(!d.nextCursor)break;i=d.nextCursor}})}class Um{constructor(e=[],s){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=s}static create(e,s){return new Um(e,s)}async initialize(){var e,s,n,i;if(this.mcpTools.length>0)return;const l={},d=[];for(const g of this.mcpClients)try{for(var u=!0,f=(s=void 0,fa(h5(g))),m;m=await f.next(),e=m.done,!e;u=!0){i=m.value,u=!1;const v=i;d.push(v);const b=v.name;if(l[b])throw new Error(`Duplicate function name ${b} found in MCP tools. Please ensure function names are unique.`);l[b]=g}}catch(v){s={error:v}}finally{try{!u&&!e&&(n=f.return)&&await n.call(f)}finally{if(s)throw s.error}}this.mcpTools=d,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),HT(this.mcpTools,this.config)}async callTool(e){await this.initialize();const s=[];for(const n of e)if(n.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[n.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const d=await i.callTool({name:n.name,arguments:n.args},void 0,l);s.push({functionResponse:{name:n.name,response:d.isError?{error:d}:d}})}return s}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function f5(t,e,s){const n=new UT;let i;s.data instanceof Blob?i=JSON.parse(await s.data.text()):i=JSON.parse(s.data),Object.assign(n,i),e(n)}class m5{constructor(e,s,n){this.apiClient=e,this.auth=s,this.webSocketFactory=n}async connect(e){var s,n;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),d=x5(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),f=`${i}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${u}`;let m=()=>{};const g=new Promise(A=>{m=A}),v=e.callbacks,b=function(){m({})},_=this.apiClient,S={onopen:b,onmessage:A=>{f5(_,v.onmessage,A)},onerror:(s=v==null?void 0:v.onerror)!==null&&s!==void 0?s:function(A){},onclose:(n=v==null?void 0:v.onclose)!==null&&n!==void 0?n:function(A){}},E=this.webSocketFactory.create(f,g5(d),S);E.connect(),await g;const R={setup:{model:Qe(this.apiClient,e.model)}};return E.send(JSON.stringify(R)),new p5(E,this.apiClient)}}class p5{constructor(e,s){this.conn=e,this.apiClient=s}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const s=$4(e);this.conn.send(JSON.stringify({clientContent:s}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const s=B4(e);this.conn.send(JSON.stringify(s))}sendPlaybackControl(e){const s={playbackControl:e};this.conn.send(JSON.stringify(s))}play(){this.sendPlaybackControl(fo.PLAY)}pause(){this.sendPlaybackControl(fo.PAUSE)}stop(){this.sendPlaybackControl(fo.STOP)}resetContext(){this.sendPlaybackControl(fo.RESET_CONTEXT)}close(){this.conn.close()}}function g5(t){const e={};return t.forEach((s,n)=>{e[n]=s}),e}function x5(t){const e=new Headers;for(const[s,n]of Object.entries(t))e.append(s,n);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const y5="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function v5(t,e,s){const n=new PT;let i;s.data instanceof Blob?i=await s.data.text():s.data instanceof ArrayBuffer?i=new TextDecoder().decode(s.data):i=s.data;const l=JSON.parse(i);if(t.isVertexAI()){const d=H4(l);Object.assign(n,d)}else Object.assign(n,l);e(n)}class b5{constructor(e,s,n){this.apiClient=e,this.auth=s,this.webSocketFactory=n,this.music=new m5(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var s,n,i,l,d,u;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const f=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let g;const v=this.apiClient.getHeaders();e.config&&e.config.tools&&oN(e.config.tools)&&iN(v);const b=S5(v);if(this.apiClient.isVertexAI())g=`${f}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(b,g);else{const I=this.apiClient.getApiKey();let U="BidiGenerateContent",q="key";I!=null&&I.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),m!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),U="BidiGenerateContentConstrained",q="access_token"),g=`${f}/ws/google.ai.generativelanguage.${m}.GenerativeService.${U}?${q}=${I}`}let _=()=>{};const S=new Promise(I=>{_=I}),E=e.callbacks,C=function(){var I;(I=E==null?void 0:E.onopen)===null||I===void 0||I.call(E),_({})},T=this.apiClient,R={onopen:C,onmessage:I=>{v5(T,E.onmessage,I)},onerror:(s=E==null?void 0:E.onerror)!==null&&s!==void 0?s:function(I){},onclose:(n=E==null?void 0:E.onclose)!==null&&n!==void 0?n:function(I){}},A=this.webSocketFactory.create(g,_5(b),R);A.connect(),await S;let M=Qe(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&M.startsWith("publishers/")){const I=this.apiClient.getProject(),U=this.apiClient.getLocation();M=`projects/${I}/locations/${U}/`+M}let z={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[sd.AUDIO]}:e.config.responseModalities=[sd.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const F=(u=(d=e.config)===null||d===void 0?void 0:d.tools)!==null&&u!==void 0?u:[],G=[];for(const I of F)if(this.isCallableTool(I)){const U=I;G.push(await U.tool())}else G.push(I);G.length>0&&(e.config.tools=G);const K={model:M,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?z=q4(this.apiClient,K):z=O4(this.apiClient,K),delete z.config,A.send(JSON.stringify(z)),new N5(A,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const w5={turnComplete:!0};class N5{constructor(e,s){this.conn=e,this.apiClient=s}tLiveClientContent(e,s){if(s.turns!==null&&s.turns!==void 0){let n=[];try{n=Qs(s.turns),e.isVertexAI()||(n=n.map(i=>xd(i)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof s.turns}'`)}return{clientContent:{turns:n,turnComplete:s.turnComplete}}}return{clientContent:{turnComplete:s.turnComplete}}}tLiveClienttToolResponse(e,s){let n=[];if(s.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(s.functionResponses)?n=s.functionResponses:n=[s.functionResponses],n.length===0)throw new Error("functionResponses is required.");for(const l of n){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(y5)}return{toolResponse:{functionResponses:n}}}sendClientContent(e){e=Object.assign(Object.assign({},w5),e);const s=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(s))}sendRealtimeInput(e){let s={};this.apiClient.isVertexAI()?s={realtimeInput:V4(e)}:s={realtimeInput:z4(e)},this.conn.send(JSON.stringify(s))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const s=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(s))}close(){this.conn.close()}}function _5(t){const e={};return t.forEach((s,n)=>{e[n]=s}),e}function S5(t){const e=new Headers;for(const[s,n]of Object.entries(t))e.append(s,n);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Yv=10;function Wv(t){var e,s,n;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(const d of(s=t==null?void 0:t.tools)!==null&&s!==void 0?s:[])if(xo(d)){i=!0;break}if(!i)return!0;const l=(n=t==null?void 0:t.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function xo(t){return"callTool"in t&&typeof t.callTool=="function"}function j5(t){var e,s,n;return(n=(s=(e=t.config)===null||e===void 0?void 0:e.tools)===null||s===void 0?void 0:s.some(i=>xo(i)))!==null&&n!==void 0?n:!1}function Xv(t){var e;const s=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((n,i)=>{if(xo(n))return;const l=n;l.functionDeclarations&&l.functionDeclarations.length>0&&s.push(i)}),s}function Qv(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class E5 extends nn{constructor(e){super(),this.apiClient=e,this.generateContent=async s=>{var n,i,l,d,u;const f=await this.processParamsMaybeAddMcpUsage(s);if(this.maybeMoveToResponseJsonSchem(s),!j5(s)||Wv(s.config))return await this.generateContentInternal(f);const m=Xv(s);if(m.length>0){const E=m.map(C=>`tools[${C}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${E}.`)}let g,v;const b=Qs(f.contents),_=(l=(i=(n=f.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&l!==void 0?l:Yv;let S=0;for(;S<_&&(g=await this.generateContentInternal(f),!(!g.functionCalls||g.functionCalls.length===0));){const E=g.candidates[0].content,C=[];for(const T of(u=(d=s.config)===null||d===void 0?void 0:d.tools)!==null&&u!==void 0?u:[])if(xo(T)){const A=await T.callTool(g.functionCalls);C.push(...A)}S++,v={role:"user",parts:C},f.contents=Qs(f.contents),f.contents.push(E),f.contents.push(v),Qv(f.config)&&(b.push(E),b.push(v))}return Qv(f.config)&&(g.automaticFunctionCallingHistory=b),g},this.generateContentStream=async s=>{var n,i,l,d,u;if(this.maybeMoveToResponseJsonSchem(s),Wv(s.config)){const v=await this.processParamsMaybeAddMcpUsage(s);return await this.generateContentStreamInternal(v)}const f=Xv(s);if(f.length>0){const v=f.map(b=>`tools[${b}]`).join(", ");throw new Error(`Incompatible tools found at ${v}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const m=(l=(i=(n=s==null?void 0:s.config)===null||n===void 0?void 0:n.toolConfig)===null||i===void 0?void 0:i.functionCallingConfig)===null||l===void 0?void 0:l.streamFunctionCallArguments,g=(u=(d=s==null?void 0:s.config)===null||d===void 0?void 0:d.automaticFunctionCalling)===null||u===void 0?void 0:u.disable;if(m&&!g)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(s)},this.generateImages=async s=>await this.generateImagesInternal(s).then(n=>{var i;let l;const d=[];if(n!=null&&n.generatedImages)for(const f of n.generatedImages)f&&(f!=null&&f.safetyAttributes)&&((i=f==null?void 0:f.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?l=f==null?void 0:f.safetyAttributes:d.push(f);let u;return l?u={generatedImages:d,positivePromptSafetyAttributes:l,sdkHttpResponse:n.sdkHttpResponse}:u={generatedImages:d,sdkHttpResponse:n.sdkHttpResponse},u}),this.list=async s=>{var n;const d={config:Object.assign(Object.assign({},{queryBase:!0}),s==null?void 0:s.config)};if(this.apiClient.isVertexAI()&&!d.config.queryBase){if(!((n=d.config)===null||n===void 0)&&n.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");d.config.filter="labels.tune-type:*"}return new mr(Za.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(d),d)},this.editImage=async s=>{const n={model:s.model,prompt:s.prompt,referenceImages:[],config:s.config};return s.referenceImages&&s.referenceImages&&(n.referenceImages=s.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(n)},this.upscaleImage=async s=>{let n={numberOfImages:1,mode:"upscale"};s.config&&(n=Object.assign(Object.assign({},n),s.config));const i={model:s.model,image:s.image,upscaleFactor:s.upscaleFactor,config:n};return await this.upscaleImageInternal(i)},this.generateVideos=async s=>{var n,i,l,d,u,f;if((s.prompt||s.image||s.video)&&s.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((n=s.video)===null||n===void 0)&&n.uri&&(!((i=s.video)===null||i===void 0)&&i.videoBytes)?s.video={uri:s.video.uri,mimeType:s.video.mimeType}:!((d=(l=s.source)===null||l===void 0?void 0:l.video)===null||d===void 0)&&d.uri&&(!((f=(u=s.source)===null||u===void 0?void 0:u.video)===null||f===void 0)&&f.videoBytes)&&(s.source.video={uri:s.source.video.uri,mimeType:s.source.video.mimeType})),await this.generateVideosInternal(s)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var s,n,i;const l=(s=e.config)===null||s===void 0?void 0:s.tools;if(!l)return e;const d=await Promise.all(l.map(async f=>xo(f)?await f.tool():f)),u={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:d})};if(u.config.tools=d,e.config&&e.config.tools&&oN(e.config.tools)){const f=(i=(n=e.config.httpOptions)===null||n===void 0?void 0:n.headers)!==null&&i!==void 0?i:{};let m=Object.assign({},f);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),iN(m),u.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:m})}return u}async initAfcToolsMap(e){var s,n,i;const l=new Map;for(const d of(n=(s=e.config)===null||s===void 0?void 0:s.tools)!==null&&n!==void 0?n:[])if(xo(d)){const u=d,f=await u.tool();for(const m of(i=f.functionDeclarations)!==null&&i!==void 0?i:[]){if(!m.name)throw new Error("Function declaration name is required.");if(l.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);l.set(m.name,u)}}return l}async processAfcStream(e){var s,n,i;const l=(i=(n=(s=e.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls)!==null&&i!==void 0?i:Yv;let d=!1,u=0;const f=await this.initAfcToolsMap(e);return(function(m,g,v){return ha(this,arguments,function*(){for(var b,_,S,E,C,T;u<l;){d&&(u++,d=!1);const z=yield Re(m.processParamsMaybeAddMcpUsage(v)),F=yield Re(m.generateContentStreamInternal(z)),G=[],K=[];try{for(var R=!0,A=(_=void 0,fa(F)),M;M=yield Re(A.next()),b=M.done,!b;R=!0){E=M.value,R=!1;const I=E;if(yield yield Re(I),I.candidates&&(!((C=I.candidates[0])===null||C===void 0)&&C.content)){K.push(I.candidates[0].content);for(const U of(T=I.candidates[0].content.parts)!==null&&T!==void 0?T:[])if(u<l&&U.functionCall){if(!U.functionCall.name)throw new Error("Function call name was not returned by the model.");if(g.has(U.functionCall.name)){const q=yield Re(g.get(U.functionCall.name).callTool([U.functionCall]));G.push(...q)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${g.keys()}, mising tool: ${U.functionCall.name}`)}}}}catch(I){_={error:I}}finally{try{!R&&!b&&(S=A.return)&&(yield Re(S.call(A)))}finally{if(_)throw _.error}}if(G.length>0){d=!0;const I=new ki;I.candidates=[{content:{role:"user",parts:G}}],yield yield Re(I);const U=[];U.push(...K),U.push({role:"user",parts:G});const q=Qs(v.contents).concat(U);v.contents=q}else break}})})(this,f,e)}async generateContentInternal(e){var s,n,i,l;let d,u="",f={};if(this.apiClient.isVertexAI()){const m=Gv(this.apiClient,e);return u=ge("{model}:generateContent",m._url),f=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(g=>g.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:g.headers},b})),d.then(g=>{const v=Jv(g),b=new ki;return Object.assign(b,v),b})}else{const m=Hv(this.apiClient,e);return u=ge("{model}:generateContent",m._url),f=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:g.headers},b})),d.then(g=>{const v=Fv(g),b=new ki;return Object.assign(b,v),b})}}async generateContentStreamInternal(e){var s,n,i,l;let d,u="",f={};if(this.apiClient.isVertexAI()){const m=Gv(this.apiClient,e);return u=ge("{model}:streamGenerateContent?alt=sse",m._url),f=m._query,delete m._url,delete m._query,d=this.apiClient.requestStream({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}),d.then(function(v){return ha(this,arguments,function*(){var b,_,S,E;try{for(var C=!0,T=fa(v),R;R=yield Re(T.next()),b=R.done,!b;C=!0){E=R.value,C=!1;const A=E,M=Jv(yield Re(A.json()));M.sdkHttpResponse={headers:A.headers};const z=new ki;Object.assign(z,M),yield yield Re(z)}}catch(A){_={error:A}}finally{try{!C&&!b&&(S=T.return)&&(yield Re(S.call(T)))}finally{if(_)throw _.error}}})})}else{const m=Hv(this.apiClient,e);return u=ge("{model}:streamGenerateContent?alt=sse",m._url),f=m._query,delete m._url,delete m._query,d=this.apiClient.requestStream({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),d.then(function(v){return ha(this,arguments,function*(){var b,_,S,E;try{for(var C=!0,T=fa(v),R;R=yield Re(T.next()),b=R.done,!b;C=!0){E=R.value,C=!1;const A=E,M=Fv(yield Re(A.json()));M.sdkHttpResponse={headers:A.headers};const z=new ki;Object.assign(z,M),yield yield Re(z)}}catch(A){_={error:A}}finally{try{!C&&!b&&(S=T.return)&&(yield Re(S.call(T)))}finally{if(_)throw _.error}}})})}}async embedContent(e){var s,n,i,l;let d,u="",f={};if(this.apiClient.isVertexAI()){const m=bR(this.apiClient,e);return u=ge("{model}:predict",m._url),f=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(g=>g.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:g.headers},b})),d.then(g=>{const v=NR(g),b=new Cv;return Object.assign(b,v),b})}else{const m=vR(this.apiClient,e);return u=ge("{model}:batchEmbedContents",m._url),f=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:g.headers},b})),d.then(g=>{const v=wR(g),b=new Cv;return Object.assign(b,v),b})}}async generateImagesInternal(e){var s,n,i,l;let d,u="",f={};if(this.apiClient.isVertexAI()){const m=IR(this.apiClient,e);return u=ge("{model}:predict",m._url),f=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(g=>g.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:g.headers},b})),d.then(g=>{const v=PR(g),b=new Tv;return Object.assign(b,v),b})}else{const m=MR(this.apiClient,e);return u=ge("{model}:predict",m._url),f=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:g.headers},b})),d.then(g=>{const v=DR(g),b=new Tv;return Object.assign(b,v),b})}}async editImageInternal(e){var s,n;let i,l="",d={};if(this.apiClient.isVertexAI()){const u=pR(this.apiClient,e);return l=ge("{model}:predict",u._url),d=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:f.headers},g})),i.then(f=>{const m=gR(f),g=new ST;return Object.assign(g,m),g})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var s,n;let i,l="",d={};if(this.apiClient.isVertexAI()){const u=Ik(this.apiClient,e);return l=ge("{model}:predict",u._url),d=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:f.headers},g})),i.then(f=>{const m=Dk(f),g=new jT;return Object.assign(g,m),g})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var s,n;let i,l="",d={};if(this.apiClient.isVertexAI()){const u=mk(this.apiClient,e);return l=ge("{model}:predict",u._url),d=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),i.then(f=>{const m=pk(f),g=new ET;return Object.assign(g,m),g})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var s,n;let i,l="",d={};if(this.apiClient.isVertexAI()){const u=wk(this.apiClient,e);return l=ge("{model}:predict",u._url),d=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),i.then(f=>{const m=Nk(f),g=new CT;return Object.assign(g,m),g})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var s,n,i,l;let d,u="",f={};if(this.apiClient.isVertexAI()){const m=QR(this.apiClient,e);return u=ge("{name}",m._url),f=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(g=>g.json()),d.then(g=>em(g))}else{const m=XR(this.apiClient,e);return u=ge("{name}",m._url),f=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json()),d.then(g=>Zf(g))}}async listInternal(e){var s,n,i,l;let d,u="",f={};if(this.apiClient.isVertexAI()){const m=ik(this.apiClient,e);return u=ge("{models_url}",m._url),f=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(g=>g.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:g.headers},b})),d.then(g=>{const v=ck(g),b=new Av;return Object.assign(b,v),b})}else{const m=ok(this.apiClient,e);return u=ge("{models_url}",m._url),f=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:g.headers},b})),d.then(g=>{const v=lk(g),b=new Av;return Object.assign(b,v),b})}}async update(e){var s,n,i,l;let d,u="",f={};if(this.apiClient.isVertexAI()){const m=kk(this.apiClient,e);return u=ge("{model}",m._url),f=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(g=>g.json()),d.then(g=>em(g))}else{const m=Rk(this.apiClient,e);return u=ge("{name}",m._url),f=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json()),d.then(g=>Zf(g))}}async delete(e){var s,n,i,l;let d,u="",f={};if(this.apiClient.isVertexAI()){const m=uR(this.apiClient,e);return u=ge("{name}",m._url),f=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(g=>g.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:g.headers},b})),d.then(g=>{const v=fR(g),b=new Rv;return Object.assign(b,v),b})}else{const m=dR(this.apiClient,e);return u=ge("{name}",m._url),f=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:g.headers},b})),d.then(g=>{const v=hR(g),b=new Rv;return Object.assign(b,v),b})}}async countTokens(e){var s,n,i,l;let d,u="",f={};if(this.apiClient.isVertexAI()){const m=iR(this.apiClient,e);return u=ge("{model}:countTokens",m._url),f=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(g=>g.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:g.headers},b})),d.then(g=>{const v=cR(g),b=new kv;return Object.assign(b,v),b})}else{const m=oR(this.apiClient,e);return u=ge("{model}:countTokens",m._url),f=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:g.headers},b})),d.then(g=>{const v=lR(g),b=new kv;return Object.assign(b,v),b})}}async computeTokens(e){var s,n;let i,l="",d={};if(this.apiClient.isVertexAI()){const u=Z4(this.apiClient,e);return l=ge("{model}:computeTokens",u._url),d=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:f.headers},g})),i.then(f=>{const m=eR(f),g=new TT;return Object.assign(g,m),g})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var s,n,i,l;let d,u="",f={};if(this.apiClient.isVertexAI()){const m=$R(this.apiClient,e);return u=ge("{model}:predictLongRunning",m._url),f=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(g=>g.json()),d.then(g=>{const v=qR(g),b=new ad;return Object.assign(b,v),b})}else{const m=BR(this.apiClient,e);return u=ge("{model}:predictLongRunning",m._url),f=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json()),d.then(g=>{const v=OR(g),b=new ad;return Object.assign(b,v),b})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class C5 extends nn{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const s=e.operation,n=e.config;if(s.name===void 0||s.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=s.name.split("/operations/")[0];let l;n&&"httpOptions"in n&&(l=n.httpOptions);const d=await this.fetchPredictVideosOperationInternal({operationName:s.name,resourceName:i,config:{httpOptions:l}});return s._fromAPIResponse({apiResponse:d,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:s.name,config:n});return s._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async get(e){const s=e.operation,n=e.config;if(s.name===void 0||s.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=s.name.split("/operations/")[0];let l;n&&"httpOptions"in n&&(l=n.httpOptions);const d=await this.fetchPredictVideosOperationInternal({operationName:s.name,resourceName:i,config:{httpOptions:l}});return s._fromAPIResponse({apiResponse:d,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:s.name,config:n});return s._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async getVideosOperationInternal(e){var s,n,i,l;let d,u="",f={};if(this.apiClient.isVertexAI()){const m=yT(e);return u=ge("{operationName}",m._url),f=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(g=>g.json()),d}else{const m=xT(e);return u=ge("{operationName}",m._url),f=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json()),d}}async fetchPredictVideosOperationInternal(e){var s,n;let i,l="",d={};if(this.apiClient.isVertexAI()){const u=dT(e);return l=ge("{resourceName}:fetchPredictOperation",u._url),d=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function T5(t){const e={},s=p(t,["data"]);if(s!=null&&x(e,["data"],s),p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=p(t,["mimeType"]);return n!=null&&x(e,["mimeType"],n),e}function A5(t){const e={},s=p(t,["parts"]);if(s!=null){let i=s;Array.isArray(i)&&(i=i.map(l=>O5(l))),x(e,["parts"],i)}const n=p(t,["role"]);return n!=null&&x(e,["role"],n),e}function R5(t,e,s){const n={},i=p(e,["expireTime"]);s!==void 0&&i!=null&&x(s,["expireTime"],i);const l=p(e,["newSessionExpireTime"]);s!==void 0&&l!=null&&x(s,["newSessionExpireTime"],l);const d=p(e,["uses"]);s!==void 0&&d!=null&&x(s,["uses"],d);const u=p(e,["liveConnectConstraints"]);s!==void 0&&u!=null&&x(s,["bidiGenerateContentSetup"],L5(t,u));const f=p(e,["lockAdditionalFields"]);return s!==void 0&&f!=null&&x(s,["fieldMask"],f),n}function k5(t,e){const s={},n=p(e,["config"]);return n!=null&&x(s,["config"],R5(t,n,s)),s}function M5(t){const e={};if(p(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=p(t,["fileUri"]);s!=null&&x(e,["fileUri"],s);const n=p(t,["mimeType"]);return n!=null&&x(e,["mimeType"],n),e}function I5(t){const e={},s=p(t,["id"]);s!=null&&x(e,["id"],s);const n=p(t,["args"]);n!=null&&x(e,["args"],n);const i=p(t,["name"]);if(i!=null&&x(e,["name"],i),p(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function D5(t){const e={};if(p(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const s=p(t,["enableWidget"]);return s!=null&&x(e,["enableWidget"],s),e}function P5(t){const e={};if(p(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const s=p(t,["timeRangeFilter"]);return s!=null&&x(e,["timeRangeFilter"],s),e}function U5(t,e){const s={},n=p(t,["generationConfig"]);e!==void 0&&n!=null&&x(e,["setup","generationConfig"],n);const i=p(t,["responseModalities"]);e!==void 0&&i!=null&&x(e,["setup","generationConfig","responseModalities"],i);const l=p(t,["temperature"]);e!==void 0&&l!=null&&x(e,["setup","generationConfig","temperature"],l);const d=p(t,["topP"]);e!==void 0&&d!=null&&x(e,["setup","generationConfig","topP"],d);const u=p(t,["topK"]);e!==void 0&&u!=null&&x(e,["setup","generationConfig","topK"],u);const f=p(t,["maxOutputTokens"]);e!==void 0&&f!=null&&x(e,["setup","generationConfig","maxOutputTokens"],f);const m=p(t,["mediaResolution"]);e!==void 0&&m!=null&&x(e,["setup","generationConfig","mediaResolution"],m);const g=p(t,["seed"]);e!==void 0&&g!=null&&x(e,["setup","generationConfig","seed"],g);const v=p(t,["speechConfig"]);e!==void 0&&v!=null&&x(e,["setup","generationConfig","speechConfig"],Pm(v));const b=p(t,["thinkingConfig"]);e!==void 0&&b!=null&&x(e,["setup","generationConfig","thinkingConfig"],b);const _=p(t,["enableAffectiveDialog"]);e!==void 0&&_!=null&&x(e,["setup","generationConfig","enableAffectiveDialog"],_);const S=p(t,["systemInstruction"]);e!==void 0&&S!=null&&x(e,["setup","systemInstruction"],A5(Yt(S)));const E=p(t,["tools"]);if(e!==void 0&&E!=null){let F=Po(E);Array.isArray(F)&&(F=F.map(G=>B5(Do(G)))),x(e,["setup","tools"],F)}const C=p(t,["sessionResumption"]);e!==void 0&&C!=null&&x(e,["setup","sessionResumption"],q5(C));const T=p(t,["inputAudioTranscription"]);e!==void 0&&T!=null&&x(e,["setup","inputAudioTranscription"],T);const R=p(t,["outputAudioTranscription"]);e!==void 0&&R!=null&&x(e,["setup","outputAudioTranscription"],R);const A=p(t,["realtimeInputConfig"]);e!==void 0&&A!=null&&x(e,["setup","realtimeInputConfig"],A);const M=p(t,["contextWindowCompression"]);e!==void 0&&M!=null&&x(e,["setup","contextWindowCompression"],M);const z=p(t,["proactivity"]);if(e!==void 0&&z!=null&&x(e,["setup","proactivity"],z),p(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return s}function L5(t,e){const s={},n=p(e,["model"]);n!=null&&x(s,["setup","model"],Qe(t,n));const i=p(e,["config"]);return i!=null&&x(s,["config"],U5(i,s)),s}function O5(t){const e={},s=p(t,["mediaResolution"]);s!=null&&x(e,["mediaResolution"],s);const n=p(t,["codeExecutionResult"]);n!=null&&x(e,["codeExecutionResult"],n);const i=p(t,["executableCode"]);i!=null&&x(e,["executableCode"],i);const l=p(t,["fileData"]);l!=null&&x(e,["fileData"],M5(l));const d=p(t,["functionCall"]);d!=null&&x(e,["functionCall"],I5(d));const u=p(t,["functionResponse"]);u!=null&&x(e,["functionResponse"],u);const f=p(t,["inlineData"]);f!=null&&x(e,["inlineData"],T5(f));const m=p(t,["text"]);m!=null&&x(e,["text"],m);const g=p(t,["thought"]);g!=null&&x(e,["thought"],g);const v=p(t,["thoughtSignature"]);v!=null&&x(e,["thoughtSignature"],v);const b=p(t,["videoMetadata"]);return b!=null&&x(e,["videoMetadata"],b),e}function q5(t){const e={},s=p(t,["handle"]);if(s!=null&&x(e,["handle"],s),p(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function B5(t){const e={},s=p(t,["functionDeclarations"]);if(s!=null){let g=s;Array.isArray(g)&&(g=g.map(v=>v)),x(e,["functionDeclarations"],g)}if(p(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=p(t,["googleSearchRetrieval"]);n!=null&&x(e,["googleSearchRetrieval"],n);const i=p(t,["computerUse"]);i!=null&&x(e,["computerUse"],i);const l=p(t,["fileSearch"]);l!=null&&x(e,["fileSearch"],l);const d=p(t,["codeExecution"]);if(d!=null&&x(e,["codeExecution"],d),p(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=p(t,["googleMaps"]);u!=null&&x(e,["googleMaps"],D5(u));const f=p(t,["googleSearch"]);f!=null&&x(e,["googleSearch"],P5(f));const m=p(t,["urlContext"]);return m!=null&&x(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $5(t){const e=[];for(const s in t)if(Object.prototype.hasOwnProperty.call(t,s)){const n=t[s];if(typeof n=="object"&&n!=null&&Object.keys(n).length>0){const i=Object.keys(n).map(l=>`${s}.${l}`);e.push(...i)}else e.push(s)}return e.join(",")}function z5(t,e){let s=null;const n=t.bidiGenerateContentSetup;if(typeof n=="object"&&n!==null&&"setup"in n){const l=n.setup;typeof l=="object"&&l!==null?(t.bidiGenerateContentSetup=l,s=l):delete t.bidiGenerateContentSetup}else n!==void 0&&delete t.bidiGenerateContentSetup;const i=t.fieldMask;if(s){const l=$5(s);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?t.fieldMask=l:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const d=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];i.length>0&&(u=i.map(m=>d.includes(m)?`generationConfig.${m}`:m));const f=[];l&&f.push(l),u.length>0&&f.push(...u),f.length>0?t.fieldMask=f.join(","):delete t.fieldMask}else delete t.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?t.fieldMask=i.join(","):delete t.fieldMask;return t}class V5 extends nn{constructor(e){super(),this.apiClient=e}async create(e){var s,n;let i,l="",d={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=k5(this.apiClient,e);l=ge("auth_tokens",u._url),d=u._query,delete u.config,delete u._url,delete u._query;const f=z5(u,e.config);return i=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(m=>m.json()),i.then(m=>m)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function H5(t,e){const s={},n=p(t,["force"]);return e!==void 0&&n!=null&&x(e,["_query","force"],n),s}function G5(t){const e={},s=p(t,["name"]);s!=null&&x(e,["_url","name"],s);const n=p(t,["config"]);return n!=null&&H5(n,e),e}function F5(t){const e={},s=p(t,["name"]);return s!=null&&x(e,["_url","name"],s),e}function J5(t,e){const s={},n=p(t,["pageSize"]);e!==void 0&&n!=null&&x(e,["_query","pageSize"],n);const i=p(t,["pageToken"]);return e!==void 0&&i!=null&&x(e,["_query","pageToken"],i),s}function K5(t){const e={},s=p(t,["parent"]);s!=null&&x(e,["_url","parent"],s);const n=p(t,["config"]);return n!=null&&J5(n,e),e}function Y5(t){const e={},s=p(t,["sdkHttpResponse"]);s!=null&&x(e,["sdkHttpResponse"],s);const n=p(t,["nextPageToken"]);n!=null&&x(e,["nextPageToken"],n);const i=p(t,["documents"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(d=>d)),x(e,["documents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class W5 extends nn{constructor(e){super(),this.apiClient=e,this.list=async s=>new mr(Za.PAGED_ITEM_DOCUMENTS,n=>this.listInternal({parent:s.parent,config:n.config}),await this.listInternal(s),s)}async get(e){var s,n;let i,l="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=F5(e);return l=ge("{name}",u._url),d=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),i.then(f=>f)}}async delete(e){var s,n;let i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=G5(e);i=ge("{name}",d._url),l=d._query,delete d._url,delete d._query,await this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal})}}async listInternal(e){var s,n;let i,l="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=K5(e);return l=ge("{parent}/documents",u._url),d=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),i.then(f=>{const m=Y5(f),g=new AT;return Object.assign(g,m),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class X5 extends nn{constructor(e,s=new W5(e)){super(),this.apiClient=e,this.documents=s,this.list=async(n={})=>new mr(Za.PAGED_ITEM_FILE_SEARCH_STORES,i=>this.listInternal(i),await this.listInternal(n),n)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var s,n;let i,l="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=$k(e);return l=ge("fileSearchStores",u._url),d=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),i.then(f=>f)}}async get(e){var s,n;let i,l="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Hk(e);return l=ge("{name}",u._url),d=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),i.then(f=>f)}}async delete(e){var s,n;let i="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Vk(e);i=ge("{name}",d._url),l=d._query,delete d._url,delete d._query,await this.apiClient.request({path:i,queryParams:l,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal})}}async listInternal(e){var s,n;let i,l="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Wk(e);return l=ge("fileSearchStores",u._url),d=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),i.then(f=>{const m=Xk(f),g=new RT;return Object.assign(g,m),g})}}async uploadToFileSearchStoreInternal(e){var s,n;let i,l="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Qk(e);return l=ge("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",u._url),d=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),i.then(f=>{const m=Zk(f),g=new kT;return Object.assign(g,m),g})}}async importFile(e){var s,n;let i,l="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Jk(e);return l=ge("{file_search_store_name}:importFile",u._url),d=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json()),i.then(f=>{const m=Fk(f),g=new Rm;return Object.assign(g,m),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let lN=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return lN=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),s=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,n=>(+n^s()&15>>+n/4).toString(16))};const Q5=()=>lN();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sm(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const am=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Zs extends Error{}class as extends Zs{constructor(e,s,n,i){super(`${as.makeMessage(e,s,n)}`),this.status=e,this.headers=i,this.error=s}static makeMessage(e,s,n){const i=s!=null&&s.message?typeof s.message=="string"?s.message:JSON.stringify(s.message):s?JSON.stringify(s):n;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,s,n,i){if(!e||!i)return new bd({message:n,cause:am(s)});const l=s;return e===400?new dN(e,l,n,i):e===401?new uN(e,l,n,i):e===403?new hN(e,l,n,i):e===404?new fN(e,l,n,i):e===409?new mN(e,l,n,i):e===422?new pN(e,l,n,i):e===429?new gN(e,l,n,i):e>=500?new xN(e,l,n,i):new as(e,l,n,i)}}class nm extends as{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class bd extends as{constructor({message:e,cause:s}){super(void 0,void 0,e||"Connection error.",void 0),s&&(this.cause=s)}}class cN extends bd{constructor({message:e}={}){super({message:e??"Request timed out."})}}class dN extends as{}class uN extends as{}class hN extends as{}class fN extends as{}class mN extends as{}class pN extends as{}class gN extends as{}class xN extends as{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Z5=/^[a-z][a-z0-9+.-]*:/i,e3=t=>Z5.test(t);let rm=t=>(rm=Array.isArray,rm(t));const t3=rm;let s3=t3;const Zv=s3;function a3(t){if(!t)return!0;for(const e in t)return!1;return!0}function n3(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const r3=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Zs(`${t} must be an integer`);if(e<0)throw new Zs(`${t} must be a positive integer`);return e},o3=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const i3=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const uo="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function l3(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const c3=()=>{var t,e,s,n,i;const l=l3();if(l==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":uo,"X-Stainless-OS":tb(Deno.build.os),"X-Stainless-Arch":eb(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":uo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(l==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":uo,"X-Stainless-OS":tb((s=globalThis.process.platform)!==null&&s!==void 0?s:"unknown"),"X-Stainless-Arch":eb((n=globalThis.process.arch)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(i=globalThis.process.version)!==null&&i!==void 0?i:"unknown"};const d=d3();return d?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":uo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${d.browser}`,"X-Stainless-Runtime-Version":d.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":uo,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function d3(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:s}of t){const n=s.exec(navigator.userAgent);if(n){const i=n[1]||0,l=n[2]||0,d=n[3]||0;return{browser:e,version:`${i}.${l}.${d}`}}}return null}const eb=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",tb=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Ac;const u3=()=>Ac??(Ac=c3());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function h3(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function yN(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function f3(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return yN({start(){},async pull(s){const{done:n,value:i}=await e.next();n?s.close():s.enqueue(i)},async cancel(){var s;await((s=e.return)===null||s===void 0?void 0:s.call(e))}})}function vN(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const s=await e.read();return s!=null&&s.done&&e.releaseLock(),s}catch(s){throw e.releaseLock(),s}},async return(){const s=e.cancel();return e.releaseLock(),await s,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function m3(t){var e,s;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((s=(e=t[Symbol.asyncIterator]()).return)===null||s===void 0?void 0:s.call(e));return}const n=t.getReader(),i=n.cancel();n.releaseLock(),await i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const p3=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bN=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,s=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(s?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function nf(t,e,s){return bN(),new File(t,e??"unknown_file",s)}function g3(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const x3=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const wN=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",y3=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&wN(t),v3=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function b3(t,e,s){if(bN(),t=await t,y3(t))return t instanceof File?t:nf([await t.arrayBuffer()],t.name);if(v3(t)){const i=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),nf(await om(i),e,s)}const n=await om(t);if(e||(e=g3(t)),!(s!=null&&s.type)){const i=n.find(l=>typeof l=="object"&&"type"in l&&l.type);typeof i=="string"&&(s=Object.assign(Object.assign({},s),{type:i}))}return nf(n,e,s)}async function om(t){var e,s,n,i,l;let d=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)d.push(t);else if(wN(t))d.push(t instanceof Blob?t:await t.arrayBuffer());else if(x3(t))try{for(var u=!0,f=fa(t),m;m=await f.next(),e=m.done,!e;u=!0){i=m.value,u=!1;const g=i;d.push(...await om(g))}}catch(g){s={error:g}}finally{try{!u&&!e&&(n=f.return)&&await n.call(f)}finally{if(s)throw s.error}}else{const g=(l=t==null?void 0:t.constructor)===null||l===void 0?void 0:l.name;throw new Error(`Unexpected data type: ${typeof t}${g?`; constructor: ${g}`:""}${w3(t)}`)}return d}function w3(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(s=>`"${s}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class NN{constructor(e){this._client=e}}NN._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _N(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const sb=Object.freeze(Object.create(null)),N3=(t=_N)=>(function(s,...n){if(s.length===1)return s[0];let i=!1;const l=[],d=s.reduce((g,v,b)=>{var _,S,E;/[?#]/.test(v)&&(i=!0);const C=n[b];let T=(i?encodeURIComponent:t)(""+C);return b!==n.length&&(C==null||typeof C=="object"&&C.toString===((E=Object.getPrototypeOf((S=Object.getPrototypeOf((_=C.hasOwnProperty)!==null&&_!==void 0?_:sb))!==null&&S!==void 0?S:sb))===null||E===void 0?void 0:E.toString))&&(T=C+"",l.push({start:g.length+v.length,length:T.length,error:`Value of type ${Object.prototype.toString.call(C).slice(8,-1)} is not a valid path parameter`})),g+v+(b===n.length?"":T)},""),u=d.split(/[?#]/,1)[0],f=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let m;for(;(m=f.exec(u))!==null;)l.push({start:m.index,length:m[0].length,error:`Value "${m[0]}" can't be safely passed as a path parameter`});if(l.sort((g,v)=>g.start-v.start),l.length>0){let g=0;const v=l.reduce((b,_)=>{const S=" ".repeat(_.start-g),E="^".repeat(_.length);return g=_.start+_.length,b+S+E},"");throw new Zs(`Path parameters result in path with invalid segments:
${l.map(b=>b.error).join(`
`)}
${d}
${v}`)}return d}),Rc=N3(_N);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class SN extends NN{create(e,s){var n;const{api_version:i=this._client.apiVersion}=e,l=rd(e,["api_version"]);if("model"in l&&"agent_config"in l)throw new Zs("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in l&&"generation_config"in l)throw new Zs("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Rc`/${i}/interactions`,Object.assign(Object.assign({body:l},s),{stream:(n=e.stream)!==null&&n!==void 0?n:!1}))}delete(e,s={},n){const{api_version:i=this._client.apiVersion}=s??{};return this._client.delete(Rc`/${i}/interactions/${e}`,n)}cancel(e,s={},n){const{api_version:i=this._client.apiVersion}=s??{};return this._client.post(Rc`/${i}/interactions/${e}/cancel`,n)}get(e,s={},n){var i;const l=s??{},{api_version:d=this._client.apiVersion}=l,u=rd(l,["api_version"]);return this._client.get(Rc`/${d}/interactions/${e}`,Object.assign(Object.assign({query:u},n),{stream:(i=s==null?void 0:s.stream)!==null&&i!==void 0?i:!1}))}}SN._key=Object.freeze(["interactions"]);class jN extends SN{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _3(t){let e=0;for(const i of t)e+=i.length;const s=new Uint8Array(e);let n=0;for(const i of t)s.set(i,n),n+=i.length;return s}let kc;function Lm(t){let e;return(kc??(e=new globalThis.TextEncoder,kc=e.encode.bind(e)))(t)}let Mc;function ab(t){let e;return(Mc??(e=new globalThis.TextDecoder,Mc=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wd{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const s=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Lm(e):e;this.buffer=_3([this.buffer,s]);const n=[];let i;for(;(i=S3(this.buffer,this.carriageReturnIndex))!=null;){if(i.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=i.index;continue}if(this.carriageReturnIndex!=null&&(i.index!==this.carriageReturnIndex+1||i.carriage)){n.push(ab(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const l=this.carriageReturnIndex!==null?i.preceding-1:i.preceding,d=ab(this.buffer.subarray(0,l));n.push(d),this.buffer=this.buffer.subarray(i.index),this.carriageReturnIndex=null}return n}flush(){return this.buffer.length?this.decode(`
`):[]}}wd.NEWLINE_CHARS=new Set([`
`,"\r"]);wd.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function S3(t,e){for(let i=e??0;i<t.length;i++){if(t[i]===10)return{preceding:i,index:i+1,carriage:!1};if(t[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function j3(t){for(let n=0;n<t.length-1;n++){if(t[n]===10&&t[n+1]===10||t[n]===13&&t[n+1]===13)return n+2;if(t[n]===13&&t[n+1]===10&&n+3<t.length&&t[n+2]===13&&t[n+3]===10)return n+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const od={off:0,error:200,warn:300,info:400,debug:500},nb=(t,e,s)=>{if(t){if(n3(od,t))return t;ts(s).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(od))}`)}};function zi(){}function Ic(t,e,s){return!e||od[t]>od[s]?zi:e[t].bind(e)}const E3={error:zi,warn:zi,info:zi,debug:zi};let rb=new WeakMap;function ts(t){var e;const s=t.logger,n=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!s)return E3;const i=rb.get(s);if(i&&i[0]===n)return i[1];const l={error:Ic("error",s,n),warn:Ic("warn",s,n),info:Ic("info",s,n),debug:Ic("debug",s,n)};return rb.set(s,[n,l]),l}const or=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,s])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":s]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class mo{constructor(e,s,n){this.iterator=e,this.controller=s,this.client=n}static fromSSEResponse(e,s,n){let i=!1;const l=n?ts(n):console;function d(){return ha(this,arguments,function*(){var f,m,g,v;if(i)throw new Zs("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let b=!1;try{try{for(var _=!0,S=fa(C3(e,s)),E;E=yield Re(S.next()),f=E.done,!f;_=!0){v=E.value,_=!1;const C=v;if(!b)if(C.data.startsWith("[DONE]")){b=!0;continue}else try{yield yield Re(JSON.parse(C.data))}catch(T){throw l.error("Could not parse message into JSON:",C.data),l.error("From chunk:",C.raw),T}}}catch(C){m={error:C}}finally{try{!_&&!f&&(g=S.return)&&(yield Re(g.call(S)))}finally{if(m)throw m.error}}b=!0}catch(C){if(sm(C))return yield Re(void 0);throw C}finally{b||s.abort()}})}return new mo(d,s,n)}static fromReadableStream(e,s,n){let i=!1;function l(){return ha(this,arguments,function*(){var f,m,g,v;const b=new wd,_=vN(e);try{for(var S=!0,E=fa(_),C;C=yield Re(E.next()),f=C.done,!f;S=!0){v=C.value,S=!1;const T=v;for(const R of b.decode(T))yield yield Re(R)}}catch(T){m={error:T}}finally{try{!S&&!f&&(g=E.return)&&(yield Re(g.call(E)))}finally{if(m)throw m.error}}for(const T of b.flush())yield yield Re(T)})}function d(){return ha(this,arguments,function*(){var f,m,g,v;if(i)throw new Zs("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let b=!1;try{try{for(var _=!0,S=fa(l()),E;E=yield Re(S.next()),f=E.done,!f;_=!0){v=E.value,_=!1;const C=v;b||C&&(yield yield Re(JSON.parse(C)))}}catch(C){m={error:C}}finally{try{!_&&!f&&(g=S.return)&&(yield Re(g.call(S)))}finally{if(m)throw m.error}}b=!0}catch(C){if(sm(C))return yield Re(void 0);throw C}finally{b||s.abort()}})}return new mo(d,s,n)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],s=[],n=this.iterator(),i=l=>({next:()=>{if(l.length===0){const d=n.next();e.push(d),s.push(d)}return l.shift()}});return[new mo(()=>i(e),this.controller,this.client),new mo(()=>i(s),this.controller,this.client)]}toReadableStream(){const e=this;let s;return yN({async start(){s=e[Symbol.asyncIterator]()},async pull(n){try{const{value:i,done:l}=await s.next();if(l)return n.close();const d=Lm(JSON.stringify(i)+`
`);n.enqueue(d)}catch(i){n.error(i)}},async cancel(){var n;await((n=s.return)===null||n===void 0?void 0:n.call(s))}})}}function C3(t,e){return ha(this,arguments,function*(){var n,i,l,d;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Zs("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Zs("Attempted to iterate over a response with no body");const u=new A3,f=new wd,m=vN(t.body);try{for(var g=!0,v=fa(T3(m)),b;b=yield Re(v.next()),n=b.done,!n;g=!0){d=b.value,g=!1;const _=d;for(const S of f.decode(_)){const E=u.decode(S);E&&(yield yield Re(E))}}}catch(_){i={error:_}}finally{try{!g&&!n&&(l=v.return)&&(yield Re(l.call(v)))}finally{if(i)throw i.error}}for(const _ of f.flush()){const S=u.decode(_);S&&(yield yield Re(S))}})}function T3(t){return ha(this,arguments,function*(){var s,n,i,l;let d=new Uint8Array;try{for(var u=!0,f=fa(t),m;m=yield Re(f.next()),s=m.done,!s;u=!0){l=m.value,u=!1;const g=l;if(g==null)continue;const v=g instanceof ArrayBuffer?new Uint8Array(g):typeof g=="string"?Lm(g):g;let b=new Uint8Array(d.length+v.length);b.set(d),b.set(v,d.length),d=b;let _;for(;(_=j3(d))!==-1;)yield yield Re(d.slice(0,_)),d=d.slice(_)}}catch(g){n={error:g}}finally{try{!u&&!s&&(i=f.return)&&(yield Re(i.call(f)))}finally{if(n)throw n.error}}d.length>0&&(yield yield Re(d))})}class A3{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const l={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],l}if(this.chunks.push(e),e.startsWith(":"))return null;let[s,n,i]=R3(e,":");return i.startsWith(" ")&&(i=i.substring(1)),s==="event"?this.event=i:s==="data"&&this.data.push(i),null}}function R3(t,e){const s=t.indexOf(e);return s!==-1?[t.substring(0,s),e,t.substring(s+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function k3(t,e){const{response:s,requestLogID:n,retryOfRequestLogID:i,startTime:l}=e,d=await(async()=>{var u;if(e.options.stream)return ts(t).debug("response",s.status,s.url,s.headers,s.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(s,e.controller,t):mo.fromSSEResponse(s,e.controller,t);if(s.status===204)return null;if(e.options.__binaryResponse)return s;const f=s.headers.get("content-type"),m=(u=f==null?void 0:f.split(";")[0])===null||u===void 0?void 0:u.trim();return(m==null?void 0:m.includes("application/json"))||(m==null?void 0:m.endsWith("+json"))?await s.json():await s.text()})();return ts(t).debug(`[${n}] response parsed`,or({retryOfRequestLogID:i,url:s.url,status:s.status,body:d,durationMs:Date.now()-l})),d}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Om extends Promise{constructor(e,s,n=k3){super(i=>{i(null)}),this.responsePromise=s,this.parseResponse=n,this.client=e}_thenUnwrap(e){return new Om(this.client,this.responsePromise,async(s,n)=>e(await this.parseResponse(s,n),n))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,s]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:s}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,s){return this.parse().then(e,s)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const EN=Symbol("brand.privateNullableHeaders");function*M3(t){if(!t)return;if(EN in t){const{values:n,nulls:i}=t;yield*n.entries();for(const l of i)yield[l,null];return}let e=!1,s;t instanceof Headers?s=t.entries():Zv(t)?s=t:(e=!0,s=Object.entries(t??{}));for(let n of s){const i=n[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");const l=Zv(n[1])?n[1]:[n[1]];let d=!1;for(const u of l)u!==void 0&&(e&&!d&&(d=!0,yield[i,null]),yield[i,u])}}const Mi=t=>{const e=new Headers,s=new Set;for(const n of t){const i=new Set;for(const[l,d]of M3(n)){const u=l.toLowerCase();i.has(u)||(e.delete(l),i.add(u)),d===null?(e.delete(l),s.add(u)):(e.append(l,d),s.delete(u))}}return{[EN]:!0,values:e,nulls:s}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const rf=t=>{var e,s,n,i,l,d;if(typeof globalThis.process<"u")return(n=(s=(e=nT)===null||e===void 0?void 0:e[t])===null||s===void 0?void 0:s.trim())!==null&&n!==void 0?n:void 0;if(typeof globalThis.Deno<"u")return(d=(l=(i=globalThis.Deno.env)===null||i===void 0?void 0:i.get)===null||l===void 0?void 0:l.call(i,t))===null||d===void 0?void 0:d.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var CN;class Nd{constructor(e){var s,n,i,l,d,u,f,{baseURL:m=rf("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:g=(s=rf("GEMINI_API_KEY"))!==null&&s!==void 0?s:null,apiVersion:v="v1beta"}=e,b=rd(e,["baseURL","apiKey","apiVersion"]);const _=Object.assign(Object.assign({apiKey:g,apiVersion:v},b),{baseURL:m||"https://generativelanguage.googleapis.com"});this.baseURL=_.baseURL,this.timeout=(n=_.timeout)!==null&&n!==void 0?n:Nd.DEFAULT_TIMEOUT,this.logger=(i=_.logger)!==null&&i!==void 0?i:console;const S="warn";this.logLevel=S,this.logLevel=(d=(l=nb(_.logLevel,"ClientOptions.logLevel",this))!==null&&l!==void 0?l:nb(rf("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&d!==void 0?d:S,this.fetchOptions=_.fetchOptions,this.maxRetries=(u=_.maxRetries)!==null&&u!==void 0?u:2,this.fetch=(f=_.fetch)!==null&&f!==void 0?f:h3(),this.encoder=p3,this._options=_,this.apiKey=g,this.apiVersion=v,this.clientAdapter=_.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:s}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!s.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const s=Mi([e.headers]);if(!(s.values.has("authorization")||s.values.has("x-goog-api-key"))){if(this.apiKey)return Mi([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Mi([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([s,n])=>typeof n<"u").map(([s,n])=>{if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")return`${encodeURIComponent(s)}=${encodeURIComponent(n)}`;if(n===null)return`${encodeURIComponent(s)}=`;throw new Zs(`Cannot stringify type ${typeof n}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${uo}`}defaultIdempotencyKey(){return`stainless-node-retry-${Q5()}`}makeStatusError(e,s,n,i){return as.generate(e,s,n,i)}buildURL(e,s,n){const i=!this.baseURLOverridden()&&n||this.baseURL,l=e3(e)?new URL(e):new URL(i+(i.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),d=this.defaultQuery();return a3(d)||(s=Object.assign(Object.assign({},d),s)),typeof s=="object"&&s&&!Array.isArray(s)&&(l.search=this.stringifyQuery(s)),l.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const s=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${s}`}}async prepareRequest(e,{url:s,options:n}){}get(e,s){return this.methodRequest("get",e,s)}post(e,s){return this.methodRequest("post",e,s)}patch(e,s){return this.methodRequest("patch",e,s)}put(e,s){return this.methodRequest("put",e,s)}delete(e,s){return this.methodRequest("delete",e,s)}methodRequest(e,s,n){return this.request(Promise.resolve(n).then(i=>Object.assign({method:e,path:s},i)))}request(e,s=null){return new Om(this,this.makeRequest(e,s,void 0))}async makeRequest(e,s,n){var i,l,d;const u=await e,f=(i=u.maxRetries)!==null&&i!==void 0?i:this.maxRetries;s==null&&(s=f),await this.prepareOptions(u);const{req:m,url:g,timeout:v}=await this.buildRequest(u,{retryCount:f-s});await this.prepareRequest(m,{url:g,options:u});const b="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),_=n===void 0?"":`, retryOf: ${n}`,S=Date.now();if(ts(this).debug(`[${b}] sending request`,or({retryOfRequestLogID:n,method:u.method,url:g,options:u,headers:m.headers})),!((l=u.signal)===null||l===void 0)&&l.aborted)throw new nm;const E=new AbortController,C=await this.fetchWithTimeout(g,m,v,E).catch(am),T=Date.now();if(C instanceof globalThis.Error){const A=`retrying, ${s} attempts remaining`;if(!((d=u.signal)===null||d===void 0)&&d.aborted)throw new nm;const M=sm(C)||/timed? ?out/i.test(String(C)+("cause"in C?String(C.cause):""));if(s)return ts(this).info(`[${b}] connection ${M?"timed out":"failed"} - ${A}`),ts(this).debug(`[${b}] connection ${M?"timed out":"failed"} (${A})`,or({retryOfRequestLogID:n,url:g,durationMs:T-S,message:C.message})),this.retryRequest(u,s,n??b);throw ts(this).info(`[${b}] connection ${M?"timed out":"failed"} - error; no more retries left`),ts(this).debug(`[${b}] connection ${M?"timed out":"failed"} (error; no more retries left)`,or({retryOfRequestLogID:n,url:g,durationMs:T-S,message:C.message})),M?new cN:new bd({cause:C})}const R=`[${b}${_}] ${m.method} ${g} ${C.ok?"succeeded":"failed"} with status ${C.status} in ${T-S}ms`;if(!C.ok){const A=await this.shouldRetry(C);if(s&&A){const I=`retrying, ${s} attempts remaining`;return await m3(C.body),ts(this).info(`${R} - ${I}`),ts(this).debug(`[${b}] response error (${I})`,or({retryOfRequestLogID:n,url:C.url,status:C.status,headers:C.headers,durationMs:T-S})),this.retryRequest(u,s,n??b,C.headers)}const M=A?"error; no more retries left":"error; not retryable";ts(this).info(`${R} - ${M}`);const z=await C.text().catch(I=>am(I).message),F=o3(z),G=F?void 0:z;throw ts(this).debug(`[${b}] response error (${M})`,or({retryOfRequestLogID:n,url:C.url,status:C.status,headers:C.headers,message:G,durationMs:Date.now()-S})),this.makeStatusError(C.status,F,G,C.headers)}return ts(this).info(R),ts(this).debug(`[${b}] response start`,or({retryOfRequestLogID:n,url:C.url,status:C.status,headers:C.headers,durationMs:T-S})),{response:C,options:u,controller:E,requestLogID:b,retryOfRequestLogID:n,startTime:S}}async fetchWithTimeout(e,s,n,i){const l=s||{},{signal:d,method:u}=l,f=rd(l,["signal","method"]);d&&d.addEventListener("abort",()=>i.abort());const m=setTimeout(()=>i.abort(),n),g=globalThis.ReadableStream&&f.body instanceof globalThis.ReadableStream||typeof f.body=="object"&&f.body!==null&&Symbol.asyncIterator in f.body,v=Object.assign(Object.assign(Object.assign({signal:i.signal},g?{duplex:"half"}:{}),{method:"GET"}),f);u&&(v.method=u.toUpperCase());try{return await this.fetch.call(void 0,e,v)}finally{clearTimeout(m)}}async shouldRetry(e){const s=e.headers.get("x-should-retry");return s==="true"?!0:s==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,s,n,i){var l;let d;const u=i==null?void 0:i.get("retry-after-ms");if(u){const m=parseFloat(u);Number.isNaN(m)||(d=m)}const f=i==null?void 0:i.get("retry-after");if(f&&!d){const m=parseFloat(f);Number.isNaN(m)?d=Date.parse(f)-Date.now():d=m*1e3}if(!(d&&0<=d&&d<60*1e3)){const m=(l=e.maxRetries)!==null&&l!==void 0?l:this.maxRetries;d=this.calculateDefaultRetryTimeoutMillis(s,m)}return await i3(d),this.makeRequest(e,s-1,n)}calculateDefaultRetryTimeoutMillis(e,s){const l=s-e,d=Math.min(.5*Math.pow(2,l),8),u=1-Math.random()*.25;return d*u*1e3}async buildRequest(e,{retryCount:s=0}={}){var n,i,l;const d=Object.assign({},e),{method:u,path:f,query:m,defaultBaseURL:g}=d,v=this.buildURL(f,m,g);"timeout"in d&&r3("timeout",d.timeout),d.timeout=(n=d.timeout)!==null&&n!==void 0?n:this.timeout;const{bodyHeaders:b,body:_}=this.buildBody({options:d}),S=await this.buildHeaders({options:e,method:u,bodyHeaders:b,retryCount:s});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:u,headers:S},d.signal&&{signal:d.signal}),globalThis.ReadableStream&&_ instanceof globalThis.ReadableStream&&{duplex:"half"}),_&&{body:_}),(i=this.fetchOptions)!==null&&i!==void 0?i:{}),(l=d.fetchOptions)!==null&&l!==void 0?l:{}),url:v,timeout:d.timeout}}async buildHeaders({options:e,method:s,bodyHeaders:n,retryCount:i}){let l={};this.idempotencyHeader&&s!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),l[this.idempotencyHeader]=e.idempotencyKey);const d=await this.authHeaders(e);let u=Mi([l,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),u3()),this._options.defaultHeaders,n,e.headers,d]);return this.validateHeaders(u),u.values}buildBody({options:{body:e,headers:s}}){if(!e)return{bodyHeaders:void 0,body:void 0};const n=Mi([s]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&n.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:f3(e)}:this.encoder({body:e,headers:n})}}Nd.DEFAULT_TIMEOUT=6e4;class Ot extends Nd{constructor(){super(...arguments),this.interactions=new jN(this)}}CN=Ot;Ot.GeminiNextGenAPIClient=CN;Ot.GeminiNextGenAPIClientError=Zs;Ot.APIError=as;Ot.APIConnectionError=bd;Ot.APIConnectionTimeoutError=cN;Ot.APIUserAbortError=nm;Ot.NotFoundError=fN;Ot.ConflictError=mN;Ot.RateLimitError=gN;Ot.BadRequestError=dN;Ot.AuthenticationError=uN;Ot.InternalServerError=xN;Ot.PermissionDeniedError=hN;Ot.UnprocessableEntityError=pN;Ot.toFile=b3;Ot.Interactions=jN;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function I3(t,e){const s={},n=p(t,["name"]);return n!=null&&x(s,["_url","name"],n),s}function D3(t,e){const s={},n=p(t,["name"]);return n!=null&&x(s,["_url","name"],n),s}function P3(t,e){const s={},n=p(t,["sdkHttpResponse"]);return n!=null&&x(s,["sdkHttpResponse"],n),s}function U3(t,e){const s={},n=p(t,["sdkHttpResponse"]);return n!=null&&x(s,["sdkHttpResponse"],n),s}function L3(t,e,s){const n={};if(p(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=p(t,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&x(e,["displayName"],i),p(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=p(t,["epochCount"]);e!==void 0&&l!=null&&x(e,["tuningTask","hyperparameters","epochCount"],l);const d=p(t,["learningRateMultiplier"]);if(d!=null&&x(n,["tuningTask","hyperparameters","learningRateMultiplier"],d),p(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(p(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(p(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const u=p(t,["batchSize"]);e!==void 0&&u!=null&&x(e,["tuningTask","hyperparameters","batchSize"],u);const f=p(t,["learningRate"]);if(e!==void 0&&f!=null&&x(e,["tuningTask","hyperparameters","learningRate"],f),p(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(p(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return n}function O3(t,e,s){const n={};let i=p(s,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const _=p(t,["validationDataset"]);e!==void 0&&_!=null&&x(e,["supervisedTuningSpec"],ob(_))}else if(i==="PREFERENCE_TUNING"){const _=p(t,["validationDataset"]);e!==void 0&&_!=null&&x(e,["preferenceOptimizationSpec"],ob(_))}const l=p(t,["tunedModelDisplayName"]);e!==void 0&&l!=null&&x(e,["tunedModelDisplayName"],l);const d=p(t,["description"]);e!==void 0&&d!=null&&x(e,["description"],d);let u=p(s,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const _=p(t,["epochCount"]);e!==void 0&&_!=null&&x(e,["supervisedTuningSpec","hyperParameters","epochCount"],_)}else if(u==="PREFERENCE_TUNING"){const _=p(t,["epochCount"]);e!==void 0&&_!=null&&x(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],_)}let f=p(s,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const _=p(t,["learningRateMultiplier"]);e!==void 0&&_!=null&&x(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],_)}else if(f==="PREFERENCE_TUNING"){const _=p(t,["learningRateMultiplier"]);e!==void 0&&_!=null&&x(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],_)}let m=p(s,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const _=p(t,["exportLastCheckpointOnly"]);e!==void 0&&_!=null&&x(e,["supervisedTuningSpec","exportLastCheckpointOnly"],_)}else if(m==="PREFERENCE_TUNING"){const _=p(t,["exportLastCheckpointOnly"]);e!==void 0&&_!=null&&x(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],_)}let g=p(s,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const _=p(t,["adapterSize"]);e!==void 0&&_!=null&&x(e,["supervisedTuningSpec","hyperParameters","adapterSize"],_)}else if(g==="PREFERENCE_TUNING"){const _=p(t,["adapterSize"]);e!==void 0&&_!=null&&x(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],_)}if(p(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(p(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const v=p(t,["labels"]);e!==void 0&&v!=null&&x(e,["labels"],v);const b=p(t,["beta"]);return e!==void 0&&b!=null&&x(e,["preferenceOptimizationSpec","hyperParameters","beta"],b),n}function q3(t,e){const s={},n=p(t,["baseModel"]);n!=null&&x(s,["baseModel"],n);const i=p(t,["preTunedModel"]);i!=null&&x(s,["preTunedModel"],i);const l=p(t,["trainingDataset"]);l!=null&&W3(l);const d=p(t,["config"]);return d!=null&&L3(d,s),s}function B3(t,e){const s={},n=p(t,["baseModel"]);n!=null&&x(s,["baseModel"],n);const i=p(t,["preTunedModel"]);i!=null&&x(s,["preTunedModel"],i);const l=p(t,["trainingDataset"]);l!=null&&X3(l,s,e);const d=p(t,["config"]);return d!=null&&O3(d,s,e),s}function $3(t,e){const s={},n=p(t,["name"]);return n!=null&&x(s,["_url","name"],n),s}function z3(t,e){const s={},n=p(t,["name"]);return n!=null&&x(s,["_url","name"],n),s}function V3(t,e,s){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&x(e,["_query","pageSize"],i);const l=p(t,["pageToken"]);e!==void 0&&l!=null&&x(e,["_query","pageToken"],l);const d=p(t,["filter"]);return e!==void 0&&d!=null&&x(e,["_query","filter"],d),n}function H3(t,e,s){const n={},i=p(t,["pageSize"]);e!==void 0&&i!=null&&x(e,["_query","pageSize"],i);const l=p(t,["pageToken"]);e!==void 0&&l!=null&&x(e,["_query","pageToken"],l);const d=p(t,["filter"]);return e!==void 0&&d!=null&&x(e,["_query","filter"],d),n}function G3(t,e){const s={},n=p(t,["config"]);return n!=null&&V3(n,s),s}function F3(t,e){const s={},n=p(t,["config"]);return n!=null&&H3(n,s),s}function J3(t,e){const s={},n=p(t,["sdkHttpResponse"]);n!=null&&x(s,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&x(s,["nextPageToken"],i);const l=p(t,["tunedModels"]);if(l!=null){let d=l;Array.isArray(d)&&(d=d.map(u=>TN(u))),x(s,["tuningJobs"],d)}return s}function K3(t,e){const s={},n=p(t,["sdkHttpResponse"]);n!=null&&x(s,["sdkHttpResponse"],n);const i=p(t,["nextPageToken"]);i!=null&&x(s,["nextPageToken"],i);const l=p(t,["tuningJobs"]);if(l!=null){let d=l;Array.isArray(d)&&(d=d.map(u=>im(u))),x(s,["tuningJobs"],d)}return s}function Y3(t,e){const s={},n=p(t,["name"]);n!=null&&x(s,["model"],n);const i=p(t,["name"]);return i!=null&&x(s,["endpoint"],i),s}function W3(t,e){const s={};if(p(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(p(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=p(t,["examples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(l=>l)),x(s,["examples","examples"],i)}return s}function X3(t,e,s){const n={};let i=p(s,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const d=p(t,["gcsUri"]);e!==void 0&&d!=null&&x(e,["supervisedTuningSpec","trainingDatasetUri"],d)}else if(i==="PREFERENCE_TUNING"){const d=p(t,["gcsUri"]);e!==void 0&&d!=null&&x(e,["preferenceOptimizationSpec","trainingDatasetUri"],d)}let l=p(s,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const d=p(t,["vertexDatasetResource"]);e!==void 0&&d!=null&&x(e,["supervisedTuningSpec","trainingDatasetUri"],d)}else if(l==="PREFERENCE_TUNING"){const d=p(t,["vertexDatasetResource"]);e!==void 0&&d!=null&&x(e,["preferenceOptimizationSpec","trainingDatasetUri"],d)}if(p(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function TN(t,e){const s={},n=p(t,["sdkHttpResponse"]);n!=null&&x(s,["sdkHttpResponse"],n);const i=p(t,["name"]);i!=null&&x(s,["name"],i);const l=p(t,["state"]);l!=null&&x(s,["state"],Hw(l));const d=p(t,["createTime"]);d!=null&&x(s,["createTime"],d);const u=p(t,["tuningTask","startTime"]);u!=null&&x(s,["startTime"],u);const f=p(t,["tuningTask","completeTime"]);f!=null&&x(s,["endTime"],f);const m=p(t,["updateTime"]);m!=null&&x(s,["updateTime"],m);const g=p(t,["description"]);g!=null&&x(s,["description"],g);const v=p(t,["baseModel"]);v!=null&&x(s,["baseModel"],v);const b=p(t,["_self"]);return b!=null&&x(s,["tunedModel"],Y3(b)),s}function im(t,e){const s={},n=p(t,["sdkHttpResponse"]);n!=null&&x(s,["sdkHttpResponse"],n);const i=p(t,["name"]);i!=null&&x(s,["name"],i);const l=p(t,["state"]);l!=null&&x(s,["state"],Hw(l));const d=p(t,["createTime"]);d!=null&&x(s,["createTime"],d);const u=p(t,["startTime"]);u!=null&&x(s,["startTime"],u);const f=p(t,["endTime"]);f!=null&&x(s,["endTime"],f);const m=p(t,["updateTime"]);m!=null&&x(s,["updateTime"],m);const g=p(t,["error"]);g!=null&&x(s,["error"],g);const v=p(t,["description"]);v!=null&&x(s,["description"],v);const b=p(t,["baseModel"]);b!=null&&x(s,["baseModel"],b);const _=p(t,["tunedModel"]);_!=null&&x(s,["tunedModel"],_);const S=p(t,["preTunedModel"]);S!=null&&x(s,["preTunedModel"],S);const E=p(t,["supervisedTuningSpec"]);E!=null&&x(s,["supervisedTuningSpec"],E);const C=p(t,["preferenceOptimizationSpec"]);C!=null&&x(s,["preferenceOptimizationSpec"],C);const T=p(t,["tuningDataStats"]);T!=null&&x(s,["tuningDataStats"],T);const R=p(t,["encryptionSpec"]);R!=null&&x(s,["encryptionSpec"],R);const A=p(t,["partnerModelTuningSpec"]);A!=null&&x(s,["partnerModelTuningSpec"],A);const M=p(t,["customBaseModel"]);M!=null&&x(s,["customBaseModel"],M);const z=p(t,["experiment"]);z!=null&&x(s,["experiment"],z);const F=p(t,["labels"]);F!=null&&x(s,["labels"],F);const G=p(t,["outputUri"]);G!=null&&x(s,["outputUri"],G);const K=p(t,["pipelineJob"]);K!=null&&x(s,["pipelineJob"],K);const I=p(t,["serviceAccount"]);I!=null&&x(s,["serviceAccount"],I);const U=p(t,["tunedModelDisplayName"]);U!=null&&x(s,["tunedModelDisplayName"],U);const q=p(t,["veoTuningSpec"]);return q!=null&&x(s,["veoTuningSpec"],q),s}function Q3(t,e){const s={},n=p(t,["sdkHttpResponse"]);n!=null&&x(s,["sdkHttpResponse"],n);const i=p(t,["name"]);i!=null&&x(s,["name"],i);const l=p(t,["metadata"]);l!=null&&x(s,["metadata"],l);const d=p(t,["done"]);d!=null&&x(s,["done"],d);const u=p(t,["error"]);return u!=null&&x(s,["error"],u),s}function ob(t,e){const s={},n=p(t,["gcsUri"]);n!=null&&x(s,["validationDatasetUri"],n);const i=p(t,["vertexDatasetResource"]);return i!=null&&x(s,["validationDatasetUri"],i),s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Z3 extends nn{constructor(e){super(),this.apiClient=e,this.list=async(s={})=>new mr(Za.PAGED_ITEM_TUNING_JOBS,n=>this.listInternal(n),await this.listInternal(s),s),this.get=async s=>await this.getInternal(s),this.tune=async s=>{var n;if(this.apiClient.isVertexAI())if(s.baseModel.startsWith("projects/")){const i={tunedModelName:s.baseModel};!((n=s.config)===null||n===void 0)&&n.preTunedModelCheckpointId&&(i.checkpointId=s.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},s),{preTunedModel:i});return l.baseModel=void 0,await this.tuneInternal(l)}else{const i=Object.assign({},s);return await this.tuneInternal(i)}else{const i=Object.assign({},s),l=await this.tuneMldevInternal(i);let d="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?d=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(d=l.name.split("/operations/")[0]),{name:d,state:Yf.JOB_STATE_QUEUED}}}}async getInternal(e){var s,n,i,l;let d,u="",f={};if(this.apiClient.isVertexAI()){const m=z3(e);return u=ge("{name}",m._url),f=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(g=>g.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:g.headers},b})),d.then(g=>im(g))}else{const m=$3(e);return u=ge("{name}",m._url),f=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:g.headers},b})),d.then(g=>TN(g))}}async listInternal(e){var s,n,i,l;let d,u="",f={};if(this.apiClient.isVertexAI()){const m=F3(e);return u=ge("tuningJobs",m._url),f=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(g=>g.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:g.headers},b})),d.then(g=>{const v=K3(g),b=new Mv;return Object.assign(b,v),b})}else{const m=G3(e);return u=ge("tunedModels",m._url),f=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:g.headers},b})),d.then(g=>{const v=J3(g),b=new Mv;return Object.assign(b,v),b})}}async cancel(e){var s,n,i,l;let d,u="",f={};if(this.apiClient.isVertexAI()){const m=D3(e);return u=ge("{name}:cancel",m._url),f=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(g=>g.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:g.headers},b})),d.then(g=>{const v=U3(g),b=new Iv;return Object.assign(b,v),b})}else{const m=I3(e);return u=ge("{name}:cancel",m._url),f=m._query,delete m._url,delete m._query,d=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(g=>g.json().then(v=>{const b=v;return b.sdkHttpResponse={headers:g.headers},b})),d.then(g=>{const v=P3(g),b=new Iv;return Object.assign(b,v),b})}}async tuneInternal(e){var s,n;let i,l="",d={};if(this.apiClient.isVertexAI()){const u=B3(e,e);return l=ge("tuningJobs",u._url),d=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:f.headers},g})),i.then(f=>im(f))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var s,n;let i,l="",d={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=q3(e);return l=ge("tunedModels",u._url),d=u._query,delete u._url,delete u._query,i=this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(f=>f.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:f.headers},g})),i.then(f=>Q3(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class eM{async download(e,s){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const tM=1024*1024*8,sM=3,aM=1e3,nM=2,id="x-goog-upload-status";async function rM(t,e,s){var n;const i=await AN(t,e,s),l=await(i==null?void 0:i.json());if(((n=i==null?void 0:i.headers)===null||n===void 0?void 0:n[id])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function oM(t,e,s){var n;const i=await AN(t,e,s),l=await(i==null?void 0:i.json());if(((n=i==null?void 0:i.headers)===null||n===void 0?void 0:n[id])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const d=Ow(l),u=new km;return Object.assign(u,d),u}async function AN(t,e,s){var n,i;let l=0,d=0,u=new Wf(new Response),f="upload";for(l=t.size;d<l;){const m=Math.min(tM,l-d),g=t.slice(d,d+m);d+m>=l&&(f+=", finalize");let v=0,b=aM;for(;v<sM&&(u=await s.request({path:"",body:g,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":String(d),"Content-Length":String(m)}}}),!(!((n=u==null?void 0:u.headers)===null||n===void 0)&&n[id]));)v++,await lM(b),b=b*nM;if(d+=m,((i=u==null?void 0:u.headers)===null||i===void 0?void 0:i[id])!=="active")break;if(l<=d)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return u}async function iM(t){return{size:t.size,type:t.type}}function lM(t){return new Promise(e=>setTimeout(e,t))}class cM{async upload(e,s,n){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await rM(e,s,n)}async uploadToFileSearchStore(e,s,n){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await oM(e,s,n)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await iM(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dM{create(e,s,n){return new uM(e,s,n)}}class uM{constructor(e,s,n){this.url=e,this.headers=s,this.callbacks=n}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ib="x-goog-api-key";class hM{constructor(e){this.apiKey=e}async addAuthHeaders(e,s){if(e.get(ib)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(ib,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const fM="gl-node/";class jo{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const s=new Ot({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=s.interactions,this._interactions}constructor(e){var s;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(s=e.vertexai)!==null&&s!==void 0?s:!1,this.apiKey=e.apiKey;const n=lT(e.httpOptions,e.vertexai,void 0,void 0);n&&(e.httpOptions?e.httpOptions.baseUrl=n:e.httpOptions={baseUrl:n}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const i=new hM(this.apiKey);this.apiClient=new i5({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:fM+"web",uploader:new cM,downloader:new eM}),this.models=new E5(this.apiClient),this.live=new b5(this.apiClient,i,new dM),this.batches=new LA(this.apiClient),this.chats=new y4(this.models,this.apiClient),this.caches=new p4(this.apiClient),this.files=new T4(this.apiClient),this.operations=new C5(this.apiClient),this.authTokens=new V5(this.apiClient),this.tunings=new Z3(this.apiClient),this.fileSearchStores=new X5(this.apiClient)}}let RN=null;const mM=t=>{RN=t},tl=()=>RN||void 0||"",Xs=t=>{if(t==null)return null;if(Array.isArray(t))return t.length>0?Xs(t[0]):null;if(typeof t=="object"&&Object.keys(t).length===1){const e=Object.values(t)[0];if(Array.isArray(e))return Xs(e)}return t},sl=t=>{var n,i;if(!t)return"Usurio";if(typeof t=="string"&&t!=="[object Object]")return t;const e=Xs(t);if(!e)return"Usurio";const s=e.nome||e.nome_artistico||e.nome_fantasia||e.full_name||(e.usuarios?Array.isArray(e.usuarios)?(n=e.usuarios[0])==null?void 0:n.nome:e.usuarios.nome:null)||((i=e.email)==null?void 0:i.split("@")[0]);return typeof s=="string"&&s!=="[object Object]"?s:"Usurio"},Ws=t=>{var s,n;if(!t)return t;const e={...t,nome:sl(t),artista:Xs(t.artista),estabelecimento:Xs(t.estabelecimento)};return e.nome==="Usurio"&&((s=e.artista)!=null&&s.nome_artistico?e.nome=e.artista.nome_artistico:(n=e.estabelecimento)!=null&&n.nome_fantasia&&(e.nome=e.estabelecimento.nome_fantasia)),e},Ii=t=>{if(!t)return t;const e=Xs(t.artistas),s=Xs(t.estabelecimentos);return{...t,artistas:e?{...e,usuarios:e.usuarios?{...Xs(e.usuarios),nome:sl(e.usuarios)}:null}:null,estabelecimentos:s?{...s,usuarios:s.usuarios?{...Xs(s.usuarios),nome:sl(s.usuarios)}:null}:null}},Ie={getPublicUrl(t,e){const{data:s}=Q.storage.from(t).getPublicUrl(e);return s.publicUrl},async getSignedUrls(t,e,s=3600){const{data:n,error:i}=await Q.storage.from(t).createSignedUrls(e,s);if(i)throw i;return(n||[]).map(l=>l.signedUrl)},async upload(t,e,s){const{data:n,error:i}=await Q.storage.from(t).upload(e,s,{upsert:!0});if(i)throw i;return n.path},async remove(t,e){const{error:s}=await Q.storage.from(t).remove(e);if(s)throw s},async list(t,e){const{data:s,error:n}=await Q.storage.from(t).list(e);if(n)throw n;return s||[]}},of={async getConsolidatedAgenda(t,e,s,n){const{data:i,error:l}=await Q.from("agenda_eventos").select("*").eq("artista_id",t);if(l)throw l;const{data:d,error:u}=await Q.from("contratos").select("id, data_evento, status, estabelecimentos(usuarios(nome))").eq("artista_id",t).in("status",["enviado","assinado","concluido"]);if(u)throw u;return[...(i||[]).map(m=>({id:m.id,date:m.data_inicio.split("T")[0],title:m.titulo,type:"manual_block"})),...(d||[]).map(m=>{const g=Xs(m.estabelecimentos);return{id:m.id,date:m.data_evento.split("T")[0],title:`Show: ${sl(g)}`,type:m.status==="concluido"||m.status==="assinado"?"contract_confirmed":"contract_pending"}})]},async createBlock(t){const{error:e}=await Q.from("agenda_eventos").insert(t);if(e)throw e},async deleteBlock(t){const{error:e}=await Q.from("agenda_eventos").delete().eq("id",t);if(e)throw e}},ld=async(t,e,s)=>{try{const{data:{user:n}}=await Q.auth.getUser();await Q.from("logs_integracao_ia").insert({usuario_id:n==null?void 0:n.id,servico:t,tipo_erro:e.message==="EXTERNAL_CORS_RISK"?"CORS":e.message==="CORS_OR_NETWORK_ERROR"?"NETWORK":"GENERAL",mensagem_erro:he(e),payload_input:s})}catch(n){console.warn("Falha ao registrar log de erro de IA:",n)}},lb={async getMatchesForVenue(t){const{data:e,error:s}=await Q.from("usuarios").select("*, artist:artistas!inner(*)").eq("tipo","artista").eq("is_suspended",!1).ilike("cidade",`%${t.cidade||""}%`).order("plano",{ascending:!1}).order("nota_media",{ascending:!1,nullsFirst:!1}).limit(12);if(s)throw s;return(e||[]).map(n=>Ws(n))},async getJustification(t,e){var n,i;const s=new jo({apiKey:tl()});try{const l=((n=t.estabelecimento)==null?void 0:n.descricao)||"Um local de msica ao vivo.",d=((i=e.artista)==null?void 0:i.descricao)||"Um msico talentoso.",u=`Analise o "match" entre este estabelecimento e este artista.
            Local: ${t.nome} (${l})
            Artista: ${e.nome} (${d})
            Retorne um JSON com a chave "justification" contendo uma nica frase (mx 150 caracteres) em Portugus do Brasil explicando por que eles combinam para um show.`,f=await s.models.generateContent({model:"gemini-3-flash-preview",contents:{parts:[{text:u}]},config:{responseMimeType:"application/json",responseSchema:{type:Ke.OBJECT,properties:{justification:{type:Ke.STRING}}}}});return JSON.parse(f.text||"{}").justification||"Uma combinao perfeita para o seu palco."}catch(l){return console.error("Matchmaking AI Error:",l),"Artista com grande potencial para o seu estabelecimento."}}},cb={async analyzeComment(t){const e=new jo({apiKey:tl()});try{const s=await e.models.generateContent({model:"gemini-3-flash-preview",contents:{parts:[{text:`Analise o comentrio para moderao: "${t}".`}]},config:{responseMimeType:"application/json",responseSchema:{type:Ke.OBJECT,properties:{score:{type:Ke.NUMBER},isToxic:{type:Ke.BOOLEAN},category:{type:Ke.STRING},reason:{type:Ke.STRING}}}}});return JSON.parse(s.text||"{}")}catch(s){return await ld("comment_moderation",s,{text:t.substring(0,50)}),{score:0,isToxic:!1,category:"No analisado",reason:"Erro na conexo com IA."}}},async analyzeImage(t){const e=new jo({apiKey:tl()});try{if(!(t.includes(window.location.hostname)||t.includes("supabase.co")))throw new Error("EXTERNAL_CORS_RISK");const i=await(await fetch(t).catch(()=>{throw new Error("CORS_OR_NETWORK_ERROR")})).blob(),l=await new Promise(u=>{const f=new FileReader;f.onloadend=()=>u(f.result.split(",")[1]),f.readAsDataURL(i)}),d=await e.models.generateContent({model:"gemini-2.5-flash-image",contents:{parts:[{text:"Analise violaes de contedo: Nudez, Violncia, dio. Retorne JSON."},{inlineData:{mimeType:i.type||"image/jpeg",data:l}}]},config:{responseMimeType:"application/json",responseSchema:{type:Ke.OBJECT,properties:{isSafe:{type:Ke.BOOLEAN},category:{type:Ke.STRING},reason:{type:Ke.STRING}}}}});return JSON.parse(d.text||"{}")}catch(s){return await ld("image_moderation",s,{url:t}),{isSafe:!0,category:"No analisado",reason:s.message==="EXTERNAL_CORS_RISK"?"URL externa protegida.":"Falha tcnica na anlise visual."}}}},db={async analyzeProposal(t,e=""){const s=new jo({apiKey:tl()});try{const n=`Voc  um mediador snior da RESONNA.
            Analise: Valor R$ ${t.valor||0}, Data: ${t.data_evento}.
            Dvida: "${e}"
            
            Obrigatrio retornar no campo "mood" apenas um destes: "Amigvel", "Profissional", "Tenso" ou "Cauteloso".`,i=await s.models.generateContent({model:"gemini-3-flash-preview",contents:{parts:[{text:n}]},config:{responseMimeType:"application/json",responseSchema:{type:Ke.OBJECT,properties:{verdict:{type:Ke.STRING},risks:{type:Ke.ARRAY,items:{type:Ke.STRING}},suggestions:{type:Ke.ARRAY,items:{type:Ke.STRING}},mood:{type:Ke.STRING,description:"Estado emocional da negociao: Amigvel, Profissional, Tenso ou Cauteloso"}},required:["verdict","risks","suggestions","mood"]}}});return JSON.parse(i.text||"{}")}catch(n){return await ld("negotiation",n,{contractId:t.id}),{verdict:"Servio temporariamente indisponvel.",risks:[],suggestions:[],mood:"Profissional"}}},async saveLog(t){await Q.from("historico_negociacao").insert(t)}},pM={async analyzeAudio(t,e,s){const n=new jo({apiKey:tl()});try{const l=await(await fetch(s).catch(()=>{throw new Error("CORS_OR_NETWORK_ERROR")})).blob(),d=await new Promise(v=>{const b=new FileReader;b.onloadend=()=>v(b.result.split(",")[1]),b.readAsDataURL(l)}),u=await n.models.generateContent({model:"gemini-2.5-flash-native-audio-preview-09-2025",contents:{parts:[{inlineData:{mimeType:l.type||"audio/mpeg",data:d}},{text:"Analise este udio de portflio musical. Retorne JSON estrito com campos: genero_sugerido, qualidade_tecnica, timbre_vocal, energia (0-100), sugestoes (array)."}]},config:{responseMimeType:"application/json",responseSchema:{type:Ke.OBJECT,properties:{genero_sugerido:{type:Ke.STRING},qualidade_tecnica:{type:Ke.STRING},timbre_vocal:{type:Ke.STRING},energia:{type:Ke.NUMBER},sugestoes:{type:Ke.ARRAY,items:{type:Ke.STRING}}},required:["genero_sugerido","qualidade_tecnica","timbre_vocal","energia","sugestoes"]}}}),f=JSON.parse(u.text||"{}"),{data:m,error:g}=await Q.from("analises_audio").insert({usuario_id:t,caminho_arquivo:e,resultado:f}).select().single();if(g)throw g;return m}catch(i){throw await ld("audio_analysis",i,{audioPath:e}),new Error("No foi possvel analisar o udio: "+i.message)}}},lm={async getBIStats(){const{data:t,error:e}=await Q.rpc("get_admin_financial_stats");if(e&&e.code!=="42883")throw e;const{count:s}=await Q.from("usuarios").select("*",{count:"exact",head:!0}).eq("is_suspended",!1),{count:n}=await Q.from("contratos").select("*",{count:"exact",head:!0}),i=t||[{mes:"2024-08",volume_total:15400,receita_plataforma:1540,contratos_count:22},{mes:"2024-07",volume_total:12100,receita_plataforma:1210,contratos_count:18}];return{totalRevenue:i.reduce((l,d)=>l+(Number(d.receita_plataforma)||0),0),totalGmv:i.reduce((l,d)=>l+(Number(d.volume_total)||0),0),activeUsers:s||0,conversionRate:n&&s?n/s*100:0,monthlyGrowth:15.4,financialData:i}},async fetchIaLogs(){const{data:t,error:e}=await Q.from("logs_integracao_ia").select("*").order("criado_em",{ascending:!1}).limit(100);if(e)throw e;return t||[]},async clearIaLogs(){const{error:t}=await Q.from("logs_integracao_ia").delete().neq("id","00000000-0000-0000-0000-000000000000");if(t)throw t}},Xe={async checkSuspensionStatus(t){const{data:e}=await Q.from("usuarios").select("is_suspended").eq("id",t).single();return(e==null?void 0:e.is_suspended)||!1},async getFeatured(t,e){const{data:s,error:n}=await Q.from("usuarios").select(`*, ${t==="artista"?"artista:artistas(*)":"estabelecimento:estabelecimentos(*)"}`).eq("tipo",t).eq("is_suspended",!1).order("plano",{ascending:!1}).order("is_featured",{ascending:!1}).order("nota_media",{ascending:!1,nullsFirst:!1}).limit(e);if(n)throw n;return(s||[]).map(i=>Ws(i))},async getArtists({search:t,city:e,genre:s,date:n,page:i,pageSize:l}){var v;const d=i*l;if(n){const{data:b,error:_}=await Q.rpc("get_available_artists",{p_date:n,p_search:t||"",p_city:e||"",p_genre:s||"",p_limit:l,p_offset:d});if(_)throw _;return{data:(b||[]).map(S=>Ws({...S,artista:{genero_musical:S.genero_musical,descricao:S.descricao}})),count:((v=b==null?void 0:b[0])==null?void 0:v.total_count)||0}}let u=Q.from("usuarios").select("*, artista:artistas!inner(*)",{count:"exact"}).eq("tipo","artista").eq("is_suspended",!1);t&&(u=u.ilike("nome",`%${t}%`)),e&&(u=u.ilike("cidade",`%${e}%`)),s&&(u=u.ilike("artista.genero_musical",`%${s}%`));const{data:f,count:m,error:g}=await u.order("plano",{ascending:!1}).order("nota_media",{ascending:!1,nullsFirst:!1}).range(d,d+l-1);if(g)throw g;return{data:(f||[]).map(b=>Ws(b)),count:m||0}},async getVenues({search:t,city:e,page:s,pageSize:n}){let i=Q.from("usuarios").select("*, estabelecimento:estabelecimentos!inner(*)",{count:"exact"}).eq("tipo","estabelecimento").eq("is_suspended",!1);t&&(i=i.ilike("nome",`%${t}%`)),e&&(i=i.ilike("cidade",`%${e}%`));const{data:l,count:d,error:u}=await i.order("plano",{ascending:!1}).order("nota_media",{ascending:!1,nullsFirst:!1}).range(s*n,(s+1)*n-1);if(u)throw u;return{data:(l||[]).map(f=>Ws(f)),count:d||0}},async updateBasicInfo(t,e){await Q.from("usuarios").update(e).eq("id",t)},async updateArtist(t,e,s){e&&await Q.from("usuarios").update(e).eq("id",t),s&&await Q.from("artistas").update(s).eq("usuario_id",t)},async updateVenue(t,e,s){e&&await Q.from("usuarios").update(e).eq("id",t),s&&await Q.from("estabelecimentos").update(s).eq("usuario_id",t)},async search(t,e){const{data:s}=await Q.from("usuarios").select(`*, ${e==="artista"?"artista:artistas(*)":"estabelecimento:estabelecimentos(*)"}`).eq("tipo",e).eq("is_suspended",!1).ilike("nome",`%${t}%`).order("plano",{ascending:!1}).order("nota_media",{ascending:!1,nullsFirst:!1}).limit(10);return(s||[]).map(n=>Ws(n))},async getProfileByAuthId(t){const{data:e}=await Q.from("usuarios").select("*, artista:artistas(*), estabelecimento:estabelecimentos(*)").eq("auth_id",t).maybeSingle();return Ws(e)},async checkAndDowngradeExpiredPlan(t){return t.plano==="free"||!t.plano_expiracao?!1:new Date>new Date(t.plano_expiracao)?(await Q.from("historico_assinaturas").insert({usuario_id:t.id,plano_anterior:t.plano,plano_novo:"free",valor_pago:0,metodo_pagamento:"system_expiry"}),await Q.from("usuarios").update({plano:"free",plano_status:"expired",plano_expiracao:null}).eq("id",t.id),!0):!1},async updateUserPlan(t,e){const{data:s}=await Q.from("usuarios").select("plano").eq("id",t).single(),n=new Date;n.setDate(n.getDate()+30),await Q.from("usuarios").update({plano:e,plano_status:"active",plano_expiracao:e==="free"?null:n.toISOString()}).eq("id",t),await Q.from("historico_assinaturas").insert({usuario_id:t,plano_anterior:s==null?void 0:s.plano,plano_novo:e,valor_pago:e==="free"?0:e==="pro"?29.9:79.9,metodo_pagamento:"stripe_simulated"})},async getSubscriptionHistory(t){const{data:e}=await Q.from("historico_assinaturas").select("*").eq("usuario_id",t).order("data_mudanca",{ascending:!1});return e||[]},async submitKyc(t,e){await Q.from("usuarios").update({status_verificacao:"pendente",documento_url:e}).eq("id",t)},async listPendingKyc(){const{data:t}=await Q.from("usuarios").select("*").eq("status_verificacao","pendente");return t||[]},async approveKyc(t){await Q.from("usuarios").update({status_verificacao:"verificado",data_verificacao:new Date().toISOString()}).eq("id",t)},async rejectKyc(t,e){await Q.from("usuarios").update({status_verificacao:"rejeitado"}).eq("id",t)}},da={async listByProfile(t,e,s){const n=e==="artista"?"artista_id":"estabelecimento_id";let i=Q.from("contratos").select("*, artistas(usuario_id, usuarios(nome, cidade, foto_url, plano, status_verificacao)), estabelecimentos(usuario_id, usuarios(nome, cidade, foto_url, plano, status_verificacao))").eq(n,t).order("criado_em",{ascending:!1});s&&(i=i.eq("status",s));const{data:l}=await i;return(l||[]).map(d=>Ii(d))},async getUpcomingPublicEvents(t){const e=new Date;e.setUTCHours(0,0,0,0);const{data:s}=await Q.from("contratos").select("id, data_evento, status, artistas(usuario_id, usuarios(id, nome, foto_url, plano, status_verificacao)), estabelecimentos(usuario_id, usuarios(id, nome, cidade, plano, status_verificacao))").in("status",["assinado","concluido"]).gte("data_evento",e.toISOString()).order("data_evento",{ascending:!0}).limit(t);return(s||[]).map(n=>Ii(n))},async checkAvailability(t,e){const{data:s}=await Q.from("contratos").select("id").eq("artista_id",t).eq("data_evento",e).in("status",["assinado","concluido"]);return!s||s.length===0},async create(t){const{data:e,error:s}=await Q.from("contratos").insert(t).select().single();if(s)throw s;return e},async getById(t){const{data:e}=await Q.from("contratos").select("*, artistas(usuario_id, usuarios(id, nome, email, telefone, cidade, foto_url, plano, status_verificacao)), estabelecimentos(usuario_id, usuarios(id, nome, email, telefone, cidade, foto_url, plano, status_verificacao))").eq("id",t).single();return Ii(e)},async sign(t,e){const s={};e==="artista"?(s.assinatura_artista=!0,s.data_assinatura_artista=new Date().toISOString()):(s.assinatura_estabelecimento=!0,s.data_assinatura_estabelecimento=new Date().toISOString());const{data:n}=await Q.from("contratos").update(s).eq("id",t).select("*, artistas(usuario_id, usuarios(id, nome, email, telefone, cidade, foto_url, plano, status_verificacao)), estabelecimentos(usuario_id, usuarios(id, nome, email, telefone, cidade, foto_url, plano, status_verificacao))").single();return Ii(n)},async updateStatus(t,e){await Q.from("contratos").update({status:e}).eq("id",t)},async concludePayment(t){await Q.from("contratos").update({status:"concluido",data_pagamento:new Date().toISOString()}).eq("id",t)},async cancel(t,e,s,n){await Q.from("contratos").update({status:"cancelado",condicoes:(s||"")+`

[CANCELADO POR ${n}]: ${e}`}).eq("id",t)},async getFinancialHistory(t,e){const s=e==="artista"?"artista_id":"estabelecimento_id",{data:n}=await Q.from("contratos").select("id, data_evento, valor, taxa_servico, status, data_pagamento, artistas(usuario_id, usuarios(nome)), estabelecimentos(usuario_id, usuarios(nome))").eq(s,t).or("status.eq.assinado,status.eq.concluido,and(status.eq.cancelado,data_pagamento.not.is.null),status.eq.enviado").order("data_evento",{ascending:!1});return(n||[]).map(i=>Ii(i))}},yo={async sendSupportMessage(t){await Q.from("mensagens_contato").insert(t)},async startConversation(t,e,s){let{data:n}=await Q.from("conversas").select("id").or(`and(participante_a.eq.${t},participante_b.eq.${e}),and(participante_a.eq.${e},participante_b.eq.${t})`).maybeSingle();n||(n=(await Q.from("conversas").insert({participante_a:t,participante_b:e}).select().single()).data),await this.sendMessage(n.id,t,s)},async getConversations(t){const{data:e}=await Q.from("conversas").select("id, participante_a, participante_b, user_a:usuarios!participante_a(id, nome, foto_url), user_b:usuarios!participante_b(id, nome, foto_url)").or(`participante_a.eq.${t},participante_b.eq.${t}`);return(await Promise.all((e||[]).map(async n=>{var d,u;const i=Xs(n.participante_a===t?n.user_b:n.user_a),{data:l}=await Q.from("mensagens").select("texto, criado_em").eq("conversa_id",n.id).order("criado_em",{ascending:!1}).limit(1);return{id:n.id,nome_participante:sl(i),foto_participante:i==null?void 0:i.foto_url,ultima_mensagem:((d=l==null?void 0:l[0])==null?void 0:d.texto)||"Nova conversa",timestamp_ultima_mensagem:((u=l==null?void 0:l[0])==null?void 0:u.criado_em)||null,other_participant_id:i==null?void 0:i.id}}))).sort((n,i)=>new Date(i.timestamp_ultima_mensagem||0).getTime()-new Date(n.timestamp_ultima_mensagem||0).getTime())},async getMessages(t){const{data:e}=await Q.from("mensagens").select("*").eq("conversa_id",t).order("criado_em",{ascending:!0});return e||[]},async sendMessage(t,e,s){await Q.from("mensagens").insert({conversa_id:t,remetente_id:e,texto:s})}},wa={async create(t){await Q.from("notificacoes").insert(t)},async getByUser(t){const{data:e}=await Q.from("notificacoes").select("*").eq("usuario_id",t).order("data_criacao",{ascending:!1});return e||[]},async markAsRead(t){await Q.from("notificacoes").update({lida:!0}).eq("id",t)},async markAllAsRead(t){await Q.from("notificacoes").update({lida:!0}).eq("usuario_id",t)}},vo={async getPublishedPosts({page:t,pageSize:e,search:s}){let n=Q.from("blog_posts").select("*",{count:"exact"}).eq("status","published");s&&(n=n.or(`title.ilike.%${s}%,content.ilike.%${s}%`));const{data:i,count:l}=await n.order("created_at",{ascending:!1}).range(t*e,(t+1)*e-1);return{data:i,count:l||0}},async getBySlug(t){const{data:e}=await Q.from("blog_posts").select("*").eq("slug",t).single();return e},async listAll(){const{data:t}=await Q.from("blog_posts").select("*").order("created_at",{ascending:!1});return t},async delete(t){await Q.from("blog_posts").delete().eq("id",t)},async save(t){const{data:e}=await Q.from("blog_posts").upsert(t).select().single();return e}},cm={async getByTargetId(t){const{data:e}=await Q.from("avaliacoes").select("*, avaliador:usuarios!avaliador_id (id, nome, foto_url, status_verificacao)").eq("alvo_id",t).order("criado_em",{ascending:!1});return(e||[]).map(s=>({...s,avaliador:Xs(s.avaliador)}))},async create(t){const{data:e}=await Q.from("avaliacoes").insert(t).select().single();return e},async getByContractAndReviewer(t,e){const{data:s}=await Q.from("avaliacoes").select("*").eq("contrato_id",t).eq("avaliador_id",e).maybeSingle();return s}},Jc={async list(t){const{data:e}=await Q.from("banda_membro").select("*").eq("artista_id",t);return e||[]},async add(t,e,s){const{data:n}=await Q.from("banda_membro").insert({artista_id:t,nome:e,instrumento:s}).select().single();return n},async remove(t){await Q.from("banda_membro").delete().eq("id",t)}},Vi={async getGenres(){const{data:t}=await Q.from("generos_musicais").select("*").order("nome",{ascending:!0});return t||[]},async addGenre(t){const{data:e}=await Q.from("generos_musicais").insert({nome:t}).select().single();return e},async removeGenre(t){await Q.from("generos_musicais").delete().eq("id",t)},async updateHomeBackground(t){const e=t?Ie.getPublicUrl("site",t):null;return await Q.from("configuracoes").upsert({id:1,home_background_url:e}),e},async updateSystemConfig(t){const e={id:1};t.brandingOption!==void 0&&(e.branding_display_option=t.brandingOption),t.heroOpacity!==void 0&&(e.home_hero_opacity=t.heroOpacity),t.heroBlur!==void 0&&(e.home_hero_blur=t.heroBlur),t.heroOverlayColor!==void 0&&(e.home_hero_overlay_color=t.heroOverlayColor),t.scriptHead!==void 0&&(e.script_head=t.scriptHead),t.scriptBodyStart!==void 0&&(e.script_body_start=t.scriptBodyStart),t.scriptBodyEnd!==void 0&&(e.script_body_end=t.scriptBodyEnd),t.supabaseUrl!==void 0&&(e.supabase_url=t.supabaseUrl),t.supabaseAnonKey!==void 0&&(e.supabase_anon_key=t.supabaseAnonKey),t.geminiApiKey!==void 0&&(e.gemini_api_key=t.geminiApiKey),t.stripePublishableKey!==void 0&&(e.stripe_publishable_key=t.stripePublishableKey),await Q.from("configuracoes").upsert(e)}},gM={async getUserAchievements(t){const{data:e}=await Q.from("conquistas_usuario").select("*, conquista:conquistas(*)").eq("usuario_id",t);return e||[]},async getAllAchievements(){const{data:t}=await Q.from("conquistas").select("*");return t||[]},async checkAndUnlock(t,e,s){const[n,i]=await Promise.all([this.getUserAchievements(t),this.getAllAchievements()]),l=new Set(n.map(u=>u.conquista_id)),d=i.filter(u=>u.tipo===e&&u.meta_valor<=s&&!l.has(u.id));return d.length>0?(await Q.from("conquistas_usuario").insert(d.map(u=>({usuario_id:t,conquista_id:u.id}))),d):[]}},bo={async createPaymentIntent(t,e,s){try{const{data:n}=await Q.functions.invoke("payment-sheet",{body:{amount:t,description:e,customer_email:s}});return n}catch{return{clientSecret:"simulated_"+Math.random(),isSimulated:!0}}},async requestPayout(t,e,s,n){const{data:i}=await Q.from("solicitacoes_saque").insert({usuario_id:t,valor:e,chave_pix:s,tipo_chave:n,status:"pendente"}).select().single();return i},async getPayoutHistory(t){const{data:e}=await Q.from("solicitacoes_saque").select("*").eq("usuario_id",t).order("criado_em",{ascending:!1});return e||[]},async listAllPayouts(){const{data:t}=await Q.from("solicitacoes_saque").select("*, usuarios(nome, email)").order("criado_em",{ascending:!1});return t||[]},async updatePayoutStatus(t,e){await Q.from("solicitacoes_saque").update(e).eq("id",t)}},xM={async listLogs(){const{data:t}=await Q.from("webhook_logs").select("*").order("criado_em",{ascending:!1}).limit(100);return t||[]}},kN=N.createContext(void 0),yM=({children:t})=>{const[e,s]=N.useState(null),[n,i]=N.useState(null),[l,d]=N.useState(null),[u,f]=N.useState(!0),[m,g]=N.useState(!1),[v,b]=N.useState(!1),[_,S]=N.useState(null),E=N.useCallback(async R=>{g(!0),b(!1),S(null);try{const{data:A,error:M,status:z}=await Q.from("usuarios").select("*, artista:artistas(*), estabelecimento:estabelecimentos(*)").eq("auth_id",R.id).maybeSingle();if(M)throw M;if(A){const F=Ws(A);if(await Xe.checkAndDowngradeExpiredPlan(F)){const{data:K}=await Q.from("usuarios").select("*, artista:artistas(*), estabelecimento:estabelecimentos(*)").eq("id",F.id).single();K&&d(Ws(K))}else d(F)}else d(null),b(!0)}catch(A){const M=he(A);if(console.error("Error fetching profile:",M),M.includes("JWT expired")||M.includes("Invalid JWT")){await Q.auth.signOut(),i(null),s(null),d(null);return}M.includes("Failed to fetch")||M.includes("NetworkError")?(S("No foi possvel conectar ao servidor. Verifique sua conexo com a internet."),b(!1)):(d(null),b(!0))}finally{g(!1)}},[]);N.useEffect(()=>{const{data:{subscription:R}}=Q.auth.onAuthStateChange((A,M)=>{s(M),i((M==null?void 0:M.user)??null),f(!1)});return()=>{R.unsubscribe()}},[]),N.useEffect(()=>{n?E(n):(d(null),b(!1),g(!1),S(null))},[n,E]);const C=N.useCallback(async()=>{n&&await E(n)},[n,E]),T={user:n,session:e,profile:l,loading:u,profileLoading:m,profileMissing:v,error:_,refreshProfile:C};return u?a.jsx("div",{className:"flex justify-center items-center h-screen bg-dark",children:a.jsx("div",{className:"text-white text-xl",children:"Carregando..."})}):a.jsx(kN.Provider,{value:T,children:t})},Ps=()=>{const t=N.useContext(kN);if(t===void 0)throw new Error("useAuth deve ser usado dentro de um AuthProvider");return t},Na=({className:t="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),MN=N.createContext(void 0),vM=({children:t})=>{const{user:e,profile:s}=Ps(),[n,i]=N.useState([]),[l,d]=N.useState(0),[u,f]=N.useState(!0),[m,g]=N.useState(!1);N.useEffect(()=>{"Notification"in window&&g(Notification.permission==="granted")},[]);const v=async()=>{if(!("Notification"in window))return!1;const R=await Notification.requestPermission()==="granted";return g(R),R},b=T=>{if(!(!("Notification"in window)||Notification.permission!=="granted")&&document.visibilityState==="hidden"){const R=new Notification(T.titulo,{body:T.descricao,icon:"/favicon.ico",tag:"resona-notif"});setTimeout(()=>R.close(),8e3)}},_=N.useCallback(async()=>{if(!e||!s){f(!1),i([]),d(0);return}try{f(!0);const T=await wa.getByUser(s.id);i(T||[]);const R=(T==null?void 0:T.filter(A=>!A.lida).length)||0;d(R)}catch(T){const R=he(T);if(R.includes("Failed to fetch")||R.includes("Network request failed")){console.warn("Aviso: Falha de rede nas notificaes."),i([]),d(0);return}console.error("Error fetching notifications:",R)}finally{f(!1)}},[e,s]);N.useEffect(()=>{_()},[_]),N.useEffect(()=>{if(!e||!s)return;let T=!0;const R=`notificacoes:${s.id}`;try{const A=Q.channel(R),M=A.on("postgres_changes",{event:"INSERT",schema:"public",table:"notificacoes",filter:`usuario_id=eq.${s.id}`},z=>{T&&(i(F=>[z.new,...F]),d(F=>F+1),b(z.new))}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"notificacoes",filter:`usuario_id=eq.${s.id}`},z=>{T&&i(F=>{const G=F.map(I=>I.id===z.new.id?z.new:I),K=G.filter(I=>!I.lida).length;return d(K),G})}).subscribe();return()=>{T=!1,Q.removeChannel(A)}}catch(A){console.warn("Erro ao configurar realtime:",A)}},[e,s]);const C={notifications:n,unreadCount:l,loading:u,markAsRead:async T=>{const R=n.find(A=>A.id===T);if(R&&!R.lida){i(A=>{const M=A.map(z=>z.id===T?{...z,lida:!0}:z);return d(M.filter(z=>!z.lida).length),M});try{await wa.markAsRead(T)}catch(A){console.error("Erro ao marcar lida:",A)}}},markAllAsRead:async()=>{if(!(!e||!s)){i(T=>T.map(R=>({...R,lida:!0}))),d(0);try{await wa.markAllAsRead(s.id)}catch(T){console.error("Erro ao limpar notificaes:",T)}}},requestPermission:v,hasPermission:m};return a.jsx(MN.Provider,{value:C,children:t})},_d=()=>{const t=N.useContext(MN);if(t===void 0)throw new Error("useNotifications deve ser usado dentro de um NotificationsProvider");return t},bM=({notification:t,onRead:e,closeModal:s})=>{const n=Xt(),i=()=>{if(e(t.id),s(),t.url_destino){const d=t.url_destino;d.startsWith("http")?window.open(d,"_blank","noopener,noreferrer"):n(d)}},l=d=>{const u=new Date(d),m=Math.max(0,Math.floor((new Date().getTime()-u.getTime())/1e3));let g=m/31536e3;return g>1?Math.floor(g)+"a":(g=m/2592e3,g>1?Math.floor(g)+"m":(g=m/86400,g>1?Math.floor(g)+"d":(g=m/3600,g>1?Math.floor(g)+"h":(g=m/60,g>1?Math.floor(g)+"min":Math.floor(m)+"s"))))};return a.jsxs("div",{onClick:i,className:`p-3 hover:bg-gray-700 cursor-pointer ${t.lida?"":"bg-secondary/10"}`,children:[a.jsx("p",{className:"font-semibold text-white text-sm",children:t.titulo}),a.jsx("p",{className:"text-xs text-gray-400",children:t.descricao}),a.jsx("p",{className:"text-right text-xs text-gray-500 mt-1",children:l(t.data_criacao)})]})},ub=()=>{const[t,e]=N.useState(!1),{notifications:s,unreadCount:n,markAsRead:i,markAllAsRead:l,loading:d}=_d(),u=N.useRef(null);N.useEffect(()=>{const g=v=>{u.current&&!u.current.contains(v.target)&&e(!1)};return document.addEventListener("mousedown",g),()=>document.removeEventListener("mousedown",g)},[]);const f=()=>e(g=>!g),m=g=>{g.stopPropagation(),l()};return a.jsxs("div",{className:"relative",ref:u,children:[a.jsxs("button",{onClick:f,className:"relative text-white hover:text-primary transition-colors",children:[a.jsx(Na,{className:"w-7 h-7"}),n>0&&a.jsx("span",{className:"absolute -top-1 -right-1 flex h-4 w-4 items-center justify-center rounded-full bg-red-600 text-xs font-bold text-white",children:n>9?"9+":n})]}),t&&a.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-gray-800 rounded-lg shadow-2xl overflow-hidden z-50 border border-gray-700",children:[a.jsxs("div",{className:"p-3 flex justify-between items-center border-b border-gray-700",children:[a.jsx("h3",{className:"font-bold text-white",children:"Notificaes"}),n>0&&a.jsx("button",{onClick:m,className:"text-xs text-primary hover:underline",children:"Marcar todas como lidas"})]}),a.jsx("div",{className:"max-h-96 overflow-y-auto",children:d?a.jsx("p",{className:"p-4 text-center text-gray-400",children:"Carregando..."}):s.length>0?s.slice(0,10).map(g=>a.jsx(bM,{notification:g,onRead:i,closeModal:()=>e(!1)},g.id)):a.jsx("p",{className:"p-4 text-center text-gray-500",children:"Nenhuma notificao por aqui."})}),a.jsx("div",{className:"p-2 bg-gray-900 text-center",children:a.jsx(Se,{to:"/notificacoes",onClick:()=>e(!1),className:"text-sm font-semibold text-primary hover:underline",children:"Ver todas as notificaes"})})]})]})},IN=N.createContext(void 0),wM="logo.png",NM="site",_M={homeBackgroundUrl:null,brandingOption:"logo_and_name",heroOpacity:.6,heroBlur:0,heroOverlayColor:"#000000",scriptHead:null,scriptBodyStart:null,scriptBodyEnd:null},SM=({children:t})=>{const[e,s]=N.useState(null),[n,i]=N.useState(_M),[l,d]=N.useState([]),u=N.useCallback(async()=>{const{data:b}=Q.storage.from(NM).getPublicUrl(wM);fetch(b.publicUrl).then(E=>{E.ok?s(`${b.publicUrl}?t=${new Date().getTime()}`):s(null)}).catch(()=>s(null));const{data:_,error:S}=await Q.from("configuracoes").select("*").eq("id",1).single();S&&S.code!=="PGRST116"?console.error("Error fetching site config:",he(S)):_&&(i({homeBackgroundUrl:_.home_background_url||null,brandingOption:_.branding_display_option||"logo_and_name",heroOpacity:_.home_hero_opacity??.6,heroBlur:_.home_hero_blur??0,heroOverlayColor:_.home_hero_overlay_color||"#000000",scriptHead:_.script_head||null,scriptBodyStart:_.script_body_start||null,scriptBodyEnd:_.script_body_end||null,supabaseUrl:_.supabase_url||null,supabaseAnonKey:_.supabase_anon_key||null,geminiApiKey:_.gemini_api_key||null,stripePublishableKey:_.stripe_publishable_key||null}),_.gemini_api_key&&mM(_.gemini_api_key))},[]),f=N.useCallback(async()=>{try{const b=await Vi.getGenres();d(b)}catch(b){console.error("Error fetching genres:",b)}},[]);N.useEffect(()=>{u(),f()},[u,f]);const m=N.useCallback(()=>{u()},[u]),g=N.useCallback(()=>{f()},[f]),v={logoUrl:e,siteConfig:n,genres:l,refreshSiteConfig:m,refreshGenres:g};return a.jsx(IN.Provider,{value:v,children:t})},ns=()=>{const t=N.useContext(IN);if(t===void 0)throw new Error("useSite deve ser usado dentro de um SiteProvider");return t},jM=()=>{var K;const[t,e]=N.useState(!1),[s,n]=N.useState(!1),[i,l]=N.useState(!1),{user:d,profile:u,profileLoading:f}=Ps(),{hasPermission:m,requestPermission:g}=_d(),v=Xt(),b=Ds(),{logoUrl:_,siteConfig:S}=ns(),E=N.useRef(null);N.useEffect(()=>{const I=()=>{l(window.scrollY>50)};return window.addEventListener("scroll",I),()=>window.removeEventListener("scroll",I)},[]),N.useEffect(()=>{e(!1)},[b]),N.useEffect(()=>(document.body.style.overflow=t?"hidden":"unset",()=>{document.body.style.overflow="unset"}),[t]),N.useEffect(()=>{const I=U=>{E.current&&!E.current.contains(U.target)&&n(!1)};return document.addEventListener("mousedown",I),()=>document.removeEventListener("mousedown",I)},[]);const C=async()=>{n(!1),e(!1),await Q.auth.signOut(),v("/")},T=({isActive:I})=>`text-sm font-medium tracking-wide transition-colors duration-300 ${I?"text-primary":"text-gray-300 hover:text-white"}`,R=({isActive:I})=>`block py-3 text-lg font-medium border-b border-gray-800 transition-colors ${I?"text-primary":"text-gray-300 hover:text-white"}`,A=[{path:"/",label:"Incio"},{path:"/artistas",label:"Artistas"},{path:"/estabelecimentos",label:"Locais"},{path:"/blog",label:"Blog"},{path:"/sobre",label:"Sobre"},{path:"/contato",label:"Contato"}],M=()=>{switch(S.brandingOption){case"logo":return _?a.jsx("img",{src:_,alt:"RESONA Logo",className:"h-10 w-auto"}):"RESONA";case"name":return"RESONA";case"logo_and_name":return a.jsxs(a.Fragment,{children:[_&&a.jsx("img",{src:_,alt:"RESONA Logo",className:"h-8 w-auto mr-3"}),a.jsx("span",{className:"tracking-tight",children:"RESONA"})]});default:return"RESONA"}},z=(u==null?void 0:u.nome)||((K=d==null?void 0:d.email)==null?void 0:K.split("@")[0])||"Usurio",G=(()=>{if(u!=null&&u.foto_url){const{data:I}=Q.storage.from("perfis").getPublicUrl(u.foto_url);return`${I.publicUrl}?t=${new Date().getTime()}`}return null})();return a.jsxs(a.Fragment,{children:[a.jsx("header",{className:`fixed top-0 w-full z-40 transition-all duration-300 border-b ${i?"bg-dark/95 backdrop-blur-md border-gray-800 shadow-lg py-2":"bg-transparent border-transparent py-4"}`,children:a.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(Se,{to:"/",className:"flex items-center text-xl font-bold text-white font-poppins hover:opacity-90 transition-opacity",onClick:()=>e(!1),children:M()})}),a.jsx("nav",{className:"hidden md:flex items-center space-x-8",children:A.map(I=>a.jsx(Qc,{to:I.path,className:T,children:I.label},I.path))}),a.jsx("div",{className:"hidden md:flex items-center gap-4",children:d?a.jsxs(a.Fragment,{children:[!m&&a.jsxs("button",{onClick:()=>g(),className:"p-2 text-yellow-500 hover:bg-yellow-500/10 rounded-full transition-all group relative",title:"Ativar notificaes push",children:[a.jsx(Na,{className:"w-5 h-5 animate-bounce-slow"}),a.jsx("span",{className:"absolute top-full right-0 mt-2 hidden group-hover:block bg-gray-800 text-white text-[10px] p-2 rounded border border-gray-700 w-32 shadow-xl z-50",children:"Clique para receber alertas em tempo real."})]}),a.jsx(ub,{}),a.jsxs("div",{className:"relative",ref:E,children:[a.jsxs("button",{onClick:()=>n(I=>!I),className:"flex items-center gap-2 text-white hover:bg-gray-800/50 py-1 px-2 rounded-full transition-colors focus:outline-none",children:[G?a.jsx("img",{src:G,alt:"Avatar",className:"w-8 h-8 rounded-full object-cover border border-gray-600"}):a.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-700 flex items-center justify-center",children:a.jsx("span",{className:"text-xs font-bold",children:f?"?":z.charAt(0).toUpperCase()})}),a.jsx("span",{className:"text-sm font-medium max-w-[120px] truncate",children:f?"...":z})]}),a.jsxs("div",{className:`absolute right-0 mt-2 w-56 bg-gray-800 rounded-xl shadow-2xl py-2 z-50 border border-gray-700 transition-all duration-200 transform origin-top-right ${s?"opacity-100 scale-100":"opacity-0 scale-95 pointer-events-none"}`,children:[a.jsxs("div",{className:"px-4 py-3 border-b border-gray-700 mb-1",children:[a.jsx("p",{className:"text-xs text-gray-400 uppercase tracking-wider font-bold mb-1",children:"Logado como"}),a.jsx("p",{className:"text-sm font-bold text-white truncate",children:z}),a.jsx("p",{className:"text-xs text-gray-500 truncate",children:d.email})]}),a.jsx(Se,{to:"/painel",onClick:()=>n(!1),className:"block px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 hover:text-white hover:pl-5 transition-all",children:"Painel"}),a.jsx(Se,{to:`/${u==null?void 0:u.tipo}/${u==null?void 0:u.id}`,onClick:()=>n(!1),className:"block px-4 py-2 text-sm text-gray-300 hover:bg-gray-700 hover:text-white hover:pl-5 transition-all",children:"Perfil Pblico"}),(u==null?void 0:u.role)==="admin-master"&&a.jsx(Se,{to:"/admin",onClick:()=>n(!1),className:"block px-4 py-2 text-sm text-yellow-400 hover:bg-gray-700 hover:text-white hover:pl-5 transition-all",children:"Administrao"}),a.jsx("div",{className:"border-t border-gray-700 mt-1 pt-1",children:a.jsx("button",{onClick:C,className:"w-full text-left block px-4 py-2 text-sm text-red-400 hover:bg-gray-700 hover:text-red-300 hover:pl-5 transition-all",children:"Sair"})})]})]})]}):a.jsxs(a.Fragment,{children:[a.jsx(Se,{to:"/login",className:"text-sm font-medium text-gray-300 hover:text-white transition-colors",children:"Entrar"}),a.jsx(Se,{to:"/cadastro",className:"relative inline-flex items-center justify-center px-6 py-2 text-sm font-bold text-white transition-all duration-200 bg-white/10 border border-white/20 rounded-full hover:bg-white/20 focus:outline-none hover:shadow-[0_0_15px_rgba(81,210,238,0.3)]",children:"Cadastrar"})]})}),a.jsxs("div",{className:"md:hidden flex items-center gap-4",children:[d&&a.jsx(ub,{}),a.jsx("button",{onClick:()=>e(!0),className:"text-white focus:outline-none p-2 rounded-md hover:bg-gray-800 transition-colors","aria-label":"Abrir menu",children:a.jsx(bw,{})})]})]})})}),a.jsx("div",{className:`${i?"h-16":"h-20"}`}),a.jsxs("div",{className:`fixed inset-0 z-[60] md:hidden transition-opacity duration-300 ${t?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,children:[a.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:()=>e(!1)}),a.jsxs("div",{className:`absolute top-0 right-0 w-4/5 max-sm h-full bg-gray-900 shadow-2xl transform transition-transform duration-300 ease-out border-l border-gray-800 flex flex-col ${t?"translate-x-0":"translate-x-full"}`,children:[a.jsxs("div",{className:"p-5 flex justify-between items-center border-b border-gray-800",children:[a.jsx("span",{className:"font-bold text-xl text-white tracking-tight",children:"Menu"}),a.jsx("button",{onClick:()=>e(!1),className:"text-gray-400 hover:text-white p-1",children:a.jsx(It,{className:"w-8 h-8"})})]}),a.jsx("div",{className:"flex-grow overflow-y-auto py-4 px-6 space-y-1",children:A.map(I=>a.jsx(Qc,{to:I.path,className:R,onClick:()=>e(!1),children:I.label},I.path))}),a.jsx("div",{className:"p-6 border-t border-gray-800 bg-gray-900",children:d?a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"flex items-center gap-3 bg-gray-800 p-3 rounded-lg",children:[G?a.jsx("img",{src:G,alt:"Avatar",className:"w-12 h-12 rounded-full object-cover border-2 border-primary"}):a.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-700 flex items-center justify-center",children:a.jsx("span",{className:"text-lg font-bold",children:z.charAt(0).toUpperCase()})}),a.jsxs("div",{className:"overflow-hidden",children:[a.jsx("p",{className:"font-bold text-white truncate",children:z}),a.jsx("p",{className:"text-xs text-gray-400 truncate",children:d.email})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsx(Se,{to:"/painel",onClick:()=>e(!1),className:"text-center py-2 bg-primary/10 text-primary border border-primary/30 rounded-lg font-bold text-sm hover:bg-primary/20",children:"Painel"}),a.jsx("button",{onClick:C,className:"text-center py-2 bg-red-900/20 text-red-400 border border-red-900/30 rounded-lg font-bold text-sm hover:bg-red-900/30",children:"Sair"})]})]}):a.jsxs("div",{className:"flex flex-col gap-3",children:[a.jsx(Se,{to:"/login",onClick:()=>e(!1),className:"w-full text-center py-3 border border-gray-600 rounded-lg text-white font-bold hover:bg-gray-800 transition-colors",children:"Entrar"}),a.jsx(Se,{to:"/cadastro",onClick:()=>e(!1),className:"w-full text-center py-3 bg-gradient-to-r from-primary to-secondary text-white font-bold rounded-lg shadow-lg hover:shadow-secondary/40 transition-all",children:"Criar Conta Grtis"})]})})]})]})]})},EM=()=>a.jsx("footer",{className:"bg-dark border-t border-gray-800",children:a.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center text-center md:text-left",children:[a.jsxs("div",{className:"mb-4 md:mb-0",children:[a.jsxs("p",{className:"text-gray-400",children:[" ",new Date().getFullYear()," RESONA. Todos os direitos reservados."]}),a.jsxs("div",{className:"mt-2 space-x-4",children:[a.jsx(Se,{to:"/termos",className:"text-gray-400 hover:text-primary transition-colors duration-300",children:"Termos de Uso"}),a.jsx("span",{className:"text-gray-600",children:"|"}),a.jsx(Se,{to:"/privacidade",className:"text-gray-400 hover:text-primary transition-colors duration-300",children:"Poltica de Privacidade"})]})]}),a.jsxs("div",{className:"flex space-x-6",children:[a.jsx("a",{href:"#","aria-label":"Facebook",className:"text-gray-400 hover:text-primary transition-colors duration-300",children:a.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:a.jsx("path",{fillRule:"evenodd",d:"M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.988C18.343 21.128 22 16.991 22 12z",clipRule:"evenodd"})})}),a.jsx("a",{href:"#","aria-label":"Instagram",className:"text-gray-400 hover:text-primary transition-colors duration-300",children:a.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:a.jsx("path",{fillRule:"evenodd",d:"M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.218 2.427.465a4.902 4.902 0 011.772 1.153 4.902 4.902 0 011.153 1.772c.247.636.416 1.363.465 2.427.048 1.024.06 1.378.06 3.808s-.012 2.784-.06 3.808c-.049 1.064-.218 1.791-.465 2.427a4.902 4.902 0 01-1.153 1.772 4.902 4.902 0 01-1.772 1.153c-.636.247-1.363.416-2.427.465-1.024.048-1.378.06-3.808.06s-2.784-.012-3.808-.06c-1.064-.049-1.791-.218-2.427-.465a4.902 4.902 0 01-1.772-1.153 4.902 4.902 0 01-1.153-1.772c-.247-.636-.416-1.363-.465-2.427-.048-1.024-.06-1.378-.06-3.808s.012-2.784.06-3.808c.049-1.064.218-1.791.465-2.427a4.902 4.902 0 011.153-1.772A4.902 4.902 0 016.08 2.525c.636-.247 1.363-.416 2.427-.465C9.53 2.013 9.884 2 12.315 2zM12 7a5 5 0 100 10 5 5 0 000-10zm0 8a3 3 0 110-6 3 3 0 010 6zm5.25-10a1.25 1.25 0 100 2.5 1.25 1.25 0 000-2.5z",clipRule:"evenodd"})})}),a.jsx("a",{href:"#","aria-label":"Twitter",className:"text-gray-400 hover:text-primary transition-colors duration-300",children:a.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:a.jsx("path",{d:"M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.71v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84"})})})]})]})})}),ms=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),Ln=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),Wt=({className:t})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),At=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"currentColor",viewBox:"0 0 24 24",strokeWidth:0,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 00-.182.557l1.285 5.385a.562.562 0 01-.84.61l-4.725-2.885a.563.563 0 00-.586 0L6.982 20.54a.562.562 0 01-.84-.61l1.285-5.386a.562.562 0 00-.182-.557l-4.204-3.602a.563.563 0 01.321-.988l5.518-.442a.563.563 0 00.475-.345L11.48 3.5z"})}),Ft=({className:t="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.293 2.293a1 1 0 010 1.414l-2.293 2.293m0 10.586l2.293-2.293a1 1 0 011.414 0l2.293 2.293M17 3l2.293 2.293a1 1 0 010 1.414l-2.293 2.293m0 10.586l2.293-2.293a1 1 0 011.414 0l2.293 2.293M9 12l2.293-2.293a1 1 0 011.414 0L15 12m0 0l2.293 2.293a1 1 0 010 1.414L15 18m-6-6l-2.293 2.293a1 1 0 000 1.414L9 18"})}),Oe=({className:t="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),ma=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),Ms=({className:t="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})}),CM=({evento:t})=>{var u,f;const e=(u=t.artistas)==null?void 0:u.usuarios,s=(f=t.estabelecimentos)==null?void 0:f.usuarios;if(!e||!s)return null;const n=new Date(t.data_evento),i=n.getUTCDate(),l=n.toLocaleString("pt-BR",{month:"short",timeZone:"UTC"}).toUpperCase().replace(".",""),d=e.foto_url?`${Ie.getPublicUrl("perfis",e.foto_url)}?t=${new Date().getTime()}`:"https://images.unsplash.com/photo-1511379938547-c1f69419868d?q=80&w=2070&auto=format&fit=crop";return a.jsxs(Se,{to:`/artista/${t.artistas.usuario_id}`,className:"block relative group overflow-hidden rounded-lg h-80 w-full transition-transform hover:-translate-y-1 duration-300 shadow-md hover:shadow-xl border border-gray-800",children:[a.jsx("img",{src:d,alt:e.nome,loading:"lazy",className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-dark via-dark/20 to-transparent opacity-90"}),a.jsxs("div",{className:"absolute top-4 right-4 bg-black/60 backdrop-blur-sm px-3 py-1 rounded-full border border-white/10 flex flex-col items-center min-w-[3.5rem]",children:[a.jsx("span",{className:"text-[10px] font-bold text-primary uppercase tracking-wider leading-none mb-0.5",children:l}),a.jsx("span",{className:"text-lg font-extrabold text-white leading-none",children:i})]}),a.jsxs("div",{className:"absolute bottom-0 left-0 p-6 w-full",children:[a.jsx("p",{className:"text-[10px] font-bold text-primary uppercase tracking-wider mb-1 opacity-80",children:"Show Confirmado"}),a.jsx("h3",{className:"text-xl font-bold text-white font-poppins mb-1 leading-tight group-hover:text-primary transition-colors truncate",children:e.nome}),a.jsxs("div",{className:"flex items-center text-gray-400 text-sm mb-3",children:[a.jsx(Wt,{className:"w-3 h-3 mr-1 text-white"}),a.jsxs("span",{className:"truncate text-gray-300",children:["no ",s.nome]})]}),a.jsxs("div",{className:"text-xs font-bold text-primary flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity transform translate-y-2 group-hover:translate-y-0 duration-300",children:["Ver Detalhes ",a.jsx(Ms,{className:"w-4 h-4"})]})]})]})},TM=()=>{const[t,e]=N.useState([]),[s,n]=N.useState(!0),[i,l]=N.useState(null);return N.useEffect(()=>{(async()=>{n(!0);try{const u=await da.getUpcomingPublicEvents(4);e(u)}catch(u){l("No foi possvel carregar as apresentaes."),console.error(u)}finally{n(!1)}})()},[]),i?null:!s&&t.length===0?a.jsx("section",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:a.jsxs("div",{className:"text-center py-12 border border-dashed border-gray-800 rounded-lg bg-gray-800/30",children:[a.jsx(ma,{className:"w-10 h-10 mx-auto text-gray-600 mb-3 opacity-50"}),a.jsx("p",{className:"text-gray-500 text-sm",children:"Nenhum show pblico agendado no momento."})]})}):a.jsxs("section",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsx("div",{className:"flex justify-between items-end mb-8",children:a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-white font-poppins",children:"Agenda de Shows"}),a.jsx("p",{className:"text-gray-400 mt-1 text-sm",children:"Prximas apresentaes confirmadas."})]})}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:s?Array.from({length:4}).map((d,u)=>a.jsx("div",{className:"bg-gray-800 rounded-lg overflow-hidden h-80 animate-pulse",children:a.jsx("div",{className:"h-full bg-gray-700"})},u)):t.map(d=>a.jsx(CM,{evento:d},d.id))})]})},AM=()=>a.jsxs("div",{className:"w-full bg-gray-800 rounded-lg overflow-hidden shadow-lg animate-pulse",children:[a.jsx("div",{className:"w-full h-80 bg-gray-700"}),a.jsxs("div",{className:"p-4 text-center",children:[a.jsx("div",{className:"h-5 bg-gray-700 rounded w-3/4 mx-auto mb-2"}),a.jsx("div",{className:"h-4 bg-gray-700 rounded w-1/2 mx-auto mb-2"}),a.jsx("div",{className:"h-3 bg-gray-700 rounded w-1/3 mx-auto"})]})]});var lf,hb;function RM(){if(hb)return lf;hb=1;var t=typeof Element<"u",e=typeof Map=="function",s=typeof Set=="function",n=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function i(l,d){if(l===d)return!0;if(l&&d&&typeof l=="object"&&typeof d=="object"){if(l.constructor!==d.constructor)return!1;var u,f,m;if(Array.isArray(l)){if(u=l.length,u!=d.length)return!1;for(f=u;f--!==0;)if(!i(l[f],d[f]))return!1;return!0}var g;if(e&&l instanceof Map&&d instanceof Map){if(l.size!==d.size)return!1;for(g=l.entries();!(f=g.next()).done;)if(!d.has(f.value[0]))return!1;for(g=l.entries();!(f=g.next()).done;)if(!i(f.value[1],d.get(f.value[0])))return!1;return!0}if(s&&l instanceof Set&&d instanceof Set){if(l.size!==d.size)return!1;for(g=l.entries();!(f=g.next()).done;)if(!d.has(f.value[0]))return!1;return!0}if(n&&ArrayBuffer.isView(l)&&ArrayBuffer.isView(d)){if(u=l.length,u!=d.length)return!1;for(f=u;f--!==0;)if(l[f]!==d[f])return!1;return!0}if(l.constructor===RegExp)return l.source===d.source&&l.flags===d.flags;if(l.valueOf!==Object.prototype.valueOf&&typeof l.valueOf=="function"&&typeof d.valueOf=="function")return l.valueOf()===d.valueOf();if(l.toString!==Object.prototype.toString&&typeof l.toString=="function"&&typeof d.toString=="function")return l.toString()===d.toString();if(m=Object.keys(l),u=m.length,u!==Object.keys(d).length)return!1;for(f=u;f--!==0;)if(!Object.prototype.hasOwnProperty.call(d,m[f]))return!1;if(t&&l instanceof Element)return!1;for(f=u;f--!==0;)if(!((m[f]==="_owner"||m[f]==="__v"||m[f]==="__o")&&l.$$typeof)&&!i(l[m[f]],d[m[f]]))return!1;return!0}return l!==l&&d!==d}return lf=function(d,u){try{return i(d,u)}catch(f){if((f.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw f}},lf}var kM=RM();const MM=fr(kM);var cf,fb;function IM(){if(fb)return cf;fb=1;var t=function(e,s,n,i,l,d,u,f){if(!e){var m;if(s===void 0)m=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var g=[n,i,l,d,u,f],v=0;m=new Error(s.replace(/%s/g,function(){return g[v++]})),m.name="Invariant Violation"}throw m.framesToPop=1,m}};return cf=t,cf}var DM=IM();const mb=fr(DM);var df,pb;function PM(){return pb||(pb=1,df=function(e,s,n,i){var l=n?n.call(i,e,s):void 0;if(l!==void 0)return!!l;if(e===s)return!0;if(typeof e!="object"||!e||typeof s!="object"||!s)return!1;var d=Object.keys(e),u=Object.keys(s);if(d.length!==u.length)return!1;for(var f=Object.prototype.hasOwnProperty.bind(s),m=0;m<d.length;m++){var g=d[m];if(!f(g))return!1;var v=e[g],b=s[g];if(l=n?n.call(i,v,b,g):void 0,l===!1||l===void 0&&v!==b)return!1}return!0}),df}var UM=PM();const LM=fr(UM);var DN=(t=>(t.BASE="base",t.BODY="body",t.HEAD="head",t.HTML="html",t.LINK="link",t.META="meta",t.NOSCRIPT="noscript",t.SCRIPT="script",t.STYLE="style",t.TITLE="title",t.FRAGMENT="Symbol(react.fragment)",t))(DN||{}),uf={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}},gb=Object.values(DN),qm={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},OM=Object.entries(qm).reduce((t,[e,s])=>(t[s]=e,t),{}),ua="data-rh",wo={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate",PRIORITIZE_SEO_TAGS:"prioritizeSeoTags"},No=(t,e)=>{for(let s=t.length-1;s>=0;s-=1){const n=t[s];if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}return null},qM=t=>{let e=No(t,"title");const s=No(t,wo.TITLE_TEMPLATE);if(Array.isArray(e)&&(e=e.join("")),s&&e)return s.replace(/%s/g,()=>e);const n=No(t,wo.DEFAULT_TITLE);return e||n||void 0},BM=t=>No(t,wo.ON_CHANGE_CLIENT_STATE)||(()=>{}),hf=(t,e)=>e.filter(s=>typeof s[t]<"u").map(s=>s[t]).reduce((s,n)=>({...s,...n}),{}),$M=(t,e)=>e.filter(s=>typeof s.base<"u").map(s=>s.base).reverse().reduce((s,n)=>{if(!s.length){const i=Object.keys(n);for(let l=0;l<i.length;l+=1){const u=i[l].toLowerCase();if(t.indexOf(u)!==-1&&n[u])return s.concat(n)}}return s},[]),zM=t=>console&&typeof console.warn=="function"&&console.warn(t),Di=(t,e,s)=>{const n={};return s.filter(i=>Array.isArray(i[t])?!0:(typeof i[t]<"u"&&zM(`Helmet: ${t} should be of type "Array". Instead found type "${typeof i[t]}"`),!1)).map(i=>i[t]).reverse().reduce((i,l)=>{const d={};l.filter(f=>{let m;const g=Object.keys(f);for(let b=0;b<g.length;b+=1){const _=g[b],S=_.toLowerCase();e.indexOf(S)!==-1&&!(m==="rel"&&f[m].toLowerCase()==="canonical")&&!(S==="rel"&&f[S].toLowerCase()==="stylesheet")&&(m=S),e.indexOf(_)!==-1&&(_==="innerHTML"||_==="cssText"||_==="itemprop")&&(m=_)}if(!m||!f[m])return!1;const v=f[m].toLowerCase();return n[m]||(n[m]={}),d[m]||(d[m]={}),n[m][v]?!1:(d[m][v]=!0,!0)}).reverse().forEach(f=>i.push(f));const u=Object.keys(d);for(let f=0;f<u.length;f+=1){const m=u[f],g={...n[m],...d[m]};n[m]=g}return i},[]).reverse()},VM=(t,e)=>{if(Array.isArray(t)&&t.length){for(let s=0;s<t.length;s+=1)if(t[s][e])return!0}return!1},HM=t=>({baseTag:$M(["href"],t),bodyAttributes:hf("bodyAttributes",t),defer:No(t,wo.DEFER),encode:No(t,wo.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:hf("htmlAttributes",t),linkTags:Di("link",["rel","href"],t),metaTags:Di("meta",["name","charset","http-equiv","property","itemprop"],t),noscriptTags:Di("noscript",["innerHTML"],t),onChangeClientState:BM(t),scriptTags:Di("script",["src","innerHTML"],t),styleTags:Di("style",["cssText"],t),title:qM(t),titleAttributes:hf("titleAttributes",t),prioritizeSeoTags:VM(t,wo.PRIORITIZE_SEO_TAGS)}),PN=t=>Array.isArray(t)?t.join(""):t,GM=(t,e)=>{const s=Object.keys(t);for(let n=0;n<s.length;n+=1)if(e[s[n]]&&e[s[n]].includes(t[s[n]]))return!0;return!1},ff=(t,e)=>Array.isArray(t)?t.reduce((s,n)=>(GM(n,e)?s.priority.push(n):s.default.push(n),s),{priority:[],default:[]}):{default:t,priority:[]},xb=(t,e)=>({...t,[e]:void 0}),FM=["noscript","script","style"],dm=(t,e=!0)=>e===!1?String(t):String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),UN=t=>Object.keys(t).reduce((e,s)=>{const n=typeof t[s]<"u"?`${s}="${t[s]}"`:`${s}`;return e?`${e} ${n}`:n},""),JM=(t,e,s,n)=>{const i=UN(s),l=PN(e);return i?`<${t} ${ua}="true" ${i}>${dm(l,n)}</${t}>`:`<${t} ${ua}="true">${dm(l,n)}</${t}>`},KM=(t,e,s=!0)=>e.reduce((n,i)=>{const l=i,d=Object.keys(l).filter(m=>!(m==="innerHTML"||m==="cssText")).reduce((m,g)=>{const v=typeof l[g]>"u"?g:`${g}="${dm(l[g],s)}"`;return m?`${m} ${v}`:v},""),u=l.innerHTML||l.cssText||"",f=FM.indexOf(t)===-1;return`${n}<${t} ${ua}="true" ${d}${f?"/>":`>${u}</${t}>`}`},""),LN=(t,e={})=>Object.keys(t).reduce((s,n)=>{const i=qm[n];return s[i||n]=t[n],s},e),YM=(t,e,s)=>{const n={key:e,[ua]:!0},i=LN(s,n);return[qe.createElement("title",i,e)]},Kc=(t,e)=>e.map((s,n)=>{const i={key:n,[ua]:!0};return Object.keys(s).forEach(l=>{const u=qm[l]||l;if(u==="innerHTML"||u==="cssText"){const f=s.innerHTML||s.cssText;i.dangerouslySetInnerHTML={__html:f}}else i[u]=s[l]}),qe.createElement(t,i)}),Ys=(t,e,s=!0)=>{switch(t){case"title":return{toComponent:()=>YM(t,e.title,e.titleAttributes),toString:()=>JM(t,e.title,e.titleAttributes,s)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>LN(e),toString:()=>UN(e)};default:return{toComponent:()=>Kc(t,e),toString:()=>KM(t,e,s)}}},WM=({metaTags:t,linkTags:e,scriptTags:s,encode:n})=>{const i=ff(t,uf.meta),l=ff(e,uf.link),d=ff(s,uf.script);return{priorityMethods:{toComponent:()=>[...Kc("meta",i.priority),...Kc("link",l.priority),...Kc("script",d.priority)],toString:()=>`${Ys("meta",i.priority,n)} ${Ys("link",l.priority,n)} ${Ys("script",d.priority,n)}`},metaTags:i.default,linkTags:l.default,scriptTags:d.default}},XM=t=>{const{baseTag:e,bodyAttributes:s,encode:n=!0,htmlAttributes:i,noscriptTags:l,styleTags:d,title:u="",titleAttributes:f,prioritizeSeoTags:m}=t;let{linkTags:g,metaTags:v,scriptTags:b}=t,_={toComponent:()=>{},toString:()=>""};return m&&({priorityMethods:_,linkTags:g,metaTags:v,scriptTags:b}=WM(t)),{priority:_,base:Ys("base",e,n),bodyAttributes:Ys("bodyAttributes",s,n),htmlAttributes:Ys("htmlAttributes",i,n),link:Ys("link",g,n),meta:Ys("meta",v,n),noscript:Ys("noscript",l,n),script:Ys("script",b,n),style:Ys("style",d,n),title:Ys("title",{title:u,titleAttributes:f},n)}},um=XM,Dc=[],ON=!!(typeof window<"u"&&window.document&&window.document.createElement),hm=class{constructor(t,e){Ka(this,"instances",[]);Ka(this,"canUseDOM",ON);Ka(this,"context");Ka(this,"value",{setHelmet:t=>{this.context.helmet=t},helmetInstances:{get:()=>this.canUseDOM?Dc:this.instances,add:t=>{(this.canUseDOM?Dc:this.instances).push(t)},remove:t=>{const e=(this.canUseDOM?Dc:this.instances).indexOf(t);(this.canUseDOM?Dc:this.instances).splice(e,1)}}});this.context=t,this.canUseDOM=e||!1,e||(t.helmet=um({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},QM={},qN=qe.createContext(QM),dr,BN=(dr=class extends N.Component{constructor(s){super(s);Ka(this,"helmetData");this.helmetData=new hm(this.props.context||{},dr.canUseDOM)}render(){return qe.createElement(qN.Provider,{value:this.helmetData.value},this.props.children)}},Ka(dr,"canUseDOM",ON),dr),oo=(t,e)=>{const s=document.head||document.querySelector("head"),n=s.querySelectorAll(`${t}[${ua}]`),i=[].slice.call(n),l=[];let d;return e&&e.length&&e.forEach(u=>{const f=document.createElement(t);for(const m in u)if(Object.prototype.hasOwnProperty.call(u,m))if(m==="innerHTML")f.innerHTML=u.innerHTML;else if(m==="cssText")f.styleSheet?f.styleSheet.cssText=u.cssText:f.appendChild(document.createTextNode(u.cssText));else{const g=m,v=typeof u[g]>"u"?"":u[g];f.setAttribute(m,v)}f.setAttribute(ua,"true"),i.some((m,g)=>(d=g,f.isEqualNode(m)))?i.splice(d,1):l.push(f)}),i.forEach(u=>{var f;return(f=u.parentNode)==null?void 0:f.removeChild(u)}),l.forEach(u=>s.appendChild(u)),{oldTags:i,newTags:l}},fm=(t,e)=>{const s=document.getElementsByTagName(t)[0];if(!s)return;const n=s.getAttribute(ua),i=n?n.split(","):[],l=[...i],d=Object.keys(e);for(const u of d){const f=e[u]||"";s.getAttribute(u)!==f&&s.setAttribute(u,f),i.indexOf(u)===-1&&i.push(u);const m=l.indexOf(u);m!==-1&&l.splice(m,1)}for(let u=l.length-1;u>=0;u-=1)s.removeAttribute(l[u]);i.length===l.length?s.removeAttribute(ua):s.getAttribute(ua)!==d.join(",")&&s.setAttribute(ua,d.join(","))},ZM=(t,e)=>{typeof t<"u"&&document.title!==t&&(document.title=PN(t)),fm("title",e)},yb=(t,e)=>{const{baseTag:s,bodyAttributes:n,htmlAttributes:i,linkTags:l,metaTags:d,noscriptTags:u,onChangeClientState:f,scriptTags:m,styleTags:g,title:v,titleAttributes:b}=t;fm("body",n),fm("html",i),ZM(v,b);const _={baseTag:oo("base",s),linkTags:oo("link",l),metaTags:oo("meta",d),noscriptTags:oo("noscript",u),scriptTags:oo("script",m),styleTags:oo("style",g)},S={},E={};Object.keys(_).forEach(C=>{const{newTags:T,oldTags:R}=_[C];T.length&&(S[C]=T),R.length&&(E[C]=_[C].oldTags)}),e&&e(),f(t,S,E)},Pi=null,eI=t=>{Pi&&cancelAnimationFrame(Pi),t.defer?Pi=requestAnimationFrame(()=>{yb(t,()=>{Pi=null})}):(yb(t),Pi=null)},tI=eI,vb=class extends N.Component{constructor(){super(...arguments);Ka(this,"rendered",!1)}shouldComponentUpdate(e){return!LM(e,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:e}=this.props.context;e.remove(this),this.emitChange()}emitChange(){const{helmetInstances:e,setHelmet:s}=this.props.context;let n=null;const i=HM(e.get().map(l=>{const d={...l.props};return delete d.context,d}));BN.canUseDOM?tI(i):um&&(n=um(i)),s(n)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:e}=this.props.context;e.add(this),this.emitChange()}render(){return this.init(),null}},kf,sI=(kf=class extends N.Component{shouldComponentUpdate(t){return!MM(xb(this.props,"helmetData"),xb(t,"helmetData"))}mapNestedChildrenToProps(t,e){if(!e)return null;switch(t.type){case"script":case"noscript":return{innerHTML:e};case"style":return{cssText:e};default:throw new Error(`<${t.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(t,e,s,n){return{...e,[t.type]:[...e[t.type]||[],{...s,...this.mapNestedChildrenToProps(t,n)}]}}mapObjectTypeChildren(t,e,s,n){switch(t.type){case"title":return{...e,[t.type]:n,titleAttributes:{...s}};case"body":return{...e,bodyAttributes:{...s}};case"html":return{...e,htmlAttributes:{...s}};default:return{...e,[t.type]:{...s}}}}mapArrayTypeChildrenToProps(t,e){let s={...e};return Object.keys(t).forEach(n=>{s={...s,[n]:t[n]}}),s}warnOnInvalidChildren(t,e){return mb(gb.some(s=>t.type===s),typeof t.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${gb.join(", ")} are allowed. Helmet does not support rendering <${t.type}> elements. Refer to our API for more information.`),mb(!e||typeof e=="string"||Array.isArray(e)&&!e.some(s=>typeof s!="string"),`Helmet expects a string as a child of <${t.type}>. Did you forget to wrap your children in braces? ( <${t.type}>{\`\`}</${t.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(t,e){let s={};return qe.Children.forEach(t,n=>{if(!n||!n.props)return;const{children:i,...l}=n.props,d=Object.keys(l).reduce((f,m)=>(f[OM[m]||m]=l[m],f),{});let{type:u}=n;switch(typeof u=="symbol"?u=u.toString():this.warnOnInvalidChildren(n,i),u){case"Symbol(react.fragment)":e=this.mapChildrenToProps(i,e);break;case"link":case"meta":case"noscript":case"script":case"style":s=this.flattenArrayTypeChildren(n,s,d,i);break;default:e=this.mapObjectTypeChildren(n,e,d,i);break}}),this.mapArrayTypeChildrenToProps(s,e)}render(){const{children:t,...e}=this.props;let s={...e},{helmetData:n}=e;if(t&&(s=this.mapChildrenToProps(t,s)),n&&!(n instanceof hm)){const i=n;n=new hm(i.context,!0),delete s.helmetData}return n?qe.createElement(vb,{...s,context:n.value}):qe.createElement(qN.Consumer,null,i=>qe.createElement(vb,{...s,context:i}))}},Ka(kf,"defaultProps",{defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1}),kf);const Qt=({title:t,description:e="RESONA - Conectando Msicos e Palcos. A plataforma definitiva para artistas e estabelecimentos.",name:s="Resona",type:n="website",image:i="/og-image.jpg",url:l=typeof window<"u"?window.location.href:"",schema:d})=>{const{siteConfig:u}=ns(),f=typeof window<"u"?window.location.origin:"https://www.resona.app.br",m=i&&i.startsWith("http")?i:`${f}${i}`,g=l&&l.startsWith("http")?l:`${f}${l}`;return a.jsxs(sI,{children:[a.jsxs("title",{children:[t," | Resona"]}),a.jsx("meta",{name:"description",content:e}),a.jsx("link",{rel:"icon",type:"image/png",href:"/favicon.png"}),a.jsx("link",{rel:"apple-touch-icon",href:"/favicon.png"}),a.jsx("meta",{property:"og:type",content:n}),a.jsx("meta",{property:"og:title",content:t}),a.jsx("meta",{property:"og:description",content:e}),a.jsx("meta",{property:"og:image",content:m}),a.jsx("meta",{property:"og:url",content:g}),a.jsx("meta",{property:"og:site_name",content:s}),a.jsx("meta",{name:"twitter:creator",content:s}),a.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),a.jsx("meta",{name:"twitter:title",content:t}),a.jsx("meta",{name:"twitter:description",content:e}),a.jsx("meta",{name:"twitter:image",content:m}),d&&a.jsx("script",{type:"application/ld+json",children:JSON.stringify(d)}),u.scriptHead&&a.jsx("script",{type:"text/javascript",children:u.scriptHead.replace(/<script[^>]*>|<\/script>/gi,"")})]})},aI=()=>a.jsxs("div",{className:"w-full bg-gray-900 border-y border-gray-800 py-6 relative z-20 -mt-8 mb-12 shadow-xl mx-auto container max-w-6xl rounded-xl hidden md:flex justify-around items-center divide-x divide-gray-800",children:[a.jsxs("div",{className:"flex flex-col items-center px-4",children:[a.jsx("span",{className:"text-3xl font-bold text-white font-mono",children:"2k+"}),a.jsx("span",{className:"text-xs text-gray-400 uppercase tracking-wider font-semibold mt-1",children:"Artistas Ativos"})]}),a.jsxs("div",{className:"flex flex-col items-center px-4",children:[a.jsx("span",{className:"text-3xl font-bold text-white font-mono",children:"500+"}),a.jsx("span",{className:"text-xs text-gray-400 uppercase tracking-wider font-semibold mt-1",children:"Palcos Parceiros"})]}),a.jsxs("div",{className:"flex flex-col items-center px-4",children:[a.jsx("span",{className:"text-3xl font-bold text-primary font-mono",children:"98%"}),a.jsx("span",{className:"text-xs text-gray-400 uppercase tracking-wider font-semibold mt-1",children:"Shows Realizados"})]})]}),nI=({artist:t})=>{var l;const e="https://images.unsplash.com/photo-1511379938547-c1f69419868d?q=80&w=2070&auto=format&fit=crop",[s,n]=N.useState(e),i=t.plano==="pro";return N.useEffect(()=>{if(t.foto_url){const d=Ie.getPublicUrl("perfis",t.foto_url);n(d)}},[t.foto_url]),a.jsxs(Se,{to:`/artista/${t.id}`,className:`block relative group overflow-hidden rounded-2xl h-80 sm:h-96 w-full transition-all duration-500 shadow-lg border ${i?"border-primary/50 ring-1 ring-primary/20":"border-gray-800 hover:border-gray-600"}`,children:[a.jsx("img",{src:s,onError:()=>n(e),alt:t.nome,loading:"lazy",className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-black/40 to-transparent opacity-80 group-hover:opacity-90 transition-opacity"}),a.jsxs("div",{className:"absolute top-4 left-4 flex gap-2",children:[a.jsx("span",{className:"bg-black/60 backdrop-blur-md text-white text-[10px] font-bold px-3 py-1 rounded-full border border-white/10 uppercase tracking-wide",children:((l=t.artista)==null?void 0:l.genero_musical)||"Msico"}),i&&a.jsxs("span",{className:"bg-primary/90 text-dark text-[10px] font-black px-3 py-1 rounded-full border border-white/20 uppercase tracking-wide flex items-center gap-1",children:[a.jsx(Ft,{className:"w-3 h-3"})," PRO"]})]}),a.jsxs("div",{className:"absolute bottom-0 left-0 p-6 w-full translate-y-2 group-hover:translate-y-0 transition-transform duration-500",children:[a.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white font-poppins mb-1 leading-tight flex items-center gap-2",children:[t.nome,i&&a.jsx(Oe,{className:"w-5 h-5 text-primary"})]}),a.jsxs("div",{className:"flex items-center text-gray-300 text-sm mb-4",children:[a.jsx(Wt,{className:"w-3.5 h-3.5 mr-1.5 text-primary"}),a.jsx("span",{className:"truncate",children:t.cidade||"Brasil"})]})]})]})},rI=()=>{const{siteConfig:t}=ns(),[e,s]=N.useState([]),[n,i]=N.useState([]),[l,d]=N.useState(!0),[u,f]=N.useState("artista"),[m,g]=N.useState(""),v=Xt();N.useEffect(()=>{(async()=>{d(!0);try{const[E,C]=await Promise.all([Xe.getFeatured("artista",8),Xe.getFeatured("estabelecimento",4)]),T=E.sort((R,A)=>R.plano==="pro"&&A.plano!=="pro"?-1:R.plano!=="pro"&&A.plano==="pro"?1:0).slice(0,4);s(T),i(C)}catch(E){console.error(E)}finally{d(!1)}})()},[]);const b=S=>{S.preventDefault(),v(`/${u==="artista"?"artistas":"estabelecimentos"}?search=${encodeURIComponent(m)}`)},_={"@context":"https://schema.org","@type":"Organization",name:"Resona",url:"https://www.resona.app.br",logo:"https://www.resona.app.br/favicon.png",description:"A plataforma definitiva para conectar msicos e palcos no Brasil.",sameAs:["https://www.instagram.com/resona.app.br"]};return a.jsxs("div",{className:"bg-dark text-white font-sans overflow-x-hidden",children:[a.jsx(Qt,{title:"Home",description:"Conecte-se com msicos e locais incrveis. A plataforma ideal para agendar shows e expandir sua carreira musical.",schema:_}),a.jsxs("section",{className:"relative min-h-[85vh] flex flex-col items-center justify-center text-center px-4 pt-20 pb-20 overflow-hidden bg-gray-900",children:[a.jsxs("div",{className:"absolute inset-0 z-0",children:[t.homeBackgroundUrl&&a.jsx("img",{src:t.homeBackgroundUrl,className:"w-full h-full object-cover opacity-60",style:{filter:`blur(${t.heroBlur}px)`},alt:"Hero"}),a.jsx("div",{className:"absolute inset-0 transition-all duration-500",style:{backgroundColor:t.heroOverlayColor,opacity:t.heroOpacity}})]}),a.jsxs("div",{className:"relative z-10 w-full max-w-5xl mx-auto space-y-8 animate-fade-in",children:[a.jsxs("h1",{className:"text-4xl sm:text-5xl md:text-7xl font-black text-white tracking-tight leading-none",children:["Sua Msica ",a.jsx("br",{})," ",a.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-primary via-blue-400 to-secondary",children:"no Palco Certo"})]}),a.jsxs("div",{className:"bg-gray-900/60 backdrop-blur-xl p-3 rounded-2xl shadow-2xl max-w-2xl mx-auto mt-8 border border-white/10",children:[a.jsxs("div",{className:"flex p-1 bg-black/40 rounded-xl mb-3",children:[a.jsx("button",{onClick:()=>f("artista"),className:`flex-1 py-2 text-sm font-bold rounded-lg transition-all ${u==="artista"?"bg-primary text-dark":"text-gray-400"}`,children:"Artistas"}),a.jsx("button",{onClick:()=>f("estabelecimento"),className:`flex-1 py-2 text-sm font-bold rounded-lg transition-all ${u==="estabelecimento"?"bg-secondary text-white":"text-gray-400"}`,children:"Locais"})]}),a.jsxs("form",{onSubmit:b,className:"relative flex items-center",children:[a.jsx("input",{type:"text",value:m,onChange:S=>g(S.target.value),placeholder:"O que voc procura?",className:"w-full bg-gray-800/50 border border-transparent focus:border-gray-600 text-white rounded-xl py-4 pl-12 pr-32 outline-none"}),a.jsx(ms,{className:"absolute left-4 w-5 h-5 text-gray-500"}),a.jsx("button",{type:"submit",className:`absolute right-2 px-6 py-2 rounded-lg font-bold ${u==="artista"?"bg-primary text-dark":"bg-secondary text-white"}`,children:"Buscar"})]})]})]})]}),a.jsx(aI,{}),a.jsxs("section",{className:"container mx-auto px-4 py-16",children:[a.jsxs("div",{className:"flex justify-between items-end mb-8",children:[a.jsx("h2",{className:"text-3xl font-bold font-poppins",children:"Artistas em Destaque"}),a.jsx(Se,{to:"/artistas",className:"text-primary font-bold hover:underline",children:"Ver todos"})]}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:l?Array.from({length:4}).map((S,E)=>a.jsx(AM,{},E)):e.map(S=>a.jsx(nI,{artist:S},S.id))})]}),a.jsx("section",{className:"bg-gray-900 py-16",children:a.jsxs("div",{className:"container mx-auto px-4 text-center",children:[a.jsx("h2",{className:"text-3xl font-bold mb-12",children:"Por que usar o RESONA?"}),a.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[a.jsxs("div",{className:"p-6 bg-gray-800 rounded-xl border border-gray-700",children:[a.jsx("div",{className:"w-12 h-12 bg-primary/20 rounded-lg flex items-center justify-center mx-auto mb-4",children:a.jsx(Oe,{className:"text-primary w-6 h-6"})}),a.jsx("h3",{className:"font-bold mb-2",children:"Pagamento Seguro"}),a.jsx("p",{className:"text-gray-400 text-sm",children:"O valor do cach fica protegido em custdia at a realizao do show."})]}),a.jsxs("div",{className:"p-6 bg-gray-800 rounded-xl border border-gray-700",children:[a.jsx("div",{className:"w-12 h-12 bg-secondary/20 rounded-lg flex items-center justify-center mx-auto mb-4",children:a.jsx(Ln,{className:"text-secondary w-6 h-6"})}),a.jsx("h3",{className:"font-bold mb-2",children:"Contrato Digital"}),a.jsx("p",{className:"text-gray-400 text-sm",children:"Contratos gerados automaticamente com validade jurdica para sua segurana."})]}),a.jsxs("div",{className:"p-6 bg-gray-800 rounded-xl border border-gray-700",children:[a.jsx("div",{className:"w-12 h-12 bg-yellow-500/20 rounded-lg flex items-center justify-center mx-auto mb-4",children:a.jsx(At,{className:"text-yellow-500 w-6 h-6"})}),a.jsx("h3",{className:"font-bold mb-2",children:"Selo Pro"}),a.jsx("p",{className:"text-gray-400 text-sm",children:"Profissionalize seu perfil e tenha acesso a mais oportunidades de shows."})]})]})]})}),a.jsx(TM,{})]})},Pn=({className:t="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),Sa=({className:t="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.653-.124-1.282-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.653.124-1.282.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),oI=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 5.882V19.24a1.76 1.76 0 01-3.417.592l-2.147-6.354A2 2 0 017.37 11.25l4.017-2.231m5.01-1.25a2 2 0 00-1.848-2.915l-2.73.546A2 2 0 0011.37 9.75l2.147 6.354a1.76 1.76 0 01-3.417.592l-4.017-2.231"})}),mf=({title:t,children:e,icon:s})=>a.jsxs("div",{className:"bg-gray-900/50 p-8 rounded-2xl border border-gray-700/50 hover:border-primary/30 transition-all duration-300 hover:-translate-y-1 shadow-lg hover:shadow-primary/5 group",children:[a.jsx("div",{className:"w-14 h-14 bg-gray-800 rounded-xl flex items-center justify-center mb-6 group-hover:scale-110 transition-transform duration-300 border border-gray-700",children:a.jsx("div",{className:"text-primary group-hover:text-white transition-colors",children:s})}),a.jsx("h3",{className:"text-xl font-bold text-white mb-3 font-poppins",children:t}),a.jsx("p",{className:"text-gray-400 leading-relaxed text-sm",children:e})]}),pf=({photoUrl:t,name:e,role:s})=>a.jsxs("div",{className:"text-center group",children:[a.jsxs("div",{className:"relative inline-block mb-4",children:[a.jsx("div",{className:"w-32 h-32 rounded-full overflow-hidden border-4 border-gray-800 group-hover:border-primary transition-colors shadow-xl",children:a.jsx("img",{src:t,alt:e,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"})}),a.jsx("div",{className:"absolute inset-0 rounded-full bg-gradient-to-tr from-primary/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"})]}),a.jsx("h4",{className:"text-xl font-bold font-poppins text-white group-hover:text-primary transition-colors",children:e}),a.jsx("p",{className:"text-sm text-gray-500 font-medium uppercase tracking-wide mt-1",children:s})]}),iI=()=>{const{siteConfig:t}=ns(),e=t.homeBackgroundUrl||"https://images.unsplash.com/photo-1511671782779-c97d3d27a1d4?q=80&w=1974&auto=format&fit=crop";return a.jsxs("div",{className:"bg-dark text-white font-sans min-h-screen",children:[a.jsx(Qt,{title:"Sobre Ns",description:"O Resona nasceu para conectar msicos e estabelecimentos de forma transparente e segura. Conhea nossa histria e misso."}),a.jsxs("section",{className:"relative pt-40 pb-32 flex items-center justify-center text-center px-4 overflow-hidden",children:[a.jsxs("div",{className:"absolute inset-0 z-0 select-none pointer-events-none",children:[a.jsx("img",{src:e,className:"w-full h-full object-cover transition-all duration-700 ease-in-out scale-105",style:{filter:`blur(${t.heroBlur}px)`},alt:"Background"}),a.jsx("div",{className:"absolute inset-0 transition-all duration-500 ease-in-out mix-blend-multiply",style:{backgroundColor:t.heroOverlayColor,opacity:Math.max(t.heroOpacity,.7)}}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-dark/60 to-dark"})]}),a.jsxs("div",{className:"relative z-10 w-full max-w-4xl mx-auto space-y-8 animate-fade-in",children:[a.jsx("span",{className:"inline-block px-4 py-1.5 rounded-full bg-white/10 backdrop-blur-md border border-white/10 text-xs font-bold text-primary tracking-wider uppercase",children:"Nossa Histria"}),a.jsxs("h1",{className:"text-4xl md:text-7xl font-black text-white tracking-tight leading-none drop-shadow-2xl",children:["O Palco Digital da ",a.jsx("br",{}),a.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-primary to-secondary",children:"Msica Independente"})]}),a.jsx("p",{className:"max-w-2xl mx-auto text-lg md:text-xl text-gray-200 font-light leading-relaxed drop-shadow-md",children:"Conectando talento e oportunidade. O RESONA nasceu para simplificar a vida de quem vive de msica e de quem promove cultura."})]})]}),a.jsxs("div",{className:"pb-24 -mt-10 relative z-20",children:[a.jsx("section",{className:"container mx-auto px-4 sm:px-6 lg:px-8 mb-32",children:a.jsxs("div",{className:"grid md:grid-cols-2 gap-16 items-center",children:[a.jsxs("div",{className:"space-y-6",children:[a.jsxs("h2",{className:"text-3xl font-bold text-white font-poppins relative",children:[a.jsx("span",{className:"absolute -left-4 top-0 w-1 h-full bg-gradient-to-b from-primary to-transparent rounded-full"}),"Acreditamos na ",a.jsx("br",{})," Conexo Real"]}),a.jsx("p",{className:"text-gray-400 text-lg leading-relaxed",children:"O mercado da msica ao vivo sempre foi fragmentado. Bandas talentosas lutam para encontrar palcos, e estabelecimentos sofrem para encontrar a atrao certa."}),a.jsx("p",{className:"text-gray-400 text-lg leading-relaxed",children:"O RESONA  a resposta tecnolgica para esse problema humano. Criamos um ecossistema onde a negociao  transparente, o contrato  seguro e o pagamento  garantido."}),a.jsx("div",{className:"pt-4",children:a.jsxs(Se,{to:"/cadastro",className:"inline-flex items-center gap-2 text-primary font-bold hover:text-white transition-colors group",children:["Faa parte da comunidade ",a.jsx("span",{className:"group-hover:translate-x-1 transition-transform",children:""})]})})]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-primary/20 to-secondary/20 rounded-2xl transform rotate-3 blur-lg"}),a.jsx("img",{src:"https://images.unsplash.com/photo-1497032205916-ac775f0649ae?q=80&w=2070&auto=format&fit=crop",alt:"Manifesto Visual",className:"relative rounded-2xl shadow-2xl border border-gray-700 grayscale hover:grayscale-0 transition-all duration-700"})]})]})}),a.jsxs("section",{className:"container mx-auto px-4 sm:px-6 lg:px-8 mb-32",children:[a.jsxs("div",{className:"text-center mb-16",children:[a.jsx("h2",{className:"text-3xl font-bold text-white font-poppins mb-4",children:"Nossos Pilares"}),a.jsx("p",{className:"text-gray-400 max-w-2xl mx-auto",children:"Construmos essa plataforma baseados em princpios que valorizam a arte e o negcio."})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[a.jsx(mf,{title:"Transparncia",icon:a.jsx(Pn,{className:"w-8 h-8"}),children:"Sem letras midas. Contratos digitais claros, taxas visveis e um sistema de avaliao honesto para que voc saiba com quem est negociando."}),a.jsx(mf,{title:"Comunidade",icon:a.jsx(Sa,{className:"w-8 h-8"}),children:"No somos apenas um software. Somos uma rede de apoio que conecta artistas locais a palcos que valorizam a msica ao vivo."}),a.jsx(mf,{title:"Profissionalismo",icon:a.jsx(oI,{className:"w-8 h-8"}),children:"Elevamos o padro do mercado. Agenda organizada, pagamentos em custdia (Escrow) e ferramentas de gesto para carreiras srias."})]})]}),a.jsx("section",{className:"container mx-auto px-4 sm:px-6 lg:px-8 mb-32",children:a.jsxs("div",{className:"bg-gray-900 rounded-3xl p-8 md:p-16 border border-gray-800 relative overflow-hidden",children:[a.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-primary/5 rounded-full blur-3xl -mr-32 -mt-32"}),a.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-secondary/5 rounded-full blur-3xl -ml-32 -mb-32"}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-center relative z-10",children:[a.jsx("div",{className:"order-last md:order-first",children:a.jsx("img",{src:"https://images.unsplash.com/photo-1507874457470-272b3c8d8ee2?q=80&w=2070&auto=format&fit=crop",alt:"Impacto na cidade",className:"rounded-xl shadow-lg w-full h-80 object-cover opacity-80 hover:opacity-100 transition-opacity"})}),a.jsxs("div",{children:[a.jsxs("h2",{className:"text-3xl font-bold text-white mb-6 font-poppins",children:["Quando a arte ressoa,",a.jsx("br",{})," a cidade vibra."]}),a.jsx("p",{className:"text-gray-300 mb-6 leading-relaxed text-lg",children:"A msica ao vivo  a pulsao das cidades. O RESONA nasceu para fortalecer essa energia, transformando bares vazios em palcos vibrantes e msicos de garagem em atraes disputadas."}),a.jsx("div",{className:"border-l-4 border-secondary pl-6 py-2",children:a.jsx("p",{className:"text-xl italic text-gray-400 font-light",children:'"Nossa misso  garantir que nenhum talento fique sem palco e nenhum palco fique em silncio."'})})]})]})]})}),a.jsxs("section",{className:"container mx-auto px-4 sm:px-6 lg:px-8 mb-32",children:[a.jsxs("div",{className:"text-center mb-16",children:[a.jsx("h2",{className:"text-3xl font-bold text-white mb-4 font-poppins",children:"Mentes Criativas"}),a.jsx("p",{className:"text-gray-400 max-w-2xl mx-auto",children:"Um time apaixonado por tecnologia e movido por msica."})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-12 max-w-4xl mx-auto",children:[a.jsx(pf,{photoUrl:"https://images.unsplash.com/photo-1529626455594-4ff0802cfb7e?q=80&w=1974&auto=format&fit=crop",name:"Ana Silva",role:"Product Design"}),a.jsx(pf,{photoUrl:"https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?q=80&w=1974&auto=format&fit=crop",name:"Bruno Costa",role:"Tech Lead"}),a.jsx(pf,{photoUrl:"https://images.unsplash.com/photo-1492562080023-ab3db95bfbce?q=80&w=1948&auto=format&fit=crop",name:"Carlos Mendes",role:"Music Relations"})]})]}),a.jsx("section",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"relative rounded-2xl overflow-hidden p-12 md:p-20 text-center",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-900 to-black border border-gray-800"}),a.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] opacity-20"}),a.jsxs("div",{className:"relative z-10",children:[a.jsx("h2",{className:"text-3xl md:text-5xl font-black text-white mb-6 font-poppins tracking-tight",children:"Pronto para fazer barulho?"}),a.jsx("p",{className:"text-gray-400 text-lg max-w-2xl mx-auto mb-10",children:"Junte-se a milhares de artistas e estabelecimentos que j esto transformando a cena musical."}),a.jsx(Se,{to:"/cadastro",className:"inline-block bg-white text-dark font-bold py-4 px-10 rounded-full hover:bg-gray-200 transition-all duration-300 shadow-[0_0_20px_rgba(255,255,255,0.3)] hover:shadow-[0_0_30px_rgba(255,255,255,0.5)] transform hover:-translate-y-1 text-lg",children:"Comear Gratuitamente"})]})]})})]})]})},Eo=({className:t="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),lI=({className:t="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.364 5.636l-3.536 3.536m0 5.656l3.536 3.536M9.172 9.172L5.636 5.636m3.536 9.192l-3.536 3.536M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-5 0a4 4 0 11-8 0 4 4 0 018 0z"})}),cI=({className:t="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),ss=({className:t="w-6 h-6",...e})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,...e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),Pc=({title:t,children:e})=>{const[s,n]=N.useState(!1);return a.jsxs("div",{className:`border border-gray-700 rounded-xl overflow-hidden transition-all duration-300 ${s?"bg-gray-800/50 border-gray-600":"bg-gray-900/30"}`,children:[a.jsxs("button",{onClick:()=>n(!s),className:"w-full flex justify-between items-center text-left py-4 px-5 focus:outline-none group",children:[a.jsx("span",{className:`text-base font-medium transition-colors ${s?"text-primary":"text-white group-hover:text-gray-300"}`,children:t}),a.jsx("span",{className:`transform transition-transform duration-300 text-gray-500 group-hover:text-primary ${s?"rotate-90 text-primary":""}`,children:a.jsx(Ms,{className:"w-5 h-5"})})]}),a.jsx("div",{className:`overflow-hidden transition-all duration-300 ${s?"max-h-48 opacity-100":"max-h-0 opacity-0"}`,children:a.jsx("div",{className:"pb-5 px-5 text-gray-400 text-sm leading-relaxed border-t border-gray-700/50 pt-3",children:e})})]})},gf=({icon:t,title:e,email:s,colorClass:n})=>a.jsxs("div",{className:"bg-gray-800/50 p-6 rounded-2xl border border-gray-700 hover:border-gray-600 transition-all duration-300 hover:-translate-y-1 hover:shadow-xl group backdrop-blur-sm",children:[a.jsx("div",{className:`w-14 h-14 rounded-xl flex items-center justify-center mb-4 ${n} bg-opacity-20 border border-opacity-30`,children:a.jsx("div",{className:`${n.replace("bg-","text-").replace("/20","")}`,children:t})}),a.jsx("h3",{className:"text-lg font-bold text-white mb-2 font-poppins",children:e}),a.jsxs("a",{href:`mailto:${s}`,className:"text-gray-400 hover:text-white transition-colors text-sm flex items-center gap-2 group-hover:gap-3",children:[s," ",a.jsx("span",{className:"opacity-0 group-hover:opacity-100 transition-opacity",children:""})]})]}),dI=()=>{const{siteConfig:t}=ns(),[e,s]=N.useState(null),n=N.useRef(null),[i,l]=N.useState(!1),[d,u]=N.useState({nome:"",email:"",tipo:"Suporte tcnico",mensagem:""}),f=t.homeBackgroundUrl||"https://images.unsplash.com/photo-1516280440614-6697288d5d38?q=80&w=2070&auto=format&fit=crop";N.useEffect(()=>{if(e){const v=setTimeout(()=>s(null),5e3);return()=>clearTimeout(v)}},[e]);const m=v=>{const{id:b,value:_}=v.target;u(S=>({...S,[b]:_}))},g=async v=>{v.preventDefault(),l(!0),s(null);try{await yo.sendSupportMessage(d),s({type:"success",message:"Sua mensagem foi enviada com sucesso! Em breve entraremos em contato."}),u({nome:"",email:"",tipo:"Suporte tcnico",mensagem:""})}catch(b){s({type:"error",message:"Ocorreu um erro ao enviar sua mensagem. Tente novamente."}),console.error("Contact form error:",b.message)}finally{l(!1)}};return a.jsxs("div",{className:"bg-dark text-white font-sans min-h-screen",children:[a.jsx(Qt,{title:"Contato",description:"Fale com a equipe do Resona. Suporte tcnico, dvidas, parcerias e imprensa."}),a.jsxs("section",{className:"relative pt-32 pb-24 flex items-center justify-center text-center px-4 overflow-hidden",children:[a.jsxs("div",{className:"absolute inset-0 z-0 select-none pointer-events-none",children:[a.jsx("img",{src:f,className:"w-full h-full object-cover transition-all duration-700 ease-in-out scale-105",style:{filter:`blur(${t.heroBlur}px)`},alt:"Background"}),a.jsx("div",{className:"absolute inset-0 transition-all duration-500 ease-in-out mix-blend-multiply",style:{backgroundColor:t.heroOverlayColor,opacity:Math.max(t.heroOpacity,.7)}}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-dark/60 to-dark"})]}),a.jsxs("div",{className:"relative z-10 w-full max-w-4xl mx-auto space-y-6 animate-fade-in",children:[a.jsxs("h1",{className:"text-4xl md:text-6xl font-black text-white tracking-tight leading-none drop-shadow-2xl",children:["Fale com o ",a.jsx("span",{className:"text-primary",children:"RESONA"})]}),a.jsx("p",{className:"max-w-2xl mx-auto text-lg md:text-xl text-gray-200 font-light leading-relaxed drop-shadow-md",children:"Estamos aqui para ouvir, colaborar e amplificar a voz da msica. Escolha o canal ideal para sua necessidade."})]})]}),a.jsxs("section",{id:"contact-methods",className:"container mx-auto px-4 sm:px-6 lg:px-8 pb-24 -mt-16 relative z-20",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-20",children:[a.jsx(gf,{icon:a.jsx(Eo,{className:"w-7 h-7"}),title:"Atendimento Geral",email:"contato@resona.app.br",colorClass:"bg-primary border-primary"}),a.jsx(gf,{icon:a.jsx(lI,{className:"w-7 h-7"}),title:"Suporte Tcnico",email:"suporte@resona.app.br",colorClass:"bg-secondary border-secondary"}),a.jsx(gf,{icon:a.jsx(cI,{className:"w-7 h-7"}),title:"Parcerias & Imprensa",email:"parcerias@resona.app.br",colorClass:"bg-green-500 border-green-500"})]}),a.jsxs("div",{ref:n,className:"grid lg:grid-cols-2 gap-16 items-start",children:[a.jsxs("div",{className:"bg-gray-900/80 backdrop-blur-xl p-8 rounded-2xl shadow-2xl border border-gray-700/50",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h2",{className:"text-2xl font-bold text-white mb-2 font-poppins",children:"Envie uma mensagem"}),a.jsx("p",{className:"text-gray-400 text-sm",children:"Preencha o formulrio abaixo e retornaremos o mais rpido possvel."})]}),a.jsxs("form",{onSubmit:g,className:"space-y-5",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-5",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"nome",className:"block text-xs font-bold text-gray-400 uppercase mb-2 ml-1",children:"Nome"}),a.jsx("input",{type:"text",id:"nome",value:d.nome,onChange:m,required:!0,className:"w-full bg-gray-800 border border-gray-700 rounded-xl py-3 px-4 text-white focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all placeholder-gray-600",placeholder:"Seu nome"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-xs font-bold text-gray-400 uppercase mb-2 ml-1",children:"E-mail"}),a.jsx("input",{type:"email",id:"email",value:d.email,onChange:m,required:!0,className:"w-full bg-gray-800 border border-gray-700 rounded-xl py-3 px-4 text-white focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all placeholder-gray-600",placeholder:"seu@email.com"})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"tipo",className:"block text-xs font-bold text-gray-400 uppercase mb-2 ml-1",children:"Assunto"}),a.jsxs("div",{className:"relative",children:[a.jsxs("select",{id:"tipo",value:d.tipo,onChange:m,required:!0,className:"w-full bg-gray-800 border border-gray-700 rounded-xl py-3 px-4 text-white focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all appearance-none cursor-pointer",children:[a.jsx("option",{children:"Suporte tcnico"}),a.jsx("option",{children:"Dvida sobre cadastro"}),a.jsx("option",{children:"Reportar um problema"}),a.jsx("option",{children:"Parceria Comercial"}),a.jsx("option",{children:"Imprensa"}),a.jsx("option",{children:"Outros"})]}),a.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-4 text-gray-400",children:a.jsx(Ms,{className:"w-4 h-4 rotate-90"})})]})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"mensagem",className:"block text-xs font-bold text-gray-400 uppercase mb-2 ml-1",children:"Mensagem"}),a.jsx("textarea",{id:"mensagem",rows:5,value:d.mensagem,onChange:m,required:!0,className:"w-full bg-gray-800 border border-gray-700 rounded-xl py-3 px-4 text-white focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all placeholder-gray-600 resize-none",placeholder:"Como podemos ajudar?"})]}),e&&a.jsxs("div",{className:`p-4 rounded-xl flex items-start gap-3 ${e.type==="success"?"bg-green-500/10 text-green-400 border border-green-500/20":"bg-red-500/10 text-red-400 border border-red-500/20"}`,children:[e.type==="success"?a.jsx(Oe,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}):a.jsx(ss,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),a.jsx("p",{className:"text-sm",children:e.message})]}),a.jsx("button",{type:"submit",disabled:i,className:"w-full bg-gradient-to-r from-primary to-secondary text-white font-bold py-4 px-6 rounded-xl hover:shadow-lg hover:shadow-primary/20 hover:-translate-y-0.5 transition-all duration-300 disabled:opacity-50 disabled:transform-none",children:i?"Enviando...":"Enviar Mensagem"})]})]}),a.jsxs("aside",{className:"space-y-10",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-white mb-6 font-poppins",children:"Perguntas Frequentes"}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(Pc,{title:"O cadastro no RESONA  gratuito?",children:"Sim! O cadastro para artistas e estabelecimentos  100% gratuito. Cobramos apenas uma pequena taxa de servio sobre contratos fechados dentro da plataforma para garantir a segurana da transao."}),a.jsx(Pc,{title:"Como funciona o pagamento seguro?",children:"O valor pago pelo contratante fica retido em uma conta de custdia (Escrow) e s  liberado para o artista 24 horas aps a realizao do evento, garantindo segurana para ambos os lados."}),a.jsx(Pc,{title:"Posso cancelar um contrato?",children:"Sim, existem regras claras de cancelamento. Dependendo da antecedncia, pode haver reembolso total ou parcial. Em casos de fora maior, nossa equipe de suporte avalia a situao."}),a.jsx(Pc,{title:"Como divulgar minha banda?",children:"Mantenha seu perfil sempre atualizado com fotos de alta qualidade, vdeos de apresentaes e agenda. O algoritmo do RESONA recomenda artistas ativos para os estabelecimentos certos."})]})]}),a.jsxs("div",{className:"rounded-2xl overflow-hidden shadow-2xl relative group h-64 border border-gray-700",children:[a.jsx("img",{src:"https://images.unsplash.com/photo-1451187580459-43490279c0fa?q=80&w=2072&auto=format&fit=crop",alt:"Mapa Global",className:"w-full h-full object-cover opacity-60 group-hover:opacity-80 transition-opacity duration-700 transform group-hover:scale-105"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-dark via-transparent to-transparent"}),a.jsxs("div",{className:"absolute bottom-6 left-6 right-6",children:[a.jsx("h3",{className:"text-xl font-bold text-white font-poppins",children:"Onde estamos"}),a.jsx("p",{className:"text-gray-300 text-sm mt-1 max-w-sm",children:"Nossa equipe atua remotamente em todo o Brasil, conectando palcos e msicos de norte a sul."})]})]})]})]})]})]})},uI=()=>a.jsxs("div",{className:"bg-gray-800 rounded-lg overflow-hidden shadow-lg",children:[a.jsx("div",{className:"relative",children:a.jsx("div",{className:"w-full h-64 bg-gray-700 animate-pulse"})}),a.jsxs("div",{className:"p-4",children:[a.jsx("div",{className:"h-5 bg-gray-700 rounded w-3/4 mb-2 animate-pulse"}),a.jsx("div",{className:"h-4 bg-gray-700 rounded w-1/2 mb-4 animate-pulse"}),a.jsx("div",{className:"h-3 bg-gray-700 rounded w-full animate-pulse mb-1"}),a.jsx("div",{className:"h-3 bg-gray-700 rounded w-5/6 animate-pulse"}),a.jsx("div",{className:"h-3 bg-gray-700 rounded w-1/4 mt-2 animate-pulse"})]})]}),ja=({icon:t,title:e,description:s,actionLabel:n,actionLink:i,onAction:l})=>a.jsxs("div",{className:"flex flex-col items-center justify-center py-16 px-4 text-center border-2 border-dashed border-gray-700 rounded-xl bg-gray-800/30 transition-all hover:border-gray-600 hover:bg-gray-800/50 group",children:[a.jsxs("div",{className:"relative mb-4",children:[a.jsx("div",{className:"absolute inset-0 bg-primary/20 blur-xl rounded-full transform scale-75 opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),a.jsx("div",{className:"relative bg-gray-800 p-4 rounded-full shadow-lg ring-1 ring-white/10 z-10",children:a.jsx(t,{className:"w-12 h-12 text-gray-500 group-hover:text-primary transition-colors duration-300"})})]}),a.jsx("h3",{className:"text-xl font-bold text-white mb-2 font-poppins",children:e}),a.jsx("p",{className:"text-gray-400 max-w-sm mb-6 leading-relaxed",children:s}),n&&(l?a.jsx("button",{onClick:l,className:"px-6 py-2.5 bg-gradient-to-r from-primary to-secondary text-white font-bold rounded-full shadow-lg shadow-secondary/20 hover:shadow-secondary/40 transform hover:-translate-y-0.5 transition-all duration-300 flex items-center gap-2",children:n}):i?a.jsx(Se,{to:i,className:"px-6 py-2.5 bg-gradient-to-r from-primary to-secondary text-white font-bold rounded-full shadow-lg shadow-secondary/20 hover:shadow-secondary/40 transform hover:-translate-y-0.5 transition-all duration-300 flex items-center gap-2",children:n}):null)]}),_o=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2z"})}),hI=({profile:t,isAvailabilityFilterActive:e})=>{var _,S;const[s,n]=N.useState(!1),[i,l]=N.useState(!1),[d,u]=N.useState(0),[f,m]=N.useState([]),g=t.plano!=="free",v=t.plano==="business";N.useEffect(()=>{(()=>{var A;const C=Date.now(),R=[t.foto_url?`${Ie.getPublicUrl("perfis",t.foto_url)}?t=${C}`:"https://images.unsplash.com/photo-1511379938547-c1f69419868d?q=80&w=2070&auto=format&fit=crop"];(A=t.artista)!=null&&A.galeria_fotos&&t.artista.galeria_fotos.length>0&&t.artista.galeria_fotos.slice(0,3).forEach(z=>{const F=Ie.getPublicUrl("artista",z);F&&R.push(`${F}?t=${C}`)}),m(R)})()},[t]),N.useEffect(()=>{let E;return i&&f.length>1?E=setInterval(()=>{u(C=>(C+1)%f.length)},2e3):u(0),()=>clearInterval(E)},[i,f]);const b=((_=t.artista)==null?void 0:_.descricao)||"Artista talentoso pronto para elevar o nvel do seu evento.";return a.jsxs(Se,{to:`/artista/${t.id}`,className:`group relative bg-gray-900 rounded-2xl overflow-hidden border transition-all duration-300 hover:-translate-y-1 shadow-lg hover:shadow-2xl flex flex-col h-full ${g?v?"border-yellow-500/50 shadow-yellow-500/10":"border-primary/50 shadow-primary/10":"border-gray-800 hover:border-gray-600"}`,onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),children:[g&&a.jsx("div",{className:"absolute top-0 right-0 z-30 p-2",children:a.jsx("div",{className:`p-1 rounded-full backdrop-blur-md border ${v?"bg-yellow-500/20 border-yellow-500/40 text-yellow-500":"bg-primary/20 border-primary/40 text-primary"}`,children:a.jsx(Ft,{className:"w-3 h-3"})})}),a.jsxs("div",{className:"relative h-52 sm:h-64 overflow-hidden bg-gray-800",children:[a.jsx("div",{className:"w-full h-full relative",children:f.map((E,C)=>a.jsx("img",{src:E,alt:t.nome,loading:"lazy",onLoad:()=>C===0&&n(!0),className:`absolute inset-0 w-full h-full object-cover transition-opacity duration-700 ease-in-out ${C===d?"opacity-100 scale-105":"opacity-0 scale-100"} ${C===0&&!s?"opacity-0":""}`},C))}),!s&&a.jsx("div",{className:"absolute inset-0 bg-gray-800 animate-pulse z-10"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-900 via-gray-900/40 to-transparent opacity-90"}),a.jsxs("div",{className:"absolute top-4 left-4 z-20 flex flex-col gap-2",children:[a.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-[10px] font-bold uppercase tracking-wider backdrop-blur-sm shadow-lg ${g?"bg-primary text-dark":"bg-gray-800/80 text-gray-300 border border-gray-700"}`,children:[a.jsx(_o,{className:"w-3 h-3 mr-1"}),((S=t.artista)==null?void 0:S.genero_musical)||"Msico"]}),e&&a.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-wider bg-green-500 text-dark shadow-lg animate-pulse",children:[a.jsx(Oe,{className:"w-3 h-3 mr-1"})," Disponvel"]})]}),f.length>1&&a.jsx("div",{className:"absolute bottom-14 sm:bottom-16 left-0 right-0 flex justify-center gap-1 z-20 opacity-0 group-hover:opacity-100 transition-opacity",children:f.map((E,C)=>a.jsx("div",{className:`w-1 h-1 rounded-full transition-all duration-300 ${C===d?"bg-white scale-150":"bg-white/40"}`},C))})]}),a.jsxs("div",{className:"p-5 flex flex-col flex-grow relative -mt-10 sm:-mt-12 z-20",children:[a.jsxs("div",{className:"mb-auto",children:[a.jsxs("h3",{className:"text-lg sm:text-xl font-bold text-white font-poppins mb-1 leading-tight group-hover:text-primary transition-colors flex items-center gap-2",children:[t.nome,g&&a.jsx(Oe,{className:`w-4 h-4 ${v?"text-yellow-500":"text-primary"}`})]}),a.jsxs("div",{className:"flex items-center text-gray-400 text-xs mb-3 font-medium uppercase tracking-wide",children:[a.jsx(Wt,{className:"w-3.5 h-3.5 mr-1 text-primary"}),a.jsx("span",{className:"truncate",children:t.cidade||"Brasil"})]}),a.jsx("p",{className:"text-gray-400 text-sm leading-relaxed line-clamp-3",children:b})]}),a.jsxs("div",{className:"mt-5 pt-4 border-t border-gray-800 flex items-center justify-between group/btn",children:[a.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Ver Perfil Completo"}),a.jsx("div",{className:`w-8 h-8 rounded-full bg-gray-800 flex items-center justify-center transition-all duration-300 ${g?"text-primary group-hover/btn:bg-primary group-hover/btn:text-dark":"text-gray-400 group-hover/btn:text-white"}`,children:a.jsx(Ms,{className:"w-4 h-4"})})]})]})]})},Uc=8,fI=["Rock","Pop","Sertanejo","MPB","Eletrnica","Jazz","Forr","Samba","Rap"],mI=()=>{const{siteConfig:t}=ns(),[e,s]=N.useState([]),[n,i]=N.useState(!0),[l,d]=N.useState(!1),[u,f]=N.useState(null),[m,g]=N.useState(0),[v,b]=N.useState(!1),[_,S]=N.useState(0),[E,C]=N.useState(""),[T,R]=N.useState(""),[A,M]=N.useState(""),[z,F]=N.useState(""),[G,K]=N.useState(""),I=t.homeBackgroundUrl||"https://images.unsplash.com/photo-1501612780327-45045538702b?q=80&w=2070&auto=format&fit=crop";N.useEffect(()=>{const re=setTimeout(()=>K(E),500);return()=>clearTimeout(re)},[E]);const U=async()=>{i(!0),f(null);try{const{data:re,count:P}=await Xe.getArtists({search:G,city:A,genre:T,date:z||void 0,page:0,pageSize:Uc});s(re),S(P),b(P>Uc),g(1)}catch(re){f(he(re)),console.error(re)}finally{i(!1)}};N.useEffect(()=>{U()},[G,A,T,z]);const q=async()=>{if(!(l||!v)){d(!0);try{const{data:re}=await Xe.getArtists({search:G,city:A,genre:T,date:z||void 0,page:m,pageSize:Uc});s(O=>[...O,...re]);const P=(m+1)*Uc;b(P<_),g(O=>O+1)}catch(re){f("Erro ao carregar mais artistas: "+he(re))}finally{d(!1)}}},H=()=>{C(""),R(""),M(""),F("")},$=re=>{R(P=>P===re?"":re)},ie=new Date().toLocaleDateString("en-CA");return a.jsxs("div",{className:"bg-dark text-white font-sans min-h-screen",children:[a.jsx(Qt,{title:"Artistas",description:"Encontre bandas, msicos solo e talentos para o seu evento. Filtre por gnero, cidade e data."}),a.jsxs("section",{className:"relative pt-32 pb-24 flex items-center justify-center text-center px-4 overflow-hidden",children:[a.jsxs("div",{className:"absolute inset-0 z-0 select-none pointer-events-none",children:[a.jsx("img",{src:I,className:"w-full h-full object-cover transition-all duration-700 ease-in-out scale-105",style:{filter:`blur(${t.heroBlur}px)`},alt:"Background"}),a.jsx("div",{className:"absolute inset-0 transition-all duration-500 ease-in-out mix-blend-multiply",style:{backgroundColor:t.heroOverlayColor,opacity:Math.max(t.heroOpacity,.6)}}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-dark/50 to-dark"})]}),a.jsxs("div",{className:"relative z-10 w-full max-w-4xl mx-auto space-y-6 animate-fade-in",children:[a.jsxs("h1",{className:"text-4xl md:text-6xl font-black text-white tracking-tight leading-none drop-shadow-2xl",children:["Descubra ",a.jsx("span",{className:"text-primary",children:"Talentos"})]}),a.jsx("p",{className:"max-w-2xl mx-auto text-lg md:text-xl text-gray-200 font-light leading-relaxed drop-shadow-md",children:"Encontre bandas e msicos solo filtrando pela data exata do seu evento."})]})]}),a.jsxs("section",{id:"search-results",className:"container mx-auto px-4 sm:px-6 lg:px-8 pb-24 -mt-16 relative z-20",children:[a.jsxs("div",{className:"bg-gray-900/80 backdrop-blur-xl p-6 rounded-2xl shadow-2xl border border-gray-700/50 mb-12",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 items-center",children:[a.jsxs("div",{className:"relative group",children:[a.jsx("input",{type:"text",placeholder:"Buscar por nome...",value:E,onChange:re=>C(re.target.value),className:"w-full bg-gray-800/50 border border-gray-600 rounded-xl py-3 pl-11 pr-4 text-white focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all placeholder-gray-500 group-hover:bg-gray-800"}),a.jsx(ms,{className:"absolute left-4 top-3.5 w-5 h-5 text-gray-400 group-focus-within:text-primary transition-colors"})]}),a.jsxs("div",{className:"relative group",children:[a.jsx("input",{type:"text",placeholder:"Cidade",value:A,onChange:re=>M(re.target.value),className:"w-full bg-gray-800/50 border border-gray-600 rounded-xl py-3 pl-11 pr-4 text-white focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all placeholder-gray-500 group-hover:bg-gray-800"}),a.jsx(Wt,{className:"absolute left-4 top-3.5 w-5 h-5 text-gray-400 group-focus-within:text-primary transition-colors"})]}),a.jsxs("div",{className:"relative group",children:[a.jsx("input",{type:"date",value:z,min:ie,onChange:re=>F(re.target.value),className:"w-full bg-gray-800/50 border border-gray-600 rounded-xl py-3 pl-11 pr-4 text-white focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all group-hover:bg-gray-800 appearance-none"}),a.jsx(ma,{className:"absolute left-4 top-3.5 w-5 h-5 text-gray-400 group-focus-within:text-primary transition-colors"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:H,className:`flex-1 px-4 py-3 bg-red-500/10 text-red-400 hover:bg-red-500/20 hover:text-red-300 rounded-xl font-semibold transition-all border border-red-500/20 flex items-center justify-center gap-2 ${E||A||T||z?"opacity-100":"opacity-0 pointer-events-none"}`,children:[a.jsx(It,{className:"w-4 h-4"})," Limpar"]}),a.jsx("button",{onClick:U,className:"flex-1 px-4 py-3 bg-primary text-dark rounded-xl font-black hover:bg-white transition-all shadow-lg shadow-primary/20",children:"Filtrar"})]})]}),a.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:items-center gap-4",children:[a.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider ml-1 whitespace-nowrap",children:"Estilos Populares:"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:fI.map(re=>a.jsx("button",{onClick:()=>$(re),className:`px-4 py-1.5 text-xs rounded-full transition-all border font-bold ${T===re?"bg-primary text-dark border-primary":"bg-gray-800 border-gray-700 text-gray-400 hover:text-white"}`,children:re},re))})]})]}),n?a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8",children:Array.from({length:8}).map((re,P)=>a.jsx(uI,{},P))}):u?a.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 p-12 rounded-2xl text-center",children:[a.jsx(ss,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),a.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Erro na busca"}),a.jsx("p",{className:"text-gray-400 max-w-md mx-auto mb-6",children:u}),a.jsx("button",{onClick:U,className:"px-8 py-2 bg-gray-700 rounded-full font-bold hover:bg-gray-600",children:"Tentar Novamente"})]}):e.length>0?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"flex justify-between items-center mb-8 px-2 border-b border-gray-800 pb-4",children:a.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[z?a.jsxs(a.Fragment,{children:[a.jsx(ma,{className:"w-5 h-5 text-primary"})," Disponveis em ",new Date(z).toLocaleDateString("pt-BR",{timeZone:"UTC"})]}):"Todos os Artistas",a.jsxs("span",{className:"text-gray-500 text-sm font-normal",children:["(",_,")"]})]})}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8",children:e.map(re=>a.jsx(hI,{profile:re,isAvailabilityFilterActive:!!z},re.id))}),v&&a.jsx("div",{className:"text-center mt-16",children:a.jsx("button",{onClick:q,disabled:l,className:"bg-gray-800 border border-gray-700 text-white font-bold py-3 px-10 rounded-full hover:bg-gray-700 hover:border-gray-500 transition-all duration-300 disabled:opacity-50 transform hover:scale-105 shadow-lg",children:l?"Carregando...":"Carregar Mais Artistas"})})]}):a.jsx("div",{className:"py-12",children:a.jsx(ja,{icon:ma,title:"Nenhum artista disponvel",description:`Infelizmente no encontramos artistas livres para o dia ${z?new Date(z).toLocaleDateString("pt-BR",{timeZone:"UTC"}):""} com os filtros selecionados.`,actionLabel:"Limpar Filtros",onAction:H})})]})]})},pI=()=>a.jsxs("div",{className:"bg-gray-800 rounded-lg overflow-hidden shadow-lg",children:[a.jsx("div",{className:"relative",children:a.jsx("div",{className:"w-full h-56 bg-gray-700 animate-pulse"})}),a.jsxs("div",{className:"p-4",children:[a.jsx("div",{className:"h-5 bg-gray-700 rounded w-3/4 mb-2 animate-pulse"}),a.jsx("div",{className:"h-4 bg-gray-700 rounded w-1/2 mb-4 animate-pulse"}),a.jsx("div",{className:"h-3 bg-gray-700 rounded w-full animate-pulse mb-1"}),a.jsx("div",{className:"h-3 bg-gray-700 rounded w-5/6 animate-pulse"})]})]}),gI=({profile:t})=>{var u,f;const e="https://images.unsplash.com/photo-1514320291840-2e0a9bf2a9ae?q=80&w=2070&auto=format&fit=crop",[s,n]=N.useState(e),[i,l]=N.useState(!1);N.useEffect(()=>{(()=>{var S;const g=(S=t.estabelecimento)==null?void 0:S.foto_capa,v=t.foto_url,b=Date.now(),_=g||v;if(_){const E=g?"estabelecimento":"perfis",C=Ie.getPublicUrl(E,_);n(C?`${C}?t=${b}`:e)}})()},[t]);const d=((u=t.estabelecimento)==null?void 0:u.descricao)||"Espao pronto para receber grandes eventos.";return a.jsxs(Se,{to:`/estabelecimento/${t.id}`,className:"group relative bg-gray-900 rounded-2xl overflow-hidden border border-gray-800 hover:border-gray-600 transition-all duration-300 hover:-translate-y-1 shadow-lg hover:shadow-2xl hover:shadow-secondary/10 flex flex-col h-full",children:[a.jsxs("div",{className:"relative h-52 sm:h-64 overflow-hidden bg-gray-800",children:[a.jsx("img",{src:s,onError:()=>n(e),alt:t.nome,loading:"lazy",onLoad:()=>l(!0),className:`absolute inset-0 w-full h-full object-cover transition-all duration-700 ease-in-out group-hover:scale-110 ${i?"opacity-100":"opacity-0"}`}),!i&&a.jsx("div",{className:"absolute inset-0 bg-gray-800 animate-pulse z-10"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-900 via-gray-900/20 to-transparent opacity-90"}),((f=t.estabelecimento)==null?void 0:f.capacidade)&&a.jsx("div",{className:"absolute top-4 right-4 z-20",children:a.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-[10px] sm:text-xs font-bold bg-secondary/90 text-white backdrop-blur-sm shadow-lg border border-secondary/50",children:[a.jsx(Sa,{className:"w-3 h-3 mr-1.5"}),t.estabelecimento.capacidade," Pessoas"]})})]}),a.jsxs("div",{className:"p-5 flex flex-col flex-grow relative -mt-10 sm:-mt-12 z-20",children:[a.jsxs("div",{className:"mb-auto",children:[a.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white font-poppins mb-1 leading-tight group-hover:text-secondary transition-colors line-clamp-1",children:t.nome}),a.jsxs("div",{className:"flex items-center text-gray-400 text-xs mb-3 font-medium uppercase tracking-wide",children:[a.jsx(Wt,{className:"w-3.5 h-3.5 mr-1 text-secondary"}),a.jsx("span",{className:"truncate",children:t.cidade||"Brasil"})]}),a.jsx("p",{className:"text-gray-400 text-sm leading-relaxed line-clamp-3",children:d})]}),a.jsxs("div",{className:"mt-5 pt-4 border-t border-gray-800 flex items-center justify-between group/btn",children:[a.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Ver Detalhes do Local"}),a.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-800 flex items-center justify-center text-secondary group-hover/btn:bg-secondary group-hover/btn:text-white transition-all duration-300",children:a.jsx(Ms,{className:"w-4 h-4"})})]})]})]})},Lc=9,xI=()=>{const{siteConfig:t}=ns(),[e,s]=N.useState([]),[n,i]=N.useState(!0),[l,d]=N.useState(!1),[u,f]=N.useState(null),[m,g]=N.useState(0),[v,b]=N.useState(!1),[_,S]=N.useState(0),[E,C]=N.useState(""),[T,R]=N.useState(""),[A,M]=N.useState(""),z=t.homeBackgroundUrl||"https://images.unsplash.com/photo-1514320291840-2e0a9bf2a9ae?q=80&w=2070&auto=format&fit=crop";N.useEffect(()=>{const K=setTimeout(()=>M(E),500);return()=>clearTimeout(K)},[E]),N.useEffect(()=>{(async()=>{i(!0),f(null);try{const{data:I,count:U}=await Xe.getVenues({search:A,city:T,page:0,pageSize:Lc});s(I),S(U),b(U>Lc),g(1)}catch(I){f(he(I)),console.error(I)}finally{i(!1)}})()},[A,T]);const F=async()=>{if(!(l||!v)){d(!0);try{const{data:K}=await Xe.getVenues({search:A,city:T,page:m,pageSize:Lc});s(U=>[...U,...K]);const I=(m+1)*Lc;b(I<_),g(U=>U+1)}catch(K){f("Erro ao carregar mais estabelecimentos: "+he(K))}finally{d(!1)}}},G=()=>{C(""),R("")};return a.jsxs("div",{className:"bg-dark text-white font-sans min-h-screen",children:[a.jsx(Qt,{title:"Estabelecimentos",description:"Encontre os melhores locais para tocar. Bares, pubs, casas de show e eventos esperando por msica ao vivo."}),a.jsxs("section",{className:"relative pt-32 pb-24 flex items-center justify-center text-center px-4 overflow-hidden",children:[a.jsxs("div",{className:"absolute inset-0 z-0 select-none pointer-events-none",children:[a.jsx("img",{src:z,className:"w-full h-full object-cover transition-all duration-700 ease-in-out scale-105",style:{filter:`blur(${t.heroBlur}px)`},alt:"Background"}),a.jsx("div",{className:"absolute inset-0 transition-all duration-500 ease-in-out mix-blend-multiply",style:{backgroundColor:t.heroOverlayColor,opacity:Math.max(t.heroOpacity,.6)}}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-dark/50 to-dark"})]}),a.jsxs("div",{className:"relative z-10 w-full max-w-4xl mx-auto space-y-6 animate-fade-in",children:[a.jsxs("h1",{className:"text-4xl md:text-6xl font-black text-white tracking-tight leading-none drop-shadow-2xl",children:["Encontre o ",a.jsx("span",{className:"text-secondary",children:"Palco Perfeito"})]}),a.jsx("p",{className:"max-w-2xl mx-auto text-lg md:text-xl text-gray-200 font-light leading-relaxed drop-shadow-md",children:"Conecte-se com casas de shows, bares e eventos prontos para receber seu som."})]})]}),a.jsxs("section",{id:"search-results",className:"container mx-auto px-4 sm:px-6 lg:px-8 pb-24 -mt-16 relative z-20",children:[a.jsx("div",{className:"bg-gray-900/80 backdrop-blur-xl p-6 rounded-2xl shadow-2xl border border-gray-700/50 mb-12",children:a.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-center",children:[a.jsxs("div",{className:"relative flex-grow w-full lg:w-auto group",children:[a.jsx("input",{type:"text",placeholder:"Buscar por nome do local...",value:E,onChange:K=>C(K.target.value),className:"w-full bg-gray-800/50 border border-gray-600 rounded-xl py-3 pl-11 pr-4 text-white focus:outline-none focus:ring-2 focus:ring-secondary focus:border-transparent transition-all placeholder-gray-500 group-hover:bg-gray-800"}),a.jsx(ms,{className:"absolute left-4 top-3.5 w-5 h-5 text-gray-400 group-focus-within:text-secondary transition-colors"})]}),a.jsxs("div",{className:"relative w-full lg:w-1/3 group",children:[a.jsx("input",{type:"text",placeholder:"Filtrar por Cidade",value:T,onChange:K=>R(K.target.value),className:"w-full bg-gray-800/50 border border-gray-600 rounded-xl py-3 pl-11 pr-4 text-white focus:outline-none focus:ring-2 focus:ring-secondary focus:border-transparent transition-all placeholder-gray-500 group-hover:bg-gray-800"}),a.jsx(Wt,{className:"absolute left-4 top-3.5 w-5 h-5 text-gray-400 group-focus-within:text-secondary transition-colors"})]}),(E||T)&&a.jsxs("button",{onClick:G,className:"w-full lg:w-auto px-4 py-3 bg-red-500/10 text-red-400 hover:bg-red-500/20 hover:text-red-300 rounded-xl font-semibold transition-colors flex items-center justify-center gap-2 border border-red-500/20",children:[a.jsx(It,{className:"w-4 h-4"})," ",a.jsx("span",{className:"lg:hidden xl:inline",children:"Limpar"})]})]})}),n?a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:Array.from({length:6}).map((K,I)=>a.jsx(pI,{},I))}):u?a.jsx("p",{className:"text-center text-red-400 bg-red-500/10 p-6 rounded-xl border border-red-500/20",children:u}):e.length>0?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"flex justify-between items-end mb-6 px-2",children:a.jsxs("h2",{className:"text-xl font-bold text-white",children:["Resultados ",a.jsxs("span",{className:"text-gray-500 text-sm font-normal ml-2",children:["(",_," encontrados)"]})]})}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:e.map(K=>a.jsx(gI,{profile:K},K.id))}),v&&a.jsx("div",{className:"text-center mt-16",children:a.jsx("button",{onClick:F,disabled:l,className:"bg-gray-800 border border-gray-700 text-white font-bold py-3 px-10 rounded-full hover:bg-gray-700 hover:border-gray-500 transition-all duration-300 disabled:opacity-50 transform hover:scale-105 shadow-lg",children:l?a.jsxs("span",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Carregando..."]}):"Carregar Mais Locais"})})]}):a.jsx("div",{className:"py-12",children:a.jsx(ja,{icon:ms,title:"Nenhum local encontrado",description:`No encontramos resultados para "${E}" ${T?`em ${T}`:""}. Tente ajustar os filtros.`,actionLabel:"Limpar Filtros",onAction:G})})]}),a.jsx("section",{className:"py-20 border-t border-gray-800 bg-gray-900/50",children:a.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 text-center",children:a.jsxs("div",{className:"max-w-2xl mx-auto",children:[a.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-secondary to-primary rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg shadow-secondary/20 transform -rotate-3",children:a.jsx(At,{className:"w-8 h-8 text-white"})}),a.jsx("h2",{className:"text-3xl font-bold text-white mb-4 font-poppins",children:"Tem um estabelecimento?"}),a.jsx("p",{className:"text-gray-400 text-lg mb-8 leading-relaxed",children:"Cadastre seu local e conecte-se com artistas profissionais prontos para lotar sua casa."}),a.jsx(Se,{to:"/cadastro?tipo=estabelecimento",className:"inline-block bg-white text-dark font-bold py-4 px-10 rounded-full hover:bg-gray-200 transition-all duration-300 shadow-xl hover:shadow-2xl hover:-translate-y-1",children:"Cadastrar Estabelecimento"})]})})})]})},As=({className:t="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),on=({className:t="w-6 h-6"})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),Bm=({className:t="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}),Co=({className:t="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),yI=t=>t.includes("Invalid login credentials")?"E-mail ou senha incorretos.":t.includes("Email not confirmed")?"EMAIL_NOT_CONFIRMED":"Ocorreu um erro ao tentar entrar. Tente novamente.",vI=()=>{const{siteConfig:t}=ns(),[e,s]=N.useState(""),[n,i]=N.useState(""),[l,d]=N.useState(!1),[u,f]=N.useState(""),[m,g]=N.useState(!1),[v,b]=N.useState(!1),[_,S]=N.useState(""),E=Xt(),C=t.homeBackgroundUrl||"https://images.unsplash.com/photo-1501386761578-eac5c94b800a?q=80&w=2070&auto=format&fit=crop",T=async A=>{A.preventDefault(),f(""),b(!1),g(!0);const{error:M}=await Q.auth.signInWithPassword({email:e,password:n});if(M){const z=yI(M.message);z==="EMAIL_NOT_CONFIRMED"?b(!0):f(z)}else E("/painel");g(!1)},R=async()=>{g(!0);const{error:A}=await Q.auth.resend({type:"signup",email:e});g(!1),S(A?"Erro ao reenviar. Tente mais tarde.":"Novo e-mail de confirmao enviado! Verifique sua caixa de entrada.")};return a.jsxs("main",{className:"min-h-screen flex bg-dark text-white font-sans",children:[a.jsx(Qt,{title:"Login",description:"Acesse sua conta no Resona e gerencie sua agenda de shows, contratos e pagamentos."}),a.jsxs("div",{className:"hidden lg:flex lg:w-1/2 relative overflow-hidden bg-gray-900",children:[a.jsx("div",{className:"absolute inset-0 bg-cover bg-center transition-transform duration-[60s] hover:scale-110 ease-linear",style:{backgroundImage:`url('${C}')`}}),a.jsx("div",{className:"absolute inset-0 transition-all duration-500 ease-in-out mix-blend-multiply",style:{backgroundColor:t.heroOverlayColor,opacity:Math.max(t.heroOpacity,.7)}}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-dark via-transparent to-transparent"}),a.jsxs("div",{className:"relative z-10 p-16 flex flex-col justify-between h-full w-full",children:[a.jsx("div",{children:a.jsxs(Se,{to:"/",className:"flex items-center gap-2 text-white/70 hover:text-white transition-colors w-fit group font-medium px-4 py-2 rounded-full bg-black/20 backdrop-blur-sm border border-white/10 hover:bg-black/40",children:[a.jsx(Co,{className:"w-4 h-4 group-hover:-translate-x-1 transition-transform"}),"Voltar para Home"]})}),a.jsx("div",{className:"space-y-8",children:a.jsxs("div",{className:"space-y-4",children:[a.jsx("span",{className:"inline-block px-3 py-1 bg-white/10 backdrop-blur-md border border-white/20 rounded-full text-xs font-bold uppercase tracking-wider text-primary",children:"Artistas & Venues"}),a.jsxs("h1",{className:"text-5xl font-black font-poppins tracking-tight leading-[1.1] drop-shadow-lg",children:["A msica acontece ",a.jsx("br",{}),a.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-primary to-white",children:"onde voc est."})]}),a.jsx("p",{className:"text-gray-200 text-lg max-w-md leading-relaxed font-light drop-shadow-md border-l-2 border-primary pl-4",children:'"O RESONA transformou a maneira como gerencio minha agenda de shows. Seguro, rpido e profissional."'})]})})]})]}),a.jsxs("section",{className:"w-full lg:w-1/2 flex items-center justify-center p-6 sm:p-12 relative bg-dark",children:[a.jsx("div",{className:"lg:hidden absolute inset-0 bg-cover bg-center opacity-10 pointer-events-none",style:{backgroundImage:`url('${C}')`}}),a.jsxs("div",{className:"w-full max-w-md relative z-10 animate-fade-in",children:[a.jsxs("div",{className:"text-center mb-10",children:[a.jsxs(Se,{to:"/",className:"lg:hidden inline-flex items-center gap-2 text-gray-400 text-sm mb-8 hover:text-white transition-colors",children:[a.jsx(Co,{className:"w-4 h-4"})," Voltar para Home"]}),a.jsx("h2",{className:"text-4xl font-black font-poppins text-white mb-2 tracking-tight",children:"Bem-vindo"}),a.jsx("p",{className:"text-gray-400",children:"Entre na sua conta para continuar conectando."})]}),a.jsxs("form",{className:"space-y-5",onSubmit:T,children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase mb-1.5 ml-1",children:"E-mail"}),a.jsxs("div",{className:"relative group",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:a.jsx(Eo,{className:"h-5 w-5 text-gray-500 group-focus-within:text-primary transition-colors"})}),a.jsx("input",{type:"email",required:!0,autoComplete:"email",className:"block w-full pl-11 pr-4 py-4 bg-gray-800/50 border border-gray-700 rounded-xl text-white placeholder-gray-600 focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all sm:text-sm shadow-inner group-hover:bg-gray-800",placeholder:"seu@email.com",value:e,onChange:A=>s(A.target.value)})]})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-center mb-1.5 ml-1",children:[a.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase",children:"Senha"}),a.jsx(Se,{to:"/recuperar-senha",className:"text-xs text-primary hover:text-primary/80 transition-colors font-medium",children:"Esqueceu a senha?"})]}),a.jsxs("div",{className:"relative group",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:a.jsx(As,{className:"h-5 w-5 text-gray-500 group-focus-within:text-primary transition-colors"})}),a.jsx("input",{type:l?"text":"password",required:!0,autoComplete:"current-password",className:"block w-full pl-11 pr-12 py-4 bg-gray-800/50 border border-gray-700 rounded-xl text-white placeholder-gray-600 focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all sm:text-sm shadow-inner group-hover:bg-gray-800",placeholder:"",value:n,onChange:A=>i(A.target.value)}),a.jsx("button",{type:"button",onClick:()=>d(!l),className:"absolute inset-y-0 right-0 pr-4 flex items-center text-gray-500 hover:text-white transition-colors focus:outline-none",children:l?a.jsx(Bm,{className:"h-5 w-5"}):a.jsx(on,{className:"h-5 w-5"})})]})]}),u&&a.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 text-red-400 px-4 py-3 rounded-xl text-sm flex items-start gap-3 animate-shake",children:[a.jsx("div",{className:"mt-0.5",children:a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-red-500"})}),a.jsx("span",{children:u})]}),v&&a.jsxs("div",{className:"bg-yellow-500/10 border border-yellow-500/20 text-yellow-200 px-4 py-3 rounded-xl text-sm text-center space-y-3",children:[a.jsx("p",{className:"font-medium",children:"E-mail no confirmado."}),a.jsx("p",{className:"text-xs text-yellow-200/70",children:"Verifique sua caixa de entrada (e spam) ou solicite um novo link."}),a.jsx("button",{type:"button",onClick:R,disabled:m,className:"w-full bg-yellow-500/20 hover:bg-yellow-500/30 text-yellow-300 py-2 rounded-lg text-xs font-bold transition-colors border border-yellow-500/30",children:"Reenviar Link de Confirmao"}),_&&a.jsx("p",{className:"text-xs text-white font-bold bg-green-500/20 py-1 rounded",children:_})]}),a.jsx("button",{type:"submit",disabled:m,className:"w-full py-4 px-4 bg-gradient-to-r from-primary to-secondary text-white font-bold rounded-xl shadow-lg shadow-primary/20 hover:shadow-primary/40 hover:-translate-y-0.5 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center justify-center gap-2",children:m?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Entrando..."]}):"Entrar na Plataforma"})]}),a.jsx("div",{className:"mt-8 pt-6 border-t border-gray-800 text-center",children:a.jsxs("p",{className:"text-gray-400 text-sm",children:["Ainda no tem conta?"," ",a.jsxs(Se,{to:"/cadastro",className:"text-primary font-bold hover:text-white transition-colors relative group",children:["Cadastre-se gratuitamente",a.jsx("span",{className:"absolute -bottom-1 left-0 w-0 h-0.5 bg-primary transition-all group-hover:w-full"})]})]})})]})]})]})},Ea=({className:t="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),bI=t=>t.includes("User already registered")?"Este e-mail j est cadastrado. Tente fazer login.":t.includes("Password should be at least 6 characters")?"A senha deve ter no mnimo 6 caracteres.":"Ocorreu um erro no cadastro. Tente novamente.",wI=()=>{const{siteConfig:t}=ns(),[e,s]=N.useState(""),[n,i]=N.useState(""),[l,d]=N.useState(""),[u,f]=N.useState(""),[m,g]=N.useState(!1),[v,b]=N.useState(""),[_,S]=N.useState(!1),[E,C]=N.useState(""),T=t.homeBackgroundUrl||"https://images.unsplash.com/photo-1514320291840-2e0a9bf2a9ae?q=80&w=2070&auto=format&fit=crop",R=async A=>{if(A.preventDefault(),b(""),C(""),l!==u){b("As senhas no coincidem.");return}if(l.length<6){b("A senha deve ter no mnimo 6 caracteres.");return}S(!0);const{error:M}=await Q.auth.signUp({email:n,password:l,options:{data:{full_name:e}}});M?b(bI(M.message)):(C("Cadastro realizado com sucesso!"),s(""),i(""),d(""),f("")),S(!1)};return a.jsxs("main",{className:"min-h-screen flex bg-dark text-white font-sans",children:[a.jsx(Qt,{title:"Cadastro",description:"Crie sua conta gratuita no Resona. Artistas, bandas e estabelecimentos conectados pela msica."}),a.jsxs("div",{className:"hidden lg:flex lg:w-1/2 relative overflow-hidden bg-gray-900",children:[a.jsx("div",{className:"absolute inset-0 bg-cover bg-center transition-transform duration-[60s] hover:scale-110 ease-linear",style:{backgroundImage:`url('${T}')`}}),a.jsx("div",{className:"absolute inset-0 transition-all duration-500 ease-in-out mix-blend-multiply",style:{backgroundColor:t.heroOverlayColor,opacity:Math.max(t.heroOpacity,.7)}}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-transparent via-dark/50 to-dark"}),a.jsxs("div",{className:"relative z-10 p-16 flex flex-col justify-between h-full w-full",children:[a.jsx("div",{children:a.jsxs(Se,{to:"/",className:"flex items-center gap-2 text-white/70 hover:text-white transition-colors w-fit group font-medium px-4 py-2 rounded-full bg-black/20 backdrop-blur-sm border border-white/10 hover:bg-black/40",children:[a.jsx(Co,{className:"w-4 h-4 group-hover:-translate-x-1 transition-transform"}),"Voltar para Home"]})}),a.jsx("div",{className:"space-y-8 text-right",children:a.jsxs("div",{className:"space-y-4 ml-auto max-w-lg",children:[a.jsxs("h1",{className:"text-5xl font-black font-poppins tracking-tight leading-[1.1] drop-shadow-lg",children:["Junte-se ao ",a.jsx("br",{}),a.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-l from-secondary via-primary to-white",children:"movimento."})]}),a.jsx("p",{className:"text-gray-200 text-lg leading-relaxed font-light drop-shadow-md",children:"Crie sua conta gratuita e comece a transformar sua carreira ou seu estabelecimento hoje mesmo."}),a.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[a.jsx("div",{className:"h-1 w-12 bg-white rounded-full"}),a.jsx("div",{className:"h-1 w-4 bg-white/30 rounded-full"}),a.jsx("div",{className:"h-1 w-4 bg-white/30 rounded-full"})]})]})})]})]}),a.jsxs("section",{className:"w-full lg:w-1/2 flex items-center justify-center p-6 sm:p-12 relative bg-dark",children:[a.jsx("div",{className:"lg:hidden absolute inset-0 bg-cover bg-center opacity-10 pointer-events-none",style:{backgroundImage:`url('${T}')`}}),a.jsxs("div",{className:"w-full max-w-md relative z-10 animate-fade-in",children:[E?a.jsxs("div",{className:"text-center py-8 animate-fade-in bg-gray-800/80 backdrop-blur-xl rounded-2xl border border-gray-700 p-8 shadow-2xl",children:[a.jsx("div",{className:"w-20 h-20 bg-green-500/10 rounded-full flex items-center justify-center mx-auto mb-6 border border-green-500/20 shadow-lg shadow-green-500/10 animate-bounce-slow",children:a.jsx(Oe,{className:"w-10 h-10 text-green-400"})}),a.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"Cadastro Realizado!"}),a.jsxs("p",{className:"text-gray-300 mb-8 leading-relaxed",children:["Enviamos um e-mail de confirmao para ",a.jsx("strong",{className:"text-white bg-white/10 px-2 py-0.5 rounded",children:n}),". ",a.jsx("br",{}),"Por favor, verifique sua caixa de entrada (e spam) para ativar sua conta."]}),a.jsx(Se,{to:"/login",className:"inline-block bg-white text-dark font-bold py-3 px-8 rounded-full hover:bg-gray-200 transition-colors shadow-lg hover:-translate-y-1",children:"Ir para o Login"})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"text-center mb-10",children:[a.jsxs(Se,{to:"/",className:"lg:hidden inline-flex items-center gap-2 text-gray-400 text-sm mb-8 hover:text-white transition-colors",children:[a.jsx(Co,{className:"w-4 h-4"})," Voltar para Home"]}),a.jsx("h2",{className:"text-3xl font-black font-poppins text-white mb-2 tracking-tight",children:"Crie sua conta"}),a.jsx("p",{className:"text-gray-400",children:"Preencha seus dados para comear."})]}),a.jsxs("form",{className:"space-y-5",onSubmit:R,children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase mb-1.5 ml-1",children:"Nome Completo / Artstico"}),a.jsxs("div",{className:"relative group",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:a.jsx(Ea,{className:"h-5 w-5 text-gray-500 group-focus-within:text-primary transition-colors"})}),a.jsx("input",{type:"text",required:!0,autoComplete:"name",className:"block w-full pl-11 pr-4 py-4 bg-gray-800/50 border border-gray-700 rounded-xl text-white placeholder-gray-600 focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all sm:text-sm shadow-inner group-hover:bg-gray-800",placeholder:"Como devemos te chamar?",value:e,onChange:A=>s(A.target.value)})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase mb-1.5 ml-1",children:"E-mail"}),a.jsxs("div",{className:"relative group",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:a.jsx(Eo,{className:"h-5 w-5 text-gray-500 group-focus-within:text-primary transition-colors"})}),a.jsx("input",{type:"email",required:!0,autoComplete:"email",className:"block w-full pl-11 pr-4 py-4 bg-gray-800/50 border border-gray-700 rounded-xl text-white placeholder-gray-600 focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all sm:text-sm shadow-inner group-hover:bg-gray-800",placeholder:"seu@email.com",value:n,onChange:A=>i(A.target.value)})]})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase mb-1.5 ml-1",children:"Senha"}),a.jsxs("div",{className:"relative group",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:a.jsx(As,{className:"h-5 w-5 text-gray-500 group-focus-within:text-primary transition-colors"})}),a.jsx("input",{type:m?"text":"password",required:!0,autoComplete:"new-password",className:"block w-full pl-11 pr-4 py-4 bg-gray-800/50 border border-gray-700 rounded-xl text-white placeholder-gray-600 focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all sm:text-sm shadow-inner group-hover:bg-gray-800",placeholder:"Mn 6 chars",value:l,onChange:A=>d(A.target.value)})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase mb-1.5 ml-1",children:"Confirmar"}),a.jsxs("div",{className:"relative group",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:a.jsx(As,{className:"h-5 w-5 text-gray-500 group-focus-within:text-primary transition-colors"})}),a.jsx("input",{type:m?"text":"password",required:!0,autoComplete:"new-password",className:"block w-full pl-11 pr-4 py-4 bg-gray-800/50 border border-gray-700 rounded-xl text-white placeholder-gray-600 focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all sm:text-sm shadow-inner group-hover:bg-gray-800",placeholder:"Repita a senha",value:u,onChange:A=>f(A.target.value)})]})]})]}),a.jsx("div",{className:"flex justify-end",children:a.jsxs("button",{type:"button",onClick:()=>g(!m),className:"text-xs text-gray-400 hover:text-white flex items-center gap-1 transition-colors font-medium",children:[m?a.jsx(Bm,{className:"h-3 w-3"}):a.jsx(on,{className:"h-3 w-3"}),m?"Ocultar Senha":"Mostrar Senha"]})}),v&&a.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 text-red-400 px-4 py-3 rounded-xl text-sm text-center animate-shake flex items-center justify-center gap-2",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-red-500"}),v]}),a.jsxs("div",{className:"text-xs text-gray-500 text-center px-4 leading-relaxed",children:["Ao se cadastrar, voc concorda com nossos ",a.jsx("a",{href:"#",className:"text-gray-400 underline hover:text-white",children:"Termos de Servio"})," e ",a.jsx("a",{href:"#",className:"text-gray-400 underline hover:text-white",children:"Poltica de Privacidade"}),"."]}),a.jsx("div",{children:a.jsx("button",{type:"submit",disabled:_,className:"w-full py-4 px-4 bg-gradient-to-r from-primary to-secondary text-white font-bold rounded-xl shadow-lg shadow-primary/20 hover:shadow-primary/40 hover:-translate-y-0.5 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center justify-center gap-2",children:_?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Criando conta..."]}):"Criar Conta Grtis"})})]})]}),a.jsx("div",{className:"mt-8 pt-6 border-t border-gray-800 text-center",children:a.jsxs("p",{className:"text-gray-400 text-sm",children:["J tem uma conta?"," ",a.jsxs(Se,{to:"/login",className:"text-secondary font-bold hover:text-white transition-colors relative group",children:["Faa seu login",a.jsx("span",{className:"absolute -bottom-1 left-0 w-0 h-0.5 bg-secondary transition-all group-hover:w-full"})]})]})})]})]})]})},en=({className:t="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),$N=({className:t="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),ur=({className:t="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),Rs=({className:t="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),zN=({title:t,subtitle:e,tabs:s,activeTab:n,onTabClick:i,children:l,profile:d})=>{var g,v;const[u,f]=qe.useState(!1),m=({id:b,label:_,icon:S})=>a.jsxs("button",{onClick:()=>i(b),className:`snap-start flex items-center gap-2 px-4 py-3 text-sm font-semibold rounded-md transition-colors whitespace-nowrap outline-none focus:ring-2 focus:ring-primary focus:ring-opacity-50 ${n===b?"bg-secondary text-white":"text-gray-300 hover:bg-gray-700"}`,children:[S,_]});return a.jsxs(a.Fragment,{children:[a.jsx("section",{className:"bg-gray-900 py-8 md:py-12",children:a.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl md:text-4xl font-bold text-white font-poppins",children:t}),a.jsx("p",{className:"mt-2 text-base md:text-lg text-gray-400",children:e})]}),a.jsx("div",{className:"flex-shrink-0",children:a.jsxs(Se,{to:`/${d.tipo}/${d.id}`,className:"flex items-center gap-2 bg-gray-700 hover:bg-gray-600 text-white font-semibold py-3 px-4 rounded-md transition-colors justify-center w-full sm:w-auto",children:[a.jsx(on,{className:"w-5 h-5"}),"Ver Perfil Pblico"]})})]})})}),a.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-6 md:py-12 min-w-0",children:[a.jsxs("div",{className:`lg:hidden mb-6 w-full relative ${u?"z-50":"z-20"}`,children:[a.jsxs("button",{onClick:()=>f(!u),className:"w-full flex items-center justify-between bg-gray-800 border border-gray-700 text-white rounded-lg py-3 px-4 shadow-sm hover:border-gray-500 transition-colors",children:[a.jsxs("span",{className:"flex items-center gap-3 font-medium",children:[(g=s.find(b=>b.id===n))==null?void 0:g.icon,(v=s.find(b=>b.id===n))==null?void 0:v.label]}),a.jsx("svg",{className:`h-5 w-5 text-gray-400 transition-transform ${u?"rotate-180":""}`,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]}),u&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>f(!1)}),a.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-gray-800 border border-gray-700 rounded-lg shadow-xl z-50 max-h-80 overflow-y-auto animate-fade-in",children:s.map(b=>a.jsxs("button",{onClick:()=>{i(b.id),f(!1)},className:`w-full text-left px-4 py-3 flex items-center gap-3 hover:bg-gray-700 transition-colors border-b border-gray-700/50 last:border-0 ${n===b.id?"text-primary bg-gray-700/30 font-bold":"text-gray-300"}`,children:[b.icon,b.label]},b.id))})]})]}),a.jsx("div",{className:"hidden lg:block relative mb-6",children:a.jsx("div",{className:"flex items-center gap-2 border-b border-gray-700 pb-2 overflow-x-auto whitespace-nowrap scrollbar-hide snap-x snap-mandatory px-0",children:s.map(b=>a.jsx(m,{...b},b.id))})}),a.jsx("div",{className:"bg-gray-800 p-4 sm:p-6 md:p-8 rounded-lg shadow-lg overflow-hidden min-w-0",children:l})]}),a.jsx("style",{children:".input-style { display: block; width: 100%; background-color: #1f2937; border: 1px solid #4b5563; border-radius: 0.375rem; padding: 0.75rem; font-size: 1rem; color: white; transition: border-color 0.2s, box-shadow 0.2s; } .input-style:focus { outline: none; border-color: #51D2EE; box-shadow: 0 0 0 2px rgba(81, 210, 238, 0.5); }"})]})},Ca=({className:t="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 16.5V9.75m0 0l3 3m-3-3l-3 3M6.75 19.5a4.5 4.5 0 01-1.41-8.775 5.25 5.25 0 0110.233-2.33 3 3 0 013.758 3.848A3.752 3.752 0 0118 19.5H6.75z"})}),_a=({className:t="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})});var xf,bb;function NI(){if(bb)return xf;bb=1;var t=!1,e,s,n,i,l,d,u,f,m,g,v,b,_,S,E;function C(){if(!t){t=!0;var R=navigator.userAgent,A=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(R),M=/(Mac OS X)|(Windows)|(Linux)/.exec(R);if(b=/\b(iPhone|iP[ao]d)/.exec(R),_=/\b(iP[ao]d)/.exec(R),g=/Android/i.exec(R),S=/FBAN\/\w+;/i.exec(R),E=/Mobile/i.exec(R),v=!!/Win64/.exec(R),A){e=A[1]?parseFloat(A[1]):A[5]?parseFloat(A[5]):NaN,e&&document&&document.documentMode&&(e=document.documentMode);var z=/(?:Trident\/(\d+.\d+))/.exec(R);d=z?parseFloat(z[1])+4:e,s=A[2]?parseFloat(A[2]):NaN,n=A[3]?parseFloat(A[3]):NaN,i=A[4]?parseFloat(A[4]):NaN,i?(A=/(?:Chrome\/(\d+\.\d+))/.exec(R),l=A&&A[1]?parseFloat(A[1]):NaN):l=NaN}else e=s=n=l=i=NaN;if(M){if(M[1]){var F=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(R);u=F?parseFloat(F[1].replace("_",".")):!0}else u=!1;f=!!M[2],m=!!M[3]}else u=f=m=!1}}var T={ie:function(){return C()||e},ieCompatibilityMode:function(){return C()||d>e},ie64:function(){return T.ie()&&v},firefox:function(){return C()||s},opera:function(){return C()||n},webkit:function(){return C()||i},safari:function(){return T.webkit()},chrome:function(){return C()||l},windows:function(){return C()||f},osx:function(){return C()||u},linux:function(){return C()||m},iphone:function(){return C()||b},mobile:function(){return C()||b||_||g||E},nativeApp:function(){return C()||S},android:function(){return C()||g},ipad:function(){return C()||_}};return xf=T,xf}var yf,wb;function _I(){if(wb)return yf;wb=1;var t=!!(typeof window<"u"&&window.document&&window.document.createElement),e={canUseDOM:t,canUseWorkers:typeof Worker<"u",canUseEventListeners:t&&!!(window.addEventListener||window.attachEvent),canUseViewport:t&&!!window.screen,isInWorker:!t};return yf=e,yf}var vf,Nb;function SI(){if(Nb)return vf;Nb=1;var t=_I(),e;t.canUseDOM&&(e=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function s(n,i){if(!t.canUseDOM||i&&!("addEventListener"in document))return!1;var l="on"+n,d=l in document;if(!d){var u=document.createElement("div");u.setAttribute(l,"return;"),d=typeof u[l]=="function"}return!d&&e&&n==="wheel"&&(d=document.implementation.hasFeature("Events.wheel","3.0")),d}return vf=s,vf}var bf,_b;function jI(){if(_b)return bf;_b=1;var t=NI(),e=SI(),s=10,n=40,i=800;function l(d){var u=0,f=0,m=0,g=0;return"detail"in d&&(f=d.detail),"wheelDelta"in d&&(f=-d.wheelDelta/120),"wheelDeltaY"in d&&(f=-d.wheelDeltaY/120),"wheelDeltaX"in d&&(u=-d.wheelDeltaX/120),"axis"in d&&d.axis===d.HORIZONTAL_AXIS&&(u=f,f=0),m=u*s,g=f*s,"deltaY"in d&&(g=d.deltaY),"deltaX"in d&&(m=d.deltaX),(m||g)&&d.deltaMode&&(d.deltaMode==1?(m*=n,g*=n):(m*=i,g*=i)),m&&!u&&(u=m<1?-1:1),g&&!f&&(f=g<1?-1:1),{spinX:u,spinY:f,pixelX:m,pixelY:g}}return l.getEventType=function(){return t.firefox()?"DOMMouseScroll":e("wheel")?"wheel":"mousewheel"},bf=l,bf}var wf,Sb;function EI(){return Sb||(Sb=1,wf=jI()),wf}var CI=EI();const TI=fr(CI);function AI(t,e,s,n,i,l){l===void 0&&(l=0);var d=To(t,e,l),u=d.width,f=d.height,m=Math.min(u,s),g=Math.min(f,n);return m>g*i?{width:g*i,height:g}:{width:m,height:m/i}}function RI(t){return t.width>t.height?t.width/t.naturalWidth:t.height/t.naturalHeight}function Ui(t,e,s,n,i){i===void 0&&(i=0);var l=To(e.width,e.height,i),d=l.width,u=l.height;return{x:jb(t.x,d,s.width,n),y:jb(t.y,u,s.height,n)}}function jb(t,e,s,n){var i=e*n/2-s/2;return Sd(t,-i,i)}function Eb(t,e){return Math.sqrt(Math.pow(t.y-e.y,2)+Math.pow(t.x-e.x,2))}function Cb(t,e){return Math.atan2(e.y-t.y,e.x-t.x)*180/Math.PI}function kI(t,e,s,n,i,l,d){l===void 0&&(l=0),d===void 0&&(d=!0);var u=d?MI:II,f=To(e.width,e.height,l),m=To(e.naturalWidth,e.naturalHeight,l),g={x:u(100,((f.width-s.width/i)/2-t.x/i)/f.width*100),y:u(100,((f.height-s.height/i)/2-t.y/i)/f.height*100),width:u(100,s.width/f.width*100/i),height:u(100,s.height/f.height*100/i)},v=Math.round(u(m.width,g.width*m.width/100)),b=Math.round(u(m.height,g.height*m.height/100)),_=m.width>=m.height*n,S=_?{width:Math.round(b*n),height:b}:{width:v,height:Math.round(v/n)},E=Lt(Lt({},S),{x:Math.round(u(m.width-S.width,g.x*m.width/100)),y:Math.round(u(m.height-S.height,g.y*m.height/100))});return{croppedAreaPercentages:g,croppedAreaPixels:E}}function MI(t,e){return Math.min(t,Math.max(0,e))}function II(t,e){return e}function DI(t,e,s,n,i,l){var d=To(e.width,e.height,s),u=Sd(n.width/d.width*(100/t.width),i,l),f={x:u*d.width/2-n.width/2-d.width*u*(t.x/100),y:u*d.height/2-n.height/2-d.height*u*(t.y/100)};return{crop:f,zoom:u}}function PI(t,e,s){var n=RI(e);return s.height>s.width?s.height/(t.height*n):s.width/(t.width*n)}function UI(t,e,s,n,i,l){s===void 0&&(s=0);var d=To(e.naturalWidth,e.naturalHeight,s),u=Sd(PI(t,e,n),i,l),f=n.height>n.width?n.height/t.height:n.width/t.width,m={x:((d.width-t.width)/2-t.x)*f,y:((d.height-t.height)/2-t.y)*f};return{crop:m,zoom:u}}function Tb(t,e){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}}function LI(t){return t*Math.PI/180}function To(t,e,s){var n=LI(s);return{width:Math.abs(Math.cos(n)*t)+Math.abs(Math.sin(n)*e),height:Math.abs(Math.sin(n)*t)+Math.abs(Math.cos(n)*e)}}function Sd(t,e,s){return Math.min(Math.max(t,e),s)}function Oc(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.filter(function(s){return typeof s=="string"&&s.length>0}).join(" ").trim()}var OI=`.reactEasyCrop_Container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  user-select: none;
  touch-action: none;
  cursor: move;
  display: flex;
  justify-content: center;
  align-items: center;
}

.reactEasyCrop_Image,
.reactEasyCrop_Video {
  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */
}

.reactEasyCrop_Contain {
  max-width: 100%;
  max-height: 100%;
  margin: auto;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
.reactEasyCrop_Cover_Horizontal {
  width: 100%;
  height: auto;
}
.reactEasyCrop_Cover_Vertical {
  width: auto;
  height: 100%;
}

.reactEasyCrop_CropArea {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-sizing: border-box;
  box-shadow: 0 0 0 9999em;
  color: rgba(0, 0, 0, 0.5);
  overflow: hidden;
}

.reactEasyCrop_CropAreaRound {
  border-radius: 50%;
}

.reactEasyCrop_CropAreaGrid::before {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 0;
  bottom: 0;
  left: 33.33%;
  right: 33.33%;
  border-top: 0;
  border-bottom: 0;
}

.reactEasyCrop_CropAreaGrid::after {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 33.33%;
  bottom: 33.33%;
  left: 0;
  right: 0;
  border-left: 0;
  border-right: 0;
}
`,qI=1,BI=3,$I=1,VN=(function(t){_E(e,t);function e(){var s=t!==null&&t.apply(this,arguments)||this;return s.cropperRef=N.createRef(),s.imageRef=N.createRef(),s.videoRef=N.createRef(),s.containerPosition={x:0,y:0},s.containerRef=null,s.styleRef=null,s.containerRect=null,s.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},s.dragStartPosition={x:0,y:0},s.dragStartCrop={x:0,y:0},s.gestureZoomStart=0,s.gestureRotationStart=0,s.isTouching=!1,s.lastPinchDistance=0,s.lastPinchRotation=0,s.rafDragTimeout=null,s.rafPinchTimeout=null,s.wheelTimer=null,s.currentDoc=typeof document<"u"?document:null,s.currentWindow=typeof window<"u"?window:null,s.resizeObserver=null,s.previousCropSize=null,s.isInitialized=!1,s.state={cropSize:null,hasWheelJustStarted:!1,mediaObjectFit:void 0},s.initResizeObserver=function(){if(!(typeof window.ResizeObserver>"u"||!s.containerRef)){var n=!0;s.resizeObserver=new window.ResizeObserver(function(i){if(n){n=!1;return}s.computeSizes()}),s.resizeObserver.observe(s.containerRef)}},s.preventZoomSafari=function(n){return n.preventDefault()},s.cleanEvents=function(){s.currentDoc&&(s.currentDoc.removeEventListener("mousemove",s.onMouseMove),s.currentDoc.removeEventListener("mouseup",s.onDragStopped),s.currentDoc.removeEventListener("touchmove",s.onTouchMove),s.currentDoc.removeEventListener("touchend",s.onDragStopped),s.currentDoc.removeEventListener("gesturechange",s.onGestureChange),s.currentDoc.removeEventListener("gestureend",s.onGestureEnd),s.currentDoc.removeEventListener("scroll",s.onScroll))},s.clearScrollEvent=function(){s.containerRef&&s.containerRef.removeEventListener("wheel",s.onWheel),s.wheelTimer&&clearTimeout(s.wheelTimer)},s.onMediaLoad=function(){var n=s.computeSizes();n&&(s.previousCropSize=n,s.emitCropData(),s.setInitialCrop(n),s.isInitialized=!0),s.props.onMediaLoaded&&s.props.onMediaLoaded(s.mediaSize)},s.setInitialCrop=function(n){if(s.props.initialCroppedAreaPercentages){var i=DI(s.props.initialCroppedAreaPercentages,s.mediaSize,s.props.rotation,n,s.props.minZoom,s.props.maxZoom),l=i.crop,d=i.zoom;s.props.onCropChange(l),s.props.onZoomChange&&s.props.onZoomChange(d)}else if(s.props.initialCroppedAreaPixels){var u=UI(s.props.initialCroppedAreaPixels,s.mediaSize,s.props.rotation,n,s.props.minZoom,s.props.maxZoom),l=u.crop,d=u.zoom;s.props.onCropChange(l),s.props.onZoomChange&&s.props.onZoomChange(d)}},s.computeSizes=function(){var n,i,l,d,u,f,m=s.imageRef.current||s.videoRef.current;if(m&&s.containerRef){s.containerRect=s.containerRef.getBoundingClientRect(),s.saveContainerPosition();var g=s.containerRect.width/s.containerRect.height,v=((n=s.imageRef.current)===null||n===void 0?void 0:n.naturalWidth)||((i=s.videoRef.current)===null||i===void 0?void 0:i.videoWidth)||0,b=((l=s.imageRef.current)===null||l===void 0?void 0:l.naturalHeight)||((d=s.videoRef.current)===null||d===void 0?void 0:d.videoHeight)||0,_=m.offsetWidth<v||m.offsetHeight<b,S=v/b,E=void 0;if(_)switch(s.state.mediaObjectFit){default:case"contain":E=g>S?{width:s.containerRect.height*S,height:s.containerRect.height}:{width:s.containerRect.width,height:s.containerRect.width/S};break;case"horizontal-cover":E={width:s.containerRect.width,height:s.containerRect.width/S};break;case"vertical-cover":E={width:s.containerRect.height*S,height:s.containerRect.height};break}else E={width:m.offsetWidth,height:m.offsetHeight};s.mediaSize=Lt(Lt({},E),{naturalWidth:v,naturalHeight:b}),s.props.setMediaSize&&s.props.setMediaSize(s.mediaSize);var C=s.props.cropSize?s.props.cropSize:AI(s.mediaSize.width,s.mediaSize.height,s.containerRect.width,s.containerRect.height,s.props.aspect,s.props.rotation);return(((u=s.state.cropSize)===null||u===void 0?void 0:u.height)!==C.height||((f=s.state.cropSize)===null||f===void 0?void 0:f.width)!==C.width)&&s.props.onCropSizeChange&&s.props.onCropSizeChange(C),s.setState({cropSize:C},s.recomputeCropPosition),s.props.setCropSize&&s.props.setCropSize(C),C}},s.saveContainerPosition=function(){if(s.containerRef){var n=s.containerRef.getBoundingClientRect();s.containerPosition={x:n.left,y:n.top}}},s.onMouseDown=function(n){s.currentDoc&&(n.preventDefault(),s.currentDoc.addEventListener("mousemove",s.onMouseMove),s.currentDoc.addEventListener("mouseup",s.onDragStopped),s.saveContainerPosition(),s.onDragStart(e.getMousePoint(n)))},s.onMouseMove=function(n){return s.onDrag(e.getMousePoint(n))},s.onScroll=function(n){s.currentDoc&&(n.preventDefault(),s.saveContainerPosition())},s.onTouchStart=function(n){s.currentDoc&&(s.isTouching=!0,!(s.props.onTouchRequest&&!s.props.onTouchRequest(n))&&(s.currentDoc.addEventListener("touchmove",s.onTouchMove,{passive:!1}),s.currentDoc.addEventListener("touchend",s.onDragStopped),s.saveContainerPosition(),n.touches.length===2?s.onPinchStart(n):n.touches.length===1&&s.onDragStart(e.getTouchPoint(n.touches[0]))))},s.onTouchMove=function(n){n.preventDefault(),n.touches.length===2?s.onPinchMove(n):n.touches.length===1&&s.onDrag(e.getTouchPoint(n.touches[0]))},s.onGestureStart=function(n){s.currentDoc&&(n.preventDefault(),s.currentDoc.addEventListener("gesturechange",s.onGestureChange),s.currentDoc.addEventListener("gestureend",s.onGestureEnd),s.gestureZoomStart=s.props.zoom,s.gestureRotationStart=s.props.rotation)},s.onGestureChange=function(n){if(n.preventDefault(),!s.isTouching){var i=e.getMousePoint(n),l=s.gestureZoomStart-1+n.scale;if(s.setNewZoom(l,i,{shouldUpdatePosition:!0}),s.props.onRotationChange){var d=s.gestureRotationStart+n.rotation;s.props.onRotationChange(d)}}},s.onGestureEnd=function(n){s.cleanEvents()},s.onDragStart=function(n){var i,l,d=n.x,u=n.y;s.dragStartPosition={x:d,y:u},s.dragStartCrop=Lt({},s.props.crop),(l=(i=s.props).onInteractionStart)===null||l===void 0||l.call(i)},s.onDrag=function(n){var i=n.x,l=n.y;s.currentWindow&&(s.rafDragTimeout&&s.currentWindow.cancelAnimationFrame(s.rafDragTimeout),s.rafDragTimeout=s.currentWindow.requestAnimationFrame(function(){if(s.state.cropSize&&!(i===void 0||l===void 0)){var d=i-s.dragStartPosition.x,u=l-s.dragStartPosition.y,f={x:s.dragStartCrop.x+d,y:s.dragStartCrop.y+u},m=s.props.restrictPosition?Ui(f,s.mediaSize,s.state.cropSize,s.props.zoom,s.props.rotation):f;s.props.onCropChange(m)}}))},s.onDragStopped=function(){var n,i;s.isTouching=!1,s.cleanEvents(),s.emitCropData(),(i=(n=s.props).onInteractionEnd)===null||i===void 0||i.call(n)},s.onWheel=function(n){if(s.currentWindow&&!(s.props.onWheelRequest&&!s.props.onWheelRequest(n))){n.preventDefault();var i=e.getMousePoint(n),l=TI(n).pixelY,d=s.props.zoom-l*s.props.zoomSpeed/200;s.setNewZoom(d,i,{shouldUpdatePosition:!0}),s.state.hasWheelJustStarted||s.setState({hasWheelJustStarted:!0},function(){var u,f;return(f=(u=s.props).onInteractionStart)===null||f===void 0?void 0:f.call(u)}),s.wheelTimer&&clearTimeout(s.wheelTimer),s.wheelTimer=s.currentWindow.setTimeout(function(){return s.setState({hasWheelJustStarted:!1},function(){var u,f;return(f=(u=s.props).onInteractionEnd)===null||f===void 0?void 0:f.call(u)})},250)}},s.getPointOnContainer=function(n,i){var l=n.x,d=n.y;if(!s.containerRect)throw new Error("The Cropper is not mounted");return{x:s.containerRect.width/2-(l-i.x),y:s.containerRect.height/2-(d-i.y)}},s.getPointOnMedia=function(n){var i=n.x,l=n.y,d=s.props,u=d.crop,f=d.zoom;return{x:(i+u.x)/f,y:(l+u.y)/f}},s.setNewZoom=function(n,i,l){var d=l===void 0?{}:l,u=d.shouldUpdatePosition,f=u===void 0?!0:u;if(!(!s.state.cropSize||!s.props.onZoomChange)){var m=Sd(n,s.props.minZoom,s.props.maxZoom);if(f){var g=s.getPointOnContainer(i,s.containerPosition),v=s.getPointOnMedia(g),b={x:v.x*m-g.x,y:v.y*m-g.y},_=s.props.restrictPosition?Ui(b,s.mediaSize,s.state.cropSize,m,s.props.rotation):b;s.props.onCropChange(_)}s.props.onZoomChange(m)}},s.getCropData=function(){if(!s.state.cropSize)return null;var n=s.props.restrictPosition?Ui(s.props.crop,s.mediaSize,s.state.cropSize,s.props.zoom,s.props.rotation):s.props.crop;return kI(n,s.mediaSize,s.state.cropSize,s.getAspect(),s.props.zoom,s.props.rotation,s.props.restrictPosition)},s.emitCropData=function(){var n=s.getCropData();if(n){var i=n.croppedAreaPercentages,l=n.croppedAreaPixels;s.props.onCropComplete&&s.props.onCropComplete(i,l),s.props.onCropAreaChange&&s.props.onCropAreaChange(i,l)}},s.emitCropAreaChange=function(){var n=s.getCropData();if(n){var i=n.croppedAreaPercentages,l=n.croppedAreaPixels;s.props.onCropAreaChange&&s.props.onCropAreaChange(i,l)}},s.recomputeCropPosition=function(){var n,i;if(s.state.cropSize){var l=s.props.crop;if(s.isInitialized&&(!((n=s.previousCropSize)===null||n===void 0)&&n.width)&&(!((i=s.previousCropSize)===null||i===void 0)&&i.height)){var d=Math.abs(s.previousCropSize.width-s.state.cropSize.width)>1e-6||Math.abs(s.previousCropSize.height-s.state.cropSize.height)>1e-6;if(d){var u=s.state.cropSize.width/s.previousCropSize.width,f=s.state.cropSize.height/s.previousCropSize.height;l={x:s.props.crop.x*u,y:s.props.crop.y*f}}}var m=s.props.restrictPosition?Ui(l,s.mediaSize,s.state.cropSize,s.props.zoom,s.props.rotation):l;s.previousCropSize=s.state.cropSize,s.props.onCropChange(m),s.emitCropData()}},s.onKeyDown=function(n){var i,l,d=s.props,u=d.crop,f=d.onCropChange,m=d.keyboardStep,g=d.zoom,v=d.rotation,b=m;if(s.state.cropSize){n.shiftKey&&(b*=.2);var _=Lt({},u);switch(n.key){case"ArrowUp":_.y-=b,n.preventDefault();break;case"ArrowDown":_.y+=b,n.preventDefault();break;case"ArrowLeft":_.x-=b,n.preventDefault();break;case"ArrowRight":_.x+=b,n.preventDefault();break;default:return}s.props.restrictPosition&&(_=Ui(_,s.mediaSize,s.state.cropSize,g,v)),n.repeat||(l=(i=s.props).onInteractionStart)===null||l===void 0||l.call(i),f(_)}},s.onKeyUp=function(n){var i,l;switch(n.key){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":n.preventDefault();break;default:return}s.emitCropData(),(l=(i=s.props).onInteractionEnd)===null||l===void 0||l.call(i)},s}return e.prototype.componentDidMount=function(){!this.currentDoc||!this.currentWindow||(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),typeof window.ResizeObserver>"u"&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=OI,this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef),this.props.setCropperRef&&this.props.setCropperRef(this.cropperRef))},e.prototype.componentWillUnmount=function(){var s,n;!this.currentDoc||!this.currentWindow||(typeof window.ResizeObserver>"u"&&this.currentWindow.removeEventListener("resize",this.computeSizes),(s=this.resizeObserver)===null||s===void 0||s.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&((n=this.styleRef.parentNode)===null||n===void 0||n.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},e.prototype.componentDidUpdate=function(s){var n,i,l,d,u,f,m,g,v;s.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):s.aspect!==this.props.aspect?this.computeSizes():s.objectFit!==this.props.objectFit?this.computeSizes():s.zoom!==this.props.zoom?this.recomputeCropPosition():((n=s.cropSize)===null||n===void 0?void 0:n.height)!==((i=this.props.cropSize)===null||i===void 0?void 0:i.height)||((l=s.cropSize)===null||l===void 0?void 0:l.width)!==((d=this.props.cropSize)===null||d===void 0?void 0:d.width)?this.computeSizes():(((u=s.crop)===null||u===void 0?void 0:u.x)!==((f=this.props.crop)===null||f===void 0?void 0:f.x)||((m=s.crop)===null||m===void 0?void 0:m.y)!==((g=this.props.crop)===null||g===void 0?void 0:g.y))&&this.emitCropAreaChange(),s.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),s.video!==this.props.video&&((v=this.videoRef.current)===null||v===void 0||v.load());var b=this.getObjectFit();b!==this.state.mediaObjectFit&&this.setState({mediaObjectFit:b},this.computeSizes)},e.prototype.getAspect=function(){var s=this.props,n=s.cropSize,i=s.aspect;return n?n.width/n.height:i},e.prototype.getObjectFit=function(){var s,n,i,l;if(this.props.objectFit==="cover"){var d=this.imageRef.current||this.videoRef.current;if(d&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var u=this.containerRect.width/this.containerRect.height,f=((s=this.imageRef.current)===null||s===void 0?void 0:s.naturalWidth)||((n=this.videoRef.current)===null||n===void 0?void 0:n.videoWidth)||0,m=((i=this.imageRef.current)===null||i===void 0?void 0:i.naturalHeight)||((l=this.videoRef.current)===null||l===void 0?void 0:l.videoHeight)||0,g=f/m;return g<u?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},e.prototype.onPinchStart=function(s){var n=e.getTouchPoint(s.touches[0]),i=e.getTouchPoint(s.touches[1]);this.lastPinchDistance=Eb(n,i),this.lastPinchRotation=Cb(n,i),this.onDragStart(Tb(n,i))},e.prototype.onPinchMove=function(s){var n=this;if(!(!this.currentDoc||!this.currentWindow)){var i=e.getTouchPoint(s.touches[0]),l=e.getTouchPoint(s.touches[1]),d=Tb(i,l);this.onDrag(d),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var u=Eb(i,l),f=n.props.zoom*(u/n.lastPinchDistance);n.setNewZoom(f,d,{shouldUpdatePosition:!1}),n.lastPinchDistance=u;var m=Cb(i,l),g=n.props.rotation+(m-n.lastPinchRotation);n.props.onRotationChange&&n.props.onRotationChange(g),n.lastPinchRotation=m})}},e.prototype.render=function(){var s=this,n,i=this.props,l=i.image,d=i.video,u=i.mediaProps,f=i.cropperProps,m=i.transform,g=i.crop,v=g.x,b=g.y,_=i.rotation,S=i.zoom,E=i.cropShape,C=i.showGrid,T=i.roundCropAreaPixels,R=i.style,A=R.containerStyle,M=R.cropAreaStyle,z=R.mediaStyle,F=i.classes,G=F.containerClassName,K=F.cropAreaClassName,I=F.mediaClassName,U=(n=this.state.mediaObjectFit)!==null&&n!==void 0?n:this.getObjectFit();return N.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(H){return s.containerRef=H},"data-testid":"container",style:A,className:Oc("reactEasyCrop_Container",G)},l?N.createElement("img",Lt({alt:"",className:Oc("reactEasyCrop_Image",U==="contain"&&"reactEasyCrop_Contain",U==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",U==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",I)},u,{src:l,ref:this.imageRef,style:Lt(Lt({},z),{transform:m||"translate(".concat(v,"px, ").concat(b,"px) rotate(").concat(_,"deg) scale(").concat(S,")")}),onLoad:this.onMediaLoad})):d&&N.createElement("video",Lt({autoPlay:!0,playsInline:!0,loop:!0,muted:!0,className:Oc("reactEasyCrop_Video",U==="contain"&&"reactEasyCrop_Contain",U==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",U==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",I)},u,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:Lt(Lt({},z),{transform:m||"translate(".concat(v,"px, ").concat(b,"px) rotate(").concat(_,"deg) scale(").concat(S,")")}),controls:!1}),(Array.isArray(d)?d:[{src:d}]).map(function(q){return N.createElement("source",Lt({key:q.src},q))})),this.state.cropSize&&N.createElement("div",Lt({ref:this.cropperRef,style:Lt(Lt({},M),{width:T?Math.round(this.state.cropSize.width):this.state.cropSize.width,height:T?Math.round(this.state.cropSize.height):this.state.cropSize.height}),tabIndex:0,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,"data-testid":"cropper",className:Oc("reactEasyCrop_CropArea",E==="round"&&"reactEasyCrop_CropAreaRound",C&&"reactEasyCrop_CropAreaGrid",K)},f)))},e.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:BI,minZoom:qI,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},cropperProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0,keyboardStep:$I},e.getMousePoint=function(s){return{x:Number(s.clientX),y:Number(s.clientY)}},e.getTouchPoint=function(s){return{x:Number(s.clientX),y:Number(s.clientY)}},e})(N.Component);const zI=t=>new Promise((e,s)=>{const n=new Image;n.addEventListener("load",()=>e(n)),n.addEventListener("error",i=>s(i)),n.setAttribute("crossOrigin","anonymous"),n.src=t});function HN(t){return t*Math.PI/180}function VI(t,e,s){const n=HN(s);return{width:Math.abs(Math.cos(n)*t)+Math.abs(Math.sin(n)*e),height:Math.abs(Math.sin(n)*t)+Math.abs(Math.cos(n)*e)}}async function GN(t,e,s=0,n={horizontal:!1,vertical:!1}){const i=await zI(t),l=document.createElement("canvas"),d=l.getContext("2d");if(!d)return null;const u=HN(s),{width:f,height:m}=VI(i.width,i.height,s);l.width=f,l.height=m,d.translate(f/2,m/2),d.rotate(u),d.scale(n.horizontal?-1:1,n.vertical?-1:1),d.translate(-i.width/2,-i.height/2),d.drawImage(i,0,0);const g=d.getImageData(e.x,e.y,e.width,e.height);return l.width=e.width,l.height=e.height,d.putImageData(g,0,0),new Promise((v,b)=>{l.toBlob(_=>{v(_)},"image/jpeg")})}const FN=({url:t,onUpload:e})=>{const{user:s}=Ps(),[n,i]=N.useState(null),[l,d]=N.useState(!1),[u,f]=N.useState(""),[m,g]=N.useState(null),[v,b]=N.useState({x:0,y:0}),[_,S]=N.useState(1),[E,C]=N.useState(null),[T,R]=N.useState(!1),A=N.useRef(null);N.useEffect(()=>{if(t){const I=Ie.getPublicUrl("perfis",t);i(`${I}?t=${new Date().getTime()}`)}else i(null)},[t]);const M=async I=>{if(I.target.files&&I.target.files.length>0){const U=I.target.files[0],q=new FileReader;q.addEventListener("load",()=>{var H;g(((H=q.result)==null?void 0:H.toString())||""),R(!0)}),q.readAsDataURL(U)}},z=(I,U)=>{C(U)},F=async()=>{if(!(!m||!E))try{d(!0);const I=await GN(m,E);if(!I)throw new Error("Erro ao cortar a imagem.");const U=new File([I],`avatar_${Date.now()}.jpg`,{type:"image/jpeg"});await K(U),R(!1),g(null),S(1)}catch(I){f(he(I)),d(!1)}},G=()=>{R(!1),g(null),S(1),A.current&&(A.current.value="")},K=async I=>{if(s)try{f("");const U=`${s.id}/avatar`,q=`${U}/v_${Date.now()}.jpg`;try{const H=await Ie.list("perfis",U);if(H&&H.length>0){const $=H.map(ie=>`${U}/${ie.name}`);await Ie.remove("perfis",$)}}catch(H){console.warn("Limpando fotos antigas...",H)}await Ie.upload("perfis",q,I),e(q,{onSuccess:()=>{},onError:()=>{f("Falha ao salvar no perfil.")}})}catch(U){f(he(U))}finally{d(!1)}};return a.jsxs("div",{children:[a.jsxs("div",{className:"relative group",children:[a.jsx("div",{className:"w-48 h-48 rounded-full overflow-hidden border-4 border-gray-600 group-hover:border-primary transition-colors duration-300 flex items-center justify-center bg-gray-700",children:n?a.jsx("img",{src:n,alt:"Avatar",className:"w-full h-full object-cover"}):a.jsx(Ea,{className:"w-24 h-24 text-gray-500"})}),a.jsx("label",{htmlFor:"avatar-input",className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 flex flex-col items-center justify-center cursor-pointer rounded-full transition-all duration-300",children:a.jsxs("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:[a.jsx(Ca,{className:"w-10 h-10 text-white mb-2"}),a.jsx("span",{className:"text-white font-bold text-center",children:l?"Enviando...":"Alterar Foto"})]})}),a.jsx("input",{ref:A,style:{visibility:"hidden",position:"absolute"},type:"file",id:"avatar-input",accept:"image/*",onChange:M,disabled:l})]}),u&&a.jsx("p",{className:"text-sm text-red-400 mt-2 text-center",children:u}),T&&m&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-80 p-4",children:a.jsxs("div",{className:"bg-gray-800 rounded-lg w-full max-w-md overflow-hidden shadow-2xl animate-fade-in",children:[a.jsxs("div",{className:"p-4 border-b border-gray-700 flex justify-between items-center",children:[a.jsx("h3",{className:"text-lg font-bold text-white font-poppins",children:"Ajustar Foto"}),a.jsx("button",{onClick:G,className:"text-gray-400 hover:text-white",children:a.jsx(It,{className:"w-6 h-6"})})]}),a.jsx("div",{className:"relative w-full h-80 bg-black",children:a.jsx(VN,{image:m,crop:v,zoom:_,aspect:1,onCropChange:b,onCropComplete:z,onZoomChange:S,cropShape:"round",showGrid:!1})}),a.jsxs("div",{className:"p-4 space-y-4",children:[a.jsx("input",{type:"range",value:_,min:1,max:3,step:.1,onChange:I=>S(Number(I.target.value)),className:"w-full h-2 bg-gray-600 rounded-lg appearance-none cursor-pointer accent-primary"}),a.jsxs("div",{className:"flex gap-4",children:[a.jsx("button",{onClick:G,className:"flex-1 py-2 px-4 border border-gray-600 rounded-md text-white hover:bg-gray-700",children:"Cancelar"}),a.jsx("button",{onClick:F,disabled:l,className:"flex-1 py-2 px-4 bg-secondary text-white font-bold rounded-md flex items-center justify-center gap-2",children:l?"Salvando...":a.jsxs(a.Fragment,{children:[a.jsx(_a,{className:"w-5 h-5"})," Salvar"]})})]})]})]})})]})},tn=({className:t="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),JN=({currentPath:t,bucketName:e,userId:s,onUploadComplete:n})=>{const[i,l]=N.useState(null),[d,u]=N.useState(!1),[f,m]=N.useState(""),[g,v]=N.useState(null),[b,_]=N.useState({x:0,y:0}),[S,E]=N.useState(1),[C,T]=N.useState(null),[R,A]=N.useState(!1),M=N.useRef(null);N.useEffect(()=>{if(t){const U=Ie.getPublicUrl(e,t);l(`${U}?t=${new Date().getTime()}`)}else l(null)},[t,e]);const z=async U=>{if(!U.target.files||U.target.files.length===0)return;m("");const q=U.target.files[0];if(q.size>5*1024*1024){m("A imagem deve ter no mximo 5MB.");return}const H=new FileReader;H.addEventListener("load",()=>{var $;v((($=H.result)==null?void 0:$.toString())||null),A(!0)}),H.readAsDataURL(q)},F=(U,q)=>{T(q)},G=()=>{A(!1),v(null),E(1),M.current&&(M.current.value="")},K=async()=>{if(!(!g||!C))try{u(!0);const U=await GN(g,C);if(!U)throw new Error("Erro ao cortar a imagem.");const q=new File([U],"cover.jpg",{type:"image/jpeg"});await I(q),A(!1),v(null),E(1)}catch(U){m(he(U)),u(!1)}},I=async U=>{try{const H=`cover_${Date.now()}.jpg`,$=`${s}/cover/${H}`;if(t)try{await Ie.remove(e,[t])}catch(P){console.warn("Erro ao remover capa antiga:",P)}const ie=await Ie.upload(e,$,U),re=Ie.getPublicUrl(e,ie);l(`${re}?t=${new Date().getTime()}`),await n(ie)}catch(q){m("Erro ao salvar imagem: "+he(q))}finally{u(!1),M.current&&(M.current.value="")}};return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"relative w-full h-48 md:h-64 rounded-lg overflow-hidden bg-gray-800 border-2 border-dashed border-gray-600 group hover:border-primary transition-all duration-300 mb-8",children:[i?a.jsxs(a.Fragment,{children:[a.jsx("img",{src:i,alt:"Capa do Perfil",className:"w-full h-full object-cover group-hover:opacity-50 transition-opacity duration-300"}),a.jsxs("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex flex-col items-center justify-center",children:[a.jsx(Ca,{className:"w-10 h-10 text-white mb-2"}),a.jsx("span",{className:"text-white font-bold text-sm",children:"Alterar Capa"})]})]}):a.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-gray-500 group-hover:text-primary transition-colors",children:[a.jsx(tn,{className:"w-12 h-12 mb-2"}),a.jsx("span",{className:"font-medium",children:"Adicionar Foto de Capa"}),a.jsx("span",{className:"text-xs mt-1 text-gray-600",children:"Recomendado: 1200x400px"})]}),d&&!R&&a.jsxs("div",{className:"absolute inset-0 bg-black/70 flex flex-col items-center justify-center z-10",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white mb-2"}),a.jsx("span",{className:"text-white text-xs",children:"Enviando..."})]}),a.jsx("input",{ref:M,type:"file",accept:"image/png, image/jpeg, image/jpg, image/webp",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-20",onChange:z,disabled:d}),f&&a.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-red-500/90 text-white text-xs p-2 text-center z-30",children:f})]}),R&&g&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-90 p-4",children:a.jsxs("div",{className:"bg-gray-800 rounded-lg w-full max-w-3xl overflow-hidden shadow-2xl animate-fade-in flex flex-col max-h-[90vh]",children:[a.jsxs("div",{className:"p-4 border-b border-gray-700 flex justify-between items-center flex-shrink-0",children:[a.jsx("h3",{className:"text-lg font-bold text-white font-poppins",children:"Ajustar Capa"}),a.jsx("button",{onClick:G,className:"text-gray-400 hover:text-white",children:a.jsx(It,{className:"w-6 h-6"})})]}),a.jsx("div",{className:"relative w-full flex-grow bg-black min-h-[300px] h-[50vh]",children:a.jsx(VN,{image:g,crop:b,zoom:S,aspect:3/1,onCropChange:_,onCropComplete:F,onZoomChange:E,showGrid:!0})}),a.jsxs("div",{className:"p-4 space-y-4 bg-gray-800 flex-shrink-0",children:[a.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-400",children:[a.jsx("span",{className:"flex-shrink-0",children:"Zoom"}),a.jsx("input",{type:"range",value:S,min:1,max:3,step:.1,"aria-labelledby":"Zoom",onChange:U=>E(Number(U.target.value)),className:"w-full h-2 bg-gray-600 rounded-lg appearance-none cursor-pointer accent-primary"})]}),a.jsxs("div",{className:"flex gap-4 pt-2",children:[a.jsx("button",{onClick:G,className:"flex-1 py-3 px-4 border border-gray-600 rounded-md text-white hover:bg-gray-700 transition-colors font-medium",children:"Cancelar"}),a.jsx("button",{onClick:K,disabled:d,className:"flex-1 py-3 px-4 bg-secondary text-white font-bold rounded-md hover:bg-opacity-90 transition-colors flex items-center justify-center gap-2",children:d?"Salvando...":a.jsxs(a.Fragment,{children:[a.jsx(_a,{className:"w-5 h-5"})," Salvar Capa"]})})]})]})]})})]})},So=t=>{if(!t||t.tipo!=="estabelecimento")return{complete:!1,missing:["Perfil invlido"]};const s=[{label:"Nome do Local",isComplete:n=>!!n.nome},{label:"Logo/Foto",isComplete:n=>!!n.foto_url},{label:"Cidade",isComplete:n=>!!n.cidade},{label:"Contato",isComplete:n=>!!n.telefone},{label:"Endereo",isComplete:n=>{var i;return!!((i=n.estabelecimento)!=null&&i.endereco)}},{label:"Capacidade",isComplete:n=>{var i;return!!((i=n.estabelecimento)!=null&&i.capacidade)&&n.estabelecimento.capacidade>0}},{label:"Descrio",isComplete:n=>{var i;return!!((i=n.estabelecimento)!=null&&i.descricao)&&n.estabelecimento.descricao.length>20}},{label:"Portflio (Fotos)",isComplete:n=>{var i;return!!((i=n.estabelecimento)!=null&&i.galeria_fotos)&&n.estabelecimento.galeria_fotos.length>0}}].filter(n=>!n.isComplete(t)).map(n=>n.label);return{complete:s.length===0,missing:s}},ca=t=>{if(!t||t.tipo!=="artista")return{complete:!1,missing:["Perfil invlido"]};const s=[{label:"Nome Artstico",isComplete:n=>!!n.nome},{label:"Foto de Perfil",isComplete:n=>!!n.foto_url},{label:"Cidade Base",isComplete:n=>!!n.cidade},{label:"Contato (Tel)",isComplete:n=>!!n.telefone},{label:"Gnero Musical",isComplete:n=>{var i;return!!((i=n.artista)!=null&&i.genero_musical)}},{label:"Bio/Descrio",isComplete:n=>{var i;return!!((i=n.artista)!=null&&i.descricao)&&n.artista.descricao.length>20}},{label:"Redes Sociais",isComplete:n=>{var i,l,d,u;return!!((l=(i=n.artista)==null?void 0:i.midias_sociais)!=null&&l.instagram)||!!((u=(d=n.artista)==null?void 0:d.midias_sociais)!=null&&u.youtube)}},{label:"Portflio (Fotos)",isComplete:n=>{var i;return!!((i=n.artista)!=null&&i.galeria_fotos)&&n.artista.galeria_fotos.length>0}},{label:"Dados Bancrios (PIX)",isComplete:n=>{var i,l,d,u;return!!((l=(i=n.artista)==null?void 0:i.dados_bancarios)!=null&&l.chave_pix)&&!!((u=(d=n.artista)==null?void 0:d.dados_bancarios)!=null&&u.tipo_chave)}},{label:"Disponibilidade Semanal",isComplete:n=>{var l;const i=(l=n.artista)==null?void 0:l.disponibilidade;return i?Object.values(i).some(d=>(d==null?void 0:d.active)===!0):!1}}].filter(n=>!n.isComplete(t)).map(n=>n.label);return{complete:s.length===0,missing:s}},ol=t=>t.replace(/\D/g,""),HI=(t,e)=>{const s=t.trim();if(!s)return{valid:!1,error:"Chave PIX no pode estar vazia"};switch(e){case"cpf":return GI(s);case"cnpj":return FI(s);case"email":const n=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return{valid:n.test(s),error:n.test(s)?void 0:"E-mail invlido"};case"celular":const i=ol(s),l=i.length===11&&i.startsWith("0")===!1;return{valid:l,error:l?void 0:"Celular deve ter 11 dgitos (DDD + nmero)"};case"aleatoria":const d=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;return{valid:d.test(s),error:d.test(s)?void 0:"Formato de chave aleatria invlido"};default:return{valid:!1,error:"Tipo de chave desconhecido"}}},GI=t=>{const e=t.replace(/\D/g,"");if(e.length!==11)return{valid:!1,error:"CPF deve ter 11 dgitos"};if(/^(\d)\1{10}$/.test(e))return{valid:!1,error:"CPF invlido"};let s=0;for(let i=0;i<9;i++)s+=parseInt(e.charAt(i))*(10-i);let n=11-s%11;if(n>=10&&(n=0),n!==parseInt(e.charAt(9)))return{valid:!1,error:"CPF invlido"};s=0;for(let i=0;i<10;i++)s+=parseInt(e.charAt(i))*(11-i);return n=11-s%11,n>=10&&(n=0),n!==parseInt(e.charAt(10))?{valid:!1,error:"CPF invlido"}:{valid:!0}},FI=t=>{const e=t.replace(/\D/g,"");if(e.length!==14)return{valid:!1,error:"CNPJ deve ter 14 dgitos"};if(/^(\d)\1{13}$/.test(e))return{valid:!1,error:"CNPJ invlido"};let s=e.length-2,n=e.substring(0,s);const i=e.substring(s);let l=0,d=s-7;for(let f=s;f>=1;f--)l+=parseInt(n.charAt(s-f))*d--,d<2&&(d=9);let u=l%11<2?0:11-l%11;if(u!==parseInt(i.charAt(0)))return{valid:!1,error:"CNPJ invlido"};s=s+1,n=e.substring(0,s),l=0,d=s-7;for(let f=s;f>=1;f--)l+=parseInt(n.charAt(s-f))*d--,d<2&&(d=9);return u=l%11<2?0:11-l%11,u!==parseInt(i.charAt(1))?{valid:!1,error:"CNPJ invlido"}:{valid:!0}},JI=t=>{var s,n,i,l,d,u;const e=[];if((!t.nome||t.nome.trim().length<3)&&e.push("Nome artstico deve ter pelo menos 3 caracteres"),t.telefone){const f=ol(t.telefone);f.length!==10&&f.length!==11&&e.push("Telefone deve ter 10 ou 11 dgitos")}if(t.descricao&&t.descricao.length>0&&t.descricao.length<20&&e.push("Descrio deve ter pelo menos 20 caracteres ou ficar vazia"),(s=t.dados_bancarios)!=null&&s.chave_pix&&((n=t.dados_bancarios)!=null&&n.tipo_chave)){const f=HI(t.dados_bancarios.chave_pix,t.dados_bancarios.tipo_chave);f.valid||e.push(f.error||"Chave PIX invlida")}return(i=t.dados_bancarios)!=null&&i.chave_pix&&!((l=t.dados_bancarios)!=null&&l.tipo_chave)&&e.push("Selecione o tipo da chave PIX"),!((d=t.dados_bancarios)!=null&&d.chave_pix)&&((u=t.dados_bancarios)!=null&&u.tipo_chave)&&e.push("Informe a chave PIX"),{valid:e.length===0,errors:e}},KI=t=>{const e=[];if((!t.nome||t.nome.trim().length<3)&&e.push("Nome do estabelecimento deve ter pelo menos 3 caracteres"),t.telefone){const s=ol(t.telefone);s.length!==10&&s.length!==11&&e.push("Telefone deve ter 10 ou 11 dgitos")}if(t.capacidade!==null&&t.capacidade!==void 0){const s=Number(t.capacidade);(isNaN(s)||s<=0)&&e.push("Capacidade deve ser um nmero positivo")}return t.descricao&&t.descricao.length>0&&t.descricao.length<20&&e.push("Descrio deve ter pelo menos 20 caracteres ou ficar vazia"),{valid:e.length===0,errors:e}},YI=t=>{if(!t)return null;const e={};return Object.keys(t).forEach(s=>{const n=t[s];n&&typeof n=="string"&&n.trim()!==""&&(e[s]=n.trim())}),Object.keys(e).length>0?e:null},KN=t=>{if(!t)return null;const e={};return Object.keys(t).forEach(s=>{const n=t[s];n&&typeof n=="string"&&n.trim()!==""&&(e[s]=n.trim())}),Object.keys(e).length>0?e:null},hr=({className:t="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),Ab=[{key:"monday",label:"Segunda-feira"},{key:"tuesday",label:"Tera-feira"},{key:"wednesday",label:"Quarta-feira"},{key:"thursday",label:"Quinta-feira"},{key:"friday",label:"Sexta-feira"},{key:"saturday",label:"Sbado"},{key:"sunday",label:"Domingo"}],WI=({initialProfile:t,onProfileUpdate:e})=>{const{genres:s}=ns(),[n,i]=N.useState("idle"),[l,d]=N.useState(""),[u,f]=N.useState(""),[m,g]=N.useState(!1),[v,b]=N.useState(null),_=ca(t),[S,E]=N.useState({nome:"",telefone:"",cidade:"",foto_url:"",foto_capa:"",genero_musical:"",descricao:"",midias_sociais:{instagram:"",youtube:"",site:""},dados_bancarios:{banco:"",agencia:"",conta:"",chave_pix:"",tipo_chave:""},disponibilidade:{},rider_tecnico_url:null,mapa_palco_url:null});N.useEffect(()=>{var K,I,U,q,H,$,ie,re,P,O,Y,ne,le,L,D,te,se,fe,ee,me,je,pe;if(t){const Ne={};Ab.forEach(_e=>{Ne[_e.key]={active:!1,start:"18:00",end:"23:00"}});const Me=((K=t.artista)==null?void 0:K.disponibilidade)||{},ue={...Ne,...Me};E({nome:t.nome||"",telefone:t.telefone||"",cidade:t.cidade||"",foto_url:t.foto_url||"",foto_capa:((I=t.artista)==null?void 0:I.foto_capa)||"",genero_musical:((U=t.artista)==null?void 0:U.genero_musical)||"",descricao:((q=t.artista)==null?void 0:q.descricao)||"",midias_sociais:{instagram:(($=(H=t.artista)==null?void 0:H.midias_sociais)==null?void 0:$.instagram)||"",youtube:((re=(ie=t.artista)==null?void 0:ie.midias_sociais)==null?void 0:re.youtube)||"",site:((O=(P=t.artista)==null?void 0:P.midias_sociais)==null?void 0:O.site)||""},dados_bancarios:{banco:((ne=(Y=t.artista)==null?void 0:Y.dados_bancarios)==null?void 0:ne.banco)||"",agencia:((L=(le=t.artista)==null?void 0:le.dados_bancarios)==null?void 0:L.agencia)||"",conta:((te=(D=t.artista)==null?void 0:D.dados_bancarios)==null?void 0:te.conta)||"",chave_pix:((fe=(se=t.artista)==null?void 0:se.dados_bancarios)==null?void 0:fe.chave_pix)||"",tipo_chave:((me=(ee=t.artista)==null?void 0:ee.dados_bancarios)==null?void 0:me.tipo_chave)||""},disponibilidade:ue,rider_tecnico_url:((je=t.artista)==null?void 0:je.rider_tecnico_url)||null,mapa_palco_url:((pe=t.artista)==null?void 0:pe.mapa_palco_url)||null})}},[t]);const C=async(K,I)=>{if(!K.target.files||K.target.files.length===0)return;const U=K.target.files[0];b(I);try{const q=`${t.auth_id}/docs/${I}_${Date.now()}.${U.name.split(".").pop()}`,H=await Ie.upload("artista",q,U);await Xe.updateArtist(t.id,null,{[I==="rider"?"rider_tecnico_url":"mapa_palco_url"]:H}),E($=>({...$,[I==="rider"?"rider_tecnico_url":"mapa_palco_url"]:H})),e()}catch(q){d(he(q))}finally{b(null)}},T=K=>{const{id:I,value:U}=K.target;E(q=>({...q,[I]:U})),n!=="idle"&&i("idle")},R=K=>{const{name:I,value:U}=K.target;E(q=>({...q,midias_sociais:{...q.midias_sociais,[I]:U}})),n!=="idle"&&i("idle")},A=K=>{const{name:I,value:U}=K.target;E(q=>({...q,dados_bancarios:{...q.dados_bancarios,[I]:U}})),n!=="idle"&&i("idle")},M=(K,I,U)=>{E(q=>({...q,disponibilidade:{...q.disponibilidade,[K]:{...q.disponibilidade[K],[I]:U}}})),n!=="idle"&&i("idle")},z=(K,I)=>{Xe.updateBasicInfo(t.id,{foto_url:K}).then(()=>{f("Foto de perfil atualizada!"),e(),I.onSuccess()}).catch(U=>{f("Falha ao salvar a foto."),I.onError()})},F=async K=>{try{await Xe.updateArtist(t.id,null,{foto_capa:K}),E(I=>({...I,foto_capa:K})),e()}catch(I){d("Erro ao salvar foto de capa: "+he(I)),i("error")}},G=async K=>{K.preventDefault(),i("saving"),d("");const I=JI(S);if(!I.valid){i("error"),d(I.errors.join("; "));return}const U=S.telefone?ol(S.telefone):"",q=YI(S.dados_bancarios);let H=q;if(q!=null&&q.chave_pix&&(q!=null&&q.tipo_chave)){const ie=q.tipo_chave==="cpf"||q.tipo_chave==="cnpj"?q.chave_pix.replace(/\D/g,""):q.chave_pix.trim();H={...q,chave_pix:ie}}const $=KN(S.midias_sociais);try{await Xe.updateArtist(t.id,{nome:S.nome.trim(),telefone:U,cidade:S.cidade.trim()},{genero_musical:S.genero_musical,descricao:S.descricao.trim(),midias_sociais:$||{},dados_bancarios:H||{},disponibilidade:S.disponibilidade}),i("success"),e().catch(ie=>{console.warn("Erro ao atualizar contexto:",ie)}),setTimeout(()=>i("idle"),3e3)}catch(ie){i("error"),d(he(ie))}};return a.jsx("div",{className:"space-y-12",children:a.jsxs("form",{onSubmit:G,children:[a.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6",children:a.jsx("h2",{className:"text-2xl font-bold font-poppins text-white",children:"Editar Perfil"})}),!_.complete&&a.jsxs("div",{className:"mb-8 bg-gray-900 border-l-4 border-yellow-500 p-4 rounded-r-lg shadow-md transition-all",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(ss,{className:"w-5 h-5 text-yellow-500 flex-shrink-0"}),a.jsx("div",{children:a.jsxs("p",{className:"text-sm text-gray-300",children:["Seu perfil est incompleto. Preencha os ",a.jsxs("strong",{children:[_.missing.length," itens restantes"]}),"."]})})]}),a.jsx("button",{type:"button",onClick:()=>g(!m),className:"text-xs font-semibold text-primary hover:underline",children:m?"Ocultar":"Ver Pendncias"})]}),m&&a.jsx("div",{className:"mt-3 pl-8 animate-fade-in",children:a.jsx("ul",{className:"list-disc text-xs text-gray-400 space-y-1",children:_.missing.map((K,I)=>a.jsx("li",{children:String(K)},I))})})]}),a.jsx(JN,{currentPath:S.foto_capa,bucketName:"artista",userId:t.auth_id,onUploadComplete:F}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 items-start mb-8",children:[a.jsxs("div",{className:"lg:col-span-1 flex flex-col items-center",children:[a.jsx(FN,{url:S.foto_url,onUpload:z}),u&&a.jsx("p",{className:"text-sm text-green-400 mt-2 text-center",children:u})]}),a.jsxs("div",{className:"lg:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"nome",className:"block text-sm font-medium text-gray-300",children:"Nome Artstico / Banda"}),a.jsx("input",{type:"text",id:"nome",value:S.nome,onChange:T,className:"mt-1 input-style"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"telefone",className:"block text-sm font-medium text-gray-300",children:"Telefone (Somente nmeros)"}),a.jsx("input",{type:"tel",id:"telefone",value:S.telefone,onChange:T,className:"mt-1 input-style",placeholder:"(00) 00000-0000"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"cidade",className:"block text-sm font-medium text-gray-300",children:"Cidade"}),a.jsx("input",{type:"text",id:"cidade",value:S.cidade,onChange:T,className:"mt-1 input-style"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"genero_musical",className:"block text-sm font-medium text-gray-300",children:"Gnero Principal"}),a.jsxs("select",{id:"genero_musical",value:S.genero_musical,onChange:T,className:"mt-1 input-style",children:[a.jsx("option",{value:"",children:"Selecione"}),s.map(K=>a.jsx("option",{value:K.nome,children:K.nome},K.id))]})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{htmlFor:"descricao",className:"block text-sm font-medium text-gray-300",children:"Sobre (Bio)"}),a.jsx("textarea",{id:"descricao",rows:4,value:S.descricao,onChange:T,className:"mt-1 input-style",placeholder:"Conte sua histria..."})]}),a.jsxs("div",{className:"md:col-span-2 space-y-4",children:[a.jsx("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:"Redes Sociais"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"instagram",className:"block text-sm font-medium text-gray-300",children:"Instagram"}),a.jsx("input",{type:"text",name:"instagram",id:"instagram",value:S.midias_sociais.instagram,onChange:R,className:"mt-1 input-style",placeholder:"@usuario"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"youtube",className:"block text-sm font-medium text-gray-300",children:"YouTube"}),a.jsx("input",{type:"text",name:"youtube",id:"youtube",value:S.midias_sociais.youtube,onChange:R,className:"mt-1 input-style",placeholder:"Canal URL"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"site",className:"block text-sm font-medium text-gray-300",children:"Site / Linktree"}),a.jsx("input",{type:"text",name:"site",id:"site",value:S.midias_sociais.site,onChange:R,className:"mt-1 input-style",placeholder:"https://..."})]})]})]}),a.jsxs("div",{className:"md:col-span-2 bg-gray-900/50 p-6 rounded-2xl border border-gray-700",children:[a.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[a.jsx(Rs,{className:"w-5 h-5 text-green-400"})," Dados para Recebimento (PIX)"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Banco"}),a.jsx("input",{type:"text",name:"banco",value:S.dados_bancarios.banco,onChange:A,className:"input-style",placeholder:"Ex: Nubank"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Agncia"}),a.jsx("input",{type:"text",name:"agencia",value:S.dados_bancarios.agencia,onChange:A,className:"input-style",placeholder:"0001"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Conta"}),a.jsx("input",{type:"text",name:"conta",value:S.dados_bancarios.conta,onChange:A,className:"input-style",placeholder:"12345-6"})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Chave PIX"}),a.jsx("input",{type:"text",name:"chave_pix",value:S.dados_bancarios.chave_pix,onChange:A,className:"input-style",placeholder:"CPF, E-mail, Celular ou Aleatria"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Tipo de Chave"}),a.jsxs("select",{name:"tipo_chave",value:S.dados_bancarios.tipo_chave,onChange:A,className:"input-style",children:[a.jsx("option",{value:"",children:"Selecione"}),a.jsx("option",{value:"cpf",children:"CPF"}),a.jsx("option",{value:"cnpj",children:"CNPJ"}),a.jsx("option",{value:"email",children:"E-mail"}),a.jsx("option",{value:"celular",children:"Celular"}),a.jsx("option",{value:"aleatoria",children:"Chave Aleatria"})]})]})]}),a.jsx("p",{className:"mt-4 text-[10px] text-gray-500 italic",children:"* Estes dados so confidenciais e utilizados exclusivamente para o repasse de seus cachs via plataforma."})]}),a.jsxs("div",{className:"md:col-span-2 bg-gray-900/50 p-6 rounded-2xl border border-gray-700",children:[a.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[a.jsx(ma,{className:"w-5 h-5 text-blue-400"})," Disponibilidade Semanal"]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Ab.map(K=>{const I=S.disponibilidade[K.key]||{active:!1,start:"18:00",end:"23:00"};return a.jsxs("div",{className:`p-3 rounded-xl border transition-all ${I.active?"bg-gray-800 border-primary/50":"bg-gray-900/30 border-gray-800 opacity-75 hover:opacity-100"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("span",{className:`text-sm font-bold ${I.active?"text-white":"text-gray-500"}`,children:K.label}),a.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[a.jsx("input",{type:"checkbox",className:"sr-only peer",checked:I.active,onChange:U=>M(K.key,"active",U.target.checked)}),a.jsx("div",{className:"w-9 h-5 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-primary"})]})]}),I.active&&a.jsxs("div",{className:"flex items-center gap-2 animate-fade-in",children:[a.jsx("div",{className:"flex-1",children:a.jsx("input",{type:"time",value:I.start,onChange:U=>M(K.key,"start",U.target.value),className:"w-full bg-gray-900 border border-gray-700 rounded-lg px-2 py-1 text-xs text-center text-white focus:border-primary focus:outline-none"})}),a.jsx("span",{className:"text-gray-500 text-xs",children:"at"}),a.jsx("div",{className:"flex-1",children:a.jsx("input",{type:"time",value:I.end,onChange:U=>M(K.key,"end",U.target.value),className:"w-full bg-gray-900 border border-gray-700 rounded-lg px-2 py-1 text-xs text-center text-white focus:border-primary focus:outline-none"})})]})]},K.key)})})]}),a.jsxs("div",{className:"bg-gray-900/50 p-6 rounded-2xl border border-gray-700",children:[a.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[a.jsx(hr,{className:"w-5 h-5 text-primary"})," Rider Tcnico (PDF/Imagem)"]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("label",{className:"flex-1 flex flex-col items-center justify-center py-4 border-2 border-dashed border-gray-700 rounded-xl cursor-pointer hover:bg-gray-800 transition-all",children:[a.jsx(Ca,{className:`w-6 h-6 mb-2 ${v==="rider"?"animate-bounce":"text-gray-500"}`}),a.jsx("span",{className:"text-xs font-bold text-gray-400",children:S.rider_tecnico_url?"Alterar Rider":"Enviar Rider"}),a.jsx("input",{type:"file",className:"hidden",accept:".pdf,image/*",onChange:K=>C(K,"rider")})]}),S.rider_tecnico_url&&a.jsx("div",{className:"w-12 h-12 bg-green-500/10 rounded-full flex items-center justify-center text-green-500 border border-green-500/30",children:a.jsx(_a,{className:"w-6 h-6"})})]})]}),a.jsxs("div",{className:"bg-gray-900/50 p-6 rounded-2xl border border-gray-700",children:[a.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[a.jsx(Wt,{className:"w-5 h-5 text-secondary"})," Mapa de Palco"]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("label",{className:"flex-1 flex flex-col items-center justify-center py-4 border-2 border-dashed border-gray-700 rounded-xl cursor-pointer hover:bg-gray-800 transition-all",children:[a.jsx(Ca,{className:`w-6 h-6 mb-2 ${v==="mapa"?"animate-bounce":"text-gray-500"}`}),a.jsx("span",{className:"text-xs font-bold text-gray-400",children:S.mapa_palco_url?"Alterar Mapa":"Enviar Mapa"}),a.jsx("input",{type:"file",className:"hidden",accept:".pdf,image/*",onChange:K=>C(K,"mapa")})]}),S.mapa_palco_url&&a.jsx("div",{className:"w-12 h-12 bg-green-500/10 rounded-full flex items-center justify-center text-green-500 border border-green-500/30",children:a.jsx(_a,{className:"w-6 h-6"})})]})]})]}),a.jsx("div",{className:"flex justify-end mt-10",children:a.jsxs("button",{type:"submit",disabled:n==="saving",className:"bg-primary text-dark font-black py-4 px-12 rounded-full hover:bg-white transition-all shadow-xl shadow-primary/20 flex items-center gap-2",children:[n==="saving"?"Salvando...":"Salvar Perfil",n==="success"&&a.jsx(_a,{className:"w-5 h-5"})]})}),l&&a.jsx("p",{className:"text-red-400 text-right mt-2 text-sm",children:l})]})})},ps=({className:t="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Nf=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"currentColor",viewBox:"0 0 24 24",strokeWidth:0,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 9.812l-12-6.75A1.125 1.125 0 008.25 4.125v13.5A1.125 1.125 0 009.75 18.75l12-6.75a1.125 1.125 0 000-1.938z"})}),ea=({className:t="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),XI=({isOpen:t,onClose:e,analysis:s})=>{if(!t||!s)return null;const n=s.resultado;return a.jsx("div",{className:"fixed inset-0 bg-black/90 z-50 flex justify-center items-center p-4 backdrop-blur-sm animate-fade-in",children:a.jsxs("div",{className:"bg-gray-900 text-white rounded-2xl shadow-2xl w-full max-w-2xl relative p-0 overflow-hidden border border-gray-800 flex flex-col max-h-[90vh]",children:[a.jsxs("div",{className:"bg-gradient-to-r from-indigo-900 to-gray-900 p-6 border-b border-gray-800 flex justify-between items-center relative overflow-hidden",children:[a.jsxs("div",{className:"relative z-10",children:[a.jsxs("h2",{className:"text-xl font-bold font-poppins flex items-center gap-2",children:[a.jsx(Ft,{className:"text-indigo-400 w-6 h-6 animate-pulse"}),"AI Soundcheck: Raio-X Sonoro"]}),a.jsx("p",{className:"text-xs text-indigo-300 mt-1 uppercase font-black tracking-widest",children:"Analisado por Gemini Flash Audio"})]}),a.jsx("button",{onClick:e,className:"text-gray-400 hover:text-white relative z-10",children:a.jsx(It,{})}),a.jsx("div",{className:"absolute right-0 top-0 w-32 h-32 bg-indigo-500/10 blur-3xl rounded-full"})]}),a.jsxs("div",{className:"overflow-y-auto p-8 space-y-8",children:[a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"bg-gray-850 p-4 rounded-xl border border-gray-800",children:[a.jsx("p",{className:"text-[10px] text-gray-500 uppercase font-black mb-1",children:"Gnero Detectado"}),a.jsx("p",{className:"text-lg font-bold text-white",children:n.genero_sugerido})]}),a.jsxs("div",{className:"bg-gray-850 p-4 rounded-xl border border-gray-800",children:[a.jsx("p",{className:"text-[10px] text-gray-500 uppercase font-black mb-1",children:"Qualidade Tcnica"}),a.jsx("p",{className:`text-lg font-bold ${n.qualidade_tecnica==="Excelente"?"text-green-400":"text-yellow-400"}`,children:n.qualidade_tecnica})]}),a.jsxs("div",{className:"bg-gray-850 p-4 rounded-xl border border-gray-800",children:[a.jsx("p",{className:"text-[10px] text-gray-500 uppercase font-black mb-1",children:"Nvel de Energia"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("span",{className:"text-lg font-bold text-white",children:[n.energia,"%"]}),a.jsx("div",{className:"flex-grow h-1.5 bg-gray-700 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-primary",style:{width:`${n.energia}%`}})})]})]})]}),a.jsxs("div",{className:"bg-gray-850 p-6 rounded-2xl border border-gray-800",children:[a.jsx("h4",{className:"text-xs font-black text-gray-400 uppercase tracking-widest mb-3",children:"Anlise de Timbre"}),a.jsxs("p",{className:"text-gray-200 leading-relaxed italic",children:['"',n.timbre_vocal,'"']})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-xs font-black text-gray-400 uppercase tracking-widest mb-4",children:"Sugestes do Produtor IA"}),a.jsx("div",{className:"space-y-3",children:n.sugestoes.map((i,l)=>a.jsxs("div",{className:"flex items-start gap-3 bg-gray-900/50 p-4 rounded-xl border border-gray-800/50 hover:border-indigo-500/30 transition-colors",children:[a.jsx(Oe,{className:"w-5 h-5 text-indigo-400 shrink-0 mt-0.5"}),a.jsx("p",{className:"text-sm text-gray-300 leading-relaxed",children:i})]},l))})]})]}),a.jsxs("div",{className:"bg-gray-900 border-t border-gray-800 p-4 flex justify-between items-center text-[10px] text-gray-600 font-bold uppercase tracking-tighter",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ea,{className:"w-3 h-3"})," Analisado em ",new Date(s.criado_em).toLocaleString()]}),a.jsx("p",{children:"RESONA Audio Intelligence v1.2"})]})]})})},YN=({profile:t,onUpdate:e})=>{var je,pe;const[s,n]=N.useState("photos"),[i,l]=N.useState([]),[d,u]=N.useState([]),[f,m]=N.useState([]),[g,v]=N.useState([]),[b,_]=N.useState([]),[S,E]=N.useState([]),[C,T]=N.useState(!1),[R,A]=N.useState(null),[M,z]=N.useState(null),[F,G]=N.useState(!1),[K,I]=N.useState(!0),[U,q]=N.useState(""),[H,$]=N.useState(""),[ie,re]=N.useState(null),P=t.tipo==="artista",O=P?"artista":"estabelecimento",Y=t.plano==="free",ne={photos:5,videos:1,audios:1},le=s==="photos"?i:s==="videos"?f:b,L=s==="photos"?d:s==="videos"?g:S,D=ne[s],te=Y&&le.length>=D,se=N.useCallback(()=>{var Ne,Me,ue,_e,Ue;return P?{photos:((Ne=t.artista)==null?void 0:Ne.galeria_fotos)||[],videos:((Me=t.artista)==null?void 0:Me.galeria_videos)||[],audios:((ue=t.artista)==null?void 0:ue.galeria_audios)||[]}:{photos:((_e=t.estabelecimento)==null?void 0:_e.galeria_fotos)||[],videos:((Ue=t.estabelecimento)==null?void 0:Ue.galeria_videos)||[],audios:[]}},[P,t]);N.useEffect(()=>{(async()=>{I(!0),q("");const Me=Date.now(),ue=se();try{const[_e,Ue,Fe]=await Promise.all([ue.photos.length>0?Ie.getSignedUrls(O,ue.photos,3600).catch(()=>[]):Promise.resolve([]),ue.videos.length>0?Ie.getSignedUrls(O,ue.videos,3600).catch(()=>[]):Promise.resolve([]),P&&ue.audios.length>0?Ie.getSignedUrls(O,ue.audios,3600).catch(()=>[]):Promise.resolve([])]);l(ue.photos),u(_e.map(dt=>`${dt}&t=${Me}`)),m(ue.videos),v(Ue),P&&(_(ue.audios),E(Fe))}catch(_e){console.error("Erro no carregamento da galeria:",_e),q("Ocorreu um problema ao carregar alguns arquivos.")}finally{I(!1)}})()},[t.id,(je=t.artista)==null?void 0:je.galeria_fotos,(pe=t.estabelecimento)==null?void 0:pe.galeria_fotos,O,P,se]),N.useEffect(()=>{if(H||U){const Ne=setTimeout(()=>{$(""),q("")},5e3);return()=>clearTimeout(Ne)}},[H,U]);const fe=async Ne=>{if(!Ne.target.files||Ne.target.files.length===0)return;if(te){q(`Limite do plano Free atingido para ${s==="photos"?"fotos":"mdia"}.`);return}G(!0),q("");const Me=Array.from(Ne.target.files);if(Y&&le.length+Me.length>D){q(`Limite excedido. O mximo  de ${D} itens.`),G(!1);return}let ue="portfolio",_e=s==="photos"?"galeria_fotos":s==="videos"?"galeria_videos":"galeria_audios";s==="videos"?ue="portfolio/videos":s==="audios"&&(ue="portfolio/audios");try{const Ue=[];for(const Fe of Me){$(`Enviando: ${Fe.name}...`);const dt=Fe.name.split(".").pop(),pt=`${t.auth_id}/${ue}/p_${Date.now()}_${Math.random().toString(36).substring(7)}.${dt}`;try{const Dt=await Ie.upload(O,pt,Fe);Ue.push(Dt)}catch(Dt){console.error(`Falha ao subir arquivo ${Fe.name}:`,Dt)}}if(Ue.length>0){const Fe=[...le,...Ue];P?await Xe.updateArtist(t.id,null,{[_e]:Fe}):await Xe.updateVenue(t.id,null,{[_e]:Fe}),$(`${Ue.length} arquivo(s) enviados!`),e()}else throw new Error("Nenhum arquivo pde ser enviado. Verifique sua conexo.")}catch(Ue){q(he(Ue))}finally{G(!1),Ne.target.value=""}},ee=async Ne=>{re(Ne);let Me=s==="photos"?"galeria_fotos":s==="videos"?"galeria_videos":"galeria_audios";try{await Ie.remove(O,[Ne]);const ue=le.filter(_e=>_e!==Ne);P?await Xe.updateArtist(t.id,null,{[Me]:ue}):await Xe.updateVenue(t.id,null,{[Me]:ue}),$("Item removido."),e()}catch(ue){q(`Erro ao remover: ${he(ue)}`)}finally{re(null)}},me=async(Ne,Me)=>{z(Ne);try{const ue=await pM.analyzeAudio(t.id,Ne,Me);A(ue),T(!0)}catch(ue){alert("Erro na anlise: "+he(ue))}finally{z(null)}};return a.jsxs("div",{className:"animate-fade-in",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[a.jsx("h2",{className:"text-2xl font-bold font-poppins text-white",children:"Gerenciar Portflio"}),Y&&a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2 bg-gray-900 border border-gray-700 px-4 py-2 rounded-full shadow-inner",children:[a.jsx("span",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest",children:"Cota:"}),a.jsxs("span",{className:`text-sm font-black font-mono ${te?"text-red-400":"text-primary"}`,children:[le.length,"/",D]})]}),a.jsxs(Se,{to:"/planos",className:"flex items-center gap-2 bg-primary/10 hover:bg-primary text-primary hover:text-dark px-4 py-2 rounded-full text-xs font-bold transition-all border border-primary/30",children:[a.jsx(Ft,{className:"w-3 h-3"})," Upgrade Pro"]})]})]}),a.jsxs("div",{className:"flex space-x-2 mb-6 bg-gray-800 p-1 rounded-lg w-fit overflow-x-auto scrollbar-hide",children:[a.jsxs("button",{onClick:()=>n("photos"),className:`py-2 px-6 font-bold text-sm rounded-md transition-all flex items-center gap-2 ${s==="photos"?"bg-gray-700 text-white shadow-sm":"text-gray-400 hover:text-white hover:bg-gray-700/50"}`,children:[a.jsx(tn,{className:"w-4 h-4"})," Fotos"]}),a.jsxs("button",{onClick:()=>n("videos"),className:`py-2 px-6 font-bold text-sm rounded-md transition-all flex items-center gap-2 ${s==="videos"?"bg-gray-700 text-white shadow-sm":"text-gray-400 hover:text-white hover:bg-gray-700/50"}`,children:[a.jsx(Nf,{className:"w-4 h-4"})," Vdeos"]}),P&&a.jsxs("button",{onClick:()=>n("audios"),className:`py-2 px-6 font-bold text-sm rounded-md transition-all flex items-center gap-2 ${s==="audios"?"bg-gray-700 text-white shadow-sm":"text-gray-400 hover:text-white hover:bg-gray-700/50"}`,children:[a.jsx(_o,{className:"w-4 h-4"})," udios"]})]}),a.jsx("div",{className:"bg-gray-800 rounded-xl p-6 min-h-[350px] border border-gray-700 shadow-lg relative",children:K?a.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-gray-800/50 backdrop-blur-sm rounded-xl z-20",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mb-4"}),a.jsx("p",{className:"text-gray-400 font-medium",children:"Sincronizando arquivos..."})]}):a.jsxs(a.Fragment,{children:[H&&a.jsx("div",{className:"mb-4 p-3 rounded-md text-center text-sm bg-green-500/20 text-green-300 border border-green-500/30 animate-fade-in",children:H}),U&&a.jsx("div",{className:"mb-4 p-3 rounded-md text-center text-sm bg-red-500/20 text-red-400 border border-red-500/30 animate-shake",children:U}),a.jsxs("div",{className:`grid gap-6 mb-6 ${s==="audios"?"grid-cols-1":"grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5"}`,children:[!te&&a.jsxs("label",{className:`relative group rounded-2xl overflow-hidden ${s==="audios"?"h-24":"aspect-square"} bg-gray-900 border-2 border-dashed border-gray-600 hover:border-primary transition-all cursor-pointer flex flex-col items-center justify-center ${F?"opacity-50":""} shadow-inner`,children:[a.jsx("div",{className:"p-3 bg-gray-800 rounded-full group-hover:bg-primary/20 mb-2 transition-colors border border-gray-700 group-hover:border-primary/50",children:a.jsx(Ca,{className:"w-6 h-6 text-gray-500 group-hover:text-primary"})}),a.jsx("span",{className:"text-[10px] uppercase font-black text-gray-500 group-hover:text-white tracking-widest transition-colors",children:F?"Aguarde":"Adicionar"}),a.jsx("input",{type:"file",multiple:s==="photos",className:"hidden",onChange:fe,disabled:F,accept:s==="photos"?"image/*":s==="videos"?"video/*":"audio/*"})]}),L.map((Ne,Me)=>{const ue=le[Me],_e=ie===ue,Ue=M===ue;return a.jsxs("div",{className:`relative group rounded-2xl overflow-hidden ${s==="audios"?"h-24 bg-gray-900 p-4 border border-gray-700 flex items-center gap-4":"aspect-square bg-black border border-gray-700"} shadow-md hover:shadow-2xl hover:border-gray-500 transition-all`,children:[s==="photos"?a.jsx("img",{src:Ne,alt:"Portfolio",className:`w-full h-full object-cover ${_e?"opacity-50":""}`}):s==="videos"?a.jsxs("div",{className:"w-full h-full flex items-center justify-center bg-gray-950",children:[a.jsx(Nf,{className:"w-8 h-8 text-white opacity-50"}),a.jsx("video",{src:Ne,className:`absolute inset-0 w-full h-full object-cover ${_e?"opacity-50":""}`})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center border border-primary/20 shrink-0",children:a.jsx(_o,{className:"w-5 h-5 text-primary"})}),a.jsx("audio",{src:Ne,controls:!0,className:"w-full h-8 custom-audio-player"}),a.jsxs("button",{onClick:()=>me(ue,Ne),disabled:Ue,className:"shrink-0 bg-indigo-600 hover:bg-indigo-500 text-white p-2 rounded-lg transition-colors flex items-center gap-2 group/ai",children:[Ue?a.jsx("span",{className:"animate-spin text-xs",children:""}):a.jsx(Ft,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden sm:inline text-[10px] font-black uppercase",children:"Soundcheck"})]})]}),a.jsx("div",{className:`absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center ${s==="audios"?"hidden":""}`,children:a.jsx("button",{onClick:()=>ee(ue),className:`p-2.5 bg-red-600 hover:bg-red-700 text-white rounded-xl transition-all transform hover:scale-110 shadow-lg ${_e?"pointer-events-none":""}`,children:_e?a.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):a.jsx(ps,{className:"w-5 h-5"})})}),s==="audios"&&a.jsx("button",{onClick:()=>ee(ue),className:"p-2 text-gray-500 hover:text-red-500 transition-colors",children:a.jsx(ps,{className:"w-5 h-5"})})]},ue||Me)})]}),le.length===0&&!F&&a.jsx("div",{className:"py-20",children:a.jsx(ja,{icon:s==="photos"?tn:s==="videos"?Nf:_o,title:`Galeria de ${s==="photos"?"fotos":s==="videos"?"vdeos":"udios"} vazia`,description:"Destaque seus melhores momentos para atrair novas oportunidades."})})]})}),a.jsx(XI,{isOpen:C,onClose:()=>T(!1),analysis:R}),a.jsx("style",{children:`
                .custom-audio-player::-webkit-media-controls-enclosure { background-color: transparent; }
                .custom-audio-player::-webkit-media-controls-panel { filter: invert(1); }
            `})]})},il=({className:t="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})}),sn=({isOpen:t,onClose:e,onConfirm:s,title:n,message:i,confirmText:l="Confirmar",cancelText:d="Cancelar",isConfirming:u=!1})=>{const[f,m]=N.useState(!1);if(!t)return null;const g=()=>{m(!0),setTimeout(()=>m(!1),500)};return vw.createPortal(a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-[70] flex justify-center items-center p-4","aria-labelledby":"confirmation-modal-title",role:"dialog","aria-modal":"true",onClick:g,children:a.jsxs("div",{className:`bg-gray-800 text-white rounded-xl shadow-2xl w-full max-w-md relative p-8 transform transition-all ${f?"shake":""}`,onClick:v=>v.stopPropagation(),children:[a.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-500 hover:text-white","aria-label":"Fechar",children:a.jsx(It,{})}),a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-500/20 sm:mx-0 sm:h-10 sm:w-10",children:a.jsx(ss,{className:"h-6 w-6 text-red-400"})}),a.jsxs("div",{className:"mt-0 text-left",children:[a.jsx("h3",{className:"text-xl font-bold font-poppins mb-2",id:"confirmation-modal-title",children:n}),a.jsx("div",{className:"text-gray-300",children:i})]})]}),a.jsxs("div",{className:"mt-6 flex flex-col-reverse sm:flex-row sm:justify-end sm:gap-4",children:[a.jsx("button",{type:"button",onClick:e,disabled:u,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-600 shadow-sm px-4 py-2 bg-gray-700 text-base font-medium text-white hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-indigo-500 sm:mt-0 sm:w-auto sm:text-sm disabled:opacity-50",children:d}),a.jsx("button",{type:"button",onClick:s,disabled:u,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-red-500 sm:w-auto sm:text-sm disabled:opacity-50",children:u?"Confirmando...":l})]})]})}),document.body)},QI=({profile:t,onUpdate:e})=>{var K;const[s,n]=N.useState([]),[i,l]=N.useState(!0),[d,u]=N.useState(""),[f,m]=N.useState(""),[g,v]=N.useState(""),[b,_]=N.useState(""),[S,E]=N.useState(!1),[C,T]=N.useState(!1),[R,A]=N.useState(null),M=(K=t.artista)==null?void 0:K.id;N.useEffect(()=>{(async()=>{if(!M){l(!1);return}l(!0);try{const U=await Jc.list(M);n(U)}catch(U){u("Falha ao carregar os membros da banda: "+he(U))}finally{l(!1)}})()},[M]),N.useEffect(()=>{if(f||d){const I=setTimeout(()=>{m(""),u("")},5e3);return()=>clearTimeout(I)}},[f,d]);const z=async I=>{if(I.preventDefault(),!(!g||!b||!M)){E(!0),m("Adicionando membro...");try{const U=await Jc.add(M,g,b);n(q=>[...q,U]),v(""),_(""),m("Membro adicionado com sucesso!"),e()}catch(U){u("Erro ao adicionar membro: "+he(U))}finally{E(!1)}}},F=I=>{A(I),T(!0)},G=async()=>{if(R){E(!0);try{await Jc.remove(R.id),n(I=>I.filter(U=>U.id!==R.id)),m("Membro removido com sucesso."),e()}catch(I){u("Erro ao remover membro: "+he(I))}finally{E(!1),T(!1),A(null)}}};return a.jsxs("div",{className:"animate-fade-in",children:[a.jsx("h2",{className:"text-2xl font-bold font-poppins text-white mb-6",children:"Integrantes da Banda"}),a.jsxs("div",{className:"bg-gray-800 rounded-xl border border-gray-700 p-6 mb-8 shadow-lg",children:[a.jsx("h3",{className:"text-sm font-bold text-gray-400 uppercase mb-4",children:"Adicionar Novo Integrante"}),a.jsxs("form",{onSubmit:z,className:"grid grid-cols-1 md:grid-cols-12 gap-4 items-end",children:[a.jsxs("div",{className:"md:col-span-5",children:[a.jsx("label",{htmlFor:"memberName",className:"block text-xs font-medium text-gray-500 mb-1",children:"Nome"}),a.jsx("input",{type:"text",id:"memberName",value:g,onChange:I=>v(I.target.value),required:!0,className:"w-full bg-gray-900 border border-gray-600 rounded-lg p-3 text-white focus:outline-none focus:ring-2 focus:ring-secondary focus:border-transparent transition-all",placeholder:"Ex: Joo Silva"})]}),a.jsxs("div",{className:"md:col-span-5",children:[a.jsx("label",{htmlFor:"memberInstrument",className:"block text-xs font-medium text-gray-500 mb-1",children:"Funo / Instrumento"}),a.jsx("input",{type:"text",id:"memberInstrument",value:b,onChange:I=>_(I.target.value),required:!0,className:"w-full bg-gray-900 border border-gray-600 rounded-lg p-3 text-white focus:outline-none focus:ring-2 focus:ring-secondary focus:border-transparent transition-all",placeholder:"Ex: Guitarra Solo"})]}),a.jsx("div",{className:"md:col-span-2",children:a.jsxs("button",{type:"submit",disabled:S,className:"w-full flex justify-center items-center gap-2 bg-secondary text-white font-bold py-3 px-4 rounded-lg hover:bg-opacity-90 disabled:opacity-50 transition-all shadow-lg shadow-secondary/20 h-[50px]",children:[a.jsx(il,{className:"w-5 h-5"}),a.jsx("span",{className:"hidden md:inline",children:"Add"}),a.jsx("span",{className:"md:hidden",children:"Adicionar"})]})})]})]}),f&&a.jsx("div",{className:"p-3 mb-6 rounded-lg bg-green-500/10 border border-green-500/20 text-green-400 text-center text-sm",children:f}),d&&a.jsx("div",{className:"p-3 mb-6 rounded-lg bg-red-500/10 border border-red-500/20 text-red-400 text-center text-sm",children:d}),i?a.jsxs("div",{className:"text-center py-12 text-gray-500",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-2"}),"Carregando membros..."]}):a.jsx("div",{className:"space-y-3",children:s.length>0?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.map(I=>a.jsxs("div",{className:"bg-gray-800 p-4 rounded-xl border border-gray-700 flex justify-between items-center group hover:border-primary/50 transition-colors shadow-sm hover:shadow-md",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-700 flex items-center justify-center text-gray-400 font-bold text-lg border border-gray-600 group-hover:border-primary/50 group-hover:text-primary transition-colors",children:I.nome.charAt(0).toUpperCase()}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-white text-lg",children:I.nome}),a.jsx("p",{className:"text-sm text-gray-400",children:I.instrumento})]})]}),a.jsx("button",{onClick:()=>F(I),className:"text-gray-500 hover:text-red-500 p-2 rounded-full hover:bg-red-500/10 transition-colors",title:"Remover integrante",children:a.jsx(ps,{className:"w-5 h-5"})})]},I.id))}):a.jsx(ja,{icon:Sa,title:"Banda Solo?",description:"Voc ainda no adicionou nenhum integrante. Adicione msicos, tcnicos ou roadies para completar seu perfil."})}),a.jsx(sn,{isOpen:C,onClose:()=>T(!1),onConfirm:G,title:"Confirmar Remoo",message:a.jsxs("p",{children:["Tem certeza que deseja remover o integrante ",a.jsx("strong",{className:"text-white",children:R==null?void 0:R.nome}),"?"]}),confirmText:"Sim, Remover",isConfirming:S})]})},Ta=({className:t="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),$m=({profile:t,onUpdate:e})=>{const[s,n]=N.useState(!1),[i,l]=N.useState(""),[d,u]=N.useState(!1),f=t.status_verificacao;t.tipo;const m=async g=>{if(!g.target.files||g.target.files.length===0)return;const v=g.target.files[0];if(v.size>5*1024*1024){l("O arquivo deve ter no mximo 5MB.");return}n(!0),l(""),u(!1);try{const b=v.name.split(".").pop(),_=`${t.auth_id}/kyc/documento_${Date.now()}.${b}`,S=await Ie.upload("site",_,v);await Xe.submitKyc(t.id,S),u(!0),e()}catch(b){l(he(b))}finally{n(!1)}};return a.jsxs("div",{className:"bg-gray-850 p-6 rounded-2xl border border-gray-700 shadow-inner",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:`p-3 rounded-full ${f==="verificado"?"bg-green-500/20 text-green-400":f==="pendente"?"bg-yellow-500/20 text-yellow-400":"bg-primary/20 text-primary"}`,children:a.jsx(Pn,{className:"w-8 h-8"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold text-white font-poppins",children:"Verificao de Identidade"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Aumente sua credibilidade e segurana na rede."})]})]}),a.jsxs("div",{className:"space-y-6",children:[f==="verificado"?a.jsxs("div",{className:"bg-green-500/10 border border-green-500/30 p-4 rounded-xl flex items-start gap-3",children:[a.jsx(Oe,{className:"w-5 h-5 text-green-400 mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-green-300 font-bold",children:"Perfil Verificado"}),a.jsx("p",{className:"text-xs text-green-300/70 mt-1",children:"Sua identidade foi confirmada. O selo azul agora aparece ao lado do seu nome em buscas e no perfil pblico."})]})]}):f==="pendente"?a.jsxs("div",{className:"bg-yellow-500/10 border border-yellow-500/30 p-4 rounded-xl flex items-start gap-3",children:[a.jsx(ea,{className:"w-5 h-5 text-yellow-400 mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-yellow-300 font-bold",children:"Anlise em Andamento"}),a.jsx("p",{className:"text-xs text-yellow-300/70 mt-1",children:"J recebemos seu documento. Nossa equipe revisar os dados em at 48 horas teis."})]})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-gray-900/50 p-4 rounded-xl border border-gray-800",children:[a.jsx("h4",{className:"text-sm font-bold text-gray-300 mb-2",children:"Por que verificar?"}),a.jsxs("ul",{className:"text-xs text-gray-500 space-y-2",children:[a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(Oe,{className:"w-3 h-3 text-primary"})," Selo de confiana no perfil pblico"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(Oe,{className:"w-3 h-3 text-primary"})," Maior prioridade em recomendaes de contratantes"]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx(Oe,{className:"w-3 h-3 text-primary"})," Desbloqueio de saques acima de R$ 5.000,00"]})]})]}),f==="rejeitado"&&a.jsxs("div",{className:"bg-red-500/10 border border-red-500/30 p-4 rounded-xl flex items-start gap-3",children:[a.jsx(Ta,{className:"w-5 h-5 text-red-400 mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-red-300 font-bold",children:"Verificao Reprovada"}),a.jsx("p",{className:"text-xs text-red-300/70 mt-1",children:"Houve um problema com o documento anterior. Por favor, envie uma nova foto ntida do seu RG, CNH ou Carto CNPJ."})]})]}),a.jsx("div",{className:"relative",children:a.jsxs("label",{className:`w-full flex flex-col items-center justify-center py-8 border-2 border-dashed border-gray-700 rounded-2xl cursor-pointer hover:bg-primary/5 hover:border-primary transition-all ${s?"opacity-50 pointer-events-none":""}`,children:[a.jsx(Ca,{className:"w-10 h-10 text-gray-500 mb-2"}),a.jsx("span",{className:"text-sm font-bold text-gray-300",children:s?"Enviando documento...":"Enviar Foto do Documento"}),a.jsx("span",{className:"text-[10px] text-gray-500 mt-1",children:"Formatos: JPG, PNG ou PDF (Mx 5MB)"}),a.jsx("input",{type:"file",className:"hidden",accept:"image/*,.pdf",onChange:m})]})})]}),i&&a.jsx("p",{className:"text-xs text-red-400 text-center",children:i}),d&&a.jsx("p",{className:"text-xs text-green-400 text-center",children:"Documento enviado com sucesso!"})]})]})},ZI=({profile:t,onUpdate:e,initialTab:s})=>{const[n,i]=N.useState("dados");return N.useEffect(()=>{s&&["dados","portfolio","banda","verificacao"].includes(s)&&i(s)},[s]),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-wrap gap-2 border-b border-gray-700 pb-2",children:[a.jsxs("button",{onClick:()=>i("dados"),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-bold transition-all ${n==="dados"?"bg-primary text-dark":"text-gray-400 hover:bg-gray-800"}`,children:[a.jsx(Ea,{className:"w-4 h-4"})," Dados Bsicos"]}),a.jsxs("button",{onClick:()=>i("portfolio"),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-bold transition-all ${n==="portfolio"?"bg-primary text-dark":"text-gray-400 hover:bg-gray-800"}`,children:[a.jsx(tn,{className:"w-4 h-4"})," Portflio"]}),a.jsxs("button",{onClick:()=>i("banda"),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-bold transition-all ${n==="banda"?"bg-primary text-dark":"text-gray-400 hover:bg-gray-800"}`,children:[a.jsx(Sa,{className:"w-4 h-4"})," Banda"]}),a.jsxs("button",{onClick:()=>i("verificacao"),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-bold transition-all ${n==="verificacao"?"bg-primary text-dark":"text-gray-400 hover:bg-gray-800"}`,children:[a.jsx(Pn,{className:"w-4 h-4"})," Verificao"]})]}),a.jsxs("div",{className:"animate-fade-in min-h-[500px]",children:[n==="dados"&&a.jsx(WI,{initialProfile:t,onProfileUpdate:e}),n==="portfolio"&&a.jsx(YN,{profile:t,onUpdate:e}),n==="banda"&&a.jsx(QI,{profile:t,onUpdate:e}),n==="verificacao"&&a.jsx($m,{profile:t,onUpdate:e})]})]})},Rb={viewsLast30Days:[12,18,15,25,32,28,45,38,42,58,65,60,72,85,90,88,110,105,95,120,135,128],geoDistribution:[{city:"So Paulo, SP",count:450,percentage:45},{city:"Campinas, SP",count:120,percentage:12},{city:"Curitiba, PR",count:90,percentage:9},{city:"Rio de Janeiro, RJ",count:85,percentage:8},{city:"Santos, SP",count:55,percentage:5}]},eD=({data:t,color:e})=>{const s=Math.max(...t),n=t.map((i,l)=>`${l/(t.length-1)*100},${100-i/s*100}`).join(" ");return a.jsx("svg",{viewBox:"0 0 100 100",className:"w-full h-24 overflow-visible",preserveAspectRatio:"none",children:a.jsx("polyline",{points:n,fill:"none",stroke:e,strokeWidth:"3",vectorEffect:"non-scaling-stroke",strokeLinecap:"round",strokeLinejoin:"round"})})},WN=({profile:t})=>{const e=t.plano==="free";return t.tipo,a.jsxs("div",{className:"relative animate-fade-in",children:[a.jsx("div",{className:"flex justify-between items-center mb-8",children:a.jsxs("div",{children:[a.jsxs("h2",{className:"text-2xl font-bold font-poppins text-white flex items-center gap-2",children:[a.jsx(ur,{className:"text-primary w-7 h-7"}),"Market Intelligence"]}),a.jsx("p",{className:"text-gray-400 text-sm",children:"Dados detalhados sobre o alcance do seu perfil."})]})}),e&&a.jsxs("div",{className:"absolute inset-0 z-20 bg-gray-900/60 backdrop-blur-md rounded-2xl flex flex-col items-center justify-center text-center p-8 border border-primary/20",children:[a.jsx("div",{className:"w-20 h-20 bg-primary/10 rounded-full flex items-center justify-center mb-6 border border-primary/20 animate-bounce-slow",children:a.jsx(As,{className:"w-10 h-10 text-primary"})}),a.jsx("h3",{className:"text-2xl font-black text-white mb-2",children:"Desbloqueie sua Inteligncia"}),a.jsx("p",{className:"text-gray-300 max-w-md mb-8",children:"Assinantes PRO e Business tm acesso a grficos de converso, origem dos visitantes e tendncias de mercado."}),a.jsxs(Se,{to:"/planos",className:"bg-primary text-dark font-black py-4 px-12 rounded-full hover:bg-white transition-all shadow-xl shadow-primary/20 flex items-center gap-2",children:[a.jsx(Ft,{className:"w-5 h-5"}),"Fazer Upgrade Agora"]})]}),a.jsxs("div",{className:`grid grid-cols-1 lg:grid-cols-3 gap-6 ${e?"opacity-40 grayscale pointer-events-none":""}`,children:[a.jsxs("div",{className:"lg:col-span-2 bg-gray-850 p-6 rounded-2xl border border-gray-700 shadow-inner",children:[a.jsxs("div",{className:"flex justify-between items-start mb-6",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-500 text-[10px] font-black uppercase tracking-widest mb-1",children:"Visualizaes de Perfil"}),a.jsx("h4",{className:"text-3xl font-black text-white font-mono",children:"1.284"})]}),a.jsx("span",{className:"bg-green-500/10 text-green-400 text-xs font-bold px-2 py-1 rounded",children:"+14% vs anterior"})]}),a.jsx("div",{className:"h-32 w-full",children:a.jsx(eD,{data:Rb.viewsLast30Days,color:"#51D2EE"})}),a.jsxs("div",{className:"flex justify-between mt-4 text-[10px] text-gray-600 font-bold uppercase tracking-tighter",children:[a.jsx("span",{children:"30 dias atrs"}),a.jsx("span",{children:"Hoje"})]})]}),a.jsxs("div",{className:"bg-gray-850 p-6 rounded-2xl border border-gray-700 shadow-inner",children:[a.jsx("p",{className:"text-gray-500 text-[10px] font-black uppercase tracking-widest mb-6",children:"Funil de Converso"}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[a.jsx("span",{className:"text-gray-400 font-bold",children:"Alcance"}),a.jsx("span",{className:"text-white",children:"100%"})]}),a.jsx("div",{className:"h-2 bg-gray-800 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-blue-500 w-full"})})]}),a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[a.jsx("span",{className:"text-gray-400 font-bold",children:"Interesse (Cliques)"}),a.jsx("span",{className:"text-white",children:"32%"})]}),a.jsx("div",{className:"h-2 bg-gray-800 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-purple-500 w-[32%]"})})]}),a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[a.jsx("span",{className:"text-gray-400 font-bold",children:"Propostas"}),a.jsx("span",{className:"text-primary font-black",children:"8.4%"})]}),a.jsx("div",{className:"h-2 bg-gray-800 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-primary w-[8.4%]"})})]})]}),a.jsx("div",{className:"mt-8 pt-6 border-t border-gray-800",children:a.jsxs("p",{className:"text-[10px] text-gray-500 leading-relaxed",children:[" ",a.jsx("strong",{children:"Dica RESONA:"})," Perfil com vdeos de alta qualidade convertem at 45% mais visitantes em propostas."]})})]}),a.jsxs("div",{className:"bg-gray-850 p-6 rounded-2xl border border-gray-700 shadow-inner lg:col-span-1",children:[a.jsx("p",{className:"text-gray-500 text-[10px] font-black uppercase tracking-widest mb-4",children:"Visitantes por Localidade"}),a.jsx("div",{className:"space-y-4",children:Rb.geoDistribution.map((s,n)=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Wt,{className:"w-3 h-3 text-gray-600"}),a.jsx("span",{className:"text-xs text-gray-300 truncate w-32",children:s.city})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-20 h-1.5 bg-gray-800 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-gray-600",style:{width:`${s.percentage}%`}})}),a.jsxs("span",{className:"text-[10px] font-mono text-gray-500 w-8",children:[s.percentage,"%"]})]})]},n))})]}),a.jsxs("div",{className:"lg:col-span-2 bg-gray-850 p-6 rounded-2xl border border-gray-700 shadow-inner overflow-hidden relative",children:[a.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5",children:a.jsx(ur,{className:"w-32 h-32 text-primary"})}),a.jsx("p",{className:"text-gray-500 text-[10px] font-black uppercase tracking-widest mb-6",children:"Performance Financeira (Estimado Anual)"}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"p-4 bg-gray-900/50 rounded-xl border border-gray-800",children:[a.jsx("p",{className:"text-gray-500 text-[9px] font-bold uppercase mb-1",children:"Total Faturado"}),a.jsx("p",{className:"text-xl font-black text-white font-mono",children:"R$ 42.5k"})]}),a.jsxs("div",{className:"p-4 bg-gray-900/50 rounded-xl border border-gray-800",children:[a.jsx("p",{className:"text-gray-500 text-[9px] font-bold uppercase mb-1",children:"Ticket Mdio"}),a.jsx("p",{className:"text-xl font-black text-primary font-mono",children:"R$ 850"})]}),a.jsxs("div",{className:"p-4 bg-gray-900/50 rounded-xl border border-gray-800",children:[a.jsx("p",{className:"text-gray-500 text-[9px] font-bold uppercase mb-1",children:"Crescimento YoY"}),a.jsx("p",{className:"text-xl font-black text-green-400 font-mono",children:"+28%"})]})]})]})]})]})},jd=({targetId:t})=>{const[e,s]=N.useState([]),[n,i]=N.useState(!0),[l,d]=N.useState(""),[u,f]=N.useState({average:0,total:0,distribution:[0,0,0,0,0]});N.useEffect(()=>{(async()=>{if(t){i(!0);try{const{data:v,error:b}=await Q.from("avaliacoes").select(`
                        id,
                        nota,
                        comentario,
                        criado_em,
                        avaliador:usuarios!avaliador_id (
                            id,
                            nome,
                            foto_url
                        )
                    `).eq("alvo_id",t).order("criado_em",{ascending:!1});if(b)throw b;const _=(v||[]).map(S=>({id:S.id,nota:S.nota,comentario:S.comentario,criado_em:S.criado_em,avaliador:Array.isArray(S.avaliador)?S.avaliador[0]:S.avaliador}));if(s(_),_.length>0){const S=_.length,C=_.reduce((R,A)=>R+A.nota,0)/S,T=[0,0,0,0,0];_.forEach(R=>{R.nota>=1&&R.nota<=5&&T[5-R.nota]++}),f({average:C,total:S,distribution:T})}else f({average:0,total:0,distribution:[0,0,0,0,0]})}catch(v){d("Erro ao carregar avaliaes."),console.error(he(v))}finally{i(!1)}}})()},[t]);const m=g=>{if(g){const{data:v}=Q.storage.from("perfis").getPublicUrl(g);return`${v.publicUrl}?t=${new Date().getTime()}`}return null};return n?a.jsxs("div",{className:"space-y-4 animate-pulse",children:[a.jsx("div",{className:"h-32 bg-gray-800 rounded-lg"}),a.jsx("div",{className:"h-24 bg-gray-800 rounded-lg"}),a.jsx("div",{className:"h-24 bg-gray-800 rounded-lg"})]}):l?a.jsx("div",{className:"text-center py-4 text-red-400 bg-red-500/10 rounded-lg border border-red-500/20",children:l}):a.jsx("div",{className:"space-y-8",children:e.length>0?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"bg-gray-800 p-6 rounded-xl border border-gray-700 shadow-lg flex flex-col md:flex-row gap-8 items-center",children:[a.jsxs("div",{className:"text-center md:text-left flex flex-col items-center md:items-start min-w-[150px]",children:[a.jsx("div",{className:"text-5xl font-extrabold text-white font-poppins",children:u.average.toFixed(1)}),a.jsx("div",{className:"flex text-yellow-400 my-2",children:[...Array(5)].map((g,v)=>a.jsx(At,{className:`w-5 h-5 ${v<Math.round(u.average)?"fill-current":"text-gray-600"}`},v))}),a.jsxs("p",{className:"text-sm text-gray-400",children:[u.total," ",u.total===1?"avaliao":"avaliaes"]})]}),a.jsx("div",{className:"flex-grow w-full space-y-2",children:u.distribution.map((g,v)=>{const b=5-v,_=u.total>0?g/u.total*100:0;return a.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[a.jsxs("div",{className:"flex items-center w-8 text-gray-400 font-bold",children:[b," ",a.jsx("span",{className:"text-[10px] ml-0.5",children:""})]}),a.jsx("div",{className:"flex-grow h-2.5 bg-gray-700 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-yellow-400 rounded-full transition-all duration-500",style:{width:`${_}%`}})}),a.jsx("div",{className:"w-8 text-right text-gray-500 text-xs",children:g})]},b)})})]}),a.jsx("div",{className:"space-y-4",children:e.map(g=>{var _,S;const v=m((_=g.avaliador)==null?void 0:_.foto_url),b=((S=g.avaliador)==null?void 0:S.nome)||"Usurio Removido";return a.jsxs("div",{className:"bg-gray-800 p-5 rounded-lg border border-gray-700 hover:border-gray-600 transition-colors",children:[a.jsxs("div",{className:"flex justify-between items-start mb-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[v?a.jsx("img",{src:v,alt:b,className:"w-10 h-10 rounded-full object-cover border border-gray-600"}):a.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-700 flex items-center justify-center text-gray-400 border border-gray-600",children:a.jsx(Ea,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-white text-sm",children:b}),a.jsx("p",{className:"text-[10px] text-gray-500",children:new Date(g.criado_em).toLocaleDateString("pt-BR",{day:"2-digit",month:"long",year:"numeric"})})]})]}),a.jsx("div",{className:"flex text-yellow-400 bg-gray-900/50 px-2 py-1 rounded-full border border-gray-700",children:[...Array(5)].map((E,C)=>a.jsx(At,{className:`w-3.5 h-3.5 ${C<g.nota?"fill-current":"text-gray-600"}`},C))})]}),g.comentario&&a.jsx("div",{className:"pl-14",children:a.jsxs("p",{className:"text-gray-300 text-sm leading-relaxed",children:['"',g.comentario,'"']})})]},g.id)})})]}):a.jsx(ja,{icon:At,title:"Sem avaliaes ainda",description:"Este perfil ainda no recebeu feedbacks. Seja o primeiro a contratar e avaliar!"})})},tD=({profile:t,initialTab:e})=>{const[s,n]=N.useState("analytics");return N.useEffect(()=>{e&&["analytics","avaliacoes"].includes(e)&&n(e)},[e]),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-wrap gap-2 border-b border-gray-700 pb-2",children:[a.jsxs("button",{onClick:()=>n("analytics"),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-bold transition-all ${s==="analytics"?"bg-primary text-dark":"text-gray-400 hover:bg-gray-800"}`,children:[a.jsx(ur,{className:"w-4 h-4"})," Analytics"]}),a.jsxs("button",{onClick:()=>n("avaliacoes"),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-bold transition-all ${s==="avaliacoes"?"bg-primary text-dark":"text-gray-400 hover:bg-gray-800"}`,children:[a.jsx(At,{className:"w-4 h-4"})," Avaliaes"]})]}),a.jsxs("div",{className:"animate-fade-in",children:[s==="analytics"&&a.jsx(WN,{profile:t}),s==="avaliacoes"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center gap-2",children:[a.jsx(At,{className:"w-6 h-6 text-yellow-400"}),"Minha Reputao"]}),a.jsx("p",{className:"text-gray-400 text-sm",children:"Veja o que os estabelecimentos esto dizendo sobre seus shows."}),a.jsx(jd,{targetId:t.id})]})]})]})},sD=({className:t="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})}),aD=()=>a.jsxs("div",{className:"flex items-center p-4 animate-pulse",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-700"}),a.jsxs("div",{className:"ml-4 flex-grow",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("div",{className:"h-4 bg-gray-700 rounded w-1/2"}),a.jsx("div",{className:"h-3 bg-gray-700 rounded w-1/4"})]}),a.jsx("div",{className:"h-3 bg-gray-700 rounded w-3/4 mt-2"})]})]}),XN=({currentUser:t})=>{const[e,s]=N.useState([]),[n,i]=N.useState(null),[l,d]=N.useState([]),[u,f]=N.useState(""),[m,g]=N.useState(!0),[v,b]=N.useState(!1),[_,S]=N.useState(!1),[E,C]=N.useState(""),T=N.useRef(null),R=()=>{var q;(q=T.current)==null||q.scrollIntoView({behavior:"smooth"})};N.useEffect(()=>{l.length>0&&R()},[l]);const A=N.useCallback(async()=>{g(!0);try{const H=(await yo.getConversations(t.id)).map($=>({id:$.id,nome_participante:$.nome_participante,foto_participante:$.foto_participante,ultima_mensagem:$.ultima_mensagem||"Nenhuma mensagem ainda.",timestamp_ultima_mensagem:$.timestamp_ultima_mensagem?new Date($.timestamp_ultima_mensagem).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}):"",other_participant_id:$.other_participant_id}));s(H)}catch(q){console.error("Error fetching conversations via API:",q.message)}finally{g(!1)}},[t.id]);N.useEffect(()=>{A()},[A]),N.useEffect(()=>{if(!(t!=null&&t.id))return;const q=Q.channel(`notificacoes:${t.id}`);return q.on("postgres_changes",{event:"INSERT",schema:"public",table:"notificacoes",filter:`usuario_id=eq.${t.id}`},H=>{H.new.tipo==="mensagem"&&A()}).subscribe(),()=>{Q.removeChannel(q)}},[t,A]),N.useEffect(()=>{if(!n)return;(async()=>{b(!0);try{const $=await yo.getMessages(n.id);d($)}catch($){console.error("Error fetching messages:",$)}finally{b(!1),setTimeout(R,100)}})();const H=Q.channel(`conversa-${n.id}`);return H.on("postgres_changes",{event:"INSERT",schema:"public",table:"mensagens",filter:`conversa_id=eq.${n.id}`},$=>{d(ie=>[...ie,$.new])}).subscribe(),()=>{Q.removeChannel(H)}},[n]);const M=async q=>{if(q.preventDefault(),!(!u.trim()||!n)){S(!0);try{await yo.sendMessage(n.id,t.id,u),f(""),A(),await wa.create({usuario_id:n.other_participant_id,tipo:"mensagem",titulo:`Nova mensagem de ${t.nome}`,descricao:u.substring(0,50)+(u.length>50?"...":""),url_destino:"/painel?open=mensagens"})}catch(H){console.error("Error sending message or notification:",H)}finally{S(!1),setTimeout(R,100)}}},z=q=>{if(!q)return null;const{data:H}=Q.storage.from("perfis").getPublicUrl(q);return H.publicUrl},F=e.filter(q=>q.nome_participante.toLowerCase().includes(E.toLowerCase())),G=()=>{i(null)},K=q=>{const H={};return q.forEach($=>{const ie=new Date($.criado_em).toISOString().split("T")[0];H[ie]||(H[ie]=[]),H[ie].push($)}),H},I=q=>{const H=new Date(q+"T00:00:00"),$=new Date,ie=new Date($);return ie.setDate(ie.getDate()-1),H.toDateString()===$.toDateString()?"Hoje":H.toDateString()===ie.toDateString()?"Ontem":H.toLocaleDateString("pt-BR",{weekday:"long",day:"numeric",month:"long"})},U=K(l);return a.jsxs("div",{className:"flex flex-col h-full animate-fade-in",children:[a.jsx("h2",{className:"text-2xl font-bold font-poppins text-white mb-6",children:"Mensagens"}),a.jsxs("div",{className:"flex flex-grow h-[calc(100vh-220px)] min-h-[500px] bg-gray-900 rounded-xl overflow-hidden border border-gray-700 shadow-xl",children:[a.jsxs("div",{className:`w-full md:w-1/3 lg:w-80 border-r border-gray-700 flex flex-col bg-gray-850 ${n?"hidden md:flex":"flex"}`,children:[a.jsx("div",{className:"p-4 border-b border-gray-700 shrink-0 bg-gray-900",children:a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"text",placeholder:"Buscar conversas...",className:"w-full bg-gray-800 border border-gray-700 rounded-lg py-2.5 pl-10 pr-4 focus:outline-none focus:ring-2 focus:ring-primary text-white text-sm",value:E,onChange:q=>C(q.target.value)}),a.jsx(ms,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"})]})}),a.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar bg-gray-850",children:m?a.jsx("div",{children:Array.from({length:5}).map((q,H)=>a.jsx(aD,{},H))}):F.length>0?F.map(q=>{const H=z(q.foto_participante),$=(n==null?void 0:n.id)===q.id;return a.jsxs("div",{onClick:()=>i(q),className:`relative flex items-center p-4 cursor-pointer transition-all border-b border-gray-800 last:border-0 ${$?"bg-gray-800 border-l-4 border-l-primary":"hover:bg-gray-800 border-l-4 border-l-transparent"}`,children:[a.jsx("div",{className:"relative flex-shrink-0",children:H?a.jsx("img",{src:H,alt:q.nome_participante,className:"w-12 h-12 rounded-full object-cover ring-2 ring-gray-700"}):a.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-700 flex items-center justify-center",children:a.jsx(Ea,{className:"w-8 h-8 text-gray-500"})})}),a.jsxs("div",{className:"ml-4 flex-grow overflow-hidden",children:[a.jsxs("div",{className:"flex justify-between items-baseline",children:[a.jsx("h3",{className:`font-bold truncate text-sm ${$?"text-white":"text-gray-200"}`,children:q.nome_participante}),a.jsx("span",{className:"text-[10px] text-gray-500 flex-shrink-0 ml-2",children:q.timestamp_ultima_mensagem})]}),a.jsx("p",{className:`text-xs truncate mt-1 ${$?"text-gray-300":"text-gray-500"}`,children:q.ultima_mensagem})]})]},q.id)}):a.jsx("div",{className:"h-full p-4 flex items-center justify-center",children:a.jsx(ja,{icon:en,title:"Nenhuma conversa",description:"Inicie um bate-papo com outros usurios atravs do perfil deles."})})})]}),a.jsx("div",{className:"flex flex-col h-full relative",children:n?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"p-4 border-b border-gray-700 flex items-center bg-gray-900/95 backdrop-blur shadow-md shrink-0 z-10",children:[a.jsx("button",{onClick:G,className:"md:hidden mr-3 text-gray-400 hover:text-white p-1",children:a.jsx(Co,{className:"w-6 h-6"})}),a.jsxs("div",{className:"flex items-center gap-3",children:[z(n.foto_participante)?a.jsx("img",{src:z(n.foto_participante),alt:n.nome_participante,className:"w-10 h-10 rounded-full object-cover shadow-sm border border-gray-600"}):a.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-700 flex items-center justify-center",children:a.jsx(Ea,{className:"w-7 h-7 text-gray-500"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"font-bold text-white leading-tight",children:n.nome_participante}),a.jsxs("span",{className:"text-[10px] text-green-400 flex items-center gap-1 font-medium",children:[a.jsx("span",{className:"w-1.5 h-1.5 bg-green-400 rounded-full animate-pulse"})," Online"]})]})]})]}),a.jsxs("div",{className:"flex-grow p-4 md:p-6 overflow-y-auto space-y-6 relative z-10 custom-scrollbar",children:[v?a.jsx("div",{className:"flex justify-center items-center h-full",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):Object.keys(U).length===0?a.jsx("div",{className:"flex h-full items-center justify-center text-gray-500 text-sm italic",children:"Nenhuma mensagem. Diga ol!"}):Object.keys(U).sort().map(q=>a.jsxs("div",{children:[a.jsx("div",{className:"flex justify-center sticky top-0 z-10 mb-4 opacity-90",children:a.jsx("span",{className:"bg-gray-800/80 backdrop-blur-sm text-gray-400 text-[10px] uppercase font-bold px-3 py-1 rounded-full border border-gray-700 tracking-wide",children:I(q)})}),a.jsx("div",{className:"space-y-3",children:U[q].map(H=>{const $=H.remetente_id===t.id;return a.jsx("div",{className:`flex ${$?"justify-end":"justify-start"} animate-fade-in`,children:a.jsxs("div",{className:`max-w-[85%] md:max-w-[70%] p-3.5 shadow-md relative ${$?"bg-gradient-to-br from-primary to-blue-600 text-white rounded-2xl rounded-tr-sm":"bg-gray-800 text-gray-100 rounded-2xl rounded-tl-sm border border-gray-700"}`,children:[a.jsx("p",{className:"text-sm leading-relaxed whitespace-pre-wrap",children:H.texto}),a.jsx("div",{className:`flex items-center justify-end gap-1 mt-1 ${$?"text-blue-100":"text-gray-500"}`,children:a.jsx("span",{className:"text-[10px] font-medium",children:new Date(H.criado_em).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})})})]})},H.id)})})]},q)),a.jsx("div",{ref:T})]}),t.tipo==="artista"&&!ca(t).complete&&a.jsx("div",{className:"px-4 pb-2 pt-2 bg-gray-900 z-20",children:a.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/50 rounded-lg p-3 backdrop-blur-sm",children:a.jsxs("p",{className:"text-yellow-200 text-xs text-center flex items-center justify-center gap-2",children:[a.jsx("span",{className:"w-2 h-2 bg-yellow-500 rounded-full animate-pulse"}),"Seu perfil de artista est incompleto. Complete-o para enviar mensagens."]})})}),a.jsx("div",{className:"p-4 bg-gray-900 border-t border-gray-700 shrink-0 relative z-20",children:a.jsxs("form",{onSubmit:M,className:"flex items-end gap-2 relative",children:[a.jsx("div",{className:`flex-grow bg-gray-800 rounded-2xl border border-gray-700 transition-all flex items-center shadow-inner ${t.tipo==="artista"&&!ca(t).complete?"opacity-50 cursor-not-allowed":"focus-within:border-primary/50"}`,children:a.jsx("textarea",{value:u,onChange:q=>f(q.target.value),onKeyDown:q=>{q.key==="Enter"&&!q.shiftKey&&(q.preventDefault(),M(q))},placeholder:t.tipo==="artista"&&!ca(t).complete?"Complete seu perfil para enviar mensagens.":"Digite sua mensagem...",className:"w-full bg-transparent border-none py-3 px-4 text-white placeholder-gray-500 focus:ring-0 max-h-32 min-h-[48px] resize-none custom-scrollbar disabled:cursor-not-allowed",rows:1,disabled:_||t.tipo==="artista"&&!ca(t).complete})}),a.jsx("button",{type:"submit",disabled:_||!u.trim()||t.tipo==="artista"&&!ca(t).complete,className:"h-12 w-12 bg-gradient-to-r from-primary to-secondary rounded-full text-white hover:shadow-lg hover:scale-105 transition-all disabled:opacity-50 disabled:hover:scale-100 flex items-center justify-center flex-shrink-0",children:_?a.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):a.jsx(sD,{className:"w-5 h-5 ml-0.5"})})]})})]}):a.jsx("div",{className:"flex flex-col items-center justify-center h-full p-8 text-center relative z-10",children:a.jsx(ja,{icon:en,title:"Suas Mensagens",description:"Selecione uma conversa ao lado para ver o histrico ou responda a novas propostas."})})})]})]})},Ji=.1,nD=1440*60*1e3,zm=(t,e)=>{const s=Number(t)||0,n=e!=null?Number(e):s*Ji;return{cache:s,fee:n,total:s+n}},QN=t=>{const[e,s,n]=t.split("T")[0].split("-").map(Number);return new Date(Date.UTC(e,s-1,n,0,0,0))},Ed=t=>{const e=QN(t);return new Date(e.getTime()+1440*60*1e3+nD)},rD=t=>{const e=QN(t),s=new Date;return Date.UTC(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate())>e.getTime()},Wa=(t,e)=>e!=="concluido"?!1:Ed(t).getTime()<Date.now(),oD=t=>t.status==="cancelado"&&!!t.data_pagamento,Vm=({className:t="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})}),iD=t=>{const e=(t==null?void 0:t.toLowerCase())||"";return e.includes("amigvel")?{color:"text-green-400",bg:"bg-green-500/10",border:"border-green-500/30",label:"Match Alto"}:e.includes("tenso")?{color:"text-red-400",bg:"bg-red-500/10",border:"border-red-500/30",label:"Risco de Conflito"}:e.includes("cauteloso")?{color:"text-yellow-400",bg:"bg-yellow-500/10",border:"border-yellow-500/30",label:"Ateno s Clusulas"}:{color:"text-indigo-300",bg:"bg-indigo-500/10",border:"border-indigo-500/30",label:"Formal e Direto"}},lD=({contractData:t,userId:e})=>{var g,v;const[s,n]=N.useState(""),[i,l]=N.useState(null),[d,u]=N.useState(!1),f=async()=>{u(!0);try{const b=await db.analyzeProposal(t,s);l(b),await db.saveLog({contrato_id:t.id||"new_proposal",usuario_id:e,mensagem_usuario:s,analise_ia:b})}catch(b){alert("Erro na mediao: "+he(b))}finally{u(!1)}},m=iD(i==null?void 0:i.mood);return a.jsxs("div",{className:"bg-gray-850 rounded-2xl border border-indigo-500/30 overflow-hidden shadow-2xl animate-fade-in",children:[a.jsxs("div",{className:"bg-gradient-to-r from-indigo-900/40 to-gray-800 p-4 border-b border-indigo-500/20 flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 bg-indigo-500/20 rounded-lg flex items-center justify-center border border-indigo-500/40",children:a.jsx(Ft,{className:"w-5 h-5 text-indigo-400 animate-pulse"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-bold text-white leading-none",children:"Mediador RESONNA"}),a.jsx("p",{className:"text-[10px] text-indigo-300 uppercase font-black tracking-widest mt-1",children:"Inteligncia Estratgica"})]})]}),a.jsx("div",{className:"p-5 space-y-4",children:i?a.jsxs("div",{className:"space-y-4 animate-fade-in",children:[a.jsxs("div",{className:`p-3 rounded-xl border ${m.bg} ${m.border}`,children:[a.jsxs("div",{className:"flex justify-between items-center mb-1",children:[a.jsx("p",{className:`text-[10px] font-black uppercase ${m.color}`,children:m.label}),a.jsx("span",{className:`text-[10px] font-bold ${m.color}`,children:i.mood})]}),a.jsxs("p",{className:"text-xs text-gray-200 italic leading-relaxed",children:['"',i.verdict,'"']})]}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-[10px] font-black text-red-400 uppercase mb-2 flex items-center gap-1",children:[a.jsx(ss,{className:"w-3 h-3"})," Alertas de Risco"]}),((g=i.risks)==null?void 0:g.length)>0?a.jsx("ul",{className:"space-y-1",children:i.risks.map((b,_)=>a.jsxs("li",{className:"text-[10px] text-gray-400 flex gap-2",children:[a.jsx("span",{className:"text-red-500",children:""})," ",b]},_))}):a.jsx("p",{className:"text-[10px] text-gray-500 italic",children:"Nenhum risco detectado na proposta atual."})]}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-[10px] font-black text-green-400 uppercase mb-2 flex items-center gap-1",children:[a.jsx(Oe,{className:"w-3 h-3"})," Plano de Ao"]}),a.jsx("div",{className:"space-y-2",children:((v=i.suggestions)==null?void 0:v.length)>0?i.suggestions.map((b,_)=>a.jsx("div",{className:"p-2 bg-gray-900 rounded-lg border border-gray-800 text-[10px] text-gray-300",children:b},_)):a.jsx("div",{className:"p-2 bg-green-500/5 rounded-lg border border-green-500/20 text-[10px] text-green-300",children:"Proposta slida. Siga para a assinatura conforme planejado."})})]}),a.jsx("div",{className:"pt-3 border-t border-gray-800 text-center",children:a.jsx("button",{onClick:()=>l(null),className:"text-[9px] text-indigo-400 underline uppercase font-bold hover:text-white transition-colors",children:"Nova Consulta de Proposta"})})]}):a.jsxs(a.Fragment,{children:[a.jsx("p",{className:"text-xs text-gray-400 leading-relaxed",children:"Deseja que a IA analise esta proposta? Ela verificar se os valores esto justos e se as clusulas protegem sua agenda."}),a.jsx("textarea",{value:s,onChange:b=>n(b.target.value),placeholder:"Dvida? (Ex: Este valor est baixo para 3h de show?)",className:"w-full bg-gray-900 border border-gray-700 rounded-xl p-3 text-xs text-white focus:ring-1 focus:ring-indigo-500 outline-none resize-none h-20"}),a.jsxs("button",{onClick:f,disabled:d,className:"w-full bg-indigo-600 hover:bg-indigo-500 text-white font-bold py-3 rounded-xl transition-all flex items-center justify-center gap-2 text-xs uppercase tracking-widest shadow-lg shadow-indigo-900/20",children:[d?a.jsx(ea,{className:"w-4 h-4 animate-spin"}):a.jsx(Ft,{className:"w-4 h-4"}),d?"Analisando Mercado...":"Consultar Mediador"]})]})})]})},kb=19,Hi=t=>t.toLocaleString("pt-BR",{style:"currency",currency:"BRL"}),Mb=(t,e,s,n,i,l)=>{const d=new Date(s).toLocaleDateString("pt-BR",{timeZone:"UTC"}),u=Hi(n);return`CONTRATO DE PRESTAO DE SERVIOS ARTSTICOS

ENTRE:
CONTRATANTE: ${t}
CONTRATADO: ${e}

CLUSULA 1 - DO OBJETO
Apresentao musical na data de ${d}.

CLUSULA 2 - DO PAGAMENTO E LIQUIDAO
O valor acordado  de ${u}.
${l==="platform"?"O pagamento total ser feito via RESONA, com garantia de custdia (Escrow).":"O pagamento do cach ser realizado EXTERNAMENTE (por fora da plataforma). Este contrato serve para formalizao jurdica e garantia de cumprimento de agenda."}

CLUSULA 3 - OBSERVAES
${i||"Nenhuma condio adicional."}`},ZN=({currentUserProfile:t,targetProfile:e,onClose:s,onContractCreated:n})=>{const[i,l]=N.useState(1),[d,u]=N.useState(""),[f,m]=N.useState([]),[g,v]=N.useState(null),[b,_]=N.useState(!1),[S,E]=N.useState({data_evento:"",valorRaw:0,valorDisplay:"",condicoes:"",paymentModel:"platform"}),[C,T]=N.useState(!1),[R,A]=N.useState(""),[M,z]=N.useState(!1),F=t.tipo==="artista"?"estabelecimento":"artista";N.useEffect(()=>{e&&(v(e),l(2))},[e]),N.useEffect(()=>{let $=!0;if(d.length<2){m([]);return}const ie=setTimeout(async()=>{_(!0);try{const re=await Xe.search(d,F);$&&m(re)}catch(re){console.error("Search error:",re)}finally{$&&_(!1)}},500);return()=>{$=!1,clearTimeout(ie)}},[d,F]);const G=$=>{v($),l(2)},K=$=>{const re=$.target.value.replace(/\D/g,""),P=Number(re)/100;E(O=>({...O,valorRaw:P,valorDisplay:P.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})}))},I=()=>{if(i===2){if(!S.data_evento){A("Selecione a data do show.");return}const $=new Date;if($.setHours(0,0,0,0),new Date(`${S.data_evento}T00:00:00.000Z`).getTime()<$.getTime()){A("A data do evento no pode ser no passado.");return}}if(i===3&&S.valorRaw<=0){A("Defina o valor do cach.");return}A(""),l($=>$+1)},U=async()=>{if(!(!g||!S.data_evento)){T(!0);try{if(await Xe.checkSuspensionStatus(t.id))throw new Error("Sua conta est suspensa e no pode realizar novos contratos.");if(!(t.tipo==="artista"?ca(t).complete:So(t).complete))throw new Error("Seu perfil est incompleto. Preencha todos os dados obrigatrios na aba 'Perfil' antes de criar contratos.");const re=t.tipo==="artista"?t:g,P=t.tipo==="estabelecimento"?t:g;if(!await da.checkAvailability(re.artista.id,S.data_evento))throw new Error("O artista j possui compromisso confirmado nesta data.");const Y=S.paymentModel==="platform"?S.valorRaw*Ji:kb,ne=Mb(P.nome,re.nome,S.data_evento,S.valorRaw,S.condicoes,S.paymentModel),le=await da.create({artista_id:re.artista.id,estabelecimento_id:P.estabelecimento.id,data_evento:S.data_evento,valor:S.valorRaw,taxa_servico:Y,condicoes:ne});await wa.create({usuario_id:g.id,tipo:"contrato",titulo:`Nova proposta de ${t.nome}`,descricao:`Proposta de ${Hi(S.valorRaw)} via ${S.paymentModel==="platform"?"Plataforma":"Pagamento Externo"}.`,url_destino:`/contratos/${le.id}`}),n(),s()}catch($){A(he($))}finally{T(!1)}}},q=S.paymentModel==="platform"?S.valorRaw*(1+Ji):S.valorRaw,H=S.paymentModel==="platform"?S.valorRaw*Ji:kb;return a.jsx("div",{className:"fixed inset-0 bg-black/90 z-50 flex justify-center items-center p-4 backdrop-blur-sm",onClick:()=>z(!0),children:a.jsxs("div",{className:`bg-gray-900 text-white rounded-3xl shadow-2xl w-full max-w-5xl relative flex flex-col max-h-[90vh] border border-gray-800 ${M?"shake":""}`,onClick:$=>$.stopPropagation(),children:[a.jsxs("div",{className:"p-6 border-b border-gray-800 flex justify-between items-center",children:[a.jsx("h2",{className:"text-xl font-bold",children:"Gerar Novo Contrato"}),a.jsx("button",{onClick:s,className:"text-gray-500 hover:text-white p-2",children:a.jsx(It,{})})]}),a.jsxs("div",{className:"flex flex-col lg:flex-row flex-grow overflow-hidden",children:[a.jsxs("div",{className:"p-6 overflow-y-auto flex-grow bg-gray-950",children:[i===1&&a.jsxs("div",{className:"animate-fade-in",children:[a.jsx("h3",{className:"text-lg font-bold mb-6 text-center",children:"Para quem  este contrato?"}),a.jsxs("div",{className:"relative mb-6",children:[a.jsx("input",{type:"text",value:d,onChange:$=>u($.target.value),placeholder:`Buscar ${F}...`,className:"w-full bg-gray-800 border border-gray-700 rounded-2xl py-4 pl-12 pr-4 text-white focus:ring-2 focus:ring-primary outline-none"}),a.jsx(ms,{className:"absolute left-4 top-4.5 w-6 h-6 text-gray-500"})]}),a.jsx("div",{className:"space-y-3",children:f.map($=>a.jsxs("button",{onClick:()=>G($),className:"w-full text-left p-4 rounded-2xl border border-gray-800 bg-gray-900 hover:border-primary transition-all flex items-center justify-between",children:[a.jsx("span",{className:"font-bold",children:$.nome}),a.jsx(Ms,{className:"w-5 h-5 text-gray-600"})]},$.id))})]}),i===2&&a.jsxs("div",{className:"animate-fade-in space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:"Data do Evento"}),a.jsx("input",{type:"date",value:S.data_evento,min:new Date().toISOString().split("T")[0],onChange:$=>E({...S,data_evento:$.target.value}),className:"w-full bg-gray-800 border border-gray-700 rounded-xl p-4 text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:"Condies Adicionais"}),a.jsx("textarea",{rows:4,value:S.condicoes,onChange:$=>E({...S,condicoes:$.target.value}),className:"w-full bg-gray-800 border border-gray-700 rounded-xl p-4 text-white resize-none",placeholder:"Ex: Passagem de som s 18h..."})]}),R&&a.jsx("p",{className:"text-red-400 text-sm font-bold",children:R})]}),i===3&&a.jsxs("div",{className:"animate-fade-in space-y-8",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:"Qual o valor do Cach?"}),a.jsx("input",{type:"text",value:S.valorDisplay,onChange:K,className:"w-full bg-transparent border-b-2 border-gray-700 text-4xl font-black text-white py-4 outline-none focus:border-primary transition-colors text-center font-mono",placeholder:"R$ 0,00"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("button",{onClick:()=>E({...S,paymentModel:"platform"}),className:`p-6 rounded-2xl border-2 text-left transition-all ${S.paymentModel==="platform"?"border-primary bg-primary/5":"border-gray-800 hover:border-gray-700"}`,children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsx(As,{className:S.paymentModel==="platform"?"text-primary":"text-gray-500"}),S.paymentModel==="platform"&&a.jsx(Oe,{className:"text-primary w-5 h-5"})]}),a.jsx("h4",{className:"font-bold text-white mb-1",children:"Segurana Total"}),a.jsx("p",{className:"text-xs text-gray-400 leading-relaxed",children:"Pagamento via plataforma com custdia (Escrow). Taxa de 10%."})]}),a.jsxs("button",{onClick:()=>E({...S,paymentModel:"external"}),className:`p-6 rounded-2xl border-2 text-left transition-all ${S.paymentModel==="external"?"border-secondary bg-secondary/5":"border-gray-800 hover:border-gray-700"}`,children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsx(Ln,{className:S.paymentModel==="external"?"text-secondary":"text-gray-500"}),S.paymentModel==="external"&&a.jsx(Oe,{className:"text-secondary w-5 h-5"})]}),a.jsx("h4",{className:"font-bold text-white mb-1",children:"Apenas Formalizao"}),a.jsx("p",{className:"text-xs text-gray-400 leading-relaxed",children:"Pagamento do cach  feito por fora. Taxa fixa de R$ 19,00 para o contrato."})]})]}),a.jsxs("div",{className:"bg-gray-900 p-6 rounded-2xl border border-gray-800",children:[a.jsxs("div",{className:"flex justify-between text-sm text-gray-400 mb-2",children:[a.jsx("span",{children:"Cach Artista"}),a.jsx("span",{children:Hi(S.valorRaw)})]}),a.jsxs("div",{className:"flex justify-between text-sm text-gray-400 mb-4",children:[a.jsxs("span",{children:["Taxa RESONA (",S.paymentModel==="platform"?"10%":"Fixa",")"]}),a.jsx("span",{children:Hi(H)})]}),a.jsxs("div",{className:"flex justify-between font-black text-xl border-t border-gray-800 pt-4",children:[a.jsx("span",{className:"text-white",children:"Total a Pagar"}),a.jsx("span",{className:"text-primary",children:Hi(S.paymentModel==="platform"?q:H)})]})]}),R&&a.jsx("p",{className:"text-red-400 text-sm font-bold",children:R})]}),i===4&&a.jsxs("div",{className:"animate-fade-in",children:[a.jsx("h3",{className:"text-lg font-bold mb-4",children:"Minuta do Contrato"}),a.jsx("div",{className:"bg-white text-dark p-8 rounded-xl font-serif text-sm leading-relaxed whitespace-pre-wrap max-h-96 overflow-y-auto border border-gray-700",children:Mb(t.nome,g.nome,S.data_evento,S.valorRaw,S.condicoes,S.paymentModel)}),R&&a.jsx("p",{className:"mt-4 text-red-400 text-sm font-bold",children:R})]})]}),i>=2&&a.jsx("div",{className:"w-full lg:w-80 bg-gray-900 border-l border-gray-800 p-4 shrink-0 hidden lg:block",children:a.jsx(lD,{contractData:{valor:S.valorRaw,data_evento:S.data_evento,condicoes:S.condicoes},userId:t.id})})]}),a.jsxs("div",{className:"p-6 border-t border-gray-800 flex justify-between gap-4 bg-gray-900",children:[i>1&&a.jsxs("button",{onClick:()=>l(i-1),className:"flex-1 py-4 rounded-xl font-bold bg-gray-800 hover:bg-gray-700 flex items-center justify-center gap-2",children:[a.jsx(Vm,{className:"w-5 h-5"})," Voltar"]}),a.jsxs("button",{onClick:i===4?U:I,disabled:C,className:"flex-[2] py-4 rounded-xl font-black bg-primary text-dark hover:bg-white transition-all shadow-lg shadow-primary/20 flex items-center justify-center gap-2",children:[C?"Processando...":i===4?"Gerar & Enviar":"Continuar",a.jsx(Ms,{className:"w-5 h-5"})]})]})]})})},cD=()=>a.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg animate-pulse",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("div",{className:"h-5 bg-gray-700 rounded w-48 mb-2"}),a.jsx("div",{className:"h-4 bg-gray-700 rounded w-32"})]}),a.jsx("div",{className:"h-5 bg-gray-700 rounded-full w-24"})]}),a.jsx("div",{className:"flex justify-end mt-2",children:a.jsx("div",{className:"h-5 bg-gray-700 rounded w-20"})})]}),dD=({contract:t,profile:e})=>{const s=Array.isArray(t.artistas)?t.artistas[0]:t.artistas,n=Array.isArray(t.estabelecimentos)?t.estabelecimentos[0]:t.estabelecimentos,i=Array.isArray(s==null?void 0:s.usuarios)?s.usuarios[0]:s==null?void 0:s.usuarios,l=Array.isArray(n==null?void 0:n.usuarios)?n.usuarios[0]:n==null?void 0:n.usuarios,d=(i==null?void 0:i.nome)||"Artista no definido",u=(l==null?void 0:l.nome)||"Local no definido",f=(l==null?void 0:l.cidade)||"Localizao no definida",m=e.tipo==="artista",g=t.status==="enviado"&&(m&&!t.assinatura_artista||!m&&!t.assinatura_estabelecimento),v=!m&&t.status==="assinado"&&!t.data_pagamento,b=g||v,_=new Date(t.data_evento),S=new Date,E=t.status==="concluido",C=_>S;let T=null,R="border-gray-700/50",A="bg-gray-800/40",M="";return E?C?(T=a.jsxs("span",{className:"text-[10px] uppercase font-bold text-blue-300 bg-blue-500/10 px-2 py-0.5 rounded border border-blue-500/20 flex items-center gap-1",children:[a.jsx(As,{className:"w-3 h-3"})," Em Custdia"]}),R="border-blue-500/30",A="bg-blue-900/10"):(T=a.jsxs("span",{className:"text-[10px] uppercase font-bold text-green-400 bg-green-500/10 px-2 py-0.5 rounded border border-green-500/20 flex items-center gap-1",children:[a.jsx(Oe,{className:"w-3 h-3"})," Liberado"]}),R="border-green-500/30",A="bg-green-900/10"):t.status==="cancelado"?(T=a.jsxs("span",{className:"text-[10px] uppercase font-bold text-red-400 bg-red-500/10 px-2 py-0.5 rounded border border-red-500/20 flex items-center gap-1",children:[a.jsx(Ta,{className:"w-3 h-3"})," Cancelado"]}),R="border-red-500/30",A="bg-red-900/10"):b&&(R="border-yellow-500/50",M="shadow-[0_0_15px_rgba(234,179,8,0.1)]",A="bg-yellow-900/10"),a.jsx(Se,{to:`/contratos/${t.id}`,className:`block rounded-xl transition-all duration-300 overflow-hidden group border backdrop-blur-md hover:-translate-y-1 hover:shadow-xl ${A} ${R} ${M}`,children:a.jsxs("div",{className:"p-5 flex flex-col h-full",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("div",{className:"min-w-0 flex-1 pr-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:`w-2 h-2 rounded-full ${b?"bg-yellow-500 animate-pulse":E?"bg-green-500":"bg-gray-600"}`}),a.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wider",children:m?"Contratante":"Artista"})]}),a.jsx("h3",{className:"font-bold text-white text-lg group-hover:text-primary transition-colors truncate font-poppins",children:m?u:d}),a.jsxs("div",{className:"flex items-center gap-1 mt-1 text-xs text-gray-400",children:[a.jsx(Wt,{className:"w-3 h-3"})," ",m?f:(i==null?void 0:i.cidade)||"Brasil"]})]}),a.jsx("div",{className:"text-right flex-shrink-0",children:a.jsxs("div",{className:"flex flex-col items-end",children:[a.jsxs("span",{className:"text-xs text-gray-500 font-mono mb-0.5",children:["#",t.id.substring(0,6)]}),a.jsxs("div",{className:"text-white font-mono font-bold text-lg tracking-tight bg-black/20 px-2 py-1 rounded border border-white/5",children:[a.jsx("span",{className:"text-xs text-gray-500 align-top mr-1",children:"R$"}),t.valor?t.valor.toLocaleString("pt-BR",{minimumFractionDigits:2}):"0,00"]})]})})]}),a.jsxs("div",{className:"mt-auto pt-4 border-t border-white/5 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-300 bg-black/20 px-2 py-1 rounded",children:[a.jsx(ea,{className:"w-4 h-4 text-primary"}),a.jsx("span",{className:"font-medium",children:_.toLocaleDateString("pt-BR",{timeZone:"UTC",weekday:"short",day:"2-digit",month:"short"})})]}),a.jsx("div",{children:T})]}),b&&a.jsxs("div",{className:"mt-3 bg-yellow-500/10 rounded-lg px-3 py-2 flex items-center justify-center gap-2 text-xs font-bold text-yellow-300 border border-yellow-500/20",children:[a.jsx(ss,{className:"w-4 h-4 flex-shrink-0"}),g?"Sua assinatura pendente":"Pagamento pendente"]})]})})},Hm=({profile:t})=>{const[e,s]=N.useState([]),[n,i]=N.useState(!0),[l,d]=N.useState(""),[u,f]=N.useState(!1),[m,g]=N.useState(""),v=t.tipo==="artista"?ca(t).complete:So(t).complete,b=N.useCallback(async()=>{var E,C;const S=t.tipo==="artista"?(E=t.artista)==null?void 0:E.id:(C=t.estabelecimento)==null?void 0:C.id;if(!t||!S){i(!1),s([]);return}i(!0),d("");try{const T=await da.listByProfile(S,t.tipo,m||void 0);s(T)}catch(T){d("Falha ao buscar contratos."),console.error(T.message)}finally{i(!1)}},[t,m]);N.useEffect(()=>{b()},[b]);const _=[{value:"",label:"Todos"},{value:"enviado",label:"Pendentes"},{value:"assinado",label:"Aguard. Pagamento"},{value:"concluido",label:"Confirmados"},{value:"cancelado",label:"Cancelados"}];return a.jsxs("div",{className:"animate-fade-in",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-6 mb-8",children:[a.jsx("div",{className:"w-full md:w-auto overflow-x-auto pb-2 md:pb-0 scrollbar-hide",children:a.jsx("div",{className:"flex items-center gap-2 p-1",children:_.map(S=>a.jsx("button",{onClick:()=>g(S.value),className:`px-5 py-2.5 rounded-full text-sm font-bold whitespace-nowrap transition-all duration-300 border ${m===S.value?"bg-gradient-to-r from-primary to-blue-500 text-dark border-transparent shadow-[0_0_15px_rgba(81,210,238,0.4)] transform scale-105":"bg-gray-800 text-gray-400 border-gray-700 hover:border-gray-500 hover:text-white hover:bg-gray-750"}`,children:S.label},S.value))})}),a.jsxs("button",{onClick:()=>f(!0),disabled:!v,title:v?"Novo Contrato":"Complete seu perfil para criar contratos",className:`w-full md:w-auto flex items-center justify-center gap-2 font-bold py-3 px-6 rounded-full transition-all duration-300 transform shadow-xl ${v?"bg-white text-dark hover:scale-105 hover:shadow-[0_0_20px_rgba(255,255,255,0.3)]":"bg-gray-700 text-gray-500 cursor-not-allowed opacity-50"}`,children:[a.jsx(il,{className:"w-5 h-5"}),"Novo Contrato"]})]}),!v&&a.jsx("div",{className:"mb-8 bg-yellow-500/10 border border-yellow-500/50 rounded-lg p-4 backdrop-blur-sm animate-fade-in",children:a.jsxs("p",{className:"text-yellow-200 text-sm text-center flex items-center justify-center gap-2 font-medium",children:[a.jsx("span",{className:"w-2 h-2 bg-yellow-500 rounded-full animate-pulse"}),'Seu perfil est incompleto. Voc precisa preencher todos os dados obrigatrios na aba "Perfil" para poder criar e assinar contratos.']})}),n?a.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3",children:Array.from({length:6}).map((S,E)=>a.jsx(cD,{},E))}):l?a.jsx("p",{className:"text-center text-red-400 bg-red-500/10 p-6 rounded-xl border border-red-500/20",children:l}):e.length===0?a.jsx(ja,{icon:Ln,title:m?"Nenhum contrato nesta categoria":"Sua agenda est vazia",description:m?"Tente mudar o filtro para ver outros contratos.":"Voc ainda no possui contratos. Inicie uma nova proposta para formalizar seus shows e garantir seu pagamento.",actionLabel:m?"Limpar Filtros":"Criar Primeiro Contrato",onAction:m?()=>g(""):()=>f(!0)}):a.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3",children:e.map(S=>a.jsx(dD,{contract:S,profile:t},S.id))}),u&&a.jsx(ZN,{currentUserProfile:t,onClose:()=>f(!1),onContractCreated:()=>{f(!1),g(""),b()}})]})},Ao=({className:t="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),uD=({isOpen:t,onClose:e,profile:s})=>{var P,O,Y,ne,le,L;const[n,i]=N.useState([]),[l,d]=N.useState([]),[u,f]=N.useState(!0),[m,g]=N.useState(""),[v,b]=N.useState("contracts"),[_,S]=N.useState(!1),[E,C]=N.useState("confirm"),[T,R]=N.useState(""),A=50,M=s.tipo==="artista",z=!!((O=(P=s.artista)==null?void 0:P.dados_bancarios)!=null&&O.chave_pix),F=async()=>{var D,te;f(!0);try{const se=M?(D=s.artista)==null?void 0:D.id:(te=s.estabelecimento)==null?void 0:te.id;if(!se)throw new Error("ID do perfil no encontrado.");const[fe,ee]=await Promise.all([da.getFinancialHistory(se,s.tipo),M?bo.getPayoutHistory(s.id):Promise.resolve([])]);i(fe),d(ee)}catch(se){g(he(se))}finally{f(!1)}};if(N.useEffect(()=>{t&&F()},[t,s,M]),!t)return null;const G=D=>{const te=zm(D.valor,D.taxa_servico);return M?te.cache:te.total},K=n.filter(D=>Wa(D.data_evento,D.status)).reduce((D,te)=>D+G(te),0),I=l.filter(D=>D.status!=="rejeitado").reduce((D,te)=>D+te.valor,0),U=Math.max(0,K-I),q=n.filter(D=>D.status==="concluido"&&!Wa(D.data_evento,D.status)).reduce((D,te)=>D+G(te),0),H=n.filter(D=>D.status==="assinado"||D.status==="enviado"&&D.valor).reduce((D,te)=>D+G(te),0),$=M&&U>=A&&z&&!_,ie=async()=>{if(E!=="processing"){R(""),C("processing");try{await bo.requestPayout(s.id,U,s.artista.dados_bancarios.chave_pix,s.artista.dados_bancarios.tipo_chave),C("done"),await F()}catch(D){R(he(D)),C("confirm")}}},re=()=>{if(n.length===0)return;const D=["Data Evento",M?"Contratante":"Artista","Status","Previso Liberao","Valor (R$)","Data Pagamento"],te=n.map(ee=>{var Me,ue,_e,Ue,Fe,dt,pt,Dt;if(ee.status==="cancelado"&&!ee.data_pagamento)return null;const me=M?Array.isArray(ee.estabelecimentos)?(ue=(Me=ee.estabelecimentos[0])==null?void 0:Me.usuarios)==null?void 0:ue.nome:(Ue=(_e=ee.estabelecimentos)==null?void 0:_e.usuarios)==null?void 0:Ue.nome:Array.isArray(ee.artistas)?(dt=(Fe=ee.artistas[0])==null?void 0:Fe.usuarios)==null?void 0:dt.nome:(Dt=(pt=ee.artistas)==null?void 0:pt.usuarios)==null?void 0:Dt.nome,je=Wa(ee.data_evento,ee.status),pe=Ed(ee.data_evento);let Ne=ee.status==="concluido"?je?"Liberado":"Em Custdia":ee.status==="cancelado"?"Cancelado":"Pendente";return[new Date(ee.data_evento).toLocaleDateString("pt-BR"),`"${me||"N/A"}"`,Ne,ee.status==="concluido"?pe.toLocaleDateString("pt-BR"):"-",G(ee).toFixed(2),ee.data_pagamento?new Date(ee.data_pagamento).toLocaleDateString("pt-BR"):"-"].join(",")}).filter(Boolean),se="data:text/csv;charset=utf-8,"+[D.join(","),...te].join(`
`),fe=document.createElement("a");fe.setAttribute("href",encodeURI(se)),fe.setAttribute("download",`resona_extrato_${new Date().toISOString().split("T")[0]}.csv`),document.body.appendChild(fe),fe.click(),document.body.removeChild(fe)};return a.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-80 z-50 flex justify-center items-center p-4 backdrop-blur-sm",children:[a.jsxs("div",{className:"bg-gray-800 text-white rounded-xl shadow-2xl w-full max-w-3xl relative p-6 animate-fade-in border border-gray-700 max-h-[95vh] flex flex-col",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold font-poppins",children:"Carteira Digital"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Gerencie seus ganhos e saques"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:re,disabled:n.length===0,className:"text-primary hover:text-white transition-colors p-2 rounded-md hover:bg-gray-700 disabled:opacity-50",title:"Exportar CSV",children:a.jsx(Ao,{className:"w-6 h-6"})}),a.jsx("button",{onClick:e,className:"text-gray-500 hover:text-white p-2 rounded-md hover:bg-gray-700",children:a.jsx(It,{})})]})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-8",children:[a.jsxs("div",{className:"bg-gray-900/50 p-5 rounded-2xl border-2 border-green-500/20 shadow-inner relative overflow-hidden group",children:[a.jsxs("div",{className:"relative z-10",children:[a.jsx("p",{className:"text-gray-500 text-[10px] font-black uppercase tracking-widest mb-1",children:"Saldo Disponvel"}),a.jsxs("p",{className:"text-3xl font-black text-green-400 font-mono",children:["R$ ",U.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),M&&a.jsxs("button",{onClick:()=>{C("confirm"),S(!0)},disabled:!$,className:`mt-4 w-full py-2 rounded-lg text-xs font-bold transition-all shadow-lg flex items-center justify-center gap-2 ${$?"bg-green-500 text-dark hover:bg-white hover:scale-105":"bg-gray-800 text-gray-500 cursor-not-allowed border border-gray-700"}`,children:[U<A?`Mnimo R$ ${A.toFixed(2)}`:z?"Solicitar Saque":"Cadastre seu PIX",$&&a.jsx(hD,{className:"w-3 h-3"})]})]}),a.jsx(Oe,{className:"absolute -right-2 -bottom-2 w-16 h-16 text-green-500/10"})]}),a.jsxs("div",{className:"bg-gray-900/50 p-5 rounded-2xl border border-blue-500/20 shadow-inner relative overflow-hidden",children:[a.jsx("p",{className:"text-gray-500 text-[10px] font-black uppercase tracking-widest mb-1",children:"Em Custdia"}),a.jsxs("p",{className:"text-2xl font-black text-blue-300 font-mono",children:["R$ ",q.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),a.jsxs("p",{className:"text-[10px] text-gray-500 mt-2 flex items-center gap-1",children:[a.jsx(As,{className:"w-3 h-3"})," Protegido pelo RESONA"]}),a.jsx(As,{className:"absolute -right-2 -bottom-2 w-16 h-16 text-blue-500/10"})]}),a.jsxs("div",{className:"bg-gray-900/50 p-5 rounded-2xl border border-yellow-500/20 shadow-inner relative overflow-hidden",children:[a.jsx("p",{className:"text-gray-500 text-[10px] font-black uppercase tracking-widest mb-1",children:"Pendente"}),a.jsxs("p",{className:"text-2xl font-black text-yellow-400 font-mono",children:["R$ ",H.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),a.jsxs("p",{className:"text-[10px] text-gray-500 mt-2 flex items-center gap-1",children:[a.jsx(ea,{className:"w-3 h-3"})," Aguardando pagamento"]}),a.jsx(ea,{className:"absolute -right-2 -bottom-2 w-16 h-16 text-yellow-500/10"})]})]}),a.jsxs("div",{className:"flex border-b border-gray-700 mb-6",children:[a.jsx("button",{onClick:()=>b("contracts"),className:`px-6 py-3 text-sm font-bold transition-all border-b-2 ${v==="contracts"?"border-primary text-primary":"border-transparent text-gray-500 hover:text-gray-300"}`,children:"Transaes"}),M&&a.jsx("button",{onClick:()=>b("payouts"),className:`px-6 py-3 text-sm font-bold transition-all border-b-2 ${v==="payouts"?"border-primary text-primary":"border-transparent text-gray-500 hover:text-gray-300"}`,children:"Histrico de Saques"})]}),a.jsx("div",{className:"overflow-y-auto flex-grow custom-scrollbar",children:u?a.jsx("div",{className:"text-center py-12 text-gray-500 animate-pulse",children:"Sincronizando carteira..."}):v==="contracts"?n.length===0?a.jsx("div",{className:"py-20 text-center text-gray-600 italic",children:"Sem movimentaes financeiras."}):a.jsxs("table",{className:"w-full text-left",children:[a.jsx("thead",{className:"text-gray-500 text-[10px] uppercase font-black sticky top-0 bg-gray-800 z-10",children:a.jsxs("tr",{children:[a.jsx("th",{className:"pb-4",children:"Evento"}),a.jsx("th",{className:"pb-4",children:M?"Origem":"Destino"}),a.jsx("th",{className:"pb-4",children:"Status"}),a.jsx("th",{className:"pb-4 text-right",children:"Valor"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-700 text-sm",children:n.map(D=>{var fe,ee,me,je,pe,Ne,Me,ue;if(D.status==="cancelado"&&!D.data_pagamento)return null;const te=M?Array.isArray(D.estabelecimentos)?(ee=(fe=D.estabelecimentos[0])==null?void 0:fe.usuarios)==null?void 0:ee.nome:(je=(me=D.estabelecimentos)==null?void 0:me.usuarios)==null?void 0:je.nome:Array.isArray(D.artistas)?(Ne=(pe=D.artistas[0])==null?void 0:pe.usuarios)==null?void 0:Ne.nome:(ue=(Me=D.artistas)==null?void 0:Me.usuarios)==null?void 0:ue.nome,se=Wa(D.data_evento,D.status);return a.jsxs("tr",{className:"hover:bg-gray-700/30 transition-colors",children:[a.jsxs("td",{className:"py-4",children:[a.jsx("div",{className:"font-bold",children:new Date(D.data_evento).toLocaleDateString("pt-BR")}),a.jsxs("div",{className:"text-[10px] text-gray-500",children:["ID: ",D.id.substring(0,8)]})]}),a.jsx("td",{className:"py-4 text-gray-300",children:te}),a.jsx("td",{className:"py-4",children:D.status==="cancelado"?a.jsx("span",{className:"text-red-400 text-xs font-bold px-2 py-1 rounded bg-red-400/10",children:"Estorno"}):D.status==="concluido"?se?a.jsx("span",{className:"text-green-400 text-xs font-bold px-2 py-1 rounded bg-green-400/10",children:"Liberado"}):a.jsx("span",{className:"text-blue-300 text-xs font-bold px-2 py-1 rounded bg-blue-300/10",children:"Em Custdia"}):a.jsx("span",{className:"text-yellow-500 text-xs font-bold px-2 py-1 rounded bg-yellow-500/10",children:"Pendente"})}),a.jsxs("td",{className:`py-4 text-right font-mono font-bold ${M?"text-green-400":"text-white"}`,children:[M?"+":"-"," R$ ",G(D).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]},D.id)})})]}):l.length===0?a.jsx("div",{className:"py-20 text-center text-gray-600 italic",children:"Voc ainda no solicitou nenhum saque."}):a.jsx("div",{className:"space-y-3",children:l.map(D=>a.jsxs("div",{className:"bg-gray-900/50 p-4 rounded-xl border border-gray-700 flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:`w-2 h-2 rounded-full ${D.status==="pago"?"bg-green-500":D.status==="pendente"?"bg-yellow-500":"bg-blue-500"}`}),a.jsxs("p",{className:"text-sm font-bold text-white capitalize",children:["Saque ",D.status]})]}),a.jsxs("p",{className:"text-[10px] text-gray-500",children:["Solicitado em ",new Date(D.criado_em).toLocaleString("pt-BR")]}),a.jsxs("p",{className:"text-[10px] text-gray-400 mt-1",children:["PIX (",D.tipo_chave,"): ",D.chave_pix]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"text-lg font-black text-white font-mono",children:["R$ ",D.valor.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),D.data_pagamento&&a.jsxs("p",{className:"text-[9px] text-green-400 font-bold uppercase tracking-widest mt-1",children:["Pago em ",new Date(D.data_pagamento).toLocaleDateString()]})]})]},D.id))})}),a.jsx("div",{className:"mt-6 pt-6 border-t border-gray-700 text-[10px] text-gray-500 text-center",children:"* Pagamentos em custdia so liberados 24h aps o evento. Saques podem levar at 48h teis para processamento."})]}),_&&a.jsx("div",{className:"fixed inset-0 bg-black/95 z-[60] flex justify-center items-center p-4 backdrop-blur-md",children:a.jsx("div",{className:"bg-gray-900 text-white rounded-2xl p-8 max-w-md w-full border border-gray-800 shadow-[0_0_50px_rgba(34,197,94,0.1)] text-center animate-fade-in",children:E==="confirm"?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-20 h-20 bg-green-500/10 rounded-full flex items-center justify-center mx-auto mb-6 border border-green-500/20",children:a.jsx(Rs,{className:"w-10 h-10 text-green-400"})}),a.jsx("h3",{className:"text-2xl font-black mb-2",children:"Confirmar Saque"}),a.jsx("p",{className:"text-gray-400 text-sm mb-6",children:"Confirme os dados para transferncia via PIX."}),a.jsxs("div",{className:"bg-gray-850 p-6 rounded-2xl border border-gray-800 mb-8 text-left",children:[a.jsxs("div",{className:"flex justify-between mb-4",children:[a.jsx("span",{className:"text-gray-500 text-xs font-bold uppercase",children:"Valor Total"}),a.jsxs("span",{className:"text-green-400 font-black font-mono",children:["R$ ",U.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),a.jsxs("div",{className:"pt-4 border-t border-gray-800",children:[a.jsx("span",{className:"text-gray-500 text-[10px] font-black uppercase block mb-1",children:"Destino PIX"}),a.jsx("p",{className:"text-sm font-bold text-white truncate",children:(ne=(Y=s.artista)==null?void 0:Y.dados_bancarios)==null?void 0:ne.chave_pix}),a.jsxs("p",{className:"text-[10px] text-gray-500 uppercase mt-1",children:["Tipo: ",(L=(le=s.artista)==null?void 0:le.dados_bancarios)==null?void 0:L.tipo_chave]})]})]}),T&&a.jsx("p",{className:"mb-4 text-xs text-red-400 bg-red-400/10 p-2 rounded",children:T}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsx("button",{onClick:()=>S(!1),className:"py-4 bg-gray-800 hover:bg-gray-700 text-white font-bold rounded-xl transition-all",children:"Cancelar"}),a.jsx("button",{onClick:ie,className:"py-4 bg-green-500 hover:bg-white text-dark font-black rounded-xl transition-all shadow-lg shadow-green-900/20",children:"Confirmar"})]})]}):E==="processing"?a.jsxs("div",{className:"py-10",children:[a.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-green-500 mx-auto mb-6"}),a.jsx("h3",{className:"text-xl font-bold",children:"Processando seu pedido..."}),a.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Comunicando com o sistema financeiro."})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-20 h-20 bg-green-500/10 rounded-full flex items-center justify-center mx-auto mb-6 border border-green-500/20",children:a.jsx(Oe,{className:"w-10 h-10 text-green-400"})}),a.jsx("h3",{className:"text-2xl font-black mb-2",children:"Pedido Enviado!"}),a.jsx("p",{className:"text-gray-400 text-sm mb-8 leading-relaxed",children:"Sua solicitao de saque foi registrada com sucesso. O prazo para depsito  de at **48 horas teis**."}),a.jsx("button",{onClick:()=>{S(!1),C("confirm")},className:"w-full py-4 bg-white text-dark font-black rounded-xl hover:bg-primary transition-all",children:"Entendido"})]})})})]})},hD=({className:t})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})}),e_=({profile:t,setActiveTab:e})=>{const[s,n]=N.useState({pastShows:0,upcomingShows:0,realizedValue:0,escrowValue:0,disputeValue:0,averageRating:t.nota_media||0,reviewCount:0}),[i,l]=N.useState(null),[d,u]=N.useState([]),{notifications:f}=_d(),[m,g]=N.useState(!0),[v,b]=N.useState(null),[_,S]=N.useState(!1),E=t.tipo==="artista",C=t.plano==="pro"||t.plano==="business",T=async()=>{var O,Y;g(!0),b(null);try{const ne=E?(O=t.artista)==null?void 0:O.id:(Y=t.estabelecimento)==null?void 0:Y.id;if(!ne)return;const L=await da.listByProfile(ne,t.tipo)||[],D=new Date().toISOString().split("T")[0],te=new Date(`${D}T00:00:00.000Z`).getTime(),se=L.filter(ue=>ue.status==="concluido"&&rD(ue.data_evento)),fe=L.filter(ue=>{const _e=ue.status==="assinado"||ue.status==="concluido",Ue=new Date(ue.data_evento).getTime();return _e&&Ue>=te}),ee=ue=>{const _e=zm(ue.valor,ue.taxa_servico);return E?_e.cache:_e.total},me=L.filter(ue=>Wa(ue.data_evento,ue.status)),je=L.filter(ue=>ue.status==="concluido"&&!Wa(ue.data_evento,ue.status)),pe=L.filter(ue=>oD(ue));n({pastShows:se.length,upcomingShows:fe.length,realizedValue:me.reduce((ue,_e)=>ue+ee(_e),0),escrowValue:je.reduce((ue,_e)=>ue+ee(_e),0),disputeValue:pe.reduce((ue,_e)=>ue+ee(_e),0),averageRating:t.nota_media||0,reviewCount:0}),await gM.checkAndUnlock(t.id,"shows",se.length);const Ne=fe.sort((ue,_e)=>new Date(ue.data_evento).getTime()-new Date(_e.data_evento).getTime());l(Ne[0]||null);const Me=L.filter(ue=>!!(ue.status==="enviado"&&(E&&!ue.assinatura_artista||!E&&!ue.assinatura_estabelecimento)||ue.status==="assinado"&&!E&&!ue.data_pagamento));u(Me)}catch(ne){const le=he(ne);console.error("Dashboard overview error:",le),b(le)}finally{g(!1)}};N.useEffect(()=>{T()},[t]);const A=(()=>{if(!t.plano_expiracao)return null;const O=new Date(t.plano_expiracao),Y=new Date,ne=O.getTime()-Y.getTime();return Math.max(0,Math.ceil(ne/(1e3*60*60*24)))})(),M=O=>{if(!O)return"Desconhecido";const Y=Array.isArray(O)?O[0]:O;if(!Y)return"Desconhecido";const ne=Array.isArray(Y.usuarios)?Y.usuarios[0]:Y.usuarios,le=(ne==null?void 0:ne.nome)||Y.nome;return typeof le=="string"&&le!=="[object Object]"?le:"Usurio"},z=O=>{if(!O)return"Brasil";const Y=Array.isArray(O)?O[0]:O;if(!Y)return"Brasil";const ne=Array.isArray(Y.usuarios)?Y.usuarios[0]:Y.usuarios,le=(ne==null?void 0:ne.cidade)||Y.cidade;return typeof le=="string"&&le!=="[object Object]"?le:"Brasil"},F=(O,Y="-")=>typeof O=="string"&&O!=="[object Object]"?O.charAt(0).toUpperCase()+O.slice(1):typeof O=="number"?String(O):Y;if(m)return a.jsx("div",{className:"text-white text-center p-12 animate-pulse",children:"Consolidando viso geral..."});if(v)return a.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 p-8 rounded-2xl text-center",children:[a.jsx(ss,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),a.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Ops! Houve um problema"}),a.jsx("p",{className:"text-gray-400 mb-6",children:v}),a.jsx("button",{onClick:T,className:"bg-primary text-dark font-bold px-6 py-2 rounded-full hover:bg-white transition-all",children:"Tentar Novamente"})]});const G=s.realizedValue+s.escrowValue+s.disputeValue,K=100,I=Math.round(s.averageRating*50),U=s.pastShows*K+I,q=Math.floor(U/500)+1,H=q*500,$=(q-1)*500,ie=H-$,re=ie>0?(U-$)/ie*100:0,P=re>80;return a.jsxs("div",{className:"space-y-8 animate-fade-in w-full",children:[C&&A!==null&&A<=3&&a.jsxs("div",{className:"bg-gradient-to-r from-red-600 to-red-800 p-4 rounded-xl shadow-lg border border-red-500 flex flex-col md:flex-row items-center justify-between gap-4 animate-pulse",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"bg-white/20 p-2 rounded-full",children:a.jsx(ss,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-black text-white uppercase tracking-tight",children:"Sua Assinatura est expirando!"}),a.jsxs("p",{className:"text-xs text-red-100",children:["Resta(m) apenas **",A," dia(s)**. Renove agora para manter seus benefcios e selo verificado."]})]})]}),a.jsx(Se,{to:"/planos",className:"bg-white text-red-700 font-bold px-6 py-2 rounded-full hover:bg-red-50 transition-colors shadow-inner whitespace-nowrap",children:"Renovar Agora"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"lg:col-span-2 bg-gradient-to-br from-gray-800 to-gray-900 border border-gray-700 p-6 rounded-2xl shadow-xl flex items-center gap-6 overflow-hidden relative",children:[a.jsxs("div",{className:"relative z-10 flex-grow",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsxs("span",{className:"text-[10px] font-black bg-primary text-dark px-2 py-0.5 rounded-md",children:["LEVEL ",q]}),a.jsx("span",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Prestgio na Plataforma"})]}),a.jsxs("h2",{className:"text-3xl font-black text-white font-poppins uppercase",children:["RESONA ",F(t.plano)]}),a.jsxs("div",{className:"mt-4 max-w-sm",children:[a.jsxs("div",{className:"flex justify-between text-[10px] font-bold text-gray-500 mb-1.5 uppercase tracking-tighter",children:[a.jsxs("span",{className:`flex items-center gap-1 ${P?"text-primary animate-pulse":""}`,children:[a.jsx(Ft,{className:"w-3 h-3"})," Progresso de Nvel"]}),a.jsxs("span",{children:[U," / ",H," XP"]})]}),a.jsx("div",{className:"h-2 w-full bg-gray-950 rounded-full overflow-hidden border border-white/5 relative",children:a.jsx("div",{className:`h-full bg-gradient-to-r from-primary to-blue-400 transition-all duration-1000 ${P?"shadow-[0_0_15px_rgba(81,210,238,0.8)] animate-pulse":"shadow-[0_0_10px_rgba(81,210,238,0.3)]"}`,style:{width:`${re}%`}})}),P&&a.jsx("p",{className:"text-[8px] text-primary/70 font-black uppercase mt-1 tracking-widest text-right",children:"Quase l! Realize mais um show."})]}),a.jsxs("div",{className:"mt-6 flex gap-3",children:[a.jsx(Se,{to:"/planos",className:"bg-primary text-dark font-black px-5 py-2 rounded-full text-sm hover:bg-white transition-all shadow-lg shadow-primary/20",children:"Ver Planos"}),a.jsx("button",{onClick:()=>S(!0),className:"text-gray-300 font-bold border border-gray-600 px-5 py-2 rounded-full text-sm hover:text-white hover:bg-gray-800 transition-all",children:"Ver Extrato"})]})]}),a.jsx("div",{className:"hidden md:block relative",children:a.jsx("div",{className:`w-24 h-24 bg-primary/10 rounded-full flex items-center justify-center border-4 transition-all duration-500 ${P?"border-primary shadow-[0_0_30px_rgba(81,210,238,0.4)]":"border-primary/20 shadow-[0_0_20px_rgba(81,210,238,0.2)]"}`,children:a.jsx("span",{className:"text-4xl font-black text-primary",children:q})})}),a.jsx("div",{className:"absolute right-[-20px] top-[-20px] w-40 h-40 bg-primary/5 rounded-full blur-3xl pointer-events-none"})]}),a.jsxs("div",{className:"bg-gray-800 p-6 rounded-2xl border border-gray-700 shadow-xl flex flex-col justify-center text-center",children:[a.jsx("p",{className:"text-gray-400 text-[10px] font-black uppercase mb-2 tracking-widest",children:"Reputao Mdia"}),a.jsxs("div",{className:"flex items-center justify-center gap-2 mb-1",children:[a.jsx(At,{className:"w-8 h-8 text-yellow-500"}),a.jsx("span",{className:"text-4xl font-black text-white font-mono",children:s.averageRating.toFixed(1)})]}),a.jsx("div",{className:"flex justify-center text-yellow-500/30",children:[...Array(5)].map((O,Y)=>a.jsx(At,{className:`w-4 h-4 ${Y<Math.round(s.averageRating)?"text-yellow-500":""}`},Y))}),a.jsx("p",{className:"text-[9px] text-gray-500 uppercase font-bold mt-4",children:"Ponto forte: Profissionalismo"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 w-full",children:[a.jsx("div",{onClick:()=>e("contratos"),className:"bg-gray-800 p-6 rounded-xl border border-gray-700 shadow-lg cursor-pointer hover:-translate-y-1 transition-all group",children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-primary text-xs font-bold uppercase tracking-wider mb-2",children:"Agenda"}),a.jsx("p",{className:"text-4xl font-bold text-white font-mono",children:s.upcomingShows}),a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Confirmados"})]}),a.jsx(ma,{className:"w-8 h-8 text-gray-600 group-hover:text-primary transition-colors"})]})}),a.jsx("div",{onClick:()=>S(!0),className:"bg-gray-800 p-6 rounded-xl border border-gray-700 shadow-lg cursor-pointer hover:-translate-y-1 transition-all group",children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-green-400 text-xs font-bold uppercase tracking-wider mb-2",children:E?"Ganhos":"Custos"}),a.jsxs("p",{className:"text-3xl font-bold text-white font-mono",children:[a.jsx("span",{className:"text-lg text-gray-400 mr-1 font-sans",children:"R$"}),G.toLocaleString("pt-BR",{notation:"compact"})]}),a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Extrato"})]}),a.jsx(Rs,{className:"w-8 h-8 text-gray-600 group-hover:text-green-400 transition-colors"})]})}),a.jsx("div",{className:"bg-gray-800 p-6 rounded-xl border border-gray-700 shadow-lg",children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-400 text-xs font-bold uppercase tracking-wider mb-2",children:"Histrico"}),a.jsx("p",{className:"text-4xl font-bold text-white font-mono",children:s.pastShows}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Concludos"})]}),a.jsx(Oe,{className:"w-8 h-8 text-gray-700"})]})}),a.jsx("div",{onClick:()=>e("avaliacoes"),className:"bg-gray-800 p-6 rounded-xl border border-gray-700 shadow-lg cursor-pointer hover:-translate-y-1 transition-all group",children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-yellow-500 text-xs font-bold uppercase tracking-wider mb-2",children:"XP Total"}),a.jsx("p",{className:"text-4xl font-bold text-white font-mono",children:U}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Pontos de Carreira"})]}),a.jsx(At,{className:"w-8 h-8 text-gray-600 group-hover:text-yellow-500 transition-colors"})]})})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsxs("div",{className:"lg:col-span-2 flex flex-col gap-8",children:[a.jsx($m,{profile:t,onUpdate:T}),i?a.jsxs("div",{className:"bg-gray-800 rounded-xl border border-gray-700 p-6 shadow-xl flex flex-col md:flex-row gap-6 items-center hover:border-primary/30 transition-all",children:[a.jsxs("div",{className:"w-24 h-24 bg-primary/10 rounded-xl flex flex-col items-center justify-center border border-primary/20 shrink-0 shadow-inner",children:[a.jsx("span",{className:"text-primary font-bold text-xs uppercase",children:new Date(i.data_evento).toLocaleString("pt-BR",{month:"short",timeZone:"UTC"})}),a.jsx("span",{className:"text-4xl font-black text-white",children:new Date(i.data_evento).getUTCDate()})]}),a.jsxs("div",{className:"flex-1 text-center md:text-left min-w-0",children:[a.jsx("span",{className:"text-[10px] font-bold text-gray-500 uppercase tracking-widest",children:"Prxima Apresentao"}),a.jsx("h3",{className:"text-2xl font-bold text-white mt-1 truncate",children:M(E?i.estabelecimentos:i.artistas)}),a.jsxs("p",{className:"text-gray-400 text-sm flex items-center justify-center md:justify-start gap-1 mt-1",children:[a.jsx(Wt,{className:"w-3 h-3 text-primary"})," ",E?z(i.estabelecimentos):"Local agendado"]})]}),a.jsx(Se,{to:`/contratos/${i.id}`,className:"bg-white text-dark font-black px-8 py-3 rounded-xl hover:bg-primary transition-all shadow-lg whitespace-nowrap",children:"Ver Detalhes"})]}):a.jsxs("div",{className:"bg-gray-900/50 rounded-xl border border-gray-800 p-10 shadow-inner flex flex-col items-center text-center",children:[a.jsx(ma,{className:"w-12 h-12 text-gray-700 mb-4"}),a.jsx("h3",{className:"text-lg font-bold text-gray-400",children:"Nenhum palco  vista?"}),a.jsx("p",{className:"text-gray-500 text-sm max-w-xs mt-2 leading-relaxed",children:"Sua agenda de eventos confirmados est livre. Que tal buscar novas oportunidades agora?"}),a.jsxs(Se,{to:E?"/estabelecimentos":"/artistas",className:"mt-6 text-primary font-black uppercase text-xs tracking-widest hover:text-white transition-colors flex items-center gap-2",children:["Descobrir ",E?"Locais":"Artistas"," ",a.jsx(Ms,{className:"w-3 h-3"})]})]}),a.jsxs("div",{className:"bg-gray-800 rounded-xl border border-gray-700 shadow-lg overflow-hidden",children:[a.jsx("div",{className:"px-6 py-4 border-b border-gray-700 bg-gray-900/30 flex justify-between items-center",children:a.jsxs("h3",{className:"font-bold text-white flex items-center gap-2",children:[a.jsx(Na,{className:"w-5 h-5 text-yellow-500"})," Pendncias de Ao"]})}),a.jsx("div",{className:"divide-y divide-gray-700",children:d.length>0?d.map(O=>a.jsxs("div",{className:"p-4 flex items-center justify-between gap-4 group",children:[a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("p",{className:"text-sm font-bold text-white truncate group-hover:text-primary transition-colors",children:M(E?O.estabelecimentos:O.artistas)}),a.jsxs("p",{className:"text-xs text-yellow-500 flex items-center gap-1",children:[a.jsx(ss,{className:"w-3 h-3"})," ",O.status==="enviado"?"Assinitura pendente":"Pagamento pendente"]})]}),a.jsx(Se,{to:`/contratos/${O.id}`,className:"text-xs font-bold text-dark bg-yellow-500 hover:bg-white px-5 py-2.5 rounded-lg transition-all shadow-md whitespace-nowrap",children:"Resolver"})]},O.id)):a.jsx("p",{className:"p-10 text-center text-gray-500 text-sm italic",children:"Nenhuma pendncia contratual encontrada."})})]})]}),a.jsx("div",{className:"lg:col-span-1",children:a.jsxs("div",{className:"bg-gray-800 rounded-xl border border-gray-700 overflow-hidden shadow-lg h-full flex flex-col",children:[a.jsxs("div",{className:"px-6 py-4 border-b border-gray-700 bg-gray-900/30 flex items-center gap-2",children:[a.jsx(en,{className:"w-5 h-5 text-primary"}),a.jsx("h3",{className:"font-bold text-white",children:"Atividade Recente"})]}),a.jsx("div",{className:"p-4 space-y-4 flex-grow overflow-y-auto custom-scrollbar",children:f.length>0?f.slice(0,8).map(O=>a.jsxs("div",{className:"flex gap-3 text-sm border-b border-gray-700/50 pb-3 last:border-0 hover:bg-gray-700/20 p-2 rounded transition-colors",children:[a.jsx("div",{className:"mt-1 flex-shrink-0",children:O.tipo==="mensagem"?a.jsx(en,{className:"w-4 h-4 text-green-400"}):a.jsx(Na,{className:"w-4 h-4 text-primary"})}),a.jsxs("div",{className:"min-w-0 flex-1",children:[a.jsx("p",{className:"text-gray-200 font-bold truncate leading-tight",children:F(O.titulo,"Notificao")}),a.jsx("p",{className:"text-[10px] text-gray-500 mt-0.5 line-clamp-2 leading-relaxed",children:F(O.descricao,"Sem detalhes")})]})]},O.id)):a.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-gray-600",children:[a.jsx(ea,{className:"w-10 h-10 mb-2 opacity-20"}),a.jsx("p",{className:"text-sm italic",children:"Nenhuma atividade recente."})]})})]})})]}),a.jsx(uD,{isOpen:_,onClose:()=>S(!1),profile:t})]})},Gm=({className:t="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"})}),t_=({profile:t})=>{const[e,s]=N.useState([]),[n,i]=N.useState(!0),[l,d]=N.useState(null),u=t.plano!=="free";N.useEffect(()=>{(async()=>{i(!0);try{const b=await Xe.getSubscriptionHistory(t.id);s(b)}catch(b){d(he(b))}finally{i(!1)}})()},[t.id]);const m=(()=>{if(!t.plano_expiracao)return null;const v=new Date(t.plano_expiracao),b=new Date,_=v.getTime()-b.getTime();return Math.max(0,Math.ceil(_/(1e3*60*60*24)))})(),g=m!==null?Math.max(0,Math.min(100,m/30*100)):0;return a.jsxs("div",{className:"space-y-8 animate-fade-in",children:[a.jsx("h2",{className:"text-2xl font-bold font-poppins text-white",children:"Gerenciar Assinatura"}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsxs("div",{className:"lg:col-span-1 bg-gray-900 rounded-2xl border border-gray-700 overflow-hidden shadow-xl",children:[a.jsxs("div",{className:"p-6 bg-gradient-to-br from-gray-800 to-gray-900 border-b border-gray-700",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:t.plano==="pro"?a.jsx(Ft,{className:"text-primary w-6 h-6"}):t.plano==="business"?a.jsx(Gm,{className:"text-yellow-500 w-6 h-6"}):a.jsx(At,{className:"text-gray-500 w-6 h-6"})}),a.jsx("span",{className:"text-gray-400 text-xs font-black uppercase tracking-widest",children:"Plano Ativo"})]}),a.jsxs("h3",{className:"text-3xl font-black text-white uppercase font-poppins",children:["RESONA ",t.plano]})]}),a.jsxs("div",{className:"p-6 space-y-6",children:[u&&m!==null?a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[a.jsx("span",{className:"text-gray-400",children:"Tempo Restante"}),a.jsxs("span",{className:"text-white font-bold",children:[m," dias"]})]}),a.jsx("div",{className:"h-2 bg-gray-800 rounded-full overflow-hidden",children:a.jsx("div",{className:`h-full transition-all duration-1000 ${m<=5?"bg-red-500":"bg-primary"}`,style:{width:`${g}%`}})}),a.jsxs("p",{className:"text-[10px] text-gray-500 mt-2 uppercase font-bold tracking-tighter",children:["Expira em: ",new Date(t.plano_expiracao).toLocaleDateString("pt-BR")]})]}):a.jsx("div",{className:"bg-gray-800/50 p-4 rounded-xl border border-gray-700",children:a.jsx("p",{className:"text-sm text-gray-400 leading-relaxed italic",children:"Voc est no plano gratuito. Faa o upgrade para desbloquear busca prioritria e selo de verificao."})}),a.jsx("div",{className:"pt-4 border-t border-gray-800",children:a.jsx(Se,{to:"/planos",className:"w-full bg-primary text-dark font-black py-3 rounded-xl flex items-center justify-center gap-2 hover:bg-white transition-all shadow-lg shadow-primary/10",children:u?"Renovar / Mudar Plano":"Ver Planos Premium"})})]})]}),a.jsxs("div",{className:"lg:col-span-2 bg-gray-800 rounded-2xl border border-gray-700 shadow-xl overflow-hidden flex flex-col",children:[a.jsx("div",{className:"p-4 border-b border-gray-700 bg-gray-900/30 flex justify-between items-center",children:a.jsxs("h3",{className:"font-bold text-white flex items-center gap-2",children:[a.jsx(ea,{className:"w-5 h-5 text-primary"})," Histrico de Cobrana"]})}),a.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar min-h-[300px]",children:n?a.jsx("div",{className:"p-12 text-center text-gray-500 animate-pulse",children:"Carregando histrico..."}):e.length===0?a.jsx("div",{className:"p-12 text-center text-gray-500",children:"Nenhum pagamento registrado."}):a.jsxs("table",{className:"w-full text-left",children:[a.jsx("thead",{className:"bg-gray-900/50 text-[10px] text-gray-500 uppercase font-black sticky top-0",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4",children:"Data"}),a.jsx("th",{className:"p-4",children:"Plano"}),a.jsx("th",{className:"p-4",children:"Valor"}),a.jsx("th",{className:"p-4",children:"Mtodo"}),a.jsx("th",{className:"p-4 text-center",children:"Status"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-700 text-sm",children:e.map(v=>{var b;return a.jsxs("tr",{className:"hover:bg-gray-700/30 transition-colors",children:[a.jsx("td",{className:"p-4 text-gray-400 font-mono text-xs",children:new Date(v.data_mudanca).toLocaleDateString("pt-BR")}),a.jsx("td",{className:"p-4 font-bold text-white uppercase",children:v.plano_novo}),a.jsxs("td",{className:"p-4 text-gray-300",children:["R$ ",(b=v.valor_pago)==null?void 0:b.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),a.jsx("td",{className:"p-4 text-gray-500 text-xs",children:v.metodo_pagamento==="stripe_simulated"?"Carto (Stripe)":v.metodo_pagamento==="system_expiry"?"Sistema (Downgrade)":v.metodo_pagamento}),a.jsx("td",{className:"p-4 text-center",children:a.jsx("div",{className:"flex justify-center",children:a.jsx(Oe,{className:"w-5 h-5 text-green-500/50"})})})]},v.id)})})]})}),a.jsx("div",{className:"p-4 bg-gray-900/30 border-t border-gray-700 text-center",children:a.jsx("p",{className:"text-[10px] text-gray-600 uppercase font-bold tracking-widest",children:"Cobranas processadas pelo Stripe  Todos os dados so protegidos"})})]})]})]})},fD=["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],mD=({profile:t})=>{var K;const[e,s]=N.useState(new Date),[n,i]=N.useState([]),[l,d]=N.useState(!0),[u,f]=N.useState(""),[m,g]=N.useState(!1),[v,b]=N.useState({date:"",title:"",type:"bloqueio_manual"}),[_,S]=N.useState(!1),E=(K=t.artista)==null?void 0:K.id,C=async()=>{if(E){d(!0);try{const I=await of.getConsolidatedAgenda(E,t.id,"","");i(I)}catch(I){f(he(I))}finally{d(!1)}}};N.useEffect(()=>{C()},[E]);const T=(I,U)=>new Date(I,U+1,0).getDate(),R=(I,U)=>new Date(I,U,1).getDay(),A=()=>a.jsxs("div",{className:"flex justify-between items-center mb-8 bg-gray-900/50 p-4 rounded-2xl border border-gray-700",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:a.jsx(ma,{className:"text-primary w-6 h-6"})}),a.jsxs("h2",{className:"text-2xl font-black text-white font-poppins",children:[fD[e.getMonth()]," ",e.getFullYear()]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>s(new Date(e.getFullYear(),e.getMonth()-1,1)),className:"p-2 hover:bg-gray-700 rounded-lg text-gray-400",children:a.jsx(Vm,{})}),a.jsx("button",{onClick:()=>s(new Date),className:"px-4 py-2 text-xs font-bold bg-gray-800 text-white rounded-lg border border-gray-700 hover:bg-gray-700",children:"Hoje"}),a.jsx("button",{onClick:()=>s(new Date(e.getFullYear(),e.getMonth()+1,1)),className:"p-2 hover:bg-gray-700 rounded-lg text-gray-400",children:a.jsx(Ms,{})})]})]}),M=I=>{b({...v,date:I}),g(!0)},z=async I=>{if(I.preventDefault(),!(!E||!v.date||!v.title)){S(!0);try{await of.createBlock({artista_id:E,data_inicio:v.date,titulo:v.title,tipo:v.type}),g(!1),b({date:"",title:"",type:"bloqueio_manual"}),C()}catch(U){alert(he(U))}finally{S(!1)}}},F=async I=>{if(window.confirm("Excluir este compromisso?"))try{await of.deleteBlock(I),C()}catch(U){alert(he(U))}},G=()=>{const I=e.getFullYear(),U=e.getMonth(),q=[],H=T(I,U),$=R(I,U);for(let ie=0;ie<$;ie++)q.push(a.jsx("div",{className:"h-32 bg-gray-850/30 border border-gray-800/50 rounded-lg"},`empty-${ie}`));for(let ie=1;ie<=H;ie++){const re=`${I}-${String(U+1).padStart(2,"0")}-${String(ie).padStart(2,"0")}`,P=n.filter(Y=>Y.date===re),O=new Date().toISOString().split("T")[0]===re;q.push(a.jsxs("div",{onClick:()=>M(re),className:`h-32 p-2 border border-gray-800 bg-gray-850 rounded-lg transition-all hover:border-primary/40 cursor-pointer flex flex-col group overflow-hidden ${O?"ring-1 ring-primary/50 bg-gray-800":""}`,children:[a.jsxs("div",{className:"flex justify-between items-start mb-1",children:[a.jsx("span",{className:`text-xs font-bold ${O?"bg-primary text-dark px-1.5 rounded":"text-gray-500"}`,children:ie}),a.jsx(il,{className:"w-3 h-3 text-gray-700 opacity-0 group-hover:opacity-100 transition-opacity"})]}),a.jsx("div",{className:"flex-grow space-y-1 overflow-y-auto scrollbar-hide",children:P.map(Y=>a.jsxs("div",{onClick:ne=>{ne.stopPropagation(),Y.type==="manual_block"&&F(Y.id)},className:`text-[9px] px-1.5 py-1 rounded-md font-bold truncate border flex items-center justify-between ${Y.type==="contract_confirmed"?"bg-green-500/10 text-green-400 border-green-500/30":Y.type==="contract_pending"?"bg-yellow-500/10 text-yellow-400 border-yellow-500/30":"bg-gray-700 text-gray-300 border-gray-600"}`,children:[a.jsx("span",{className:"truncate",children:Y.title}),Y.type==="manual_block"&&a.jsx(ps,{className:"w-2.5 h-2.5 opacity-50 hover:opacity-100"})]},Y.id))})]},ie))}return q};return a.jsxs("div",{className:"animate-fade-in w-full",children:[A(),a.jsxs("div",{className:"grid grid-cols-7 gap-2 mb-2 text-center text-[10px] font-black text-gray-500 uppercase tracking-widest",children:[a.jsx("div",{children:"Dom"}),a.jsx("div",{children:"Seg"}),a.jsx("div",{children:"Ter"}),a.jsx("div",{children:"Qua"}),a.jsx("div",{children:"Qui"}),a.jsx("div",{children:"Sex"}),a.jsx("div",{children:"Sb"})]}),a.jsx("div",{className:"grid grid-cols-7 gap-2",children:G()}),a.jsxs("div",{className:"mt-8 flex flex-wrap gap-6 p-4 bg-gray-900/30 rounded-xl border border-gray-800",children:[a.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-gray-400",children:[a.jsx("div",{className:"w-3 h-3 rounded bg-green-500/20 border border-green-500/40"})," Show Confirmado"]}),a.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-gray-400",children:[a.jsx("div",{className:"w-3 h-3 rounded bg-yellow-500/20 border border-yellow-500/40"})," Show Pendente"]}),a.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-gray-400",children:[a.jsx("div",{className:"w-3 h-3 rounded bg-gray-700 border border-gray-600"})," Bloqueio Manual"]})]}),m&&a.jsx("div",{className:"fixed inset-0 bg-black/90 z-50 flex justify-center items-center p-4 backdrop-blur-sm",children:a.jsxs("div",{className:"bg-gray-900 text-white rounded-2xl p-6 max-w-md w-full border border-gray-800 shadow-2xl animate-fade-in",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h3",{className:"text-xl font-bold",children:"Bloquear Data"}),a.jsx("button",{onClick:()=>g(!1),children:a.jsx(Ms,{className:"rotate-90"})})]}),a.jsxs("form",{onSubmit:z,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Data Selecionada"}),a.jsx("input",{type:"date",value:v.date,disabled:!0,className:"w-full bg-gray-800 border border-gray-700 rounded-lg p-3 text-gray-400"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Ttulo do Compromisso"}),a.jsx("input",{type:"text",value:v.title,onChange:I=>b({...v,title:I.target.value}),required:!0,className:"w-full bg-gray-800 border border-gray-700 rounded-lg p-3 text-white focus:ring-1 focus:ring-primary outline-none",placeholder:"Ex: Ensaio Geral, Viagem, Show Externo"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Tipo"}),a.jsxs("select",{value:v.type,onChange:I=>b({...v,type:I.target.value}),className:"w-full bg-gray-800 border border-gray-700 rounded-lg p-3 text-white",children:[a.jsx("option",{value:"bloqueio_manual",children:"Bloqueio Privado"}),a.jsx("option",{value:"ensaio",children:"Ensaio"}),a.jsx("option",{value:"viagem",children:"Viagem"}),a.jsx("option",{value:"show_externo",children:"Show Fora da Plataforma"})]})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>g(!1),className:"flex-1 py-3 bg-gray-800 hover:bg-gray-700 rounded-xl font-bold",children:"Cancelar"}),a.jsx("button",{type:"submit",disabled:_,className:"flex-1 py-3 bg-primary text-dark font-black rounded-xl hover:bg-white transition-all shadow-lg shadow-primary/20",children:_?"Salvando...":"Confirmar"})]})]})]})})]})},Ib=[{id:"overview",label:"Viso Geral",icon:a.jsx($N,{className:"w-5 h-5"})},{id:"agenda",label:"Agenda",icon:a.jsx(ma,{className:"w-5 h-5"})},{id:"contratos",label:"Contratos",icon:a.jsx(Ln,{className:"w-5 h-5"})},{id:"mensagens",label:"Mensagens",icon:a.jsx(en,{className:"w-5 h-5"})},{id:"perfil",label:"Meu Perfil",icon:a.jsx(Ea,{className:"w-5 h-5"})},{id:"performance",label:"Performance",icon:a.jsx(ur,{className:"w-5 h-5"})},{id:"assinatura",label:"Assinatura",icon:a.jsx(Rs,{className:"w-5 h-5"})}],pD=({user:t,initialProfile:e,onProfileUpdate:s,openTab:n})=>{const[i,l]=N.useState("overview"),d=Xt(),u=Ds();N.useEffect(()=>{n&&(["portfolio","banda"].includes(n)?l("perfil"):["analytics","avaliacoes"].includes(n)?l("performance"):Ib.some(g=>g.id===n)&&l(n),d(u.pathname,{replace:!0}))},[n,d,u.pathname]);const f=()=>{switch(i){case"overview":return a.jsx(e_,{profile:e,setActiveTab:l});case"agenda":return a.jsx(mD,{profile:e});case"contratos":return a.jsx(Hm,{profile:e});case"mensagens":return a.jsx(XN,{currentUser:e});case"perfil":return a.jsx(ZI,{profile:e,onUpdate:s,initialTab:n||void 0});case"performance":return a.jsx(tD,{profile:e,initialTab:n||void 0});case"assinatura":return a.jsx(t_,{profile:e});default:return null}},m=String(e.nome||t.email||"Usurio");return a.jsx(zN,{title:"Painel do Artista",subtitle:a.jsxs(a.Fragment,{children:["Bem-vindo(a) de volta, ",a.jsx("span",{className:"text-primary font-semibold",children:m}),"!"]}),tabs:Ib,activeTab:i,onTabClick:l,profile:e,children:f()})},gD=({initialProfile:t,onProfileUpdate:e})=>{const[s,n]=N.useState("idle"),[i,l]=N.useState(""),[d,u]=N.useState(""),[f,m]=N.useState(!1),g=So(t),[v,b]=N.useState({nome:"",telefone:"",cidade:"",foto_url:"",foto_capa:"",capacidade:null,descricao:"",endereco:"",midias_sociais:{instagram:"",site:""}});N.useEffect(()=>{if(d){const A=setTimeout(()=>u(""),4e3);return()=>clearTimeout(A)}},[d]),N.useEffect(()=>{var A,M,z,F,G,K,I,U;t&&b({nome:t.nome||"",telefone:t.telefone||"",cidade:t.cidade||"",foto_url:t.foto_url||"",foto_capa:((A=t.estabelecimento)==null?void 0:A.foto_capa)||"",capacidade:((M=t.estabelecimento)==null?void 0:M.capacidade)??null,descricao:((z=t.estabelecimento)==null?void 0:z.descricao)||"",endereco:((F=t.estabelecimento)==null?void 0:F.endereco)||"",midias_sociais:{instagram:((K=(G=t.estabelecimento)==null?void 0:G.midias_sociais)==null?void 0:K.instagram)||"",site:((U=(I=t.estabelecimento)==null?void 0:I.midias_sociais)==null?void 0:U.site)||""}})},[t]);const _=A=>{const{id:M,value:z}=A.target;b(F=>{if(M==="capacidade"){const G=parseInt(z,10);return{...F,capacidade:isNaN(G)?null:G}}return{...F,[M]:z}}),s!=="idle"&&n("idle")},S=A=>{const{name:M,value:z}=A.target;b(F=>({...F,midias_sociais:{...F.midias_sociais,[M]:z}})),s!=="idle"&&n("idle")},E=(A,M)=>{u(""),Xe.updateBasicInfo(t.id,{foto_url:A}).then(()=>{u("Foto de perfil atualizada!"),e(),M.onSuccess()}).catch(z=>{console.error("Error updating avatar URL in DB",z),u("Falha ao salvar a foto."),M.onError()})},C=async A=>{l("");try{await Xe.updateVenue(t.id,null,{foto_capa:A}),b(M=>({...M,foto_capa:A})),e()}catch(M){const z=he(M);console.error("Error updating cover photo:",z),l("Erro ao salvar foto de capa: "+z),n("error")}},T=async A=>{A.preventDefault(),n("saving"),l("");const M=KI(v);if(!M.valid){n("error"),l(M.errors.join("; "));return}const z=v.telefone?ol(v.telefone):"",F=KN(v.midias_sociais);try{await Xe.updateVenue(t.id,{nome:v.nome.trim(),telefone:z,cidade:v.cidade.trim()},{capacidade:v.capacidade,descricao:v.descricao.trim(),endereco:v.endereco.trim(),midias_sociais:F||{}}),n("success"),e().catch(G=>{console.warn("Erro ao atualizar contexto:",G)}),setTimeout(()=>n("idle"),3e3)}catch(G){n("error");const K=he(G);l(K),console.error(K)}},R=s==="saving"||s==="success";return a.jsxs("form",{onSubmit:T,children:[a.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6",children:a.jsx("h2",{className:"text-2xl font-bold font-poppins text-white",children:"Editar Perfil"})}),!g.complete&&a.jsxs("div",{className:"mb-8 bg-gray-900 border-l-4 border-yellow-500 p-4 rounded-r-lg shadow-md transition-all",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(ss,{className:"w-5 h-5 text-yellow-500 flex-shrink-0"}),a.jsx("div",{children:a.jsxs("p",{className:"text-sm text-gray-300",children:["Seu perfil est incompleto. Preencha os ",a.jsxs("strong",{children:[g.missing.length," itens restantes"]})," para melhorar sua reputao."]})})]}),a.jsx("button",{type:"button",onClick:()=>m(!f),className:"text-xs font-semibold text-primary hover:underline whitespace-nowrap ml-4",children:f?"Ocultar":"Ver Pendncias"})]}),f&&a.jsx("div",{className:"mt-3 pl-8 animate-fade-in",children:a.jsx("ul",{className:"list-disc text-xs text-gray-400 space-y-1",children:g.missing.map((A,M)=>a.jsx("li",{children:A},M))})})]}),a.jsx(JN,{currentPath:v.foto_capa,bucketName:"estabelecimento",userId:t.auth_id,onUploadComplete:C}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 items-start mb-8",children:[a.jsxs("div",{className:"lg:col-span-1 flex flex-col items-center",children:[a.jsx(FN,{url:v.foto_url,onUpload:E}),a.jsx("p",{className:"text-sm text-gray-400 mt-4 text-center",children:"Clique na imagem para carregar uma nova foto de perfil."}),d&&a.jsx("p",{className:"text-sm text-green-400 mt-2 text-center",children:d})]}),a.jsxs("div",{className:"lg:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"nome",className:"block text-sm font-medium text-gray-300",children:"Nome do Estabelecimento"}),a.jsx("input",{type:"text",id:"nome",value:v.nome,onChange:_,className:"mt-1 input-style"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300",children:"Email"}),a.jsx("input",{type:"email",id:"email",value:t.email,disabled:!0,className:"mt-1 input-style bg-gray-700 cursor-not-allowed"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"telefone",className:"block text-sm font-medium text-gray-300",children:"Telefone"}),a.jsx("input",{type:"tel",id:"telefone",value:v.telefone,onChange:_,className:"mt-1 input-style"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"cidade",className:"block text-sm font-medium text-gray-300",children:"Cidade"}),a.jsx("input",{type:"text",id:"cidade",value:v.cidade,onChange:_,className:"mt-1 input-style"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsx("div",{className:"md:col-span-2",children:a.jsx("hr",{className:"border-gray-700"})}),a.jsx("div",{className:"md:col-span-2",children:a.jsx("h3",{className:"text-xl font-semibold text-white mt-4",children:"Detalhes do Estabelecimento"})}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"capacidade",className:"block text-sm font-medium text-gray-300",children:"Capacidade (pessoas)"}),a.jsx("input",{type:"number",id:"capacidade",value:v.capacidade??"",onChange:_,className:"mt-1 input-style",placeholder:"Ex: 150"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"endereco",className:"block text-sm font-medium text-gray-300",children:"Endereo Completo"}),a.jsx("input",{type:"text",id:"endereco",value:v.endereco,onChange:_,className:"mt-1 input-style",placeholder:"Rua, Nmero, Bairro"})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{htmlFor:"descricao",className:"block text-sm font-medium text-gray-300",children:"Descrio do Local"}),a.jsx("textarea",{id:"descricao",rows:4,value:v.descricao,onChange:_,className:"mt-1 input-style",placeholder:"Descreva seu espao, o tipo de pblico, estrutura, etc."})]}),a.jsx("div",{className:"md:col-span-2",children:a.jsx("h3",{className:"text-lg font-semibold text-white mb-4 mt-4",children:"Mdias Sociais"})}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"instagram",className:"block text-sm font-medium text-gray-300",children:"Usurio do Instagram"}),a.jsx("input",{type:"text",name:"instagram",id:"instagram",value:v.midias_sociais.instagram,onChange:S,className:"mt-1 input-style",placeholder:"seu_usuario_no_instagram"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"site",className:"block text-sm font-medium text-gray-300",children:"Site Oficial"}),a.jsx("input",{type:"url",name:"site",id:"site",value:v.midias_sociais.site,onChange:S,className:"mt-1 input-style",placeholder:"https://seu-site.com"})]}),a.jsxs("div",{className:"md:col-span-2 flex justify-end items-center gap-4",children:[s==="error"&&a.jsx("p",{className:"text-sm text-red-400 mr-auto flex-grow",children:i}),a.jsxs("button",{type:"submit",disabled:R,className:`font-bold py-2 px-6 rounded-full transition-all duration-300 transform hover:scale-105 flex items-center justify-center gap-2
                            ${s==="idle"&&"bg-gradient-to-r from-primary to-secondary text-white hover:shadow-lg hover:shadow-secondary/40"}
                            ${s==="saving"&&"bg-gray-600 text-white cursor-not-allowed"}
                            ${s==="success"&&"bg-green-600 text-white cursor-not-allowed"}
                            ${s==="error"&&"bg-red-600 text-white"}
                        `,children:[s==="saving"&&"Salvando...",s==="success"&&a.jsxs(a.Fragment,{children:[a.jsx(_a,{className:"w-5 h-5"})," Salvo!"]}),s==="error"&&"Tentar Novamente",s==="idle"&&"Salvar Perfil Completo"]})]})]})]})},xD=({profile:t,onUpdate:e})=>{var b,_;const[s,n]=N.useState(null),[i,l]=N.useState(""),[d,u]=N.useState(""),f=async(S,E)=>{if(!S.target.files||S.target.files.length===0)return;const C=S.target.files[0];n(E),l(""),u("");try{const T=C.name.split(".").pop(),R=`${t.auth_id}/docs/venue_${E}_${Date.now()}.${T}`,A=await Ie.upload("estabelecimento",R,C);await Xe.updateVenue(t.id,null,{[E==="lista"?"lista_equipamentos_url":"mapa_palco_url"]:A}),u("Arquivo enviado com sucesso!"),e()}catch(T){l(he(T))}finally{n(null)}},m=async S=>{if(window.confirm("Remover este arquivo?"))try{await Xe.updateVenue(t.id,null,{[S==="lista"?"lista_equipamentos_url":"mapa_palco_url"]:null}),e()}catch(E){alert(he(E))}},g=(b=t.estabelecimento)==null?void 0:b.lista_equipamentos_url,v=(_=t.estabelecimento)==null?void 0:_.mapa_palco_url;return a.jsxs("div",{className:"space-y-6 animate-fade-in",children:[a.jsx("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6",children:a.jsx("h2",{className:"text-2xl font-bold font-poppins text-white",children:"Especificaes Tcnicas"})}),a.jsx("p",{className:"text-gray-400 text-sm mb-6",children:"Disponibilize informaes tcnicas do seu espao para agilizar a pr-produo dos shows."}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-gray-900/50 p-6 rounded-2xl border border-gray-700",children:[a.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[a.jsx(hr,{className:"w-5 h-5 text-primary"})," Lista de Equipamentos (PA/Backline)"]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("label",{className:`flex-1 flex flex-col items-center justify-center py-8 border-2 border-dashed border-gray-700 rounded-xl cursor-pointer hover:bg-gray-800 transition-all ${s==="lista"?"opacity-50":""}`,children:[a.jsx(Ca,{className:`w-8 h-8 mb-2 ${s==="lista"?"animate-bounce":"text-gray-500"}`}),a.jsx("span",{className:"text-xs font-bold text-gray-400",children:g?"Substituir Lista":"Enviar PDF/Imagem"}),a.jsx("input",{type:"file",className:"hidden",accept:".pdf,image/*",onChange:S=>f(S,"lista"),disabled:!!s})]}),g&&a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx("a",{href:Ie.getPublicUrl("estabelecimento",g),target:"_blank",rel:"noreferrer",className:"w-12 h-12 bg-green-500/10 rounded-full flex items-center justify-center text-green-500 border border-green-500/30 hover:bg-green-500/20 transition-colors",children:a.jsx(_a,{className:"w-6 h-6"})}),a.jsx("button",{onClick:()=>m("lista"),className:"w-12 h-12 bg-red-500/10 rounded-full flex items-center justify-center text-red-500 border border-red-500/30 hover:bg-red-500/20 transition-colors",children:a.jsx(ps,{className:"w-5 h-5"})})]})]})]}),a.jsxs("div",{className:"bg-gray-900/50 p-6 rounded-2xl border border-gray-700",children:[a.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[a.jsx(hr,{className:"w-5 h-5 text-secondary"})," Mapa de Palco / Planta"]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("label",{className:`flex-1 flex flex-col items-center justify-center py-8 border-2 border-dashed border-gray-700 rounded-xl cursor-pointer hover:bg-gray-800 transition-all ${s==="mapa"?"opacity-50":""}`,children:[a.jsx(Ca,{className:`w-8 h-8 mb-2 ${s==="mapa"?"animate-bounce":"text-gray-500"}`}),a.jsx("span",{className:"text-xs font-bold text-gray-400",children:v?"Substituir Mapa":"Enviar PDF/Imagem"}),a.jsx("input",{type:"file",className:"hidden",accept:".pdf,image/*",onChange:S=>f(S,"mapa"),disabled:!!s})]}),v&&a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx("a",{href:Ie.getPublicUrl("estabelecimento",v),target:"_blank",rel:"noreferrer",className:"w-12 h-12 bg-green-500/10 rounded-full flex items-center justify-center text-green-500 border border-green-500/30 hover:bg-green-500/20 transition-colors",children:a.jsx(_a,{className:"w-6 h-6"})}),a.jsx("button",{onClick:()=>m("mapa"),className:"w-12 h-12 bg-red-500/10 rounded-full flex items-center justify-center text-red-500 border border-red-500/30 hover:bg-red-500/20 transition-colors",children:a.jsx(ps,{className:"w-5 h-5"})})]})]})]})]}),i&&a.jsx("p",{className:"text-red-400 text-center",children:i}),d&&a.jsx("p",{className:"text-green-400 text-center",children:d})]})},yD=({profile:t,onUpdate:e,initialTab:s})=>{const[n,i]=N.useState("dados");return N.useEffect(()=>{s&&i(s==="portfolio"?"portfolio":s==="specs"?"specs":s==="verificacao"?"verificacao":"dados")},[s]),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-wrap gap-2 border-b border-gray-700 pb-2",children:[a.jsxs("button",{onClick:()=>i("dados"),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-bold transition-all ${n==="dados"?"bg-primary text-dark":"text-gray-400 hover:bg-gray-800"}`,children:[a.jsx(Ea,{className:"w-4 h-4"})," Dados do Local"]}),a.jsxs("button",{onClick:()=>i("portfolio"),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-bold transition-all ${n==="portfolio"?"bg-primary text-dark":"text-gray-400 hover:bg-gray-800"}`,children:[a.jsx(tn,{className:"w-4 h-4"})," Portflio & Mdia"]}),a.jsxs("button",{onClick:()=>i("specs"),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-bold transition-all ${n==="specs"?"bg-primary text-dark":"text-gray-400 hover:bg-gray-800"}`,children:[a.jsx(hr,{className:"w-4 h-4"})," Especificaes Tcnicas"]}),a.jsxs("button",{onClick:()=>i("verificacao"),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-bold transition-all ${n==="verificacao"?"bg-primary text-dark":"text-gray-400 hover:bg-gray-800"}`,children:[a.jsx(Pn,{className:"w-4 h-4"})," Verificao"]})]}),a.jsxs("div",{className:"animate-fade-in min-h-[500px]",children:[n==="dados"&&a.jsx(gD,{initialProfile:t,onProfileUpdate:e}),n==="portfolio"&&a.jsx(YN,{profile:t,onUpdate:e}),n==="specs"&&a.jsx(xD,{profile:t,onUpdate:e}),n==="verificacao"&&a.jsx($m,{profile:t,onUpdate:e})]})]})},vD=({venueProfile:t})=>{const[e,s]=N.useState([]),[n,i]=N.useState(!0),[l,d]=N.useState(""),[u,f]=N.useState(null);N.useEffect(()=>{(async()=>{i(!0);try{const b=await lb.getMatchesForVenue(t);s(b)}catch(b){d(he(b))}finally{i(!1)}})()},[t]);const m=async v=>{f(v.id);try{const b=await lb.getJustification(t,v);s(_=>_.map(S=>S.id===v.id?{...S,matchJustification:b}:S))}catch(b){console.error("Matchmaking Insight Error:",b)}finally{f(null)}},g=v=>v.foto_url?Ie.getPublicUrl("perfis",v.foto_url):"https://images.unsplash.com/photo-1511379938547-c1f69419868d?q=80&w=2070&auto=format&fit=crop";return a.jsxs("div",{className:"animate-fade-in",children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs("h2",{className:"text-2xl font-bold font-poppins text-white flex items-center gap-2",children:[a.jsx(Ft,{className:"text-primary w-7 h-7"}),"Matchmaking Inteligente"]}),a.jsxs("p",{className:"text-gray-400 text-sm",children:["Artistas que combinam com a vibe do ",t.nome,"."]})]}),n?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((v,b)=>a.jsx("div",{className:"bg-gray-850 h-48 rounded-2xl animate-pulse border border-gray-700"},b))}):l?a.jsx("div",{className:"bg-red-500/10 border border-red-500/30 p-6 rounded-xl text-red-400 text-center",children:l}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(v=>{var b;return a.jsxs("div",{className:"bg-gray-850 rounded-2xl border border-gray-700 overflow-hidden hover:border-primary/50 transition-all group flex flex-col",children:[a.jsxs("div",{className:"p-5 flex-grow",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[a.jsx("img",{src:g(v),className:"w-14 h-14 rounded-full object-cover border-2 border-gray-700 group-hover:border-primary transition-colors",alt:v.nome}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("h3",{className:"font-bold text-white truncate",children:v.nome}),a.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-gray-500 font-bold uppercase",children:[a.jsx(At,{className:"w-3 h-3 text-yellow-500"}),(b=v.artista)==null?void 0:b.genero_musical]})]})]}),v.matchJustification?a.jsx("div",{className:"bg-primary/5 border border-primary/20 p-3 rounded-xl mb-4 animate-fade-in",children:a.jsxs("p",{className:"text-xs italic text-primary-100 leading-relaxed",children:['"',v.matchJustification,'"']})}):a.jsxs("button",{onClick:()=>m(v),disabled:u===v.id,className:"w-full py-2 mb-4 bg-gray-900 border border-gray-700 rounded-xl text-[10px] font-black uppercase tracking-widest text-gray-400 hover:text-white hover:border-primary transition-all flex items-center justify-center gap-2",children:[u===v.id?a.jsx("span",{className:"animate-spin text-lg",children:""}):a.jsx(Ft,{className:"w-3 h-3"}),u===v.id?"Analisando Vibe...":"Por que este artista?"]}),a.jsxs("div",{className:"flex items-center text-[10px] text-gray-500",children:[a.jsx(Wt,{className:"w-3 h-3 mr-1"}),v.cidade]})]}),a.jsxs(Se,{to:`/artista/${v.id}`,className:"bg-gray-900/50 p-3 border-t border-gray-800 text-center text-xs font-bold text-primary hover:bg-primary hover:text-dark transition-all flex items-center justify-center gap-1",children:["Ver Perfil ",a.jsx(Ms,{className:"w-3 h-3"})]})]},v.id)})})]})},Db=[{id:"overview",label:"Viso Geral",icon:a.jsx($N,{className:"w-5 h-5"})},{id:"matchmaking",label:"Matchmaking",icon:a.jsx(Ft,{className:"w-5 h-5"})},{id:"analytics",label:"Analytics",icon:a.jsx(ur,{className:"w-5 h-5"})},{id:"perfil",label:"Perfil do Local",icon:a.jsx(Ea,{className:"w-5 h-5"})},{id:"contratos",label:"Contratos",icon:a.jsx(Ln,{className:"w-5 h-5"})},{id:"assinatura",label:"Assinatura",icon:a.jsx(Rs,{className:"w-5 h-5"})},{id:"avaliacoes",label:"Avaliaes",icon:a.jsx(At,{className:"w-5 h-5"})},{id:"mensagens",label:"Mensagens",icon:a.jsx(en,{className:"w-5 h-5"})}],bD=({user:t,initialProfile:e,onProfileUpdate:s,openTab:n})=>{const[i,l]=N.useState("overview"),d=Xt(),u=Ds();N.useEffect(()=>{n&&(["portfolio"].includes(n)?l("perfil"):Db.some(g=>g.id===n)&&l(n),d(u.pathname,{replace:!0}))},[n,d,u.pathname]);const f=()=>{switch(i){case"overview":return a.jsx(e_,{profile:e,setActiveTab:l});case"matchmaking":return a.jsx(vD,{venueProfile:e});case"analytics":return a.jsx(WN,{profile:e});case"perfil":return a.jsx(yD,{profile:e,onUpdate:s,initialTab:n==="portfolio"?"portfolio":void 0});case"contratos":return a.jsx(Hm,{profile:e});case"assinatura":return a.jsx(t_,{profile:e});case"avaliacoes":return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center gap-2",children:[a.jsx(At,{className:"w-6 h-6 text-yellow-400"}),"Avaliaes do Estabelecimento"]}),a.jsx("p",{className:"text-gray-400 text-sm",children:"Feedback recebido de artistas que tocaram aqui."}),a.jsx(jd,{targetId:e.id})]});case"mensagens":return a.jsx(XN,{currentUser:e});default:return null}},m=String(e.nome||t.email||"Usurio");return a.jsx(zN,{title:"Painel do Estabelecimento",subtitle:a.jsxs(a.Fragment,{children:["Bem-vindo(a), ",a.jsx("span",{className:"text-primary font-semibold",children:m}),"!"]}),tabs:Db,activeTab:i,onTabClick:l,profile:e,children:f()})},wD=()=>{const{session:t,profile:e,loading:s,profileMissing:n,refreshProfile:i,error:l}=Ps(),d=Xt(),[u]=xE(),f=u.get("open");N.useEffect(()=>{s||(t?n&&d("/completar-perfil"):d("/login"))},[t,n,s,d]);const m=async()=>{await i()};return s?a.jsx("div",{className:"flex justify-center items-center h-screen bg-dark",children:a.jsx("div",{className:"text-white text-xl",children:"Carregando painel..."})}):l?a.jsxs("div",{className:"flex flex-col justify-center items-center h-screen bg-dark gap-4 p-4 text-center",children:[a.jsx("h2",{className:"text-red-400 text-xl font-bold",children:"Erro de Conexo"}),a.jsx("p",{className:"text-gray-400 max-w-md",children:l}),a.jsx("button",{onClick:()=>i(),className:"px-6 py-2 bg-primary text-dark font-bold rounded-full hover:bg-opacity-90 transition-all shadow-lg hover:scale-105",children:"Tentar Novamente"})]}):!e||n?a.jsx("div",{className:"flex justify-center items-center h-screen bg-dark",children:a.jsx("div",{className:"text-white text-xl",children:"Carregando perfil..."})}):t!=null&&t.user?a.jsx("main",{className:"bg-dark text-white font-sans min-h-[calc(100vh-80px)]",children:e.tipo==="artista"?a.jsx(pD,{user:t.user,initialProfile:e,onProfileUpdate:m,openTab:f}):a.jsx(bD,{user:t.user,initialProfile:e,onProfileUpdate:m,openTab:f})}):a.jsx("div",{className:"flex justify-center items-center h-screen bg-dark",children:a.jsx("div",{className:"text-white text-xl",children:"Sesso no encontrada. Redirecionando..."})})},ND=({className:t="w-6 h-6",...e})=>a.jsx("svg",{className:t,fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",...e,children:a.jsx("path",{fillRule:"evenodd",d:"M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.218 2.427.465a4.902 4.902 0 011.772 1.153 4.902 4.902 0 011.153 1.772c.247.636.416 1.363.465 2.427.048 1.024.06 1.378.06 3.808s-.012 2.784-.06 3.808c-.049 1.064-.218 1.791-.465 2.427a4.902 4.902 0 01-1.153 1.772 4.902 4.902 0 01-1.772 1.153c-.636.247-1.363.416-2.427.465-1.024.048-1.378.06-3.808.06s-2.784-.012-3.808-.06c-1.064-.049-1.791-.218-2.427-.465a4.902 4.902 0 011.153-1.772A4.902 4.902 0 016.08 2.525c.636-.247 1.363-.416 2.427-.465C9.53 2.013 9.884 2 12.315 2zM12 7a5 5 0 100 10 5 5 0 000-10zm0 8a3 3 0 110-6 3 3 0 010 6zm5.25-10a1.25 1.25 0 100 2.5 1.25 1.25 0 000-2.5z",clipRule:"evenodd"})}),_D=({className:t="w-6 h-6",...e})=>a.jsx("svg",{className:t,fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",...e,children:a.jsx("path",{fillRule:"evenodd",d:"M19.812 5.418c.861.23 1.538.907 1.768 1.768C21.998 8.78 22 12 22 12s0 3.22-.418 4.814a2.506 2.506 0 0 1-1.768 1.768c-1.594.419-7.814.419-7.814.419s-6.22 0-7.814-.419a2.505 2.505 0 0 1-1.768-1.768C2 15.22 2 12 2 12s0-3.22.418-4.814a2.506 2.506 0 0 1 1.768-1.768C5.78 5 12 5 12 5s6.22 0 7.812.418zM9.75 15.562V8.438L15.468 12 9.75 15.562z",clipRule:"evenodd"})}),SD=({className:t="w-6 h-6",...e})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,...e,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2h10a2 2 0 002-2v-1a2 2 0 012-2h1.945M7.757 15.757a4 4 0 105.657-5.657a4 4 0 00-5.657 5.657zM12 21a9 9 0 100-18 9 9 0 000 18z"})}),s_=({isOpen:t,images:e,initialIndex:s,onClose:n})=>{const[i,l]=N.useState(s);N.useEffect(()=>{l(s)},[s]);const d=N.useCallback(()=>{!e||e.length===0||l(f=>(f+1)%e.length)},[e]),u=N.useCallback(()=>{!e||e.length===0||l(f=>(f-1+e.length)%e.length)},[e]);return N.useEffect(()=>{if(!t)return;const f=m=>{m.key==="Escape"&&n(),m.key==="ArrowRight"&&d(),m.key==="ArrowLeft"&&u()};return window.addEventListener("keydown",f),()=>window.removeEventListener("keydown",f)},[t,n,d,u]),!t||!e||e.length===0?null:a.jsxs("div",{className:"fixed inset-0 z-[150] flex items-center justify-center bg-black/95 backdrop-blur-sm animate-fade-in",children:[a.jsx("button",{onClick:n,className:"absolute top-4 right-4 p-2 text-gray-400 hover:text-white transition-colors z-[160] bg-black/50 rounded-full","aria-label":"Fechar galeria",children:a.jsx(It,{className:"w-8 h-8"})}),e.length>1&&a.jsx("button",{onClick:f=>{f.stopPropagation(),u()},className:"absolute left-4 p-3 text-white hover:text-primary transition-colors z-[160] bg-black/50 rounded-full hover:bg-black/70","aria-label":"Imagem anterior",children:a.jsx(Vm,{className:"w-8 h-8"})}),a.jsxs("div",{className:"relative max-w-[90vw] max-h-[90vh] flex flex-col items-center",children:[a.jsx("img",{src:e[i],alt:`Galeria ${i+1}`,className:"max-w-full max-h-[85vh] object-contain rounded-md shadow-2xl"}),a.jsxs("div",{className:"mt-4 text-gray-300 font-medium bg-black/50 px-4 py-1 rounded-full",children:[i+1," / ",e.length]})]}),e.length>1&&a.jsx("button",{onClick:f=>{f.stopPropagation(),d()},className:"absolute right-4 p-3 text-white hover:text-primary transition-colors z-[160] bg-black/50 rounded-full hover:bg-black/70","aria-label":"Prxima imagem",children:a.jsx(Ms,{className:"w-8 h-8"})})]})},a_=({className:t="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})}),jD=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],ED={monday:"SEG",tuesday:"TER",wednesday:"QUA",thursday:"QUI",friday:"SEX",saturday:"SB",sunday:"DOM"},CD=()=>{var me,je,pe,Ne,Me,ue,_e,Ue,Fe,dt,pt,Dt,Ls,sa,ga;const{id:t}=ud(),{profile:e,user:s}=Ps();Xt();const[n,i]=N.useState(null),[l,d]=N.useState([]),[u,f]=N.useState(!0),[m,g]=N.useState([]),[v,b]=N.useState([]),[_,S]=N.useState([]),[E,C]=N.useState([]),[T,R]=N.useState(null),[A,M]=N.useState(!0),[z,F]=N.useState(null),[G,K]=N.useState(!1),[I,U]=N.useState(""),[q,H]=N.useState(!1),[$,ie]=N.useState(!1),[re,P]=N.useState(!1),[O,Y]=N.useState(0),ne=N.useCallback(async()=>{var Ae,be,He;if(!t){F("ID de usurio no fornecido."),M(!1);return}M(!0),F(null);try{const{data:lt,error:Rt}=await Q.from("usuarios").select("*, artista:artistas!inner(*)").eq("id",t).eq("tipo","artista").single();if(Rt||!lt)throw new Error("Perfil no encontrado.");const Nt=Ws(lt),Je=Nt.artista;if(Je!=null&&Je.id){const{data:et}=await Q.from("contratos").select("id, data_evento, status, estabelecimentos!inner(usuario_id, usuarios!inner(nome, cidade))").eq("artista_id",Je.id).in("status",["assinado","concluido"]).gte("data_evento",new Date().toISOString()).order("data_evento",{ascending:!0});g((et||[]).map(os=>{const ln=Array.isArray(os.estabelecimentos)?os.estabelecimentos[0]:os.estabelecimentos,pr=ln&&(Array.isArray(ln.usuarios)?ln.usuarios[0]:ln.usuarios);return!ln||!pr?null:{id:os.id,titulo:`Show em ${pr.nome}`,data_evento:os.data_evento,estabelecimento:{id:ln.usuario_id,nome:pr.nome,cidade:pr.cidade}}}).filter(os=>os!==null))}const Jt=Date.now(),ys=((Ae=Je==null?void 0:Je.galeria_fotos)==null?void 0:Ae.filter(et=>!!et))||[],Aa=((be=Je==null?void 0:Je.galeria_videos)==null?void 0:be.filter(et=>!!et))||[],On=((He=Je==null?void 0:Je.galeria_audios)==null?void 0:He.filter(et=>!!et))||[];Je!=null&&Je.foto_capa&&R(`${Ie.getPublicUrl("artista",Je.foto_capa)}?t=${Jt}`);const[Os,_t,rs]=await Promise.all([ys.length>0?Ie.getSignedUrls("artista",ys,3600):Promise.resolve([]),Aa.length>0?Ie.getSignedUrls("artista",Aa,3600):Promise.resolve([]),On.length>0?Ie.getSignedUrls("artista",On,3600):Promise.resolve([])]);b(Os.map(et=>`${et}&t=${Jt}`)),S(_t),C(rs.map((et,os)=>({name:On[os].split("/").pop()||`Track ${os+1}`,url:et}))),i(Nt)}catch(lt){F(he(lt))}finally{M(!1)}},[t]);N.useEffect(()=>{ne()},[ne]),N.useEffect(()=>{var Ae;(Ae=n==null?void 0:n.artista)!=null&&Ae.id&&(f(!0),Jc.list(n.artista.id).then(be=>d(be||[])).finally(()=>f(!1)))},[(me=n==null?void 0:n.artista)==null?void 0:me.id]);const le=async Ae=>{if(Ae)try{const be=await Ie.getSignedUrls("artista",[Ae],300);be.length>0&&window.open(be[0],"_blank")}catch(be){alert("Falha ao obter documento: "+he(be))}};if(A)return a.jsx("div",{className:"flex justify-center items-center h-screen bg-dark text-white",children:"Carregando perfil..."});if(z||!n)return a.jsxs("div",{className:"flex flex-col justify-center items-center h-screen bg-dark text-red-500",children:[a.jsx("h2",{className:"text-2xl font-bold",children:z||"Artista no encontrado."}),a.jsx(Se,{to:"/artistas",className:"mt-4 text-primary underline",children:"Voltar"})]});const L=n.foto_url?`${Ie.getPublicUrl("perfis",n.foto_url)}?t=${Date.now()}`:"https://images.unsplash.com/photo-1511379938547-c1f69419868d?q=80&w=2070&auto=format&fit=crop",D=(je=n.artista)==null?void 0:je.midias_sociais,te=((pe=n.artista)==null?void 0:pe.disponibilidade)||{},se=Object.values(te).some(Ae=>Ae.active),fe=!!((Ne=n.artista)!=null&&Ne.rider_tecnico_url||(Me=n.artista)!=null&&Me.mapa_palco_url),ee={"@context":"https://schema.org","@type":((_e=(ue=n.artista)==null?void 0:ue.integrantes)==null?void 0:_e.length)>1?"MusicGroup":"Person",name:n.nome,description:((Ue=n.artista)==null?void 0:Ue.descricao)||"",image:L,jobTitle:"Musician",genre:(Fe=n.artista)==null?void 0:Fe.genero_musical,address:{"@type":"PostalAddress",addressLocality:n.cidade,addressCountry:"BR"}};return a.jsxs("div",{className:"bg-dark text-white font-sans min-h-screen pb-24 lg:pb-0 relative",children:[a.jsx(Qt,{title:n.nome,description:((pt=(dt=n.artista)==null?void 0:dt.descricao)==null?void 0:pt.substring(0,160))||`Confira o perfil de ${n.nome} no Resona. Msico disponvel para shows.`,image:L,type:"profile",schema:ee}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"h-[45vh] md:h-[55vh] bg-cover bg-center relative",style:{backgroundImage:T?`url(${T})`:"linear-gradient(to right, #1f2937, #111827)"},children:a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-dark via-dark/60 to-transparent"})}),a.jsx("div",{className:"container mx-auto px-4 relative -mt-32 md:-mt-40 z-10",children:a.jsxs("div",{className:"flex flex-col md:flex-row items-center md:items-end gap-6",children:[a.jsx("img",{src:L,alt:n.nome,className:"w-40 h-40 md:w-56 md:h-56 rounded-full object-cover border-4 border-dark shadow-2xl relative z-10"}),a.jsxs("div",{className:"flex-grow mb-2 text-center md:text-left",children:[a.jsxs("h1",{className:"text-3xl sm:text-4xl md:text-6xl font-black font-poppins flex items-center justify-center md:justify-start gap-3",children:[n.nome,n.status_verificacao==="verificado"&&a.jsx(Pn,{className:"w-6 h-6 md:w-8 md:h-8 text-primary shadow-primary/50"})]}),a.jsxs("div",{className:"flex flex-wrap items-center justify-center md:justify-start gap-4 mt-3",children:[a.jsx("span",{className:"bg-primary/20 backdrop-blur-md border border-primary/30 text-primary px-3 py-1 rounded-full text-sm font-bold uppercase tracking-wider",children:((Dt=n.artista)==null?void 0:Dt.genero_musical)||"Artista"}),a.jsxs("div",{className:"flex items-center text-gray-200 text-sm font-medium",children:[a.jsx(Wt,{className:"w-4 h-4 mr-1 text-primary"}),a.jsx("span",{children:n.cidade||"Brasil"})]})]})]}),a.jsxs("div",{className:"mb-4 md:mb-8 flex flex-col sm:flex-row gap-3 w-full md:w-auto justify-center",children:[a.jsxs("button",{onClick:()=>{navigator.clipboard.writeText(window.location.href),H(!0),setTimeout(()=>H(!1),2e3)},className:"flex items-center justify-center gap-2 bg-gray-800/80 px-5 py-2.5 rounded-full border border-gray-600 shadow-lg text-sm",children:[q?a.jsx(_a,{className:"w-5 h-5 text-green-400"}):a.jsx(a_,{className:"w-5 h-5"}),q?"Copiado!":"Compartilhar"]}),(e==null?void 0:e.tipo)==="estabelecimento"&&a.jsx("button",{onClick:()=>ie(!0),disabled:!So(e).complete,className:`font-bold py-2.5 px-8 rounded-full shadow-lg transform transition-all text-sm ${So(e).complete?"bg-gradient-to-r from-primary to-secondary text-white hover:scale-105":"bg-gray-700 text-gray-500 cursor-not-allowed"}`,title:So(e).complete?"Contratar":"Complete seu perfil de estabelecimento para contratar.",children:"Contratar Agora"})]})]})})]}),a.jsx("div",{className:"container mx-auto px-4 py-12",children:a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-12",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-10",children:[a.jsxs("section",{className:"bg-gray-800/50 p-8 rounded-2xl border border-gray-700/50 shadow-xl",children:[a.jsx("h2",{className:"text-2xl font-bold font-poppins mb-4",children:"Sobre"}),a.jsx("p",{className:"text-gray-300 leading-relaxed text-lg whitespace-pre-wrap",children:((Ls=n.artista)==null?void 0:Ls.descricao)||"O artista ainda no adicionou uma descrio."})]}),l.length>0&&a.jsxs("section",{className:"bg-gray-800/50 p-8 rounded-2xl border border-gray-700/50 shadow-xl",children:[a.jsx("h2",{className:"text-2xl font-bold font-poppins mb-6",children:"Integrantes"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:l.map(Ae=>a.jsxs("div",{className:"flex items-center gap-4 bg-gray-900/50 p-4 rounded-xl border border-gray-700",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/20 flex items-center justify-center text-primary",children:a.jsx(Sa,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-white",children:Ae.nome}),a.jsx("p",{className:"text-sm text-gray-400",children:Ae.instrumento})]})]},Ae.id))})]}),a.jsxs("section",{className:"bg-gray-800/50 p-8 rounded-2xl border border-gray-700/50 shadow-xl",children:[a.jsx("h2",{className:"text-2xl font-bold font-poppins mb-6",children:"Agenda Confirmada"}),m.length>0?a.jsx("div",{className:"space-y-3",children:m.map(Ae=>a.jsx("div",{className:"flex items-center justify-between bg-gray-900/50 p-4 rounded-xl border border-gray-700 hover:border-primary/50 transition-colors group",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"bg-gray-800 p-3 rounded-lg text-center min-w-[60px]",children:[a.jsx("span",{className:"block text-xs text-primary font-bold uppercase",children:new Date(Ae.data_evento).toLocaleString("pt-BR",{month:"short",timeZone:"UTC"})}),a.jsx("span",{className:"block text-xl font-black text-white",children:new Date(Ae.data_evento).getUTCDate()})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-white text-lg group-hover:text-primary transition-colors",children:Ae.titulo}),a.jsxs(Se,{to:`/estabelecimento/${Ae.estabelecimento.id}`,className:"text-sm text-gray-400 flex items-center gap-1",children:[a.jsx(Wt,{className:"w-3 h-3"})," ",Ae.estabelecimento.nome]})]})]})},Ae.id))}):a.jsx("div",{className:"text-center py-8 text-gray-500 italic",children:"Nenhum show pblico agendado."})]}),a.jsxs("section",{className:"space-y-8",children:[a.jsx("h2",{className:"text-2xl font-bold font-poppins",children:"Galeria"}),v.length>0?a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:v.map((Ae,be)=>a.jsxs("div",{onClick:()=>{Y(be),P(!0)},className:"cursor-pointer group relative overflow-hidden rounded-xl aspect-square",children:[a.jsx("img",{src:Ae,alt:"Galeria",className:"w-full h-full object-cover transition-transform group-hover:scale-110"}),a.jsx("div",{className:"absolute inset-0 bg-black/20 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:a.jsx(tn,{className:"w-8 h-8"})})]},be))}):a.jsx("p",{className:"text-gray-500 italic",children:"Sem fotos disponveis."})]}),_.length>0&&a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-2xl font-bold font-poppins",children:"Vdeos"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:_.map((Ae,be)=>a.jsx("div",{className:"bg-gray-900 rounded-xl overflow-hidden border border-gray-700 shadow-lg group hover:border-primary/50 transition-colors",children:a.jsx("video",{controls:!0,className:"w-full aspect-video object-cover bg-black",src:Ae,preload:"metadata"})},be))})]}),E.length>0&&a.jsxs("section",{className:"space-y-4",children:[a.jsxs("h2",{className:"text-2xl font-bold font-poppins flex items-center gap-2",children:[a.jsx(_o,{className:"w-6 h-6 text-primary"}),"Msicas & Demos"]}),a.jsx("div",{className:"space-y-3",children:E.map((Ae,be)=>a.jsxs("div",{className:"bg-gray-800 p-4 rounded-xl border border-gray-700 flex flex-col md:flex-row items-center gap-4 hover:border-primary/50 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/20 flex items-center justify-center flex-shrink-0",children:a.jsx(_o,{className:"w-5 h-5 text-primary"})}),a.jsx("span",{className:"font-medium text-sm text-gray-200 truncate max-w-[150px] md:max-w-[200px]",title:Ae.name,children:Ae.name})]}),a.jsx("div",{className:"flex-grow w-full",children:a.jsx("audio",{controls:!0,className:"w-full h-8 block",src:Ae.url})})]},be))})]}),a.jsxs("section",{className:"pt-8 border-t border-gray-800",children:[a.jsx("h2",{className:"text-2xl font-bold font-poppins mb-8",children:"Avaliaes"}),a.jsx(jd,{targetId:n.id})]})]}),a.jsxs("aside",{className:"lg:col-span-1 space-y-6",children:[a.jsxs("div",{className:"bg-gray-800 p-6 rounded-2xl shadow-xl border border-gray-700",children:[a.jsx("h2",{className:"text-xl font-bold font-poppins mb-6",children:"Redes & Contato"}),a.jsxs("div",{className:"space-y-4",children:[(D==null?void 0:D.instagram)&&a.jsxs("a",{href:`https://instagram.com/${D.instagram.replace("@","")}`,target:"_blank",className:"flex items-center p-3 rounded-lg bg-gray-900/50 hover:bg-gray-700 transition-colors",children:[a.jsx(ND,{className:"w-5 h-5 mr-3 text-white"}),a.jsx("span",{children:"Instagram"})]}),(D==null?void 0:D.youtube)&&a.jsxs("a",{href:D.youtube,target:"_blank",className:"flex items-center p-3 rounded-lg bg-gray-900/50 hover:bg-gray-700 transition-colors",children:[a.jsx(_D,{className:"w-5 h-5 mr-3 text-white"}),a.jsx("span",{children:"YouTube"})]}),(D==null?void 0:D.site)&&a.jsxs("a",{href:D.site,target:"_blank",className:"flex items-center p-3 rounded-lg bg-gray-900/50 hover:bg-gray-700 transition-colors",children:[a.jsx(SD,{className:"w-5 h-5 mr-3 text-white"}),a.jsx("span",{children:"Website"})]})]})]}),fe&&a.jsxs("div",{className:"bg-gray-800 p-6 rounded-2xl shadow-xl border border-gray-700",children:[a.jsx("h2",{className:"text-xl font-bold font-poppins mb-4",children:"Documentos"}),a.jsxs("div",{className:"space-y-3",children:[((sa=n.artista)==null?void 0:sa.rider_tecnico_url)&&a.jsxs("button",{onClick:()=>{var Ae;return le((Ae=n.artista)==null?void 0:Ae.rider_tecnico_url)},className:"w-full flex items-center justify-between p-4 rounded-xl bg-gray-900/50 hover:bg-gray-700 transition-colors border border-gray-700",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(hr,{className:"w-5 h-5 text-primary"}),a.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Rider Tcnico"})]}),a.jsx(Ao,{className:"w-4 h-4 text-gray-500"})]}),((ga=n.artista)==null?void 0:ga.mapa_palco_url)&&a.jsxs("button",{onClick:()=>{var Ae;return le((Ae=n.artista)==null?void 0:Ae.mapa_palco_url)},className:"w-full flex items-center justify-between p-4 rounded-xl bg-gray-900/50 hover:bg-gray-700 transition-colors border border-gray-700",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Wt,{className:"w-5 h-5 text-secondary"}),a.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Mapa de Palco"})]}),a.jsx(Ao,{className:"w-4 h-4 text-gray-500"})]})]})]}),se&&a.jsxs("div",{className:"bg-gray-800 p-6 rounded-2xl shadow-xl border border-gray-700",children:[a.jsx("h2",{className:"text-xl font-bold font-poppins mb-4",children:"Disponibilidade"}),a.jsx("div",{className:"grid grid-cols-4 gap-2",children:jD.map(Ae=>{const be=te[Ae];return a.jsxs("div",{className:`flex flex-col items-center justify-center p-2 rounded-lg border aspect-square ${be!=null&&be.active?"bg-primary/10 border-primary":"bg-gray-900/50 border-gray-700 opacity-40"}`,children:[a.jsx("span",{className:"text-[10px] font-bold uppercase",children:ED[Ae]}),a.jsx("div",{className:`w-1.5 h-1.5 rounded-full mt-1 ${be!=null&&be.active?"bg-primary":"bg-gray-600"}`})]},Ae)})})]})]})]})}),$&&e&&a.jsx(ZN,{currentUserProfile:e,targetProfile:n,onClose:()=>ie(!1),onContractCreated:()=>ie(!1)}),a.jsx(s_,{isOpen:re,images:v,initialIndex:O,onClose:()=>P(!1)})]})},TD=()=>{var re,P,O,Y,ne,le,L,D;const{id:t}=ud(),{profile:e,user:s}=Ps(),n=Xt(),[i,l]=N.useState(null),[d,u]=N.useState([]),[f,m]=N.useState([]),[g,v]=N.useState([]),[b,_]=N.useState(null),[S,E]=N.useState(!0),[C,T]=N.useState(null),[R,A]=N.useState(!1),[M,z]=N.useState(""),[F,G]=N.useState(!1),[K,I]=N.useState(!1),[U,q]=N.useState(0);N.useEffect(()=>{(async()=>{var se,fe;if(!t){T("ID no fornecido."),E(!1);return}E(!0),T(null);try{const{data:ee,error:me}=await Q.from("usuarios").select("*, estabelecimento:estabelecimentos!inner(*)").eq("id",t).eq("tipo","estabelecimento").single();if(me||!ee)throw new Error("Perfil no encontrado.");const je=Ws(ee),pe=je.estabelecimento;if(pe!=null&&pe.id){const{data:Fe}=await Q.from("contratos").select("id, data_evento, artistas!inner(usuario_id, usuarios!inner(nome))").eq("estabelecimento_id",pe.id).in("status",["assinado","concluido"]).lte("data_evento",new Date().toISOString()).order("data_evento",{ascending:!1});u((Fe||[]).map(dt=>{const pt=Array.isArray(dt.artistas)?dt.artistas[0]:dt.artistas,Dt=pt&&(Array.isArray(pt.usuarios)?pt.usuarios[0]:pt.usuarios);return!pt||!Dt?null:{id:dt.id,titulo:`Show com ${Dt.nome}`,data_evento:dt.data_evento,artista:{id:pt.usuario_id,nome:Dt.nome}}}).filter(dt=>dt!==null))}const Ne=Date.now(),Me=((se=pe==null?void 0:pe.galeria_fotos)==null?void 0:se.filter(Fe=>!!Fe))||[],ue=((fe=pe==null?void 0:pe.galeria_videos)==null?void 0:fe.filter(Fe=>!!Fe))||[],[_e,Ue]=await Promise.all([Me.length>0?Ie.getSignedUrls("estabelecimento",Me,3600):Promise.resolve([]),ue.length>0?Ie.getSignedUrls("estabelecimento",ue,3600):Promise.resolve([])]);m(_e.map(Fe=>`${Fe}&t=${Ne}`)),v(Ue),pe!=null&&pe.foto_capa&&_(`${Ie.getPublicUrl("estabelecimento",pe.foto_capa)}?t=${Ne}`),l(je)}catch(ee){T(he(ee))}finally{E(!1)}})()},[t]);const H=async te=>{A(!0),z("");try{if(!s){n("/login");return}if(!e)throw new Error("Perfil no carregado.");await yo.startConversation(e.id,te.id,`Ol, somos do ${e.nome}!`),z("Conversa iniciada!"),setTimeout(()=>{n("/painel?open=mensagens")},1500)}catch(se){z(he(se))}finally{A(!1)}};if(S)return a.jsx("div",{className:"flex justify-center items-center h-screen bg-dark text-white",children:"Carregando..."});if(C||!i)return a.jsxs("div",{className:"flex flex-col justify-center items-center h-screen bg-dark text-red-500",children:[a.jsx("h2",{className:"text-2xl font-bold",children:"Perfil no encontrado"}),a.jsx(Se,{to:"/estabelecimentos",className:"mt-4 text-primary underline",children:"Voltar"})]});const $=i.foto_url?`${Ie.getPublicUrl("perfis",i.foto_url)}?t=${Date.now()}`:"https://images.unsplash.com/photo-1550966871-3ed3cdb5ed0c?q=80&w=2070&auto=format&fit=crop",ie={"@context":"https://schema.org","@type":"EntertainmentBusiness",name:i.nome,description:((re=i.estabelecimento)==null?void 0:re.descricao)||"",image:$,address:{"@type":"PostalAddress",streetAddress:((P=i.estabelecimento)==null?void 0:P.endereco)||"",addressLocality:i.cidade,addressCountry:"BR"}};return a.jsxs("div",{className:"bg-dark text-white font-sans min-h-screen pb-24 lg:pb-0 relative",children:[a.jsx(Qt,{title:i.nome,description:((Y=(O=i.estabelecimento)==null?void 0:O.descricao)==null?void 0:Y.substring(0,160))||`Confira o perfil de ${i.nome} no Resona. O lugar ideal para shows e eventos.`,image:$,type:"profile",schema:ie}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"h-[45vh] md:h-[55vh] bg-cover bg-center relative",style:{backgroundImage:b?`url(${b})`:"linear-gradient(to right, #1f2937, #111827)"},children:a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-dark via-dark/60 to-transparent"})}),a.jsx("div",{className:"container mx-auto px-4 relative -mt-32 md:-mt-40 z-10",children:a.jsxs("div",{className:"flex flex-col md:flex-row items-center md:items-end gap-6",children:[a.jsx("img",{src:$,alt:i.nome,className:"w-40 h-40 md:w-56 md:h-56 rounded-full object-cover border-4 border-dark shadow-2xl bg-gray-800 relative z-10"}),a.jsxs("div",{className:"flex-grow mb-2 text-center md:text-left",children:[a.jsxs("h1",{className:"text-3xl sm:text-4xl md:text-6xl font-black font-poppins flex items-center justify-center md:justify-start gap-3",children:[i.nome,i.plano!=="free"&&a.jsx(Oe,{className:"w-6 h-6 md:w-8 md:h-8 text-primary shadow-primary/50"})]}),a.jsxs("div",{className:"flex flex-wrap items-center justify-center md:justify-start gap-4 mt-3",children:[((ne=i.estabelecimento)==null?void 0:ne.capacidade)&&a.jsxs("span",{className:"bg-secondary/20 backdrop-blur-md border border-secondary/30 text-secondary px-3 py-1 rounded-full text-sm font-bold flex items-center gap-2",children:[a.jsx(Sa,{className:"w-4 h-4"})," ",i.estabelecimento.capacidade," Pessoas"]}),a.jsxs("div",{className:"flex items-center text-gray-200 text-sm font-medium",children:[a.jsx(Wt,{className:"w-4 h-4 mr-1 text-primary"}),a.jsx("span",{children:i.cidade||"Brasil"})]})]})]}),a.jsxs("div",{className:"mb-4 md:mb-8 flex flex-col sm:flex-row gap-3 w-full md:w-auto justify-center",children:[a.jsxs("button",{onClick:()=>{navigator.clipboard.writeText(window.location.href),G(!0),setTimeout(()=>G(!1),2e3)},className:"bg-gray-800/80 px-5 py-2.5 rounded-full border border-gray-600 shadow-lg flex items-center justify-center gap-2 text-sm",children:[F?a.jsx(_a,{className:"w-5 h-5 text-green-400"}):a.jsx(a_,{className:"w-5 h-5"}),F?"Copiado!":"Compartilhar"]}),(e==null?void 0:e.tipo)==="artista"&&a.jsx("button",{onClick:()=>H(i),disabled:R||!ca(e).complete,className:`font-bold py-2.5 px-8 rounded-full shadow-lg transform transition-all text-sm ${ca(e).complete?"bg-gradient-to-r from-primary to-secondary text-white hover:scale-105":"bg-gray-700 text-gray-500 cursor-not-allowed"}`,title:ca(e).complete?"Enviar Mensagem":"Complete seu perfil de artista para enviar mensagens.",children:M||"Enviar Mensagem"})]})]})})]}),a.jsx("div",{className:"container mx-auto px-4 py-12",children:a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-12",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-10",children:[a.jsxs("section",{className:"bg-gray-800/50 p-8 rounded-2xl border border-gray-700/50 shadow-xl",children:[a.jsx("h2",{className:"text-2xl font-bold font-poppins mb-4",children:"Sobre o Local"}),a.jsx("p",{className:"text-gray-300 leading-relaxed text-lg whitespace-pre-wrap",children:((le=i.estabelecimento)==null?void 0:le.descricao)||"Sem descrio detalhada."})]}),a.jsxs("section",{className:"bg-gray-800/50 p-8 rounded-2xl border border-gray-700/50 shadow-xl",children:[a.jsx("h2",{className:"text-2xl font-bold font-poppins mb-6",children:"J tocou aqui"}),d.length>0?a.jsx("div",{className:"space-y-3",children:d.map(te=>a.jsxs("div",{className:"bg-gray-900/50 p-4 rounded-xl border border-gray-700 flex items-center gap-4",children:[a.jsxs("div",{className:"bg-gray-800 p-3 rounded-lg text-center min-w-[60px]",children:[a.jsx("span",{className:"block text-xs text-secondary font-bold uppercase",children:new Date(te.data_evento).toLocaleString("pt-BR",{month:"short",timeZone:"UTC"})}),a.jsx("span",{className:"block text-xl font-black text-white",children:new Date(te.data_evento).getUTCDate()})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-white text-lg",children:te.titulo}),a.jsxs(Se,{to:`/artista/${te.artista.id}`,className:"text-sm text-secondary hover:underline",children:["Com ",te.artista.nome]})]})]},te.id))}):a.jsx("div",{className:"text-center py-8 text-gray-500 italic",children:"Nenhum evento passado registrado."})]}),a.jsxs("section",{className:"space-y-8",children:[a.jsx("h2",{className:"text-2xl font-bold font-poppins",children:"Galeria"}),f.length>0?a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:f.map((te,se)=>a.jsxs("div",{onClick:()=>{q(se),I(!0)},className:"cursor-pointer group relative overflow-hidden rounded-xl aspect-square",children:[a.jsx("img",{src:te,alt:"Galeria",className:"w-full h-full object-cover transition-transform group-hover:scale-110"}),a.jsx("div",{className:"absolute inset-0 bg-black/20 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:a.jsx(tn,{className:"w-8 h-8"})})]},se))}):a.jsx("p",{className:"text-gray-500 italic",children:"Sem fotos disponveis."})]}),g.length>0&&a.jsxs("section",{className:"space-y-4",children:[a.jsx("h2",{className:"text-2xl font-bold font-poppins",children:"Vdeos do Local"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:g.map((te,se)=>a.jsx("div",{className:"bg-gray-900 rounded-xl overflow-hidden border border-gray-700 shadow-lg group hover:border-secondary/50 transition-colors",children:a.jsx("video",{controls:!0,className:"w-full aspect-video object-cover bg-black",src:te,preload:"metadata"})},se))})]}),a.jsxs("section",{className:"pt-8 border-t border-gray-800",children:[a.jsx("h2",{className:"text-2xl font-bold font-poppins mb-8",children:"Avaliaes"}),a.jsx(jd,{targetId:i.id})]})]}),a.jsx("aside",{className:"lg:col-span-1",children:a.jsxs("div",{className:"bg-gray-800 p-6 rounded-2xl shadow-xl border border-gray-700 sticky top-24",children:[a.jsx("h2",{className:"text-xl font-bold font-poppins mb-6 border-b border-gray-700 pb-2",children:"Informaes"}),a.jsxs("div",{className:"space-y-4",children:[((L=i.estabelecimento)==null?void 0:L.endereco)&&a.jsxs("div",{className:"flex items-start p-3 bg-gray-900/50 rounded-lg",children:[a.jsx(Wt,{className:"w-5 h-5 mr-3 text-primary mt-0.5"}),a.jsx("span",{className:"text-gray-300 text-sm",children:i.estabelecimento.endereco})]}),((D=i.estabelecimento)==null?void 0:D.capacidade)&&a.jsxs("div",{className:"flex items-center p-3 bg-gray-900/50 rounded-lg",children:[a.jsx(Sa,{className:"w-5 h-5 mr-3 text-secondary"}),a.jsxs("span",{className:"text-gray-300 text-sm",children:["Capacidade: ",a.jsx("strong",{children:i.estabelecimento.capacidade})]})]}),i.email&&a.jsxs("div",{className:"pt-4 border-t border-gray-700",children:[a.jsx("p",{className:"text-xs text-gray-500 uppercase font-bold mb-1",children:"Contato Email"}),a.jsx("a",{href:`mailto:${i.email}`,className:"text-primary hover:underline font-mono text-sm break-all",children:i.email})]})]})]})})]})}),a.jsx(s_,{isOpen:K,images:f,initialIndex:U,onClose:()=>I(!1)})]})},AD=()=>{const[t,e]=N.useState(""),[s,n]=N.useState(""),[i,l]=N.useState(""),[d,u]=N.useState(!1),f=async m=>{m.preventDefault(),l(""),n(""),u(!0);const{error:g}=await Q.auth.resetPasswordForEmail(t,{redirectTo:window.location.origin+"/#/atualizar-senha"});g?l("No foi possvel enviar o e-mail. Verifique se o endereo est correto ou tente novamente mais tarde."):n("Se o e-mail estiver cadastrado, voc receber um link de recuperao em instantes."),u(!1)};return a.jsxs("main",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8 relative bg-dark font-sans overflow-hidden",children:[a.jsx(Qt,{title:"Recuperar Senha",description:"Recupere o acesso  sua conta Resona."}),a.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:"url('https://images.unsplash.com/photo-1501386761578-eac5c94b800a?q=80&w=2070&auto=format&fit=crop')"}}),a.jsx("div",{className:"absolute inset-0 bg-dark/90 backdrop-blur-sm"}),a.jsxs("section",{className:"relative z-10 max-w-md w-full bg-gray-900/90 backdrop-blur-xl p-8 rounded-2xl shadow-2xl border border-gray-700 animate-fade-in",children:[a.jsxs(Se,{to:"/login",className:"inline-flex items-center gap-2 text-gray-400 hover:text-white text-sm mb-6 transition-colors group",children:[a.jsx(Co,{className:"w-4 h-4 group-hover:-translate-x-1 transition-transform"})," Voltar ao Login"]}),a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"mx-auto h-16 w-16 flex items-center justify-center rounded-full bg-primary/10 mb-4 border border-primary/20 shadow-[0_0_15px_rgba(81,210,238,0.2)]",children:a.jsx(Eo,{className:"h-8 w-8 text-primary"})}),a.jsx("h2",{className:"text-2xl font-bold text-white font-poppins",children:"Recuperar Senha"}),a.jsx("p",{className:"mt-2 text-sm text-gray-400 leading-relaxed",children:"Esqueceu sua senha? No se preocupe. Digite seu e-mail abaixo e enviaremos instrues para redefini-la."})]}),s?a.jsxs("div",{className:"text-center bg-green-500/10 border border-green-500/20 text-green-300 p-6 rounded-xl animate-fade-in",children:[a.jsx("p",{className:"font-bold mb-2",children:"E-mail Enviado!"}),a.jsx("p",{className:"text-sm",children:s}),a.jsx("p",{className:"text-xs text-green-300/70 mt-4",children:"No recebeu? Verifique sua caixa de spam."})]}):a.jsxs("form",{className:"space-y-6",onSubmit:f,children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email-address",className:"block text-xs font-bold text-gray-400 uppercase mb-1.5 ml-1",children:"E-mail Cadastrado"}),a.jsxs("div",{className:"relative group",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(Eo,{className:"h-5 w-5 text-gray-500 group-focus-within:text-primary transition-colors"})}),a.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"block w-full pl-10 pr-3 py-3.5 bg-gray-800/50 border border-gray-700 rounded-xl text-white placeholder-gray-600 focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all sm:text-sm shadow-inner",placeholder:"seu@email.com",value:t,onChange:m=>e(m.target.value)})]})]}),i&&a.jsx("div",{className:"bg-red-500/10 border border-red-500/20 text-red-400 px-4 py-3 rounded-lg text-sm text-center",children:i}),a.jsx("button",{type:"submit",disabled:d,className:"w-full py-3.5 px-4 bg-gradient-to-r from-primary to-secondary text-white font-bold rounded-xl hover:shadow-lg hover:shadow-primary/30 transition-all duration-300 transform hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:d?"Enviando...":"Enviar Link de Recuperao"})]})]})]})},RD=()=>{const[t,e]=N.useState(""),[s,n]=N.useState(""),[i,l]=N.useState(""),[d,u]=N.useState(!1),[f,m]=N.useState(!1),g=Xt(),[v,b]=N.useState(null);N.useEffect(()=>{const{data:{subscription:S}}=Q.auth.onAuthStateChange((E,C)=>{E==="PASSWORD_RECOVERY"&&b(C)});return()=>S.unsubscribe()},[]);const _=async S=>{if(S.preventDefault(),!v){l("Sesso invlida ou expirada. Por favor, solicite um novo link de recuperao.");return}if(t.length<6){l("A senha deve ter no mnimo 6 caracteres.");return}l(""),n(""),u(!0);const{error:E}=await Q.auth.updateUser({password:t});E?l("No foi possvel atualizar sua senha. Tente novamente."):(n("Senha atualizada com sucesso! Redirecionando para o login..."),setTimeout(()=>{Q.auth.signOut(),g("/login")},3e3)),u(!1)};return v?a.jsxs("main",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8 relative bg-dark font-sans overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:"url('https://images.unsplash.com/photo-1501386761578-eac5c94b800a?q=80&w=2070&auto=format&fit=crop')"}}),a.jsx("div",{className:"absolute inset-0 bg-dark/90 backdrop-blur-sm"}),a.jsxs("section",{className:"relative z-10 max-w-md w-full bg-gray-900/90 backdrop-blur-xl p-8 rounded-2xl shadow-2xl border border-gray-700 animate-fade-in",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"mx-auto h-16 w-16 flex items-center justify-center rounded-full bg-secondary/10 mb-4 border border-secondary/20 shadow-[0_0_15px_rgba(121,66,216,0.2)]",children:a.jsx(As,{className:"h-8 w-8 text-secondary"})}),a.jsx("h2",{className:"text-2xl font-bold text-white font-poppins",children:"Nova Senha"}),a.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Defina uma nova senha segura para sua conta."})]}),s?a.jsxs("div",{className:"text-center bg-green-500/10 border border-green-500/20 text-green-300 p-6 rounded-xl animate-fade-in",children:[a.jsx("div",{className:"text-4xl mb-2",children:""}),a.jsx("p",{className:"font-bold text-lg mb-2",children:"Sucesso!"}),a.jsx("p",{className:"text-sm",children:s})]}):a.jsxs("form",{className:"space-y-6",onSubmit:_,children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase mb-1.5 ml-1",children:"Nova Senha"}),a.jsxs("div",{className:"relative group",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx(As,{className:"h-5 w-5 text-gray-500 group-focus-within:text-secondary transition-colors"})}),a.jsx("input",{type:f?"text":"password",required:!0,autoComplete:"new-password",className:"block w-full pl-10 pr-10 py-3.5 bg-gray-800/50 border border-gray-700 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-secondary/50 focus:border-secondary transition-all sm:text-sm shadow-inner",placeholder:"Mnimo 6 caracteres",value:t,onChange:S=>e(S.target.value)}),a.jsx("button",{type:"button",onClick:()=>m(!f),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500 hover:text-white transition-colors focus:outline-none",children:f?a.jsx(Bm,{className:"h-5 w-5"}):a.jsx(on,{className:"h-5 w-5"})})]})]}),i&&a.jsx("p",{className:"text-red-400 text-sm text-center bg-red-500/10 p-3 rounded-lg border border-red-500/20",children:i}),a.jsx("button",{type:"submit",disabled:d,className:"w-full py-3.5 px-4 bg-gradient-to-r from-secondary to-purple-600 text-white font-bold rounded-xl hover:shadow-lg hover:shadow-secondary/30 transition-all duration-300 transform hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:d?"Salvando...":"Redefinir Senha"})]})]})]}):a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-dark p-4",children:a.jsxs("div",{className:"bg-gray-800 p-8 rounded-xl border border-gray-700 max-w-md w-full text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-yellow-500/20 rounded-full flex items-center justify-center mx-auto mb-4 border border-yellow-500/30",children:a.jsx(As,{className:"w-8 h-8 text-yellow-500"})}),a.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Verificando Link..."}),a.jsx("p",{className:"text-gray-400 text-sm mb-6",children:"Esta pgina  exclusiva para redefinio de senha via link seguro enviado por e-mail."}),a.jsx("button",{onClick:()=>g("/login"),className:"text-primary hover:underline text-sm",children:"Voltar ao Login"})]})})},kD=()=>{const{profile:t,loading:e}=Ps();return e?a.jsx("div",{className:"flex justify-center items-center h-screen bg-dark text-white",children:"Verificando permisses..."}):(t==null?void 0:t.role)==="admin-master"||(t==null?void 0:t.role)==="moderador"||(t==null?void 0:t.role)==="analista"?a.jsx(mw,{}):a.jsx(fw,{to:"/login",replace:!0})},MD=({className:t="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),ID=({className:t="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),Fm=({className:t="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"})}),DD=({className:t="w-6 h-6"})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),n_=({className:t="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),Jm=({className:t="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 10V3L4 14h7v7l9-11h-7z"})}),PD=({className:t="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),UD=({isOpen:t,onClose:e})=>{const s=[{path:"dashboard",label:"Painel",icon:a.jsx(MD,{className:"w-5 h-5"})},{path:"analytics",label:"BI & Analytics",icon:a.jsx(ur,{className:"w-5 h-5"})},{path:"health",label:"Sade do Sistema",icon:a.jsx(PD,{className:"w-5 h-5 text-red-500"})},{path:"usuarios",label:"Usurios",icon:a.jsx(Sa,{className:"w-5 h-5"})},{path:"verificacoes",label:"Verificaes KYC",icon:a.jsx(Pn,{className:"w-5 h-5"})},{path:"saques",label:"Saques",icon:a.jsx(Rs,{className:"w-5 h-5"})},{path:"contratos",label:"Contratos",icon:a.jsx(Ln,{className:"w-5 h-5"})},{path:"webhooks",label:"Webhooks",icon:a.jsx(Jm,{className:"w-5 h-5"})},{path:"conteudo",label:"Contedo",icon:a.jsx(on,{className:"w-5 h-5"})},{path:"blog",label:"Blog",icon:a.jsx(n_,{className:"w-5 h-5"})},{path:"mensagens",label:"Mensagens",icon:a.jsx(en,{className:"w-5 h-5"})},{path:"seguranca",label:"Segurana",icon:a.jsx(Pn,{className:"w-5 h-5"})},{path:"relatorios",label:"Relatrios",icon:a.jsx(ID,{className:"w-5 h-5"})},{path:"storage",label:"Storage",icon:a.jsx(Fm,{className:"w-5 h-5"})},{path:"configuracoes",label:"Configuraes",icon:a.jsx(DD,{className:"w-5 h-5"})}],n=({isActive:i})=>`flex items-center gap-3 px-3 py-2 rounded-md text-sm font-medium transition-colors ${i?"bg-secondary text-white":"text-gray-300 hover:bg-gray-700 hover:text-white"}`;return a.jsxs(a.Fragment,{children:[t&&a.jsx("div",{className:"fixed inset-0 z-40 bg-black bg-opacity-50 md:hidden",onClick:e}),a.jsxs("aside",{className:`
                    fixed inset-y-0 left-0 z-50 w-64 bg-dark p-4 flex flex-col flex-shrink-0 transition-transform duration-300 ease-in-out shadow-2xl md:shadow-none
                    ${t?"translate-x-0":"-translate-x-full"}
                    md:translate-x-0 md:static md:inset-auto md:flex
                `,children:[a.jsxs("div",{className:"flex justify-between items-center px-3 mb-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-white",children:"Administrao"}),a.jsx("span",{className:"text-sm text-primary",children:"RESONA"})]}),a.jsx("button",{onClick:e,className:"md:hidden text-gray-400 hover:text-white focus:outline-none",children:a.jsx(It,{className:"w-6 h-6"})})]}),a.jsx("nav",{className:"flex flex-col space-y-1 overflow-y-auto",children:s.map(i=>a.jsxs(Qc,{to:i.path,className:n,onClick:()=>{window.innerWidth<768&&e()},children:[i.icon,a.jsx("span",{children:i.label})]},i.path))})]})]})},LD="3.30.1",OD=()=>{const[t,e]=N.useState(!1);return a.jsxs("div",{className:"flex flex-col md:flex-row min-h-[calc(100vh-80px)]",children:[a.jsxs("div",{className:"md:hidden bg-dark p-4 flex justify-between items-center border-b border-gray-700 sticky top-0 z-30",children:[a.jsxs("h2",{className:"text-lg font-bold text-white flex items-center gap-2",children:[a.jsx("span",{className:"w-2 h-2 bg-primary rounded-full"}),"rea Administrativa"]}),a.jsx("button",{onClick:()=>e(!0),className:"text-white p-2 hover:bg-gray-800 rounded-md focus:outline-none",children:a.jsx(bw,{})})]}),a.jsx(UD,{isOpen:t,onClose:()=>e(!1)}),a.jsxs("div",{className:"flex-1 p-6 sm:p-8 lg:p-10 bg-[#1e1e1e] overflow-y-auto flex flex-col",children:[a.jsx("div",{className:"flex-grow",children:a.jsx(mw,{})}),a.jsx("div",{className:"mt-8 pt-6 border-t border-gray-800 text-right",children:a.jsxs("p",{className:"text-xs text-gray-600 font-mono",children:["Resona v",LD]})})]})]})},qD=({data:t,color:e="#51D2EE",height:s=200})=>{var d,u,f;if(!t||t.length===0)return a.jsx("div",{className:"h-full flex items-center justify-center text-gray-600 text-xs",children:"Sem dados suficientes"});const n=Math.max(...t.map(m=>m.value))||1,i=t.map((m,g)=>{const v=g/(t.length-1)*100,b=100-m.value/n*100;return`${v},${b}`}).join(" "),l=`0,100 ${i} 100,100`;return a.jsxs("div",{className:"w-full h-full relative group",children:[a.jsxs("svg",{viewBox:"0 0 100 100",preserveAspectRatio:"none",className:"w-full h-full overflow-visible",children:[a.jsx("line",{x1:"0",y1:"0",x2:"100",y2:"0",stroke:"#374151",strokeWidth:"0.5",strokeDasharray:"2"}),a.jsx("line",{x1:"0",y1:"50",x2:"100",y2:"50",stroke:"#374151",strokeWidth:"0.5",strokeDasharray:"2"}),a.jsx("line",{x1:"0",y1:"100",x2:"100",y2:"100",stroke:"#374151",strokeWidth:"0.5"}),a.jsx("polygon",{points:l,fill:e,fillOpacity:"0.1"}),a.jsx("polyline",{points:i,fill:"none",stroke:e,strokeWidth:"2",vectorEffect:"non-scaling-stroke"}),t.map((m,g)=>{const v=g/(t.length-1)*100,b=100-m.value/n*100;return a.jsx("circle",{cx:v,cy:b,r:"3",fill:e,className:"opacity-0 group-hover:opacity-100 transition-opacity duration-200",vectorEffect:"non-scaling-stroke",children:a.jsx("title",{children:`${m.fullDate}: ${m.value}`})},g)})]}),a.jsxs("div",{className:"flex justify-between mt-2 text-[10px] text-gray-500 font-mono",children:[a.jsx("span",{children:(d=t[0])==null?void 0:d.label}),a.jsx("span",{children:(u=t[Math.floor(t.length/2)])==null?void 0:u.label}),a.jsx("span",{children:(f=t[t.length-1])==null?void 0:f.label})]})]})},BD=({data:t,color:e="#7942D8",height:s=200})=>{var u,f,m;if(!t||t.length===0)return a.jsx("div",{className:"h-full flex items-center justify-center text-gray-600 text-xs",children:"Sem dados suficientes"});const n=Math.max(...t.map(g=>g.value))||1,i=100/t.length,l=.2*i,d=i-l;return a.jsxs("div",{className:"w-full h-full relative",children:[a.jsxs("svg",{viewBox:"0 0 100 100",preserveAspectRatio:"none",className:"w-full h-full overflow-visible",children:[a.jsx("line",{x1:"0",y1:"0",x2:"100",y2:"0",stroke:"#374151",strokeWidth:"0.5",strokeDasharray:"2"}),a.jsx("line",{x1:"0",y1:"50",x2:"100",y2:"50",stroke:"#374151",strokeWidth:"0.5",strokeDasharray:"2"}),a.jsx("line",{x1:"0",y1:"100",x2:"100",y2:"100",stroke:"#374151",strokeWidth:"0.5"}),t.map((g,v)=>{const b=g.value/n*100,_=v*i+l/2,S=100-b;return a.jsx("rect",{x:_,y:S,width:d,height:b,fill:e,className:"hover:opacity-80 transition-opacity",children:a.jsx("title",{children:`${g.fullDate}: ${g.value} usurios`})},v)})]}),a.jsxs("div",{className:"flex justify-between mt-2 text-[10px] text-gray-500 font-mono",children:[a.jsx("span",{children:(u=t[0])==null?void 0:u.label}),a.jsx("span",{children:(f=t[Math.floor(t.length/2)])==null?void 0:f.label}),a.jsx("span",{children:(m=t[t.length-1])==null?void 0:m.label})]})]})},$D=()=>{const[t,e]=N.useState({userCount:0,artistsCount:0,venuesCount:0,activeContractsCount:0,newUsers24h:0,grossVolume:0}),[s,n]=N.useState([]),[i,l]=N.useState({usersGrowth:[],revenueGrowth:[]}),[d,u]=N.useState(!0),[f,m]=N.useState(null),g=()=>{const v=[];for(let b=29;b>=0;b--){const _=new Date;_.setDate(_.getDate()-b),_.setHours(0,0,0,0),v.push(_)}return v};return N.useEffect(()=>{(async()=>{u(!0);try{const{data:b,error:_}=await Q.from("usuarios").select("id, tipo, criado_em");if(_)throw _;const S=b.length,E=b.filter($=>$.tipo==="artista").length,C=b.filter($=>$.tipo==="estabelecimento").length,T=new Date,R=new Date(T.getTime()-1440*60*1e3),A=b.filter($=>new Date($.criado_em)>R).length,M=g(),z=M.map($=>{const ie=$.toISOString().split("T")[0],re=$.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"}),P=b.filter(O=>O.criado_em.startsWith(ie)).length;return{label:re,value:P,fullDate:$.toLocaleDateString("pt-BR")}}),{data:F,error:G}=await Q.from("contratos").select("id, status, valor, taxa_servico, criado_em, data_pagamento");if(G)throw G;const K=F.filter($=>["assinado","concluido"].includes($.status)).length,I=F.reduce(($,ie)=>$+(ie.valor||0)+(ie.taxa_servico||0),0),U=M.map($=>{const ie=$.toISOString().split("T")[0],re=$.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"}),P=F.filter(O=>O.criado_em.startsWith(ie)).reduce((O,Y)=>O+(Y.valor||0)+(Y.taxa_servico||0),0);return{label:re,value:P,fullDate:$.toLocaleDateString("pt-BR")}});e({userCount:S,artistsCount:E,venuesCount:C,activeContractsCount:K,newUsers24h:A,grossVolume:I}),l({usersGrowth:z,revenueGrowth:U});const{data:q,error:H}=await Q.from("usuarios").select("*, artista:artistas(*), estabelecimento:estabelecimentos(*)").order("criado_em",{ascending:!1}).limit(5);if(H)throw H;n((q||[]).map($=>({...$,artista:Array.isArray($.artista)?$.artista[0]:$.artista,estabelecimento:Array.isArray($.estabelecimento)?$.estabelecimento[0]:$.estabelecimento})))}catch(b){console.error("Error fetching admin dashboard data:",b),m(he(b))}finally{u(!1)}})()},[]),d?a.jsx("div",{className:"text-white text-center p-8",children:"Carregando dashboard..."}):f?a.jsxs("div",{className:"text-red-400 text-center p-8",children:["Erro: ",f]}):a.jsxs("div",{className:"text-white animate-fade-in",children:[a.jsx("h1",{className:"text-3xl font-bold mb-2 text-primary font-poppins",children:"Painel Administrativo"}),a.jsx("p",{className:"text-gray-400 mb-8",children:"Viso geral do desempenho da plataforma RESONA."}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[a.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg border border-gray-700 shadow-lg",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-400 text-sm uppercase font-bold",children:"Total Usurios"}),a.jsx("h3",{className:"text-3xl font-bold text-white",children:t.userCount})]}),a.jsx("div",{className:"bg-blue-500/20 p-3 rounded-lg",children:a.jsx(Sa,{className:"w-6 h-6 text-blue-400"})})]}),a.jsxs("div",{className:"flex justify-between text-xs text-gray-400 border-t border-gray-700 pt-2",children:[a.jsxs("span",{children:["Artistas: ",a.jsx("strong",{className:"text-white",children:t.artistsCount})]}),a.jsxs("span",{children:["Locais: ",a.jsx("strong",{className:"text-white",children:t.venuesCount})]})]})]}),a.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg border border-gray-700 shadow-lg",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-400 text-sm uppercase font-bold",children:"Novos (24h)"}),a.jsxs("h3",{className:"text-3xl font-bold text-green-400",children:["+",t.newUsers24h]})]}),a.jsx("div",{className:"bg-green-500/20 p-3 rounded-lg",children:a.jsx(Oe,{className:"w-6 h-6 text-green-400"})})]}),a.jsx("div",{className:"text-xs text-gray-400 border-t border-gray-700 pt-2",children:"Crescimento dirio"})]}),a.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg border border-gray-700 shadow-lg",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-400 text-sm uppercase font-bold",children:"Contratos Ativos"}),a.jsx("h3",{className:"text-3xl font-bold text-white",children:t.activeContractsCount})]}),a.jsx("div",{className:"bg-purple-500/20 p-3 rounded-lg",children:a.jsx(Ln,{className:"w-6 h-6 text-purple-400"})})]}),a.jsx("div",{className:"text-xs text-gray-400 border-t border-gray-700 pt-2",children:"Assinados ou Concludos"})]}),a.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg border border-gray-700 shadow-lg",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-400 text-sm uppercase font-bold",children:"Volume Total"}),a.jsxs("h3",{className:"text-3xl font-bold text-yellow-400",children:["R$ ",t.grossVolume.toLocaleString("pt-BR",{notation:"compact"})]})]}),a.jsx("div",{className:"bg-yellow-500/20 p-3 rounded-lg",children:a.jsx(Rs,{className:"w-6 h-6 text-yellow-400"})})]}),a.jsx("div",{className:"text-xs text-gray-400 border-t border-gray-700 pt-2",children:"Movimentado na plataforma"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[a.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg border border-gray-700 shadow-lg",children:[a.jsxs("h3",{className:"font-bold text-white mb-4 flex items-center gap-2",children:[a.jsx(Sa,{className:"w-5 h-5 text-secondary"}),"Crescimento de Usurios (30 dias)"]}),a.jsx("div",{className:"h-64 w-full px-2",children:a.jsx(BD,{data:i.usersGrowth,color:"#7942D8"})})]}),a.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg border border-gray-700 shadow-lg",children:[a.jsxs("h3",{className:"font-bold text-white mb-4 flex items-center gap-2",children:[a.jsx(Rs,{className:"w-5 h-5 text-primary"}),"Volume de Contratos (30 dias)"]}),a.jsx("div",{className:"h-64 w-full px-2",children:a.jsx(qD,{data:i.revenueGrowth,color:"#51D2EE"})})]})]}),a.jsxs("div",{className:"bg-gray-800 rounded-lg border border-gray-700 shadow-lg overflow-hidden",children:[a.jsx("div",{className:"p-4 border-b border-gray-700 bg-gray-900/50",children:a.jsx("h3",{className:"font-bold text-white",children:"Usurios Recentes"})}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left",children:[a.jsx("thead",{className:"bg-gray-900 text-gray-400 text-xs uppercase",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4",children:"Nome"}),a.jsx("th",{className:"p-4",children:"Tipo"}),a.jsx("th",{className:"p-4",children:"Email"}),a.jsx("th",{className:"p-4",children:"Cidade"}),a.jsx("th",{className:"p-4",children:"Data Cadastro"})]})}),a.jsxs("tbody",{className:"divide-y divide-gray-700 text-sm",children:[s.map(v=>a.jsxs("tr",{className:"hover:bg-gray-700/50",children:[a.jsx("td",{className:"p-4 font-bold text-white",children:v.nome}),a.jsx("td",{className:"p-4",children:a.jsx("span",{className:`px-2 py-1 rounded text-xs uppercase font-bold ${v.tipo==="artista"?"bg-blue-500/20 text-blue-300":"bg-purple-500/20 text-purple-300"}`,children:v.tipo})}),a.jsx("td",{className:"p-4 text-gray-300",children:v.email}),a.jsx("td",{className:"p-4 text-gray-300",children:v.cidade||"-"}),a.jsx("td",{className:"p-4 text-gray-400",children:new Date(v.criado_em).toLocaleDateString("pt-BR")})]},v.id)),s.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:5,className:"p-8 text-center text-gray-500",children:"Nenhum usurio recente."})})]})]})})]})]})},Li=10,zD=t=>{let e=0;return t.nome&&t.nome!=="Usurio"&&(e+=25),t.cidade&&(e+=25),t.telefone&&(e+=20),t.foto_url&&(e+=30),e},VD=()=>{const[t,e]=N.useState([]),[s,n]=N.useState(!0),[i,l]=N.useState(null),[d,u]=N.useState(null),[f,m]=N.useState(""),[g,v]=N.useState(""),[b,_]=N.useState(""),[S,E]=N.useState("all"),[C,T]=N.useState(0),[R,A]=N.useState(null),[M,z]=N.useState(null),[F,G]=N.useState(!1);N.useEffect(()=>{const q=setTimeout(()=>{v(f),T(0)},500);return()=>clearTimeout(q)},[f]);const K=N.useCallback(async()=>{n(!0);const q=C*Li,H=q+Li-1;try{let $=Q.from("usuarios").select("*, artista:artistas(*), estabelecimento:estabelecimentos(*)",{count:"exact"});g&&($=$.or(`nome.ilike.%${g}%,email.ilike.%${g}%`)),b&&($=$.eq("tipo",b)),S==="suspended"?$=$.eq("is_suspended",!0):S==="active"&&($=$.eq("is_suspended",!1));const{data:ie,count:re,error:P}=await $.order("criado_em",{ascending:!1}).range(q,H);if(P)throw P;const O=(ie||[]).map(Y=>Ws(Y));e(O),A(re)}catch($){l(he($))}finally{n(!1)}},[C,g,b,S]);N.useEffect(()=>{K()},[K]);const I=async q=>{try{const{error:H}=await Q.from("usuarios").update({is_suspended:!q.is_suspended}).eq("id",q.id);if(H)throw H;e(t.map($=>$.id===q.id?{...$,is_suspended:!$.is_suspended}:$)),u({message:`Usurio ${q.is_suspended?"ativado":"suspenso"} com sucesso.`,type:"success"})}catch(H){u({message:"Erro ao atualizar status: "+he(H),type:"error"})}},U=q=>{z(q),G(!0)};return a.jsxs("div",{className:"text-white animate-fade-in relative pb-20",children:[a.jsx("h1",{className:"text-3xl font-bold mb-2 text-primary font-poppins",children:"Gesto de Usurios"}),a.jsx("p",{className:"text-gray-400 mb-8",children:"Administrao da base e moderao de perfis."}),a.jsxs("div",{className:"bg-gray-800 p-4 rounded-xl border border-gray-700 mb-6 flex flex-col md:flex-row gap-4 items-center",children:[a.jsxs("div",{className:"relative flex-grow w-full",children:[a.jsx("input",{type:"text",placeholder:"Buscar por nome ou email...",value:f,onChange:q=>m(q.target.value),className:"w-full bg-gray-900 border border-gray-700 rounded-lg py-2 pl-10 pr-4 text-sm"}),a.jsx(ms,{className:"absolute left-3 top-2.5 w-4 h-4 text-gray-500"})]}),a.jsxs("select",{value:b,onChange:q=>_(q.target.value),className:"bg-gray-900 border border-gray-700 rounded-lg py-2 px-4 text-sm w-full md:w-auto",children:[a.jsx("option",{value:"",children:"Todos os Tipos"}),a.jsx("option",{value:"artista",children:"Artistas"}),a.jsx("option",{value:"estabelecimento",children:"Locais"})]}),a.jsxs("select",{value:S,onChange:q=>E(q.target.value),className:"bg-gray-900 border border-gray-700 rounded-lg py-2 px-4 text-sm w-full md:w-auto",children:[a.jsx("option",{value:"all",children:"Qualquer Status"}),a.jsx("option",{value:"active",children:"Ativos"}),a.jsx("option",{value:"suspended",children:"Suspensos"})]})]}),d&&a.jsx("div",{className:`p-3 rounded-md mb-6 text-center text-sm ${d.type==="success"?"bg-green-500/20 text-green-300":"bg-red-500/20 text-red-400"}`,children:d.message}),a.jsxs("div",{className:"bg-gray-800 rounded-xl overflow-hidden shadow-lg border border-gray-700",children:[a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left",children:[a.jsx("thead",{className:"bg-gray-900/80 border-b border-gray-700 text-gray-400 text-[10px] uppercase font-black",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4",children:"Usurio"}),a.jsx("th",{className:"p-4",children:"Plano"}),a.jsx("th",{className:"p-4",children:"Health Score"}),a.jsx("th",{className:"p-4 text-center",children:"Status"}),a.jsx("th",{className:"p-4 text-right",children:"Aes"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-700",children:s?a.jsx("tr",{children:a.jsx("td",{colSpan:5,className:"p-10 text-center text-gray-500",children:"Buscando usurios..."})}):t.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:5,className:"p-10 text-center text-gray-500",children:"Nenhum usurio encontrado."})}):t.map(q=>{const H=zD(q);return a.jsxs("tr",{className:"hover:bg-gray-700/30 transition-colors",children:[a.jsx("td",{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-700 border border-gray-600 flex items-center justify-center overflow-hidden",children:q.foto_url?a.jsx("img",{src:Ie.getPublicUrl("perfis",q.foto_url),className:"w-full h-full object-cover"}):q.nome.charAt(0)}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-sm text-white",children:q.nome}),a.jsx("p",{className:"text-xs text-gray-500",children:q.email})]})]})}),a.jsx("td",{className:"p-4",children:q.plano==="pro"?a.jsxs("span",{className:"flex items-center gap-1 text-[10px] font-black text-primary bg-primary/10 px-2 py-0.5 rounded border border-primary/20",children:[a.jsx(Ft,{className:"w-3 h-3"})," PRO"]}):q.plano==="business"?a.jsxs("span",{className:"flex items-center gap-1 text-[10px] font-black text-yellow-500 bg-yellow-500/10 px-2 py-0.5 rounded border border-yellow-500/20",children:[a.jsx(Gm,{className:"w-3 h-3"})," BIZ"]}):a.jsx("span",{className:"text-[10px] text-gray-500 font-bold uppercase",children:"Free"})}),a.jsx("td",{className:"p-4",children:a.jsxs("div",{className:"w-24",children:[a.jsx("div",{className:"h-1.5 w-full bg-gray-700 rounded-full overflow-hidden",children:a.jsx("div",{className:`h-full ${H>70?"bg-green-500":H>40?"bg-yellow-500":"bg-red-500"}`,style:{width:`${H}%`}})}),a.jsxs("span",{className:"text-[9px] text-gray-500 mt-1 block uppercase font-bold",children:[H,"% Completo"]})]})}),a.jsx("td",{className:"p-4 text-center",children:a.jsx("span",{className:`text-[10px] font-bold px-2 py-0.5 rounded border ${q.is_suspended?"bg-red-500/20 text-red-400 border-red-500/30":"bg-green-500/20 text-green-400 border-green-500/30"}`,children:q.is_suspended?"SUSPENSO":"ATIVO"})}),a.jsx("td",{className:"p-4 text-right",children:a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx("button",{onClick:()=>U(q),className:"p-2 text-gray-400 hover:text-white",title:"Inspecionar",children:a.jsx(on,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>I(q),className:`p-2 rounded ${q.is_suspended?"text-green-400 hover:bg-green-500/10":"text-red-400 hover:bg-red-500/10"}`,children:q.is_suspended?a.jsx(Oe,{className:"w-4 h-4"}):a.jsx(Ta,{className:"w-4 h-4"})})]})})]},q.id)})})]})}),R!==null&&R>Li&&a.jsxs("div",{className:"p-4 bg-gray-900 border-t border-gray-700 flex justify-between items-center text-xs text-gray-400",children:[a.jsxs("span",{children:["Pgina ",C+1," de ",Math.ceil(R/Li)]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{disabled:C===0,onClick:()=>T(q=>q-1),className:"px-3 py-1 bg-gray-800 rounded disabled:opacity-50",children:"Anterior"}),a.jsx("button",{disabled:(C+1)*Li>=R,onClick:()=>T(q=>q+1),className:"px-3 py-1 bg-gray-800 rounded disabled:opacity-50",children:"Prxima"})]})]})]}),F&&M&&a.jsx("div",{className:"fixed inset-0 bg-black/90 z-[100] flex justify-center items-center p-4 backdrop-blur-sm",children:a.jsxs("div",{className:"bg-gray-800 rounded-xl shadow-2xl w-full max-w-2xl border border-gray-700 overflow-hidden",children:[a.jsxs("div",{className:"p-4 border-b border-gray-700 flex justify-between items-center bg-gray-900/50",children:[a.jsx("h2",{className:"font-bold text-lg",children:"Inspecionar Usurio"}),a.jsx("button",{onClick:()=>G(!1),className:"text-gray-500 hover:text-white",children:a.jsx(It,{})})]}),a.jsxs("div",{className:"p-8 space-y-6",children:[a.jsxs("div",{className:"flex gap-6 items-center",children:[a.jsx("div",{className:"w-24 h-24 rounded-full bg-gray-700 border-4 border-gray-600 overflow-hidden",children:M.foto_url?a.jsx("img",{src:Ie.getPublicUrl("perfis",M.foto_url),className:"w-full h-full object-cover"}):null}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl font-bold",children:M.nome}),a.jsx("p",{className:"text-primary font-bold uppercase text-xs",children:M.tipo}),a.jsx("p",{className:"text-gray-400 text-sm mt-1",children:M.email})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"bg-gray-900 p-4 rounded-lg",children:[a.jsx("p",{className:"text-[10px] text-gray-500 uppercase font-black",children:"Localizao"}),a.jsx("p",{className:"text-sm font-medium",children:M.cidade||"No informada"})]}),a.jsxs("div",{className:"bg-gray-900 p-4 rounded-lg",children:[a.jsx("p",{className:"text-[10px] text-gray-500 uppercase font-black",children:"Cadastro"}),a.jsx("p",{className:"text-sm font-medium",children:new Date(M.criado_em).toLocaleDateString()})]})]})]}),a.jsx("div",{className:"p-4 bg-gray-900/50 flex justify-end",children:a.jsx("button",{onClick:()=>G(!1),className:"px-6 py-2 bg-gray-700 rounded-lg text-white font-bold",children:"Fechar"})})]})})]})},HD=()=>{const[t,e]=N.useState([]),[s,n]=N.useState(!0),[i,l]=N.useState(null),[d,u]=N.useState(""),[f,m]=N.useState("all"),[g,v]=N.useState(null),[b,_]=N.useState(!1),[S,E]=N.useState(!1),[C,T]=N.useState(!1),[R,A]=N.useState("");N.useEffect(()=>{M()},[]);const M=async()=>{n(!0);try{const I=await bo.listAllPayouts();e(I)}catch(I){l(he(I))}finally{n(!1)}},z=async()=>{if(g){T(!0);try{await bo.updatePayoutStatus(g.id,{status:"pago",data_pagamento:new Date().toISOString(),comprovante_url:R||void 0}),_(!1),v(null),A(""),M()}catch(I){alert(he(I))}finally{T(!1)}}},F=async()=>{if(g){T(!0);try{await bo.updatePayoutStatus(g.id,{status:"rejeitado"}),E(!1),v(null),M()}catch(I){alert(he(I))}finally{T(!1)}}},G=I=>{navigator.clipboard.writeText(I),alert("Copiado para a rea de transferncia!")},K=t.filter(I=>{var H,$;const U=((H=I.usuarios)==null?void 0:H.nome.toLowerCase().includes(d.toLowerCase()))||(($=I.usuarios)==null?void 0:$.email.toLowerCase().includes(d.toLowerCase()))||I.chave_pix.includes(d),q=f==="all"||I.status===f;return U&&q});return a.jsxs("div",{className:"text-white animate-fade-in",children:[a.jsx("h1",{className:"text-3xl font-bold mb-2 text-primary font-poppins",children:"Auditoria de Saques"}),a.jsx("p",{className:"text-gray-400 mb-8",children:"Gerencie as solicitaes de transferncia PIX para os artistas."}),a.jsxs("div",{className:"bg-gray-800 p-5 rounded-xl mb-8 border border-gray-700 shadow-md flex flex-col lg:flex-row items-center gap-4",children:[a.jsxs("div",{className:"relative flex-grow w-full lg:w-auto",children:[a.jsx("input",{type:"text",placeholder:"Buscar por nome, email ou chave PIX...",value:d,onChange:I=>u(I.target.value),className:"w-full bg-gray-900 border border-gray-600 rounded-lg py-2 pl-10 pr-4 focus:outline-none focus:ring-2 focus:ring-primary text-white"}),a.jsx(ms,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"})]}),a.jsxs("select",{value:f,onChange:I=>m(I.target.value),className:"bg-gray-900 border border-gray-600 rounded-lg py-2 px-4 focus:outline-none focus:ring-2 focus:ring-primary text-white",children:[a.jsx("option",{value:"all",children:"Todos os Status"}),a.jsx("option",{value:"pendente",children:"Pendente"}),a.jsx("option",{value:"pago",children:"Pago"}),a.jsx("option",{value:"rejeitado",children:"Rejeitado"})]})]}),a.jsx("div",{className:"bg-gray-800 rounded-xl overflow-hidden border border-gray-700 shadow-xl",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left",children:[a.jsx("thead",{className:"bg-gray-900 text-gray-400 text-xs uppercase font-bold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4",children:"Solicitante"}),a.jsx("th",{className:"p-4",children:"Dados PIX"}),a.jsx("th",{className:"p-4",children:"Valor"}),a.jsx("th",{className:"p-4",children:"Status"}),a.jsx("th",{className:"p-4 text-right",children:"Aes"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-700 text-sm",children:s?a.jsx("tr",{children:a.jsx("td",{colSpan:5,className:"p-8 text-center",children:"Carregando fila..."})}):K.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:5,className:"p-8 text-center text-gray-500",children:"Nenhum saque encontrado."})}):K.map(I=>{var U,q;return a.jsxs("tr",{className:"hover:bg-gray-750 transition-colors",children:[a.jsxs("td",{className:"p-4",children:[a.jsx("p",{className:"font-bold text-white",children:(U=I.usuarios)==null?void 0:U.nome}),a.jsx("p",{className:"text-xs text-gray-500",children:(q=I.usuarios)==null?void 0:q.email}),a.jsx("p",{className:"text-[10px] text-gray-600 mt-1",children:new Date(I.criado_em).toLocaleString()})]}),a.jsx("td",{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs bg-gray-900 px-2 py-0.5 rounded border border-gray-700 uppercase",children:I.tipo_chave}),a.jsx("button",{onClick:()=>G(I.chave_pix),className:"text-primary hover:underline font-mono text-xs",children:I.chave_pix})]})}),a.jsx("td",{className:"p-4",children:a.jsxs("p",{className:"font-black text-white font-mono text-lg",children:["R$ ",I.valor.toLocaleString("pt-BR",{minimumFractionDigits:2})]})}),a.jsx("td",{className:"p-4",children:a.jsx("span",{className:`px-2 py-1 rounded text-[10px] font-black uppercase border ${I.status==="pago"?"bg-green-500/10 text-green-400 border-green-500/30":I.status==="rejeitado"?"bg-red-500/10 text-red-400 border-red-500/30":"bg-yellow-500/10 text-yellow-400 border-yellow-500/30 animate-pulse"}`,children:I.status})}),a.jsx("td",{className:"p-4 text-right",children:I.status==="pendente"&&a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx("button",{onClick:()=>{v(I),_(!0)},className:"p-2 bg-green-600 hover:bg-green-500 rounded text-white shadow-lg",title:"Marcar como Pago",children:a.jsx(Oe,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>{v(I),E(!0)},className:"p-2 bg-red-600 hover:bg-red-500 rounded text-white shadow-lg",title:"Rejeitar",children:a.jsx(Ta,{className:"w-5 h-5"})})]})})]},I.id)})})]})})}),a.jsx(sn,{isOpen:b,onClose:()=>_(!1),onConfirm:z,title:"Confirmar Pagamento",message:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("p",{children:["Voc confirma que realizou a transferncia de ",a.jsxs("strong",{children:["R$ ",g==null?void 0:g.valor.toLocaleString("pt-BR",{minimumFractionDigits:2})]})," para a chave PIX abaixo?"]}),a.jsx("div",{className:"bg-gray-900 p-3 rounded font-mono text-sm border border-gray-700 break-all",children:g==null?void 0:g.chave_pix}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"URL do Comprovante (Opcional)"}),a.jsx("input",{type:"text",value:R,onChange:I=>A(I.target.value),className:"w-full bg-gray-900 border border-gray-700 rounded p-2 text-sm",placeholder:"Link do PDF/Imagem"})]})]}),confirmText:"Confirmar Saque",isConfirming:C}),a.jsx(sn,{isOpen:S,onClose:()=>E(!1),onConfirm:F,title:"Rejeitar Solicitao",message:a.jsx("p",{children:"Tem certeza que deseja rejeitar este pedido de saque? O usurio ser notificado e o saldo voltar a ficar disponvel para nova solicitao."}),confirmText:"Rejeitar",isConfirming:C})]})},GD=()=>{const[t,e]=N.useState([]),[s,n]=N.useState(!0),[i,l]=N.useState(null),[d,u]=N.useState(!1),[f,m]=N.useState(!1),[g,v]=N.useState(null),[b,_]=N.useState("Documento ilegvel"),[S,E]=N.useState(!1);N.useEffect(()=>{C()},[]);const C=async()=>{n(!0);try{const M=await Xe.listPendingKyc();e(M)}catch(M){console.error(M)}finally{n(!1)}},T=async M=>{try{const z=await Ie.getSignedUrls("site",[M],300);z.length>0&&window.open(z[0],"_blank")}catch(z){alert("Erro ao gerar link do documento: "+he(z))}},R=async()=>{if(g){E(!0);try{await Xe.approveKyc(g.id),u(!1),v(null),C()}catch(M){alert(he(M))}finally{E(!1)}}},A=async()=>{if(g){E(!0);try{await Xe.rejectKyc(g.id,b),m(!1),v(null),C()}catch(M){alert(he(M))}finally{E(!1)}}};return a.jsxs("div",{className:"text-white animate-fade-in",children:[a.jsx("h1",{className:"text-3xl font-bold mb-2 text-primary font-poppins",children:"Fila de Verificao (KYC)"}),a.jsx("p",{className:"text-gray-400 mb-8",children:"Revise documentos de identidade para validar perfis."}),a.jsx("div",{className:"bg-gray-800 rounded-xl border border-gray-700 overflow-hidden shadow-xl",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left",children:[a.jsx("thead",{className:"bg-gray-900 text-gray-400 text-xs uppercase font-bold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4",children:"Usurio"}),a.jsx("th",{className:"p-4",children:"Tipo"}),a.jsx("th",{className:"p-4",children:"Data Envio"}),a.jsx("th",{className:"p-4 text-right",children:"Aes"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-700 text-sm",children:s?a.jsx("tr",{children:a.jsx("td",{colSpan:4,className:"p-8 text-center",children:"Carregando fila..."})}):t.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:4,className:"p-8 text-center text-gray-500",children:"Nenhuma solicitao pendente."})}):t.map(M=>a.jsxs("tr",{className:"hover:bg-gray-750 transition-colors",children:[a.jsxs("td",{className:"p-4",children:[a.jsx("p",{className:"font-bold text-white",children:M.nome}),a.jsx("p",{className:"text-xs text-gray-500",children:M.email})]}),a.jsx("td",{className:"p-4 capitalize",children:M.tipo}),a.jsx("td",{className:"p-4 text-gray-400",children:new Date(M.criado_em).toLocaleDateString()}),a.jsxs("td",{className:"p-4 text-right flex justify-end gap-2",children:[a.jsx("button",{onClick:()=>M.documento_url&&T(M.documento_url),className:"p-2 bg-gray-700 hover:bg-gray-600 rounded text-white shadow",title:"Ver Documento",children:a.jsx(on,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>{v(M),u(!0)},className:"p-2 bg-green-600 hover:bg-green-500 rounded text-white shadow",title:"Aprovar",children:a.jsx(Oe,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>{v(M),m(!0)},className:"p-2 bg-red-600 hover:bg-red-500 rounded text-white shadow",title:"Rejeitar",children:a.jsx(Ta,{className:"w-5 h-5"})})]})]},M.id))})]})})}),a.jsx(sn,{isOpen:d,onClose:()=>u(!1),onConfirm:R,title:"Aprovar Verificao",message:a.jsxs("p",{children:["Voc confirma que o documento enviado por ",a.jsx("strong",{children:g==null?void 0:g.nome}),"  vlido e legvel?"]}),confirmText:"Confirmar",isConfirming:S}),a.jsx(sn,{isOpen:f,onClose:()=>m(!1),onConfirm:A,title:"Rejeitar Verificao",message:a.jsxs("div",{children:[a.jsx("p",{children:"Por que este documento est sendo rejeitado?"}),a.jsxs("select",{value:b,onChange:M=>_(M.target.value),className:"w-full mt-3 bg-gray-900 border border-gray-700 rounded p-2 text-sm text-white",children:[a.jsx("option",{children:"Documento ilegvel"}),a.jsx("option",{children:"Foto cortada"}),a.jsx("option",{children:"Documento expirado"}),a.jsx("option",{children:"Identidade no corresponde ao nome"}),a.jsx("option",{children:"Outros motivos"})]})]}),confirmText:"Rejeitar",isConfirming:S})]})},FD="modulepreload",JD=function(t){return"/"+t},Pb={},cd=function(e,s,n){let i=Promise.resolve();if(s&&s.length>0){let d=function(m){return Promise.all(m.map(g=>Promise.resolve(g).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),f=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));i=d(s.map(m=>{if(m=JD(m),m in Pb)return;Pb[m]=!0;const g=m.endsWith(".css"),v=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${v}`))return;const b=document.createElement("link");if(b.rel=g?"stylesheet":FD,g||(b.as="script"),b.crossOrigin="",b.href=m,f&&b.setAttribute("nonce",f),document.head.appendChild(b),g)return new Promise((_,S)=>{b.addEventListener("load",_),b.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${m}`)))})}))}function l(d){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=d,window.dispatchEvent(u),!u.defaultPrevented)throw d}return i.then(d=>{for(const u of d||[])u.status==="rejected"&&l(u.reason);return e().catch(l)})},Yc=({className:t="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),qc=({active:t,completed:e,icon:s,label:n,date:i})=>a.jsxs("div",{className:`flex flex-col items-center flex-1 relative z-10 ${!t&&!e?"opacity-50":""}`,children:[a.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center border-2 transition-all duration-300 bg-gray-800 ${e?"border-green-500 text-green-500":t?"border-primary text-primary":"border-gray-600 text-gray-600"}`,children:e?a.jsx(Oe,{className:"w-6 h-6"}):s}),a.jsx("span",{className:`text-xs mt-2 font-medium text-center ${e?"text-green-400":t?"text-white":"text-gray-500"}`,children:n}),i&&a.jsx("span",{className:"text-[10px] text-gray-500 mt-1",children:new Date(i).toLocaleDateString("pt-BR")})]}),_f=({active:t})=>a.jsx("div",{className:`flex-1 h-1 mx-2 transition-colors duration-300 ${t?"bg-green-500":"bg-gray-700"}`}),KD=t=>{if(!t)return{terms:"",logs:[]};const e=t.split(/\n\n(?=\[)/g),s=e[0],i=e.slice(1).map(l=>{const d=l.match(/^\[(.*?)\]:\s*(.*)/s);return d?{header:d[1],message:d[2],original:l}:{header:"Registro",message:l,original:l}});return{terms:s,logs:i}},YD=t=>{const e=[];let s=0;const n=new Date(t.criado_em);return new Date(t.data_evento)<n?(e.push({status:"warning",text:"Data do evento anterior  criao do contrato (Retroativo?)."}),s+=20):e.push({status:"ok",text:"Cronologia de criao vlida."}),t.status==="concluido"&&!t.data_pagamento?(e.push({status:"error",text:"Inconsistncia: Status CONCLUDO mas sem Data de Pagamento."}),s+=50):t.status==="concluido"&&e.push({status:"ok",text:"Pagamento registrado corretamente."}),(t.status==="assinado"||t.status==="concluido")&&(!t.assinatura_artista||!t.assinatura_estabelecimento?(e.push({status:"error",text:"Inconsistncia: Status avanado mas faltam assinaturas booleanas."}),s+=30):e.push({status:"ok",text:"Assinaturas digitais vlidas."})),(t.valor||0)<=0?(e.push({status:"warning",text:"Alerta: Contrato com valor zero ou no definido."}),s+=10):e.push({status:"ok",text:"Valor financeiro definido."}),t.data_pagamento&&new Date(t.data_pagamento)<n&&(e.push({status:"error",text:"Erro Crtico: Data de pagamento anterior  criao."}),s+=50),{checks:e,riskScore:Math.min(s,100)}},WD=({isOpen:t,onClose:e,contract:s,onRefresh:n})=>{var ie,re;const[i,l]=N.useState("info"),[d,u]=N.useState([]),[f,m]=N.useState(!1),[g,v]=N.useState(!1),[b,_]=N.useState(null),[S,E]=N.useState({artist:0,venue:0}),[C,T]=N.useState(s.status),[R,A]=N.useState(((ie=s.taxa_servico)==null?void 0:ie.toString())||""),[M,z]=N.useState(""),F=N.useRef(null);qe.useEffect(()=>{var P;t&&(T(s.status),A(((P=s.taxa_servico)==null?void 0:P.toString())||""),G(s))},[t,s]),qe.useEffect(()=>{if(b){const P=setTimeout(()=>_(null),5e3);return()=>clearTimeout(P)}},[b]);const G=async P=>{var D,te,se,fe;const O=Array.isArray(P.artistas)?(D=P.artistas[0])==null?void 0:D.id:(te=P.artistas)==null?void 0:te.id,Y=Array.isArray(P.estabelecimentos)?(se=P.estabelecimentos[0])==null?void 0:se.id:(fe=P.estabelecimentos)==null?void 0:fe.id,ne=async ee=>{if(!ee)return 0;const me=await cm.getByTargetId(ee);return me.length===0?0:me.reduce((je,pe)=>je+pe.nota,0)/me.length},[le,L]=await Promise.all([ne(O),ne(Y)]);E({artist:le,venue:L})},K=async()=>{var Y,ne,le,L;m(!0),u([]);const P=Array.isArray(s.artistas)?(Y=s.artistas[0])==null?void 0:Y.usuario_id:(ne=s.artistas)==null?void 0:ne.usuario_id,O=Array.isArray(s.estabelecimentos)?(le=s.estabelecimentos[0])==null?void 0:le.usuario_id:(L=s.estabelecimentos)==null?void 0:L.usuario_id;if(!P||!O){m(!1);return}try{const{data:D}=await Q.from("conversas").select("id").or(`and(participante_a.eq.${P},participante_b.eq.${O}),and(participante_a.eq.${O},participante_b.eq.${P})`).maybeSingle();if(D){const{data:te}=await Q.from("mensagens").select("*").eq("conversa_id",D.id).order("criado_em",{ascending:!0});u(te||[])}}catch(D){console.error("Error fetching chat context",D)}finally{m(!1)}},I=async()=>{if(F.current){v(!0);try{const P=(await cd(async()=>{const{default:fe}=await import("./html2canvas.esm-QH1iLAAe.js");return{default:fe}},[])).default,{jsPDF:O}=await cd(async()=>{const{jsPDF:fe}=await import("./jspdf.es.min-CJ8LCFya.js").then(ee=>ee.j);return{jsPDF:fe}},[]),Y=await P(F.current,{scale:2,useCORS:!0,backgroundColor:"#ffffff",windowWidth:1200}),ne=Y.toDataURL("image/png"),le=new O("p","mm","a4"),L=le.internal.pageSize.getWidth(),D=L/(Y.width/Y.height);let te=D,se=0;for(le.addImage(ne,"PNG",0,se,L,D),te-=le.internal.pageSize.getHeight();te>0;)se=te-D,le.addPage(),le.addImage(ne,"PNG",0,se,L,D),te-=le.internal.pageSize.getHeight();le.save(`admin-copy-${s.id.substring(0,8)}.pdf`),_({message:"PDF gerado com sucesso.",type:"success"})}catch(P){_({message:"Erro ao gerar PDF: "+he(P),type:"error"})}finally{v(!1)}}},U=async()=>{v(!0);try{const P={};C!==s.status&&(P.status=C,C==="concluido"&&!s.data_pagamento&&(P.data_pagamento=new Date().toISOString()));const O=parseFloat(R);if(!isNaN(O)&&O!==s.taxa_servico&&(P.taxa_servico=O),Object.keys(P).length===0){_({message:"Nenhuma alterao detectada.",type:"error"}),v(!1);return}const Y=`

[INTERVENO MANUAL ADMIN em ${new Date().toLocaleString("pt-BR")}]: Status alterado de ${s.status} para ${C}.`;P.condicoes=(s.condicoes||"")+Y;const{error:ne}=await Q.from("contratos").update(P).eq("id",s.id);if(ne)throw ne;_({message:"Contrato atualizado manualmente.",type:"success"}),n()}catch(P){_({message:`Erro: ${he(P)}`,type:"error"})}finally{v(!1)}},q=async()=>{if(M.trim()){v(!0);try{const O=`

[PAGAMENTO MANUAL REGISTRADO em ${new Date().toLocaleString("pt-BR")}]: Ref: ${M}`,{error:Y}=await Q.from("contratos").update({status:"concluido",data_pagamento:new Date().toISOString(),condicoes:(s.condicoes||"")+O}).eq("id",s.id);if(Y)throw Y;_({message:"Pagamento manual registrado.",type:"success"}),z(""),n()}catch(P){_({message:`Erro: ${he(P)}`,type:"error"})}finally{v(!1)}}},H=async P=>{v(!0);try{const O=P==="refund"?"ESTORNO AUTORIZADO AO CONTRATANTE.":"PAGAMENTO LIBERADO AO ARTISTA.",Y=new Date().toLocaleString("pt-BR"),ne=(s.condicoes||"")+`

[ADMINISTRAO em ${Y}]: ${O}`,{error:le}=await Q.from("contratos").update({condicoes:ne}).eq("id",s.id);if(le)throw le;_({message:`Disputa resolvida: ${P==="refund"?"Estorno":"Liberao"}.`,type:"success"}),n()}catch(O){_({message:`Erro: ${he(O)}`,type:"error"})}finally{v(!1)}},$=async(P,O)=>{v(!0);try{const Y=P==="signature"?"Lembrete de Assinatura":"Lembrete de Pagamento",ne=P==="signature"?`Voc tem um contrato pendente de assinatura para o dia ${new Date(s.data_evento).toLocaleDateString()}.`:`O pagamento do contrato para o dia ${new Date(s.data_evento).toLocaleDateString()} est pendente.`;await wa.create({usuario_id:O,tipo:"sistema",titulo:Y,descricao:ne,url_destino:`/contratos/${s.id}`}),_({message:"Lembrete enviado.",type:"success"})}catch{_({message:"Erro ao enviar lembrete.",type:"error"})}finally{v(!1)}};return t?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 z-50 flex justify-center items-center p-4 backdrop-blur-sm",onClick:e,children:a.jsxs("div",{className:"bg-gray-800 text-white rounded-xl shadow-2xl w-full max-w-4xl relative p-6 animate-fade-in border border-gray-700 max-h-[90vh] overflow-y-auto flex flex-col",onClick:P=>P.stopPropagation(),children:[a.jsxs("div",{className:"flex justify-between items-start mb-6 pb-4 border-b border-gray-700",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("h2",{className:"text-2xl font-bold font-poppins",children:["Contrato #",s.id.substring(0,8)]}),a.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-bold uppercase ${s.status==="concluido"?"bg-green-500/20 text-green-300":"bg-gray-700 text-gray-300"}`,children:s.status})]}),a.jsxs("p",{className:"text-gray-400 text-sm mt-1",children:["Criado em ",new Date(s.criado_em).toLocaleDateString("pt-BR")]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:I,disabled:g,className:"flex items-center gap-1 bg-gray-700 hover:bg-gray-600 text-white px-3 py-1.5 rounded text-sm transition-colors",children:[a.jsx(Ao,{className:"w-4 h-4"})," Baixar PDF"]}),a.jsx("button",{onClick:e,className:"text-gray-500 hover:text-white",children:a.jsx(It,{})})]})]}),b&&a.jsx("div",{className:`p-3 rounded-md mb-6 text-center text-sm ${b.type==="success"?"bg-green-500/20 text-green-300":"bg-red-500/20 text-red-400"}`,children:b.message}),s.status==="cancelado"&&s.data_pagamento&&a.jsxs("div",{className:"mb-8 bg-red-900/20 border-2 border-red-500/50 p-6 rounded-lg relative overflow-hidden",children:[a.jsxs("h3",{className:"text-lg font-bold text-red-400 mb-2 flex items-center gap-2 relative z-10",children:[a.jsx(ss,{className:"w-5 h-5"})," Resoluo de Disputa Financeira"]}),a.jsxs("p",{className:"text-gray-300 text-sm mb-4 relative z-10",children:["Valor retido em custdia: ",a.jsxs("strong",{children:["R$ ",(re=s.valor)==null?void 0:re.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),"."]}),a.jsxs("div",{className:"flex flex-wrap gap-4 relative z-10",children:[a.jsxs("button",{onClick:()=>H("refund"),disabled:g,className:"flex-1 bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-4 rounded-lg flex items-center justify-center gap-2 transition-colors disabled:opacity-50",children:[a.jsx(Ta,{className:"w-5 h-5"})," Autorizar Estorno"]}),a.jsxs("button",{onClick:()=>H("release"),disabled:g,className:"flex-1 bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-4 rounded-lg flex items-center justify-center gap-2 transition-colors disabled:opacity-50",children:[a.jsx(Oe,{className:"w-5 h-5"})," Forar Pagamento"]})]})]}),a.jsxs("div",{className:"mb-8 relative",children:[a.jsx("div",{className:"absolute top-5 left-0 w-full h-1 bg-gray-700 -z-0"}),a.jsxs("div",{className:"flex justify-between items-center relative z-10",children:[a.jsx(qc,{active:!0,completed:!0,icon:a.jsx(hr,{className:"w-5 h-5"}),label:"Criado",date:s.criado_em}),a.jsx(_f,{active:s.status!=="enviado"&&s.status!=="rascunho"}),a.jsx(qc,{active:["assinado","concluido"].includes(s.status),completed:s.status==="assinado"||s.status==="concluido",icon:a.jsx(Yc,{className:"w-5 h-5"}),label:"Assinado",date:s.data_assinatura_estabelecimento}),a.jsx(_f,{active:!!s.data_pagamento}),a.jsx(qc,{active:!!s.data_pagamento,completed:!!s.data_pagamento,icon:a.jsx(Rs,{className:"w-5 h-5"}),label:"Pago",date:s.data_pagamento}),a.jsx(_f,{active:s.status==="concluido"}),a.jsx(qc,{active:s.status==="concluido",completed:s.status==="concluido"&&Wa(s.data_evento,s.status),icon:a.jsx(Oe,{className:"w-5 h-5"}),label:"Liberado",date:s.status==="concluido"?Ed(s.data_evento).toISOString():null})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[a.jsxs("div",{className:"bg-gray-900 p-4 rounded-lg border border-gray-700 relative",children:[a.jsxs("div",{className:"flex justify-between items-center mb-3 border-b border-gray-700 pb-2",children:[a.jsx("h3",{className:"text-primary font-bold",children:"CONTRATADO (Artista)"}),a.jsx("div",{className:"flex text-yellow-400 text-xs",children:S.artist>0&&[...Array(5)].map((P,O)=>a.jsx(At,{className:`w-3 h-3 ${O<Math.round(S.artist)?"text-yellow-400":"text-gray-600"}`},O))})]}),(()=>{const P=Array.isArray(s.artistas)?s.artistas[0]:s.artistas,O=Array.isArray(P==null?void 0:P.usuarios)?P.usuarios[0]:P==null?void 0:P.usuarios;return a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-700 overflow-hidden",children:(O==null?void 0:O.foto_url)&&a.jsx("img",{src:Q.storage.from("perfis").getPublicUrl(O.foto_url).data.publicUrl,className:"w-full h-full object-cover"})}),a.jsx("p",{className:"font-bold text-white text-lg",children:O==null?void 0:O.nome})]}),a.jsxs("p",{children:[a.jsx("strong",{className:"text-gray-500",children:"Email:"})," ",(O==null?void 0:O.email)||"N/A"]}),a.jsxs("p",{children:[a.jsx("strong",{className:"text-gray-500",children:"Telefone:"})," ",(O==null?void 0:O.telefone)||"N/A"]}),!s.assinatura_artista&&s.status==="enviado"&&a.jsxs("button",{onClick:()=>(O==null?void 0:O.id)&&$("signature",O.id),className:"mt-2 w-full text-xs bg-orange-500/20 text-orange-300 border border-orange-500/30 px-2 py-1 rounded hover:bg-orange-500/30 transition-colors flex items-center justify-center gap-1",children:[a.jsx(Na,{className:"w-3 h-3"})," Cobrar Assinatura"]})]})})()]}),a.jsxs("div",{className:"bg-gray-900 p-4 rounded-lg border border-gray-700 relative",children:[a.jsxs("div",{className:"flex justify-between items-center mb-3 border-b border-gray-700 pb-2",children:[a.jsx("h3",{className:"text-secondary font-bold",children:"CONTRATANTE (Local)"}),a.jsx("div",{className:"flex text-yellow-400 text-xs",children:S.venue>0&&[...Array(5)].map((P,O)=>a.jsx(At,{className:`w-3 h-3 ${O<Math.round(S.venue)?"text-yellow-400":"text-gray-600"}`},O))})]}),(()=>{const P=Array.isArray(s.estabelecimentos)?s.estabelecimentos[0]:s.estabelecimentos,O=Array.isArray(P==null?void 0:P.usuarios)?P.usuarios[0]:P==null?void 0:P.usuarios;return a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-700 overflow-hidden",children:(O==null?void 0:O.foto_url)&&a.jsx("img",{src:Q.storage.from("perfis").getPublicUrl(O.foto_url).data.publicUrl,className:"w-full h-full object-cover"})}),a.jsx("p",{className:"font-bold text-white text-lg",children:O==null?void 0:O.nome})]}),a.jsxs("p",{children:[a.jsx("strong",{className:"text-gray-500",children:"Email:"})," ",(O==null?void 0:O.email)||"N/A"]}),a.jsxs("p",{children:[a.jsx("strong",{className:"text-gray-500",children:"Telefone:"})," ",(O==null?void 0:O.telefone)||"N/A"]}),!s.assinatura_estabelecimento&&s.status==="enviado"&&a.jsxs("button",{onClick:()=>(O==null?void 0:O.id)&&$("signature",O.id),className:"mt-2 w-full text-xs bg-purple-500/20 text-purple-300 border border-purple-500/30 px-2 py-1 rounded hover:bg-purple-500/30 transition-colors flex items-center justify-center gap-1",children:[a.jsx(Na,{className:"w-3 h-3"})," Cobrar Assinatura"]}),s.status==="assinado"&&!s.data_pagamento&&a.jsxs("button",{onClick:()=>(O==null?void 0:O.id)&&$("payment",O.id),className:"mt-2 w-full text-xs bg-yellow-500/20 text-yellow-300 border border-yellow-500/30 px-2 py-1 rounded hover:bg-yellow-500/30 transition-colors flex items-center justify-center gap-1",children:[a.jsx(Na,{className:"w-3 h-3"})," Cobrar Pagamento"]})]})})()]})]}),a.jsxs("div",{className:"flex border-b border-gray-700 mb-4 overflow-x-auto",children:[a.jsx("button",{onClick:()=>l("info"),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors whitespace-nowrap ${i==="info"?"border-primary text-white":"border-transparent text-gray-400 hover:text-gray-300"}`,children:"Termos"}),a.jsx("button",{onClick:()=>l("audit"),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors whitespace-nowrap ${i==="audit"?"border-primary text-white":"border-transparent text-gray-400 hover:text-gray-300"}`,children:"Auditoria"}),a.jsxs("button",{onClick:()=>{l("chat"),K()},className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors whitespace-nowrap flex items-center gap-2 ${i==="chat"?"border-primary text-white":"border-transparent text-gray-400 hover:text-gray-300"}`,children:[a.jsx(en,{className:"w-4 h-4"})," Chat"]}),a.jsx("button",{onClick:()=>l("diagnosis"),className:`px-4 py-2 text-sm font-medium border-b-2 transition-colors whitespace-nowrap ${i==="diagnosis"?"border-primary text-white":"border-transparent text-gray-400 hover:text-gray-300"}`,children:"Diagnstico"})]}),a.jsx("div",{className:"bg-gray-900 p-4 rounded-lg border border-gray-700 flex-grow mb-6 max-h-64 overflow-y-auto",children:(()=>{const{terms:P,logs:O}=KD(s.condicoes);if(i==="info")return a.jsx("div",{className:"whitespace-pre-wrap text-sm text-gray-300",children:P||"Nenhuma condio adicional."});if(i==="audit")return a.jsx("div",{className:"space-y-4",children:O.length===0?a.jsx("p",{className:"text-gray-500 italic",children:"Sem registros."}):O.map((Y,ne)=>a.jsxs("div",{className:"flex gap-3",children:[a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full mt-1.5"}),a.jsx("div",{className:"w-px h-full bg-gray-700 my-1"})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-bold text-gray-400 uppercase",children:Y.header}),a.jsx("p",{className:"text-sm text-gray-300",children:Y.message})]})]},ne))});if(i==="diagnosis"){const Y=YD(s);let ne="text-green-400";return Y.riskScore>30&&(ne="text-yellow-400"),Y.riskScore>60&&(ne="text-red-400"),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center bg-gray-800 p-3 rounded",children:[a.jsx("span",{className:"text-sm font-bold text-gray-300",children:"Risco Automtico"}),a.jsxs("span",{className:`text-xl font-bold ${ne}`,children:[Y.riskScore,"/100"]})]}),a.jsx("div",{className:"space-y-3",children:Y.checks.map((le,L)=>a.jsxs("div",{className:`p-3 rounded border flex items-center gap-3 ${le.status==="ok"?"bg-green-900/20 border-green-900/50":le.status==="warning"?"bg-yellow-900/20 border-yellow-900/50":"bg-red-900/20 border-red-900/50"}`,children:[le.status==="ok"&&a.jsx(Oe,{className:"w-5 h-5 text-green-500"}),le.status==="warning"&&a.jsx(ss,{className:"w-5 h-5 text-yellow-500"}),le.status==="error"&&a.jsx(Ta,{className:"w-5 h-5 text-red-500"}),a.jsx("span",{className:"text-sm text-gray-300",children:le.text})]},L))})]})}if(i==="chat")return f?a.jsx("p",{className:"text-center text-gray-500",children:"Carregando..."}):d.length===0?a.jsx("p",{className:"text-center text-gray-500",children:"Sem histrico."}):a.jsx("div",{className:"space-y-3",children:d.map(Y=>{var L,D;const ne=Array.isArray(s.artistas)?(L=s.artistas[0])==null?void 0:L.usuario_id:(D=s.artistas)==null?void 0:D.usuario_id,le=Y.remetente_id===ne;return a.jsxs("div",{className:`flex flex-col ${le?"items-end":"items-start"}`,children:[a.jsx("div",{className:`max-w-[80%] p-3 rounded-lg text-sm ${le?"bg-primary/20 text-primary-100 rounded-tr-none":"bg-gray-700 text-gray-200 rounded-tl-none"}`,children:Y.texto}),a.jsxs("span",{className:"text-[10px] text-gray-500 mt-1",children:[le?"Artista":"Local","  ",new Date(Y.criado_em).toLocaleString()]})]},Y.id)})})})()}),a.jsx("div",{className:"hidden",children:a.jsxs("div",{ref:F,className:"pdf-content p-10 bg-white text-black font-serif",style:{width:"800px"},children:[a.jsx("h1",{className:"text-2xl font-bold text-center mb-6",children:"CONTRATO DE SERVIOS"}),a.jsxs("p",{className:"mb-4",children:[a.jsx("strong",{children:"ID:"})," #",s.id]}),a.jsxs("p",{className:"mb-4",children:[a.jsx("strong",{children:"Evento:"})," ",new Date(s.data_evento).toLocaleDateString()]}),a.jsx("div",{className:"whitespace-pre-wrap",children:s.condicoes})]})}),a.jsxs("div",{className:"mt-8 bg-gray-900 border border-gray-600 p-4 rounded-lg",children:[a.jsxs("h3",{className:"text-gray-400 text-xs uppercase font-bold mb-3 flex items-center gap-2",children:[a.jsx(Pn,{className:"w-4 h-4"})," Interveno Manual"]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-3 p-3 border border-gray-700 rounded bg-gray-800/50",children:[a.jsx("h4",{className:"text-xs font-bold text-gray-500 uppercase",children:"Alterar Dados"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("div",{className:"w-1/2",children:[a.jsx("label",{className:"text-[10px] text-gray-500 block mb-1",children:"Status"}),a.jsxs("select",{value:C,onChange:P=>T(P.target.value),className:"w-full bg-gray-800 border border-gray-600 rounded p-1.5 text-xs text-white",children:[a.jsx("option",{value:"enviado",children:"Aguardando"}),a.jsx("option",{value:"assinado",children:"Assinado"}),a.jsx("option",{value:"concluido",children:"Concludo"}),a.jsx("option",{value:"cancelado",children:"Cancelado"}),a.jsx("option",{value:"rascunho",children:"Rascunho"})]})]}),a.jsxs("div",{className:"w-1/2",children:[a.jsx("label",{className:"text-[10px] text-gray-500 block mb-1",children:"Taxa (R$)"}),a.jsx("input",{type:"number",value:R,onChange:P=>A(P.target.value),className:"w-full bg-gray-800 border border-gray-600 rounded p-1.5 text-xs text-white"})]})]}),a.jsx("button",{onClick:U,disabled:g,className:"w-full bg-yellow-600 hover:bg-yellow-700 text-white text-xs font-bold py-1.5 px-3 rounded transition-colors disabled:opacity-50",children:"Aplicar"})]}),a.jsxs("div",{className:"space-y-3 p-3 border border-gray-700 rounded bg-gray-800/50",children:[a.jsx("h4",{className:"text-xs font-bold text-gray-500 uppercase",children:"Pagamento Externo"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",placeholder:"Ref (ex: TED #1234)",value:M,onChange:P=>z(P.target.value),className:"w-full bg-gray-800 border border-gray-600 rounded p-1.5 text-xs text-white"}),a.jsx("button",{onClick:q,disabled:g||!M.trim(),className:"whitespace-nowrap bg-green-600 hover:bg-green-700 text-white text-xs font-bold py-1.5 px-3 rounded transition-colors disabled:opacity-50",children:"Registrar"})]})]})]})]}),a.jsx("div",{className:"mt-6 flex justify-end",children:a.jsx("button",{onClick:e,className:"px-6 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded font-medium transition-colors",children:"Fechar"})})]})}):null},XD=()=>{const[t,e]=N.useState([]),[s,n]=N.useState(!0),[i,l]=N.useState(null),[d,u]=N.useState(""),[f,m]=N.useState("all"),[g,v]=N.useState(!1),[b,_]=N.useState(null),S=N.useCallback(async()=>{n(!0),l(null);try{let T=Q.from("contratos").select(`
                    *, 
                    artistas(usuario_id, usuarios(nome)), 
                    estabelecimentos(usuario_id, usuarios(nome))
                `).order("criado_em",{ascending:!1});f!=="all"&&(T=T.eq("status",f)),d&&d.match(/^[0-9a-f]{8}-/)&&(T=T.eq("id",d));const{data:R,error:A}=await T;if(A)throw A;e(R)}catch(T){l(he(T))}finally{n(!1)}},[d,f]);N.useEffect(()=>{S()},[S]);const E=T=>{_(T),v(!0)},C=T=>{const R=Array.isArray(T)?T[0]:T;if(!R)return"Desconhecido";const A=Array.isArray(R.usuarios)?R.usuarios[0]:R.usuarios;return(A==null?void 0:A.nome)||"Desconhecido"};return a.jsxs("div",{className:"text-white animate-fade-in",children:[a.jsx("h1",{className:"text-3xl font-bold mb-2 text-primary font-poppins",children:"Gesto de Contratos"}),a.jsx("p",{className:"text-gray-400 mb-8",children:"Monitore e audite todos os contratos gerados na plataforma."}),a.jsxs("div",{className:"bg-gray-800 p-5 rounded-xl mb-8 border border-gray-700 shadow-md flex flex-col lg:flex-row items-center gap-4",children:[a.jsxs("div",{className:"relative flex-grow w-full lg:w-auto",children:[a.jsx("input",{type:"text",placeholder:"Buscar por ID exato (UUID)...",value:d,onChange:T=>u(T.target.value),className:"w-full bg-gray-900 border border-gray-600 rounded-lg py-2 pl-10 pr-4 focus:outline-none focus:ring-2 focus:ring-primary text-white"}),a.jsx(ms,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"})]}),a.jsx("div",{className:"flex items-center gap-2 w-full lg:w-auto",children:a.jsxs("select",{value:f,onChange:T=>m(T.target.value),className:"bg-gray-900 border border-gray-600 rounded-lg py-2 px-4 focus:outline-none focus:ring-2 focus:ring-primary text-white w-full lg:w-auto",children:[a.jsx("option",{value:"all",children:"Todos os Status"}),a.jsx("option",{value:"rascunho",children:"Rascunho"}),a.jsx("option",{value:"enviado",children:"Aguardando Assinatura"}),a.jsx("option",{value:"assinado",children:"Assinado"}),a.jsx("option",{value:"concluido",children:"Concludo (Pago)"}),a.jsx("option",{value:"cancelado",children:"Cancelado"})]})}),a.jsx("button",{onClick:S,className:"bg-gray-700 hover:bg-gray-600 text-white px-4 py-2 rounded-lg transition-colors",children:"Atualizar"})]}),i&&a.jsx("div",{className:"bg-red-500/20 text-red-400 p-4 rounded-lg mb-6 border border-red-500/30 text-center",children:i}),a.jsx("div",{className:"bg-gray-800 rounded-xl overflow-hidden shadow-lg border border-gray-700",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left",children:[a.jsx("thead",{className:"bg-gray-900 text-gray-400 text-xs uppercase font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4",children:"ID"}),a.jsx("th",{className:"p-4",children:"Artista"}),a.jsx("th",{className:"p-4",children:"Contratante"}),a.jsx("th",{className:"p-4",children:"Data Evento"}),a.jsx("th",{className:"p-4 text-right",children:"Valor"}),a.jsx("th",{className:"p-4 text-center",children:"Status"}),a.jsx("th",{className:"p-4 text-right",children:"Aes"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-700 text-sm",children:s?a.jsx("tr",{children:a.jsx("td",{colSpan:7,className:"p-8 text-center text-gray-500",children:"Carregando contratos..."})}):t.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:7,className:"p-8 text-center text-gray-500",children:"Nenhum contrato encontrado."})}):t.map(T=>{var R;return a.jsxs("tr",{className:"hover:bg-gray-700/30 transition-colors",children:[a.jsxs("td",{className:"p-4 font-mono text-xs text-gray-500",title:T.id,children:[T.id.substring(0,8),"..."]}),a.jsx("td",{className:"p-4 font-medium text-white",children:C(T.artistas)}),a.jsx("td",{className:"p-4 text-gray-300",children:C(T.estabelecimentos)}),a.jsx("td",{className:"p-4 text-gray-300",children:new Date(T.data_evento).toLocaleDateString()}),a.jsxs("td",{className:"p-4 text-right font-mono",children:["R$ ",((R=T.valor)==null?void 0:R.toLocaleString("pt-BR",{minimumFractionDigits:2}))||"0,00"]}),a.jsx("td",{className:"p-4 text-center",children:a.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold uppercase 
                                                ${T.status==="concluido"?"bg-green-500/20 text-green-300":T.status==="cancelado"?"bg-red-500/20 text-red-300":T.status==="assinado"?"bg-blue-500/20 text-blue-300":"bg-yellow-500/20 text-yellow-300"}`,children:T.status})}),a.jsx("td",{className:"p-4 text-right",children:a.jsx("button",{onClick:()=>E(T),className:"p-2 text-blue-400 hover:text-white hover:bg-blue-600/20 rounded transition-colors",title:"Auditar Contrato",children:a.jsx(on,{className:"w-5 h-5"})})})]},T.id)})})]})})}),b&&a.jsx(WD,{isOpen:g,onClose:()=>v(!1),contract:b,onRefresh:S})]})},QD=()=>{var $,ie,re,P,O,Y;const[t,e]=N.useState("media"),[s,n]=N.useState([]),[i,l]=N.useState([]),[d,u]=N.useState(!0),[f,m]=N.useState(!1),[g,v]=N.useState(null),[b,_]=N.useState(""),[S,E]=N.useState(!1),[C,T]=N.useState(0),[R,A]=N.useState(!1),[M,z]=N.useState(null),[F]=N.useState("terms"),G=N.useCallback(async()=>{u(!0),v(null);try{const{data:ne}=await Q.from("avaliacoes").select("id, nota, comentario, criado_em, avaliador:usuarios!avaliador_id (id, nome, foto_url), alvo:usuarios!alvo_id (id, nome, tipo)").lte("nota",2).order("criado_em",{ascending:!1}).limit(50);l((ne||[]).map(D=>({...D,avaliador:Array.isArray(D.avaliador)?D.avaliador[0]:D.avaliador,alvo:Array.isArray(D.alvo)?D.alvo[0]:D.alvo})));const{data:le}=await Q.from("usuarios").select("id, nome, tipo, foto_url, criado_em, artista:artistas(id, foto_capa, galeria_fotos), estabelecimento:estabelecimentos(id, foto_capa, galeria_fotos)").order("criado_em",{ascending:!1}).limit(40),L=[];(le||[]).forEach(D=>{D.foto_url&&L.push({id:`avatar-${D.id}`,url:Ie.getPublicUrl("perfis",D.foto_url),path:D.foto_url,type:"avatar",userId:D.id,userName:D.nome,userType:D.tipo,bucket:"perfis",createdAt:D.criado_em});const te=D.tipo==="artista"?Array.isArray(D.artista)?D.artista[0]:D.artista:Array.isArray(D.estabelecimento)?D.estabelecimento[0]:D.estabelecimento;te&&(te.foto_capa&&L.push({id:`cover-${D.id}`,url:Ie.getPublicUrl(D.tipo,te.foto_capa),path:te.foto_capa,type:"cover",userId:D.id,userName:D.nome,userType:D.tipo,bucket:D.tipo,createdAt:D.criado_em}),te.galeria_fotos&&te.galeria_fotos.forEach((se,fe)=>L.push({id:`p-${D.id}-${fe}`,url:Ie.getPublicUrl(D.tipo,se),path:se,type:"portfolio",userId:D.id,userName:D.nome,userType:D.tipo,bucket:D.tipo,createdAt:D.criado_em})))}),n(L)}catch(ne){v(he(ne))}finally{u(!1)}},[]);N.useEffect(()=>{G()},[G]);const K=async ne=>{if(!(!ne||ne.aiAnalysis))if(t==="media"){const le=await cb.analyzeImage(ne.url);n(L=>L.map(D=>D.id===ne.id?{...D,aiAnalysis:le}:D))}else{const le=await cb.analyzeComment(ne.comentario);l(L=>L.map(D=>D.id===ne.id?{...D,aiAnalysis:le}:D))}},I=()=>{const ne=t==="media"?q:H;C<ne.length-1?(T(C+1),K(ne[C+1])):E(!1)},U=async()=>{if(M){m(!0);try{try{await Ie.remove(M.bucket,[M.path])}catch{}M.type==="avatar"&&await Xe.updateBasicInfo(M.userId,{foto_url:null}),n(ne=>ne.filter(le=>le.id!==M.id)),A(!1),S&&I()}catch(ne){alert(he(ne))}finally{m(!1)}}},q=s.filter(ne=>!b||ne.userName.toLowerCase().includes(b.toLowerCase())),H=i.filter(ne=>!b||ne.comentario.toLowerCase().includes(b.toLowerCase()));return a.jsxs("div",{className:"text-white animate-fade-in pb-20",children:[S&&a.jsxs("div",{className:"fixed inset-0 z-[100] bg-gray-900 flex flex-col animate-fade-in",children:[a.jsxs("div",{className:"h-14 bg-gray-800 border-b border-gray-700 flex items-center justify-between px-4 shrink-0",children:[a.jsx("button",{onClick:()=>E(!1),className:"text-gray-400 hover:text-white",children:a.jsx(It,{})}),a.jsxs("h2",{className:"font-bold text-lg",children:["Modo Foco  (",C+1,"/",(t==="media"?q:H).length,")"]}),a.jsx("div",{className:"w-10"})]}),a.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[a.jsx("div",{className:"flex-1 bg-black flex items-center justify-center p-4",children:t==="media"?a.jsx("img",{src:($=q[C])==null?void 0:$.url,className:"max-w-full max-h-full object-contain"}):a.jsxs("div",{className:"max-w-2xl bg-gray-800 p-8 rounded-xl border border-gray-700",children:['"',(ie=H[C])==null?void 0:ie.comentario,'"']})}),a.jsxs("div",{className:"w-80 bg-gray-800 border-l border-gray-700 p-6 space-y-6",children:[a.jsxs("div",{className:"p-4 rounded-lg bg-gray-900 border border-gray-700",children:[a.jsx("p",{className:"text-[10px] font-black uppercase text-primary mb-1",children:"IA Auditor"}),a.jsx("p",{className:"text-sm text-gray-400",children:(t==="media"?(P=(re=q[C])==null?void 0:re.aiAnalysis)==null?void 0:P.reason:(Y=(O=H[C])==null?void 0:O.aiAnalysis)==null?void 0:Y.reason)||"Analisando..."})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("button",{onClick:()=>{t==="media"&&(z(q[C]),A(!0))},className:"bg-red-600 hover:bg-red-700 text-white py-3 rounded-lg flex flex-col items-center gap-1",children:[a.jsx(ps,{className:"w-6 h-6"}),a.jsx("span",{className:"text-xs font-bold",children:"Delete"})]}),a.jsxs("button",{onClick:I,className:"bg-green-600 hover:bg-green-700 text-white py-3 rounded-lg flex flex-col items-center gap-1",children:[a.jsx(Oe,{className:"w-6 h-6"}),a.jsx("span",{className:"text-xs font-bold",children:"Approve"})]})]})]})]})]}),a.jsxs("div",{className:"flex justify-between items-center mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-primary font-poppins",children:"Auditoria de Contedo"}),a.jsx("button",{onClick:()=>{T(0),E(!0),K(t==="media"?q[0]:H[0])},className:"bg-yellow-600 hover:bg-yellow-500 text-white font-bold py-2 px-6 rounded-full flex items-center gap-2",children:" Iniciar Moderao"})]}),a.jsxs("div",{className:"flex border-b border-gray-700 mb-6",children:[a.jsxs("button",{onClick:()=>e("media"),className:`px-6 py-3 text-sm font-bold border-b-2 ${t==="media"?"border-primary text-white":"border-transparent text-gray-400"}`,children:["Mdia (",s.length,")"]}),a.jsxs("button",{onClick:()=>e("reviews"),className:`px-6 py-3 text-sm font-bold border-b-2 ${t==="reviews"?"border-primary text-white":"border-transparent text-gray-400"}`,children:["Avaliaes (",i.length,")"]})]}),a.jsx("div",{className:"bg-gray-800 p-6 rounded-xl border border-gray-700",children:t==="media"?a.jsx("div",{className:"grid grid-cols-3 md:grid-cols-5 gap-4",children:q.map(ne=>a.jsxs("div",{className:"relative aspect-square rounded-lg overflow-hidden border border-gray-700 group",children:[a.jsx("img",{src:ne.url,className:"w-full h-full object-cover blur-sm hover:blur-0 transition-all"}),a.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 flex items-center justify-center gap-2 transition-opacity",children:a.jsx("button",{onClick:()=>{z(ne),A(!0)},className:"p-2 bg-red-600 rounded-full text-white",children:a.jsx(ps,{className:"w-4 h-4"})})})]},ne.id))}):a.jsx("div",{className:"space-y-4",children:H.map(ne=>a.jsxs("div",{className:"p-4 bg-gray-900 rounded-lg border-l-4 border-red-500 flex justify-between items-start",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("p",{className:"font-bold text-white",children:[ne.avaliador.nome,"  ",ne.alvo.nome]}),a.jsxs("p",{className:"text-gray-400 text-sm italic",children:['"',ne.comentario,'"']})]}),a.jsx("span",{className:"text-2xl font-black text-red-400",children:ne.nota})]},ne.id))})}),a.jsx(sn,{isOpen:R,onClose:()=>A(!1),onConfirm:U,title:"Confirmar Deleo",message:a.jsx("p",{children:"Excluir esta mdia permanentemente?"}),confirmText:"Excluir",isConfirming:f})]})},ZD=()=>{const[t,e]=N.useState([]),[s,n]=N.useState(!0),[i,l]=N.useState(null),[d,u]=N.useState(""),f=N.useCallback(async()=>{n(!0),l(null);try{const{data:b,error:_}=await Q.from("mensagens_contato").select("*").order("criado_em",{ascending:!1});if(_)throw _;e(b||[])}catch(b){l("Falha ao carregar as mensagens."),console.error(b)}finally{n(!1)}},[]);N.useEffect(()=>{f()},[f]);const m=async b=>{try{const{error:_}=await Q.from("mensagens_contato").update({lida:!0}).eq("id",b);if(_)throw _;e(S=>S.map(E=>E.id===b?{...E,lida:!0}:E))}catch(_){alert("Erro ao marcar como lida: "+he(_))}},g=async b=>{if(window.confirm("Tem certeza que deseja excluir esta mensagem?"))try{const{error:_}=await Q.from("mensagens_contato").delete().eq("id",b);if(_)throw _;e(S=>S.filter(E=>E.id!==b))}catch(_){alert("Erro ao excluir mensagem: "+he(_))}},v=t.filter(b=>b.nome.toLowerCase().includes(d.toLowerCase())||b.email.toLowerCase().includes(d.toLowerCase())||b.tipo.toLowerCase().includes(d.toLowerCase()));return a.jsxs("div",{className:"text-white animate-fade-in",children:[a.jsx("h1",{className:"text-3xl font-bold mb-2 text-primary font-poppins",children:"Mensagens de Contato"}),a.jsx("p",{className:"text-gray-400 mb-8",children:"Mensagens enviadas atravs do formulrio de contato do site."}),i&&a.jsx("div",{className:"p-3 rounded-md mb-6 text-center text-sm bg-red-500/20 text-red-400",children:i}),a.jsx("div",{className:"bg-gray-800 p-4 rounded-lg mb-6 border border-gray-700 flex items-center gap-4",children:a.jsxs("div",{className:"relative flex-grow",children:[a.jsx("input",{type:"text",placeholder:"Buscar por nome, email ou assunto...",value:d,onChange:b=>u(b.target.value),className:"w-full bg-gray-900 border border-gray-600 rounded-md py-2 pl-10 pr-4 focus:outline-none focus:ring-2 focus:ring-secondary text-white"}),a.jsx(ms,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"})]})}),a.jsx("div",{className:"bg-gray-800 rounded-xl overflow-hidden shadow-lg border border-gray-700",children:s?a.jsx("div",{className:"text-center p-8 text-gray-500",children:"Carregando mensagens..."}):v.length===0?a.jsx("div",{className:"text-center p-8 text-gray-500",children:"Nenhuma mensagem encontrada."}):a.jsx("div",{className:"divide-y divide-gray-700",children:v.map(b=>a.jsxs("div",{className:`p-4 hover:bg-gray-700/30 transition-colors ${b.lida?"border-l-4 border-transparent":"bg-secondary/5 border-l-4 border-secondary"}`,children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"font-bold text-white flex items-center gap-2",children:[b.nome,a.jsxs("span",{className:"text-xs font-normal text-gray-400",children:["<",b.email,">"]})]}),a.jsx("span",{className:"text-xs bg-gray-700 px-2 py-0.5 rounded text-gray-300 mt-1 inline-block",children:b.tipo})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs text-gray-500 mr-2",children:new Date(b.criado_em).toLocaleString()}),!b.lida&&a.jsx("button",{onClick:()=>m(b.id),className:"p-1.5 text-green-400 hover:bg-green-500/20 rounded",title:"Marcar como lida",children:a.jsx(Oe,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>g(b.id),className:"p-1.5 text-red-400 hover:bg-red-500/20 rounded",title:"Excluir",children:a.jsx(ps,{className:"w-5 h-5"})})]})]}),a.jsx("p",{className:"text-gray-300 text-sm whitespace-pre-wrap mt-2 pl-2 border-l-2 border-gray-700",children:b.mensagem}),a.jsx("div",{className:"mt-3 flex justify-end",children:a.jsxs("a",{href:`mailto:${b.email}`,className:"text-xs text-primary hover:underline flex items-center gap-1",children:[a.jsx(Eo,{className:"w-3 h-3"})," Responder por Email"]})})]},b.id))})})]})},e6=()=>{const t=[{id:1,timestamp:"2024-08-28 10:30:15",user:"admin@resona.app",action:'Excluiu o usurio "Banda Antiga".',level:"Crtico"},{id:2,timestamp:"2024-08-28 10:25:00",user:"moderador@resona.app",action:'Suspendeu o perfil "DJ Confuso".',level:"Ateno"},{id:3,timestamp:"2024-08-28 09:15:45",user:"admin@resona.app",action:"Acessou o painel de segurana.",level:"Info"},{id:4,timestamp:"2024-08-28 09:10:02",user:"desconhecido",action:"Tentativa de login falhou (IP: 192.168.1.100).",level:"Alerta"}],e=s=>{switch(s){case"Crtico":return"bg-red-500/20 text-red-300";case"Alerta":return"bg-orange-500/20 text-orange-300";case"Ateno":return"bg-yellow-500/20 text-yellow-300";case"Info":return"bg-blue-500/20 text-blue-300";default:return"bg-gray-500/20 text-gray-300"}};return a.jsxs("div",{className:"text-white",children:[a.jsx("h1",{className:"text-3xl font-bold mb-6 text-primary font-poppins",children:"Controle de Segurana e Logs"}),a.jsx("div",{className:"bg-gray-800 p-4 rounded-lg mb-6 flex justify-end",children:a.jsx("button",{className:"bg-secondary text-white font-semibold py-2 px-4 rounded-md hover:bg-opacity-80",children:"Exportar Logs (CSV)"})}),a.jsx("div",{className:"bg-gray-800 rounded-lg overflow-x-auto",children:a.jsxs("table",{className:"w-full min-w-max text-left",children:[a.jsx("thead",{className:"bg-gray-900",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4 font-semibold",children:"Timestamp"}),a.jsx("th",{className:"p-4 font-semibold",children:"Usurio"}),a.jsx("th",{className:"p-4 font-semibold",children:"Ao Realizada"}),a.jsx("th",{className:"p-4 font-semibold",children:"Nvel"})]})}),a.jsx("tbody",{children:t.map(s=>a.jsxs("tr",{className:"border-t border-gray-700 hover:bg-gray-700/50",children:[a.jsx("td",{className:"p-4 font-mono text-sm",children:s.timestamp}),a.jsx("td",{className:"p-4",children:s.user}),a.jsx("td",{className:"p-4",children:s.action}),a.jsx("td",{className:"p-4",children:a.jsx("span",{className:`px-2 py-1 text-xs font-bold rounded-full ${e(s.level)}`,children:s.level})})]},s.id))})]})})]})},t6=()=>{const[t,e]=N.useState({artists:0,venues:0,shows:0,contracts:0}),[s,n]=N.useState(!0);return N.useEffect(()=>{(async()=>{n(!0);try{const{count:l}=await Q.from("usuarios").select("*",{count:"exact",head:!0}).eq("tipo","artista"),{count:d}=await Q.from("usuarios").select("*",{count:"exact",head:!0}).eq("tipo","estabelecimento"),{count:u}=await Q.from("contratos").select("*",{count:"exact",head:!0}).in("status",["concluido"]),{count:f}=await Q.from("contratos").select("*",{count:"exact",head:!0}).in("status",["assinado","concluido"]);e({artists:l||0,venues:d||0,shows:u||0,contracts:f||0})}catch(l){console.error("Error fetching report data:",l)}finally{n(!1)}})()},[]),a.jsxs("div",{className:"text-white",children:[a.jsx("h1",{className:"text-3xl font-bold mb-6 text-primary font-poppins",children:"Relatrios e Mtricas Gerais"}),a.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg mb-6 flex flex-col md:flex-row gap-4 items-center",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("label",{htmlFor:"period-filter",children:"Perodo:"}),a.jsxs("select",{id:"period-filter",className:"bg-gray-900 rounded-md py-2 px-3 focus:outline-none focus:ring-2 focus:ring-secondary",children:[a.jsx("option",{children:"Geral (Todo o perodo)"}),a.jsx("option",{disabled:!0,children:"ltimos 30 dias (Em breve)"}),a.jsx("option",{disabled:!0,children:"Este ano (Em breve)"})]})]}),a.jsxs("div",{className:"flex-grow flex justify-end gap-2",children:[a.jsx("button",{className:"bg-secondary text-white font-semibold py-2 px-4 rounded-md hover:bg-opacity-80 disabled:opacity-50",disabled:!0,children:"Exportar PDF"}),a.jsx("button",{className:"bg-secondary text-white font-semibold py-2 px-4 rounded-md hover:bg-opacity-80 disabled:opacity-50",disabled:!0,children:"Exportar CSV"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[a.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg text-center",children:[a.jsx("h3",{className:"text-gray-400",children:"Total de Artistas"}),a.jsx("p",{className:"text-4xl font-bold text-white",children:s?"...":t.artists})]}),a.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg text-center",children:[a.jsx("h3",{className:"text-gray-400",children:"Total de Estabelecimentos"}),a.jsx("p",{className:"text-4xl font-bold text-white",children:s?"...":t.venues})]}),a.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg text-center",children:[a.jsx("h3",{className:"text-gray-400",children:"Shows Realizados"}),a.jsx("p",{className:"text-4xl font-bold text-green-400",children:s?"...":t.shows})]}),a.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg text-center",children:[a.jsx("h3",{className:"text-gray-400",children:"Contratos Firmados"}),a.jsx("p",{className:"text-4xl font-bold text-primary",children:s?"...":t.contracts})]})]}),a.jsxs("div",{className:"bg-gray-800 p-6 rounded-lg shadow-lg",children:[a.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Engajamento Mensal"}),a.jsx("div",{className:"w-full h-80 bg-gray-700 rounded-md flex items-center justify-center",children:a.jsx("p",{className:"text-gray-500",children:"Grficos detalhados sero implementados em breve."})})]})]})},Bc=({className:t="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})}),Ub=[{id:"site",name:"Site",description:"Arquivos de identidade visual (logo, favicon)."},{id:"contratos",name:"Contratos",description:"PDFs de contratos gerados e assinados."},{id:"blog",name:"Blog",description:"Imagens de capa e mdia para postagens."},{id:"artista",name:"Artistas",description:"Portflios, fotos de capa e galerias dos artistas."},{id:"estabelecimento",name:"Estabelecimentos",description:"Fotos do local e galerias dos estabelecimentos."},{id:"perfis",name:"Perfis",description:"Avatares de perfil de todos os usurios."}],s6=(t,e=2)=>{if(t===0)return"0 Bytes";const s=1024,n=e<0?0:e,i=["Bytes","KB","MB","GB","TB"],l=Math.floor(Math.log(t)/Math.log(s));return parseFloat((t/Math.pow(s,l)).toFixed(n))+" "+i[l]},a6=()=>{const[t,e]=N.useState([]),[s,n]=N.useState(null),[i,l]=N.useState([]),[d,u]=N.useState([]),[f,m]=N.useState(!1),[g,v]=N.useState(""),[b,_]=N.useState(null),[S,E]=N.useState(!1),[C,T]=N.useState(!1),[R,A]=N.useState(!1);N.useEffect(()=>{(async()=>{const $=await Promise.all(Ub.map(async re=>{try{const{error:P}=await Q.storage.from(re.id).list("",{limit:1});return P?(typeof P.message=="string"?P.message:"").toLowerCase().includes("not found")?{id:re.id,error:"Bucket no encontrado"}:{id:re.id,error:he(P)}:{id:re.id}}catch(P){return{id:re.id,error:he(P)}}}));e($);const ie=$.find(re=>!re.error);ie&&!s&&n(ie.id)})()},[]);const M=N.useCallback(async(H,$)=>{m(!0),v("");try{const ie=$.join("/"),{data:re,error:P}=await Q.storage.from(H).list(ie,{sortBy:{column:"name",order:"asc"},limit:100});if(P)throw P;if(!re){u([]);return}const O=re.filter(ne=>ne.id===null).sort((ne,le)=>ne.name.localeCompare(le.name)),Y=re.filter(ne=>ne.id!==null).sort((ne,le)=>ne.name.localeCompare(le.name));u([...O,...Y])}catch(ie){console.error(ie),v(`Erro ao listar arquivos do bucket '${H}': ${he(ie)}`)}finally{m(!1)}},[]);N.useEffect(()=>{s&&M(s,i)},[s,i,M]);const z=H=>{n(H),l([])},F=H=>{l(i.slice(0,H+1))},G=H=>{l([...i,H])},K=async H=>{if(!H.target.files||H.target.files.length===0||!s)return;A(!0),v("");const $=Array.from(H.target.files),ie=i.length>0?i.join("/")+"/":"";try{const re=$.map(Y=>{const ne=Y.name.replace(/[^a-zA-Z0-9.-]/g,"_"),le=`${ie}${ne}`;return Q.storage.from(s).upload(le,Y,{upsert:!0})}),O=(await Promise.all(re)).filter(Y=>Y.error);if(O.length>0){const Y=O[0].error,ne=he(Y);throw new Error(`${O.length} arquivo(s) falharam no envio. Ex: ${ne}`)}M(s,i)}catch(re){v(`Erro no upload: ${he(re)}`)}finally{A(!1),H.target.value=""}},I=async H=>{if(s){T(!0);try{const $=[...i,H].join("/"),{data:ie,error:re}=await Q.storage.from(s).download($);if(re)throw re;const P=URL.createObjectURL(ie),O=document.createElement("a");O.href=P,O.download=H,document.body.appendChild(O),O.click(),document.body.removeChild(O),URL.revokeObjectURL(P)}catch($){v(`Erro ao baixar arquivo: ${he($)}`)}finally{T(!1)}}},U=H=>{_(H),E(!0)},q=async()=>{if(!(!b||!s)){T(!0);try{const H=[...i,b.name].join("/"),{error:$}=await Q.storage.from(s).remove([H]);if($)throw $;M(s,i)}catch(H){v(`Erro ao excluir arquivo: ${he(H)}`)}finally{T(!1),E(!1),_(null)}}};return a.jsxs("div",{className:"text-white animate-fade-in",children:[a.jsx("h1",{className:"text-3xl font-bold mb-2 text-primary font-poppins",children:"Gerenciamento de Buckets e Arquivos"}),a.jsx("p",{className:"text-gray-400 mb-8 max-w-2xl",children:"Navegue, baixe, exclua e envie arquivos para os buckets de armazenamento da aplicao. Certifique-se de que os buckets listados abaixo existem no painel do Supabase."}),t.some(H=>H.error)&&a.jsxs("div",{className:"bg-yellow-500/10 border-l-4 border-yellow-500 text-yellow-300 p-4 rounded-r-lg mb-6 text-sm flex items-start gap-3",role:"alert",children:[a.jsx(ss,{className:"w-6 h-6 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold",children:"Aviso de Configurao"}),a.jsxs("p",{children:["Alguns buckets obrigatrios no foram encontrados ou no tm permisso de acesso pblico. Verifique se os buckets ",a.jsx("strong",{children:t.filter(H=>H.error).map(H=>H.id).join(", ")})," foram criados no Supabase e se as Polticas de Segurana (RLS) esto configuradas."]})]})]}),a.jsxs("div",{className:"flex flex-col md:flex-row gap-6 min-h-[60vh]",children:[a.jsxs("aside",{className:"w-full md:w-72 bg-gray-800 p-4 rounded-lg flex-shrink-0 border border-gray-700",children:[a.jsx("h2",{className:"font-bold text-lg mb-4 text-white border-b border-gray-700 pb-2",children:"Buckets Disponveis"}),a.jsx("nav",{className:"space-y-2",children:Ub.map(H=>{const $=t.find(P=>P.id===H.id),ie=!!($!=null&&$.error),re=s===H.id;return a.jsxs("button",{onClick:()=>!ie&&z(H.id),disabled:ie,className:`w-full text-left flex items-center justify-between px-3 py-3 rounded-md text-sm font-medium transition-all ${re?"bg-secondary text-white shadow-lg":ie?"bg-red-900/10 text-red-400 cursor-not-allowed border border-red-900/20":"text-gray-300 hover:bg-gray-700 hover:text-white"}`,children:[a.jsxs("div",{className:"flex flex-col min-w-0 pr-2",children:[a.jsx("span",{className:"truncate font-bold",children:H.name}),a.jsx("span",{className:`text-[10px] truncate ${re?"text-gray-200":"text-gray-500"}`,children:H.id})]}),ie?a.jsx("span",{title:typeof $.error=="string"?$.error:"Erro desconhecido",children:a.jsx(ss,{className:"w-5 h-5 flex-shrink-0"})}):re&&a.jsx(Oe,{className:"w-5 h-5 flex-shrink-0"})]},H.id)})})]}),a.jsx("main",{className:"flex-1 bg-gray-800 p-6 rounded-lg border border-gray-700 flex flex-col",children:s?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[a.jsxs("div",{className:"text-sm text-gray-400 flex items-center gap-2 flex-wrap bg-gray-900 px-3 py-2 rounded-md border border-gray-700",children:[a.jsx(Bc,{className:"w-4 h-4 text-gray-500"}),a.jsx("button",{onClick:()=>l([]),className:"font-bold hover:text-white transition-colors",children:s}),i.map((H,$)=>a.jsxs(qe.Fragment,{children:[a.jsx("span",{className:"text-gray-600",children:"/"}),a.jsx("button",{onClick:()=>F($),className:"hover:text-white transition-colors",children:H})]},$))]}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"file-upload",className:`flex items-center gap-2 bg-gradient-to-r from-primary to-secondary text-white font-bold py-2 px-4 rounded-md hover:shadow-lg transition-all transform hover:-translate-y-0.5 ${R?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,children:[a.jsx(Ca,{className:"w-5 h-5"}),R?"Enviando...":"Upload de Arquivo"]}),a.jsx("input",{id:"file-upload",type:"file",multiple:!0,className:"hidden",onChange:K,disabled:R})]})]}),g&&a.jsx("div",{className:"mb-4 p-3 bg-red-500/20 border border-red-500/30 text-red-400 rounded-md text-sm",children:g}),a.jsx("div",{className:"flex-grow overflow-x-auto bg-gray-900 rounded-lg border border-gray-700",children:a.jsxs("table",{className:"w-full text-left",children:[a.jsx("thead",{className:"bg-gray-900 border-b border-gray-700 text-gray-400 text-xs uppercase sticky top-0",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-3 font-semibold w-1/2",children:"Nome"}),a.jsx("th",{className:"p-3 font-semibold hidden sm:table-cell",children:"Tamanho"}),a.jsx("th",{className:"p-3 font-semibold hidden md:table-cell",children:"Modificado"}),a.jsx("th",{className:"p-3 font-semibold text-right",children:"Aes"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-800",children:f?a.jsx("tr",{children:a.jsx("td",{colSpan:4,className:"text-center p-10 text-gray-500",children:"Carregando arquivos..."})}):d.length===0?a.jsx("tr",{children:a.jsxs("td",{colSpan:4,className:"text-center p-12 text-gray-500 flex flex-col items-center justify-center",children:[a.jsx(Bc,{className:"w-12 h-12 mb-3 opacity-20"}),a.jsx("p",{children:"Esta pasta est vazia."})]})}):d.map(H=>{const $=H.id===null;return a.jsxs("tr",{className:"hover:bg-gray-800 transition-colors group",children:[a.jsx("td",{className:"p-3",children:a.jsxs("div",{className:"flex items-center gap-3",children:[$?a.jsx(Bc,{className:"w-5 h-5 text-yellow-500"}):a.jsx(hr,{className:"w-5 h-5 text-blue-400"}),$?a.jsx("button",{onClick:()=>G(H.name),className:"font-medium text-white hover:underline truncate text-left",children:H.name}):a.jsx("span",{className:"text-gray-300 truncate",children:H.name})]})}),a.jsx("td",{className:"p-3 text-gray-500 text-sm hidden sm:table-cell font-mono",children:$||!H.metadata?"-":s6(H.metadata.size)}),a.jsx("td",{className:"p-3 text-gray-500 text-sm hidden md:table-cell",children:H.updated_at?new Date(H.updated_at).toLocaleDateString():"-"}),a.jsx("td",{className:"p-3 text-right",children:!$&&a.jsxs("div",{className:"flex justify-end gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[a.jsx("button",{onClick:()=>I(H.name),disabled:C,className:"p-1.5 text-gray-400 hover:text-white bg-gray-700 hover:bg-gray-600 rounded",title:"Baixar",children:a.jsx(Ao,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>U(H),disabled:C,className:"p-1.5 text-gray-400 hover:text-red-400 bg-gray-700 hover:bg-gray-600 rounded",title:"Excluir",children:a.jsx(ps,{className:"w-4 h-4"})})]})})]},H.name)})})]})})]}):a.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center text-gray-500 p-8",children:[a.jsx(Bc,{className:"w-16 h-16 mb-4 text-gray-600 opacity-50"}),a.jsx("h2",{className:"text-xl font-semibold text-white mb-2",children:"Selecione um Bucket"}),a.jsx("p",{className:"max-w-md",children:"Escolha um dos buckets disponveis na barra lateral para visualizar e gerenciar seus arquivos."})]})})]}),a.jsx(sn,{isOpen:S,onClose:()=>E(!1),onConfirm:q,title:"Confirmar Excluso",message:a.jsxs("p",{children:["Tem certeza que deseja excluir o arquivo ",a.jsx("strong",{className:"text-white",children:b==null?void 0:b.name}),"? Esta ao  irreversvel."]}),confirmText:"Sim, Excluir",isConfirming:C})]})},n6=t=>{let e=document.querySelector("link[rel~='icon']");e||(e=document.createElement("link"),e.rel="icon",document.head.appendChild(e)),e.href=t},Sf=({bucketName:t,fileName:e,label:s,description:n,onUploadSuccess:i})=>{const[l,d]=N.useState(null),[u,f]=N.useState(!1),[m,g]=N.useState(""),[v,b]=N.useState(""),_=()=>{const{data:E}=Q.storage.from(t).getPublicUrl(e);fetch(E.publicUrl).then(C=>{C.ok?d(`${E.publicUrl}?t=${new Date().getTime()}`):d(null)}).catch(()=>d(null))};N.useEffect(()=>{_()},[t,e]),N.useEffect(()=>{if(m||v){const E=setTimeout(()=>{g(""),b("")},5e3);return()=>clearTimeout(E)}},[m,v]);const S=async E=>{g(""),b(""),f(!0);try{if(!E.target.files||E.target.files.length===0)throw new Error("Voc deve selecionar um arquivo para enviar.");const C=E.target.files[0],{error:T}=await Q.storage.from(t).upload(e,C,{upsert:!0});if(T)throw T;g(`${s} atualizado com sucesso!`);const R=`${Q.storage.from(t).getPublicUrl(e).data.publicUrl}?t=${new Date().getTime()}`;d(R),e.includes("favicon")&&n6(R),i&&i()}catch(C){const T=he(C);let R=`Erro ao enviar ${s.toLowerCase()}: ${T}`;T&&T.toLowerCase().includes("bucket not found")&&(R=`Erro: O bucket de armazenamento '${t}' no foi encontrado no Supabase. Verifique se ele foi criado e configurado como pblico.`),b(R)}finally{f(!1)}};return a.jsxs("div",{className:"bg-gray-900 p-4 rounded-md",children:[a.jsx("h3",{className:"font-semibold text-white",children:s}),a.jsx("p",{className:"text-sm text-gray-400 mb-4",children:n}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-20 h-20 bg-gray-800 rounded-md flex items-center justify-center",children:l?a.jsx("img",{src:l,alt:`${s} Preview`,className:"w-full h-full object-contain rounded-md"}):a.jsx(tn,{className:"w-10 h-10 text-gray-600"})}),a.jsxs("div",{className:"flex-grow",children:[a.jsxs("label",{htmlFor:`upload-${e}`,className:"w-full sm:w-auto flex justify-center items-center gap-2 px-4 py-2 border border-gray-600 rounded-md cursor-pointer hover:bg-gray-700/50 hover:border-primary transition-colors text-sm font-semibold",children:[a.jsx(Ca,{className:"w-5 h-5"}),u?"Enviando...":`Carregar ${s}`]}),a.jsx("input",{type:"file",id:`upload-${e}`,onChange:S,disabled:u,className:"hidden",accept:"image/png, image/jpeg, image/svg+xml, image/x-icon"})]})]}),m&&a.jsx("p",{className:"mt-2 text-sm text-green-400",children:m}),v&&a.jsx("p",{className:"mt-2 text-sm text-red-500",children:v})]})},r6=()=>{const{refreshSiteConfig:t,genres:e,refreshGenres:s,siteConfig:n}=ns(),[i,l]=N.useState([]),[d,u]=N.useState(!0),[f,m]=N.useState(null),[g,v]=N.useState("logo_and_name"),[b,_]=N.useState({opacity:.6,blur:0,color:"#000000"}),[S,E]=N.useState({head:"",bodyStart:"",bodyEnd:""}),[C,T]=N.useState({supabaseUrl:"",supabaseAnonKey:"",geminiApiKey:"",stripePublishableKey:""}),[R,A]=N.useState(""),[M,z]=N.useState(!1);N.useEffect(()=>{if(f){const U=setTimeout(()=>m(null),5e3);return()=>clearTimeout(U)}},[f]),N.useEffect(()=>{v(n.brandingOption),_({opacity:n.heroOpacity,blur:n.heroBlur,color:n.heroOverlayColor}),E({head:n.scriptHead||"",bodyStart:n.scriptBodyStart||"",bodyEnd:n.scriptBodyEnd||""}),T({supabaseUrl:n.supabaseUrl||"",supabaseAnonKey:n.supabaseAnonKey||"",geminiApiKey:n.geminiApiKey||"",stripePublishableKey:n.stripePublishableKey||""}),(async()=>{u(!0);try{const{data:q,error:H}=await Q.from("usuarios").select("*").in("role",["moderador","analista"]).order("nome",{ascending:!0});if(H)throw H;l(q||[])}catch(q){console.error("Error fetching staff data:",q),m({message:"Erro ao carregar equipe: "+he(q),type:"error"})}finally{u(!1)}})()},[n]);const F=async()=>{try{await Vi.updateSystemConfig({brandingOption:g,heroOpacity:b.opacity,heroBlur:b.blur,heroOverlayColor:b.color,scriptHead:S.head,scriptBodyStart:S.bodyStart,scriptBodyEnd:S.bodyEnd,supabaseUrl:C.supabaseUrl,supabaseAnonKey:C.supabaseAnonKey,geminiApiKey:C.geminiApiKey,stripePublishableKey:C.stripePublishableKey}),t(),m({message:"Configuraes visuais salvas com sucesso.",type:"success"})}catch(U){m({message:"Erro ao salvar: "+he(U),type:"error"})}},G=async()=>{try{await Vi.updateHomeBackground("home-bg.jpg"),t(),m({message:"Imagem de fundo atualizada com sucesso.",type:"success"})}catch(U){m({message:"Imagem enviada, mas falha ao atualizar config: "+he(U),type:"error"})}},K=async U=>{if(U.preventDefault(),!!R.trim()){z(!0);try{await Vi.addGenre(R.trim()),A(""),s(),m({message:"Gnero adicionado.",type:"success"})}catch(q){m({message:"Erro ao adicionar gnero: "+he(q),type:"error"})}finally{z(!1)}}},I=async U=>{if(window.confirm("Tem certeza que deseja remover este gnero?"))try{await Vi.removeGenre(U),s(),m({message:"Gnero removido.",type:"success"})}catch(q){m({message:"Erro ao remover gnero: "+he(q),type:"error"})}};return a.jsxs("div",{className:"text-white animate-fade-in",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold mb-2 text-primary font-poppins",children:"Configuraes do Sistema"}),a.jsx("p",{className:"text-gray-400",children:"Gerencie a identidade visual, recursos globais e permisses."})]}),a.jsx("button",{onClick:F,className:"bg-primary hover:bg-primary/90 text-dark font-bold py-2 px-6 rounded-lg shadow-lg transition-all transform hover:scale-105",children:"Salvar Alteraes"})]}),f&&a.jsx("div",{className:`p-4 mb-6 rounded-md ${f.type==="success"?"bg-green-500/20 text-green-300":"bg-red-500/20 text-red-300"}`,children:f.message}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-gray-800 p-6 rounded-xl border border-gray-700 shadow-lg",children:[a.jsx("h2",{className:"text-xl font-bold text-white mb-4 border-b border-gray-700 pb-2",children:"Identidade Visual"}),a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:"Exibio da Marca no Header"}),a.jsx("div",{className:"flex gap-4",children:[{value:"logo",label:"Apenas Logo"},{value:"name",label:"Apenas Nome"},{value:"logo_and_name",label:"Logo + Nome"}].map(U=>a.jsx("button",{onClick:()=>v(U.value),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors border ${g===U.value?"bg-primary/20 border-primary text-primary":"bg-gray-900 border-gray-600 text-gray-400 hover:bg-gray-700"}`,children:U.label},U.value))})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsx(Sf,{bucketName:"site",fileName:"logo.png",label:"Logo Principal",description:"Imagem exibida no cabealho (Recomendado: PNG transparente).",onUploadSuccess:t}),a.jsx(Sf,{bucketName:"site",fileName:"favicon.ico",label:"Favicon",description:"cone da aba do navegador (.ico ou .png).",onUploadSuccess:()=>{}}),a.jsxs("div",{className:"border-t border-gray-700 pt-6",children:[a.jsx("h3",{className:"font-bold text-white mb-4",children:"Hero (Banner Principal)"}),a.jsx(Sf,{bucketName:"site",fileName:"home-bg.jpg",label:"Imagem de Fundo",description:"Imagem de alta resoluo para o banner principal.",onUploadSuccess:G}),a.jsxs("div",{className:"mt-6 space-y-4 bg-gray-900 p-4 rounded-lg border border-gray-700",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between mb-1",children:[a.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Opacidade da Camada Escura"}),a.jsxs("span",{className:"text-xs text-primary font-mono",children:[Math.round(b.opacity*100),"%"]})]}),a.jsx("input",{type:"range",min:"0",max:"1",step:"0.05",value:b.opacity,onChange:U=>_({...b,opacity:parseFloat(U.target.value)}),className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-primary"})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between mb-1",children:[a.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Desfoque (Blur)"}),a.jsxs("span",{className:"text-xs text-primary font-mono",children:[b.blur,"px"]})]}),a.jsx("input",{type:"range",min:"0",max:"20",step:"1",value:b.blur,onChange:U=>_({...b,blur:parseInt(U.target.value)}),className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-primary"})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Cor da Camada"}),a.jsx("input",{type:"color",value:b.color,onChange:U=>_({...b,color:U.target.value}),className:"h-8 w-16 bg-transparent border border-gray-600 rounded cursor-pointer"})]}),a.jsx("div",{className:"text-xs text-gray-500 mt-2 text-center",children:'* Clique em "Salvar Alteraes" no topo para aplicar.'})]})]})]})]}),a.jsxs("div",{className:"bg-gray-800 p-6 rounded-xl border border-gray-700 shadow-lg",children:[a.jsx("h2",{className:"text-xl font-bold text-white mb-4 border-b border-gray-700 pb-2",children:"Scripts Externos & Tags"}),a.jsx("p",{className:"text-sm text-gray-400 mb-6",children:"Injete scripts customizados (GA4, Facebook Pixel, GTM) em partes especficas do site."}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Scripts no <head>"}),a.jsx("textarea",{value:S.head,onChange:U=>E({...S,head:U.target.value}),placeholder:"<!-- Google Tag Manager --> ...",className:"w-full h-32 bg-gray-900 border border-gray-600 rounded-md p-3 text-xs font-mono text-gray-300 focus:ring-1 focus:ring-primary outline-none"}),a.jsx("p",{className:"text-[10px] text-gray-500 mt-1",children:"Carregado antes de qualquer outro contedo."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Scripts no Incio do <body>"}),a.jsx("textarea",{value:S.bodyStart,onChange:U=>E({...S,bodyStart:U.target.value}),placeholder:"<!-- GTM noscript --> ...",className:"w-full h-32 bg-gray-900 border border-gray-600 rounded-md p-3 text-xs font-mono text-gray-300 focus:ring-1 focus:ring-primary outline-none"}),a.jsx("p",{className:"text-[10px] text-gray-500 mt-1",children:"Ideal para tags noscript ou widgets de chat."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Scripts no Final do <body>"}),a.jsx("textarea",{value:S.bodyEnd,onChange:U=>E({...S,bodyEnd:U.target.value}),placeholder:"<!-- Custom scripts --> ...",className:"w-full h-32 bg-gray-900 border border-gray-600 rounded-md p-3 text-xs font-mono text-gray-300 focus:ring-1 focus:ring-primary outline-none"}),a.jsx("p",{className:"text-[10px] text-gray-500 mt-1",children:"Carregado aps toda a estrutura visual estar pronta."})]})]})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-gray-800 p-6 rounded-xl border border-gray-700 shadow-lg",children:[a.jsx("h2",{className:"text-xl font-bold text-white mb-4 border-b border-gray-700 pb-2",children:"Gneros Musicais"}),a.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Adicione ou remova gneros disponveis para os artistas."}),a.jsxs("form",{onSubmit:K,className:"flex gap-2 mb-6",children:[a.jsx("input",{type:"text",value:R,onChange:U=>A(U.target.value),placeholder:"Novo Gnero (ex: Jazz Fusion)",className:"flex-grow bg-gray-900 border border-gray-600 rounded-md py-2 px-3 text-white focus:outline-none focus:ring-2 focus:ring-primary text-sm"}),a.jsx("button",{type:"submit",disabled:M||!R.trim(),className:"bg-primary hover:bg-primary/80 text-dark font-bold px-4 py-2 rounded-md transition-colors disabled:opacity-50",children:a.jsx(il,{className:"w-5 h-5"})})]}),a.jsx("div",{className:"flex flex-wrap gap-2 max-h-60 overflow-y-auto custom-scrollbar p-1",children:e.length>0?e.map(U=>a.jsxs("div",{className:"group flex items-center gap-2 bg-gray-900 border border-gray-600 px-3 py-1.5 rounded-full text-sm hover:border-primary transition-colors",children:[a.jsx("span",{className:"text-gray-200",children:U.nome}),a.jsx("button",{onClick:()=>I(U.id),className:"text-gray-500 hover:text-red-400 opacity-0 group-hover:opacity-100 transition-opacity",title:"Remover",children:a.jsx(ps,{className:"w-3 h-3"})})]},U.id)):a.jsx("p",{className:"text-gray-500 italic text-sm",children:"Nenhum gnero cadastrado."})})]}),a.jsxs("div",{className:"bg-gray-800 p-6 rounded-xl border border-gray-700 shadow-lg border-l-4 border-l-red-500",children:[a.jsx("h2",{className:"text-xl font-bold text-white mb-4 border-b border-gray-700 pb-2 flex items-center gap-2",children:"Chaves de API & Integraes"}),a.jsx("p",{className:"text-sm text-gray-400 mb-6 font-medium bg-red-500/10 p-2 rounded border border-red-500/20",children:"Cuidado: Estas chaves so sensveis. Apenas altere se souber o que est fazendo."}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase mb-1",children:"Supabase URL"}),a.jsx("input",{type:"text",value:C.supabaseUrl,onChange:U=>T({...C,supabaseUrl:U.target.value}),className:"w-full bg-gray-900 border border-gray-700 rounded-md py-2 px-3 text-sm text-gray-300 font-mono",placeholder:"https://your-project.supabase.co"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase mb-1",children:"Supabase Anon Key"}),a.jsx("input",{type:"password",value:C.supabaseAnonKey,onChange:U=>T({...C,supabaseAnonKey:U.target.value}),className:"w-full bg-gray-900 border border-gray-700 rounded-md py-2 px-3 text-sm text-gray-300 font-mono",placeholder:"eyJhbGciOiJIUzI1..."})]}),a.jsxs("div",{className:"pt-4 border-t border-gray-700 mt-4",children:[a.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase mb-1",children:"Gemini AI API Key"}),a.jsx("input",{type:"password",value:C.geminiApiKey,onChange:U=>T({...C,geminiApiKey:U.target.value}),className:"w-full bg-gray-900 border border-gray-700 rounded-md py-2 px-3 text-sm text-gray-300 font-mono",placeholder:"AIzaSy..."}),a.jsx("p",{className:"text-[10px] text-gray-500 mt-1 italic",children:"Usada para Matchmaking e Anlise de Sentimento."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-400 uppercase mb-1",children:"Stripe Publishable Key"}),a.jsx("input",{type:"text",value:C.stripePublishableKey,onChange:U=>T({...C,stripePublishableKey:U.target.value}),className:"w-full bg-gray-900 border border-gray-700 rounded-md py-2 px-3 text-sm text-gray-300 font-mono",placeholder:"pk_test_..."})]})]})]}),a.jsxs("div",{className:"bg-gray-800 p-6 rounded-xl border border-gray-700 shadow-lg",children:[a.jsx("div",{className:"flex justify-between items-center mb-4 border-b border-gray-700 pb-2",children:a.jsx("h2",{className:"text-xl font-bold text-white",children:"Equipe Administrativa"})}),d?a.jsx("p",{className:"text-gray-500 text-center py-4",children:"Carregando equipe..."}):i.length===0?a.jsx("p",{className:"text-gray-500 text-center py-4",children:"Nenhum membro da equipe encontrado."}):a.jsx("div",{className:"space-y-3",children:i.map(U=>a.jsxs("div",{className:"flex items-center justify-between bg-gray-900 p-3 rounded-lg border border-gray-700",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-700 flex items-center justify-center font-bold text-xs text-gray-400 overflow-hidden",children:U.foto_url?a.jsx("img",{src:Q.storage.from("perfis").getPublicUrl(U.foto_url).data.publicUrl,alt:U.nome,className:"w-full h-full object-cover"}):U.nome.substring(0,2).toUpperCase()}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-bold text-white",children:U.nome}),a.jsx("p",{className:"text-xs text-gray-500",children:U.email})]})]}),a.jsx("span",{className:"text-xs px-2 py-1 rounded bg-gray-800 text-gray-300 border border-gray-600 capitalize",children:U.role})]},U.id))}),a.jsx("p",{className:"text-xs text-gray-500 mt-4 text-center",children:"Para adicionar novos administradores, altere o 'role' do usurio na pgina de Usurios ou diretamente no banco de dados."})]})]})]})]})},o6=()=>{const{user:t,profileMissing:e,refreshProfile:s,loading:n}=Ps(),i=Xt(),[l,d]=N.useState("artista"),[u,f]=N.useState(""),[m,g]=N.useState(""),[v,b]=N.useState(""),[_,S]=N.useState(!1);N.useEffect(()=>{var C;n||(t?e?(C=t.user_metadata)!=null&&C.full_name&&!u&&f(t.user_metadata.full_name):i("/painel"):i("/login"))},[t,e,n,i,u]);const E=async C=>{if(C.preventDefault(),!(_||!t)){if(!u.trim()||!m.trim()){b("Preencha todos os campos obrigatrios.");return}b(""),S(!0);try{const{data:T}=await Q.from("usuarios").select("id").eq("auth_id",t.id).maybeSingle();let R=T==null?void 0:T.id;if(R)await Q.from("usuarios").update({nome:u.trim(),cidade:m.trim(),tipo:l}).eq("id",R);else{const{data:F,error:G}=await Q.from("usuarios").insert({auth_id:t.id,email:t.email,nome:u.trim(),cidade:m.trim(),tipo:l}).select("id").single();if(G)throw G;R=F.id}const A=l==="artista"?"artistas":"estabelecimentos",M=l==="artista"?"estabelecimentos":"artistas";await Q.from(M).delete().eq("usuario_id",R);const{error:z}=await Q.from(A).upsert({usuario_id:R},{onConflict:"usuario_id"});if(z)throw z;await s(),i("/painel")}catch(T){b("Erro ao finalizar cadastro: "+he(T))}finally{S(!1)}}};return n||!e?a.jsx("div",{className:"flex justify-center items-center h-screen bg-dark",children:a.jsx("div",{className:"text-white text-xl animate-pulse",children:"Sincronizando..."})}):a.jsxs("main",{className:"relative min-h-[calc(100vh-144px)] flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:[a.jsx("div",{className:"absolute inset-0 bg-cover bg-center",style:{backgroundImage:"url('https://images.unsplash.com/photo-1516321497487-e288fb19713f?q=80&w=2070&auto=format&fit=crop')",filter:"brightness(0.2)"}}),a.jsxs("section",{className:"relative z-10 max-w-md w-full space-y-8 bg-gray-900/90 backdrop-blur-xl p-10 rounded-3xl shadow-2xl border border-gray-800",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"mx-auto h-16 w-16 bg-primary/10 rounded-full flex items-center justify-center mb-4 border border-primary/20",children:a.jsx(Ea,{className:"h-10 w-10 text-primary"})}),a.jsx("h2",{className:"text-3xl font-black text-white font-poppins",children:"Finalizar Perfil"}),a.jsx("p",{className:"mt-2 text-sm text-gray-400",children:"Escolha como deseja atuar na plataforma."})]}),a.jsxs("form",{className:"mt-8 space-y-6",onSubmit:E,children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"Tipo de Conta"}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsx("button",{type:"button",onClick:()=>d("artista"),className:`py-4 rounded-xl text-sm font-black transition-all ${l==="artista"?"bg-primary text-dark shadow-lg shadow-primary/20":"bg-gray-800 text-gray-400 hover:bg-gray-700 border border-gray-700"}`,children:"Sou Artista"}),a.jsx("button",{type:"button",onClick:()=>d("estabelecimento"),className:`py-4 rounded-xl text-sm font-black transition-all ${l==="estabelecimento"?"bg-secondary text-white shadow-lg shadow-secondary/20":"bg-gray-800 text-gray-400 hover:bg-gray-700 border border-gray-700"}`,children:"Sou Local"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"Nome de Exibio"}),a.jsx("input",{type:"text",required:!0,className:"w-full bg-gray-800 border border-gray-700 rounded-xl py-3 px-4 text-white focus:ring-2 focus:ring-primary outline-none transition-all",placeholder:l==="artista"?"Nome da banda ou DJ":"Nome do Bar/Casa",value:u,onChange:C=>f(C.target.value)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-2 ml-1",children:"Cidade Base"}),a.jsx("input",{type:"text",required:!0,className:"w-full bg-gray-800 border border-gray-700 rounded-xl py-3 px-4 text-white focus:ring-2 focus:ring-primary outline-none transition-all",placeholder:"Ex: So Paulo, SP",value:m,onChange:C=>g(C.target.value)})]})]}),v&&a.jsx("p",{className:"text-red-400 text-xs text-center font-bold bg-red-400/10 p-3 rounded-lg border border-red-400/20 animate-shake",children:v}),a.jsx("button",{type:"submit",disabled:_,className:"w-full bg-gradient-to-r from-primary to-secondary text-dark font-black py-4 rounded-xl shadow-xl transition-all transform hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50",children:_?"Salvando...":"Entrar no RESONA"})]})]})]})},i6=({post:t})=>{const e=t.content.substring(0,120)+"...",s=new Date(t.created_at).toLocaleDateString("pt-BR",{day:"2-digit",month:"long",year:"numeric"}),n=()=>{if(t.image_url){const{data:i}=Q.storage.from("blog").getPublicUrl(t.image_url);return i.publicUrl}return"https://images.unsplash.com/photo-1499428665502-503f6c608263?q=80&w=2070&auto=format&fit=crop"};return a.jsxs(Se,{to:`/blog/${t.slug}`,className:"block bg-gray-800 rounded-lg overflow-hidden group transform hover:-translate-y-2 transition-transform duration-300 ease-in-out shadow-lg hover:shadow-primary/30",children:[a.jsx("img",{src:n(),alt:t.title,className:"w-full h-56 object-cover group-hover:opacity-80 transition-opacity duration-300"}),a.jsxs("div",{className:"p-6",children:[a.jsx("h3",{className:"text-xl font-bold text-white font-poppins mb-2 group-hover:text-primary transition-colors",children:t.title}),a.jsx("p",{className:"text-gray-400 text-sm mb-4 h-16 overflow-hidden",children:e}),a.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[a.jsx("span",{children:t.author_name}),a.jsx("span",{className:"mx-2",children:""}),a.jsx("span",{children:s})]})]})]})},l6=()=>a.jsxs("div",{className:"bg-gray-800 rounded-lg overflow-hidden shadow-lg animate-pulse",children:[a.jsx("div",{className:"w-full h-56 bg-gray-700"}),a.jsxs("div",{className:"p-6",children:[a.jsx("div",{className:"h-5 bg-gray-700 rounded w-3/4 mb-3"}),a.jsx("div",{className:"h-3 bg-gray-700 rounded w-full mb-2"}),a.jsx("div",{className:"h-3 bg-gray-700 rounded w-5/6 mb-4"}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"h-3 bg-gray-700 rounded w-1/4"}),a.jsx("div",{className:"mx-2 text-gray-700",children:""}),a.jsx("div",{className:"h-3 bg-gray-700 rounded w-1/3"})]})]})]}),Lb=9,c6=({post:t})=>{const e=()=>t.image_url&&Ie.getPublicUrl("blog",t.image_url)||"https://images.unsplash.com/photo-1499428665502-503f6c608263?q=80&w=2070&auto=format&fit=crop";return a.jsxs(Se,{to:`/blog/${t.slug}`,className:"group relative w-full h-[400px] md:h-[500px] rounded-2xl overflow-hidden block shadow-2xl mb-12 border border-gray-800 hover:border-gray-600 transition-all duration-300",children:[a.jsxs("div",{className:"absolute inset-0 bg-gray-900",children:[a.jsx("img",{src:e(),alt:t.title,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-105 opacity-80 group-hover:opacity-100"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-dark via-dark/60 to-transparent"})]}),a.jsxs("div",{className:"absolute bottom-0 left-0 p-6 md:p-10 w-full md:w-2/3",children:[a.jsx("span",{className:"inline-block px-3 py-1 bg-primary/20 text-primary text-xs font-bold rounded-full border border-primary/30 uppercase tracking-wider mb-4 backdrop-blur-sm",children:"Destaque"}),a.jsx("h2",{className:"text-3xl md:text-5xl font-black text-white font-poppins mb-4 leading-tight drop-shadow-lg group-hover:text-primary transition-colors",children:t.title}),a.jsxs("p",{className:"text-gray-200 text-lg line-clamp-2 md:line-clamp-3 mb-6 font-light drop-shadow-md",children:[t.content.replace(/#|`|\*|_/g,"").substring(0,150),"..."]}),a.jsxs("div",{className:"flex items-center gap-2 text-white font-bold text-sm",children:["Ler Artigo Completo ",a.jsx(Ms,{className:"w-4 h-4 transition-transform group-hover:translate-x-1"})]})]})]})},d6=()=>{const{siteConfig:t}=ns(),[e,s]=N.useState([]),[n,i]=N.useState(!0),[l,d]=N.useState(!1),[u,f]=N.useState(null),[m,g]=N.useState(0),[v,b]=N.useState(!1),[_,S]=N.useState(0),[E,C]=N.useState(""),[T,R]=N.useState(""),A=t.homeBackgroundUrl||"https://images.unsplash.com/photo-1505238680356-6678f244482a?q=80&w=2070&auto=format&fit=crop";N.useEffect(()=>{const U=setTimeout(()=>R(E),500);return()=>clearTimeout(U)},[E]);const M=N.useCallback(async(U,q=!1)=>{U===0?i(!0):d(!0),f(null);try{const{data:H,count:$}=await vo.getPublishedPosts({page:U,pageSize:Lb,search:T});H&&(s(U===0?H:ie=>[...ie,...H]),$!==null&&(S($),b((U+1)*Lb<$))),g(U)}catch(H){f(he(H)),console.error(H)}finally{i(!1),d(!1)}},[T]);N.useEffect(()=>{M(0,!0)},[T,M]);const z=()=>{!l&&v&&M(m+1)},F=()=>{C("")},G=!T&&m===0&&e.length>0,K=G?e[0]:null,I=G?e.slice(1):e;return a.jsxs("div",{className:"bg-dark text-white font-sans min-h-screen",children:[a.jsx(Qt,{title:"Blog",description:"Notcias, dicas e histrias do universo da msica ao vivo para artistas e produtores."}),a.jsxs("section",{className:"relative pt-32 pb-24 flex items-center justify-center text-center px-4 overflow-hidden",children:[a.jsxs("div",{className:"absolute inset-0 z-0 select-none pointer-events-none",children:[a.jsx("img",{src:A,className:"w-full h-full object-cover transition-all duration-700 ease-in-out scale-105",style:{filter:`blur(${t.heroBlur}px)`},alt:"Background"}),a.jsx("div",{className:"absolute inset-0 transition-all duration-500 ease-in-out mix-blend-multiply",style:{backgroundColor:t.heroOverlayColor,opacity:Math.max(t.heroOpacity,.6)}}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-dark/50 to-dark"})]}),a.jsxs("div",{className:"relative z-10 w-full max-w-4xl mx-auto space-y-6 animate-fade-in",children:[a.jsxs("h1",{className:"text-4xl md:text-6xl font-black text-white tracking-tight leading-none drop-shadow-2xl",children:["Blog ",a.jsx("span",{className:"text-primary",children:"RESONA"})]}),a.jsx("p",{className:"max-w-2xl mx-auto text-lg md:text-xl text-gray-200 font-light leading-relaxed drop-shadow-md",children:"Notcias, dicas e histrias do universo da msica ao vivo."})]})]}),a.jsxs("section",{id:"blog-posts",className:"container mx-auto px-4 sm:px-6 lg:px-8 pb-24 -mt-16 relative z-20",children:[a.jsx("div",{className:"bg-gray-900/80 backdrop-blur-xl p-6 rounded-2xl shadow-2xl border border-gray-700/50 mb-12",children:a.jsx("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:a.jsxs("div",{className:"relative flex-grow w-full group",children:[a.jsx("input",{type:"text",placeholder:"Buscar artigos...",value:E,onChange:U=>C(U.target.value),className:"w-full bg-gray-800/50 border border-gray-600 rounded-xl py-3 pl-11 pr-12 text-white focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all placeholder-gray-500 group-hover:bg-gray-800"}),a.jsx(ms,{className:"absolute left-4 top-3.5 w-5 h-5 text-gray-400 group-focus-within:text-primary transition-colors"}),E&&a.jsx("button",{onClick:F,className:"absolute right-4 top-3.5 text-gray-500 hover:text-white transition-colors",children:a.jsx(It,{className:"w-5 h-5"})})]})})}),n&&m===0?a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:Array.from({length:6}).map((U,q)=>a.jsx(l6,{},q))}):u?a.jsx("p",{className:"text-center text-red-400 bg-red-500/10 p-6 rounded-xl border border-red-500/20",children:u}):e.length>0?a.jsxs(a.Fragment,{children:[K&&a.jsx(c6,{post:K}),T&&a.jsx("div",{className:"mb-6 px-2",children:a.jsxs("h2",{className:"text-xl font-bold text-white",children:['Resultados para "',T,'" ',a.jsxs("span",{className:"text-gray-500 text-sm font-normal ml-2",children:["(",_," encontrados)"]})]})}),I.length>0?a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8 mb-16",children:I.map(U=>a.jsx(i6,{post:U},U.id))}):!K&&a.jsx("div",{className:"text-center py-10 text-gray-500",children:"Sem resultados adicionais."}),v&&a.jsx("div",{className:"text-center",children:a.jsx("button",{onClick:z,disabled:l,className:"bg-gray-800 border border-gray-700 text-white font-bold py-3 px-10 rounded-full hover:bg-gray-700 hover:border-gray-500 transition-all duration-300 disabled:opacity-50 transform hover:scale-105 shadow-lg flex items-center gap-2 mx-auto",children:l?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Carregando..."]}):"Carregar Mais Artigos"})})]}):a.jsx("div",{className:"py-12",children:a.jsx(ja,{icon:n_,title:"Nenhum artigo encontrado",description:T?`No encontramos artigos com o termo "${T}".`:"O blog ainda est sendo populado. Volte em breve!",actionLabel:T?"Limpar Busca":void 0,onAction:T?F:void 0})})]})]})},u6=()=>{const{slug:t}=ud(),[e,s]=N.useState(null),[n,i]=N.useState(!0),[l,d]=N.useState(null);if(N.useEffect(()=>{(async()=>{if(t){i(!0);try{const v=await vo.getBySlug(t);if(!v)throw new Error("Post no encontrado.");s(v)}catch(v){d(he(v)),console.error(v)}finally{i(!1)}}})()},[t]),n)return a.jsx("div",{className:"flex justify-center items-center h-screen bg-dark text-white",children:"Carregando..."});if(l||!e)return a.jsxs("div",{className:"flex flex-col justify-center items-center h-screen bg-dark text-red-500",children:[a.jsx("h2",{className:"text-2xl font-bold",children:"Post no encontrado"}),a.jsx("p",{className:"mt-2",children:l}),a.jsx(Se,{to:"/blog",className:"mt-4 text-primary underline",children:"Voltar para o blog"})]});const u=new Date(e.created_at).toLocaleDateString("pt-BR",{day:"2-digit",month:"long",year:"numeric"}),m=(()=>{if(e.image_url){const{data:g}=Q.storage.from("blog").getPublicUrl(e.image_url);return g.publicUrl}return"https://images.unsplash.com/photo-1505238680356-6678f244482a?q=80&w=2070&auto-format&fit=crop"})();return a.jsxs("div",{className:"bg-dark text-white font-sans",children:[a.jsx(Qt,{title:e.title,description:e.content.substring(0,160),image:m,type:"article"}),a.jsxs("div",{className:"relative h-96",children:[a.jsx("img",{src:m,alt:e.title,className:"w-full h-full object-cover"}),a.jsx("div",{className:"absolute inset-0 bg-black/60 flex flex-col justify-end p-8 md:p-12",children:a.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsx("h1",{className:"text-3xl md:text-5xl font-extrabold text-white font-poppins",children:e.title}),a.jsxs("p",{className:"mt-2 text-gray-300",children:["Por ",e.author_name,"  ",u]})]})})]}),a.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-12 md:py-16",children:a.jsx("article",{className:"prose prose-invert lg:prose-xl max-w-4xl mx-auto",children:e.content.split(`
`).map((g,v)=>a.jsx("p",{children:g},v))})}),a.jsx("style",{children:`
                .prose {
                    color: #d1d5db; /* text-gray-300 */
                }
                .prose p {
                    margin-bottom: 1.25em;
                    line-height: 1.7;
                }
                .prose h1, .prose h2, .prose h3 {
                    color: #ffffff;
                    font-family: 'Poppins', sans-serif;
                }
                .prose a {
                    color: #51D2EE; /* primary */
                    text-decoration: none;
                }
                .prose a:hover {
                    text-decoration: underline;
                }
                .prose strong {
                    color: #ffffff;
                }
                .prose-xl {
                    font-size: 1.25rem;
                }
            `})]})},h6=({className:t="w-6 h-6"})=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.5L16.732 3.732z"})}),f6=({bucketName:t,folderPath:e,initialUrl:s,onUpload:n,onRemove:i})=>{const[l,d]=N.useState(null),[u,f]=N.useState(!1),[m,g]=N.useState("");N.useEffect(()=>{if(s){const{data:_}=Q.storage.from(t).getPublicUrl(s);d(`${_.publicUrl}?t=${new Date().getTime()}`)}else d(null)},[s,t]);const v=async _=>{g("");try{if(f(!0),!_.target.files||_.target.files.length===0)throw new Error("Selecione uma imagem para enviar.");if(!e)throw new Error("O caminho da pasta de destino  necessrio para o upload.");const S=_.target.files[0],E=S.name.split(".").pop(),C=`${Date.now()}-${Math.random().toString(36).substring(2)}.${E}`,T=`${e}/${C}`,{error:R}=await Q.storage.from(t).upload(T,S);if(R)throw R;n(T)}catch(S){g(he(S))}finally{f(!1)}},b=_=>{_.preventDefault(),_.stopPropagation(),i(),d(null)};return a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Imagem de Capa"}),a.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-600 border-dashed rounded-md",children:a.jsxs("div",{className:"space-y-1 text-center w-full",children:[l?a.jsxs("div",{className:"relative group w-full h-48",children:[a.jsx("img",{src:l,alt:"Preview",className:"mx-auto h-full w-auto rounded-md object-contain"}),a.jsx("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 flex items-center justify-center transition-opacity",children:a.jsx("button",{onClick:b,className:"p-2 bg-red-600 rounded-full text-white hover:bg-red-700",children:a.jsx(ps,{className:"w-5 h-5"})})})]}):a.jsx(tn,{className:"mx-auto h-12 w-12 text-gray-500"}),a.jsx("div",{className:"flex text-sm text-gray-500 justify-center",children:a.jsxs("label",{htmlFor:"file-upload",className:"relative cursor-pointer bg-gray-900 rounded-md font-medium text-primary hover:text-primary/80 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-offset-gray-900 focus-within:ring-primary px-1",children:[a.jsx("span",{children:u?"Enviando...":l?"Alterar imagem":"Carregar uma imagem"}),a.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:v,disabled:u,accept:"image/*"})]})}),a.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF at 5MB"})]})}),m&&a.jsx("p",{className:"mt-2 text-sm text-red-500 text-center",children:m})]})},m6=()=>a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12h8a4 4 0 100-8H6v8zm0 0h10a4 4 0 110 8H6v-8z"})}),p6=()=>a.jsxs("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"}),a.jsx("path",{d:"M19 4h-9M14 20H5",strokeLinecap:"round",strokeLinejoin:"round"})]}),g6=()=>a.jsxs("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 15L3 9m0 0l6-6M3 9h12a6 6 0 010 12h-3"}),a.jsx("path",{d:"M4 12h16",strokeLinecap:"round",strokeLinejoin:"round"})]}),x6=()=>a.jsxs("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"}),a.jsx("path",{d:"M4 6h.01M4 12h.01M4 18h.01",strokeWidth:4})]}),y6=()=>a.jsxs("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7 7h12M7 12h12M7 17h12M3 7v14"}),a.jsx("text",{x:"2",y:"12",fontSize:"8",fill:"currentColor",children:"1"})]}),v6=()=>a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})}),b6=()=>a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"})}),w6=()=>a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),N6=()=>a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),_6=()=>a.jsx("span",{className:"font-bold text-xs",children:"H1"}),S6=()=>a.jsx("span",{className:"font-bold text-xs",children:"H2"}),j6=()=>a.jsx("span",{className:"font-bold text-xs",children:"H3"}),E6=()=>a.jsx("span",{className:"font-bold text-xs text-center w-full block",children:"---"}),C6=({content:t})=>{const e=s=>s?{__html:`<p class="mb-4">${s.replace(/^# (.*$)/gim,'<h1 class="text-3xl font-bold text-white mb-4 mt-6">$1</h1>').replace(/^## (.*$)/gim,'<h2 class="text-2xl font-bold text-white mb-3 mt-5">$1</h2>').replace(/^### (.*$)/gim,'<h3 class="text-xl font-bold text-white mb-2 mt-4">$1</h3>').replace(/\*\*(.*)\*\*/gim,"<strong>$1</strong>").replace(/\*(.*)\*/gim,"<em>$1</em>").replace(/~~(.*)~~/gim,"<del>$1</del>").replace(/^> (.*$)/gim,'<blockquote class="border-l-4 border-primary pl-4 py-2 my-4 bg-gray-800 text-gray-300 italic">$1</blockquote>').replace(/!\[(.*?)\]\((.*?)\)/gim,'<img src="$2" alt="$1" class="w-full rounded-lg my-4" />').replace(/\[(.*?)\]\((.*?)\)/gim,'<a href="$2" class="text-primary hover:underline" target="_blank">$1</a>').replace(/^---$/gim,'<hr class="border-gray-700 my-6" />').replace(/^\- (.*$)/gim,'<li class="ml-4 list-disc">$1</li>').replace(/^\d+\. (.*$)/gim,'<li class="ml-4 list-decimal">$1</li>').replace(/```([\s\S]*?)```/gim,'<pre class="bg-gray-950 p-4 rounded-md overflow-x-auto my-4 text-sm font-mono text-gray-300"><code>$1</code></pre>').replace(/`([^`]+)`/gim,'<code class="bg-gray-800 px-1 py-0.5 rounded text-sm font-mono text-primary">$1</code>').replace(/\n\n/gim,'</p><p class="mb-4">').replace(/\n/gim,"<br />")}</p>`}:{__html:'<p class="text-gray-500 italic">Nada para pr-visualizar.</p>'};return a.jsx("div",{className:"prose prose-invert max-w-none text-gray-300",dangerouslySetInnerHTML:e(t)})},T6=()=>{const[t,e]=N.useState([]),[s,n]=N.useState(!0),[i,l]=N.useState(null),[d,u]=N.useState(""),[f,m]=N.useState(!1),[g,v]=N.useState(null),[b,_]=N.useState(!1),[S,E]=N.useState(!1),[C,T]=N.useState("write"),[R,A]=N.useState(null),[M,z]=N.useState(!1),[F,G]=N.useState(null),[K,I]=N.useState(!1),U=N.useRef(null),q=N.useCallback(async()=>{n(!0),l(null);try{const ee=await vo.listAll();e(ee)}catch(ee){l(he(ee))}finally{n(!1)}},[]);N.useEffect(()=>{q()},[q]),N.useLayoutEffect(()=>{U.current&&R!==null&&(U.current.setSelectionRange(R,R),U.current.focus(),A(null))},[g==null?void 0:g.content,R]);const H=()=>{v({title:"",slug:"",author_name:"",content:"",status:"draft",image_url:""}),T("write"),m(!0)},$=ee=>{v({...ee}),T("write"),m(!0)},ie=ee=>{G(ee),z(!0)},re=async()=>{if(F){I(!0);try{await vo.delete(F.id),e(ee=>ee.filter(me=>me.id!==F.id)),z(!1),G(null)}catch(ee){alert("Erro ao excluir: "+he(ee))}finally{I(!1)}}},P=()=>{m(!1),v(null)},O=()=>{E(!0),setTimeout(()=>E(!1),500)},Y=ee=>{const me=ee.target.value,je=me.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9\s-]/g,"").trim().replace(/\s+/g,"-");v(pe=>pe?{...pe,title:me,slug:pe.slug?pe.slug:je}:null)},ne=ee=>{v(me=>me?{...me,image_url:ee}:null)},le=()=>{v(ee=>ee?{...ee,image_url:""}:null)},L=async()=>{if(!g||!g.title||!g.content){alert("Ttulo e Contedo so obrigatrios.");return}_(!0);try{const ee=await vo.save(g);e(me=>me.find(pe=>pe.id===ee.id)?me.map(pe=>pe.id===ee.id?ee:pe):[ee,...me]),P()}catch(ee){alert("Erro ao salvar: "+he(ee))}finally{_(!1)}},D=(ee,me="")=>{if(!U.current||!g)return;const je=U.current,pe=je.selectionStart,Ne=je.selectionEnd,Me=je.value,ue=Me.substring(pe,Ne),_e=Me.substring(0,pe),Ue=Me.substring(Ne);let Fe=ee;["#","-",">","1."].some(pt=>ee.startsWith(pt))&&pe>0&&Me[pe-1]!==`
`&&(Fe=`
`+ee);const dt=`${_e}${Fe}${ue}${me}${Ue}`;v(pt=>pt?{...pt,content:dt}:null),A(pe===Ne?pe+Fe.length:pe+Fe.length+ue.length+me.length)},te=t.filter(ee=>ee.title.toLowerCase().includes(d.toLowerCase())||ee.author_name.toLowerCase().includes(d.toLowerCase())),se=({onClick:ee,icon:me,title:je,label:pe})=>a.jsxs("button",{type:"button",onMouseDown:Ne=>Ne.preventDefault(),onClick:ee,className:"p-1.5 hover:bg-gray-700 hover:text-white rounded text-gray-400 transition-colors flex items-center justify-center min-w-[32px]",title:je,children:[me&&a.jsx(me,{}),pe&&a.jsx("span",{className:"font-bold text-xs",children:pe})]}),fe=()=>a.jsx("div",{className:"w-px h-5 bg-gray-600 mx-1"});return a.jsxs("div",{className:"text-white animate-fade-in relative pb-20",children:[a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold mb-2 text-primary font-poppins",children:"Gerenciar Blog"}),a.jsx("p",{className:"text-gray-400",children:"Crie, edite e publique contedo para o blog."})]}),a.jsxs("button",{onClick:H,className:"flex items-center gap-2 bg-gradient-to-r from-primary to-secondary text-white font-bold py-2 px-6 rounded-full hover:shadow-lg hover:shadow-secondary/20 transition-all transform hover:scale-105",children:[a.jsx(il,{className:"w-5 h-5"}),"Novo Post"]})]}),a.jsx("div",{className:"bg-gray-800 p-4 rounded-lg mb-6 border border-gray-700 flex items-center gap-4",children:a.jsxs("div",{className:"relative flex-grow",children:[a.jsx("input",{type:"text",placeholder:"Buscar postagens...",value:d,onChange:ee=>u(ee.target.value),className:"w-full bg-gray-900 border border-gray-600 rounded-md py-2 pl-10 pr-4 focus:outline-none focus:ring-2 focus:ring-secondary text-white"}),a.jsx(ms,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"})]})}),a.jsx("div",{className:"bg-gray-800 rounded-xl overflow-hidden shadow-lg border border-gray-700",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left",children:[a.jsx("thead",{className:"bg-gray-900 border-b border-gray-700 text-gray-400 text-xs uppercase font-semibold",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4",children:"Ttulo"}),a.jsx("th",{className:"p-4",children:"Autor"}),a.jsx("th",{className:"p-4 text-center",children:"Status"}),a.jsx("th",{className:"p-4",children:"Data"}),a.jsx("th",{className:"p-4 text-right",children:"Aes"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-700 text-sm",children:s?a.jsx("tr",{children:a.jsx("td",{colSpan:5,className:"p-8 text-center text-gray-500",children:"Carregando..."})}):te.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:5,className:"p-8 text-center text-gray-500",children:"Nenhuma postagem encontrada."})}):te.map(ee=>a.jsxs("tr",{className:"hover:bg-gray-700/30 transition-colors",children:[a.jsx("td",{className:"p-4 font-medium text-white",children:ee.title}),a.jsx("td",{className:"p-4 text-gray-300",children:ee.author_name}),a.jsx("td",{className:"p-4 text-center",children:a.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold uppercase ${ee.status==="published"?"bg-green-500/20 text-green-300":"bg-yellow-500/20 text-yellow-300"}`,children:ee.status==="published"?"Publicado":"Rascunho"})}),a.jsx("td",{className:"p-4 text-gray-400",children:new Date(ee.created_at).toLocaleDateString()}),a.jsx("td",{className:"p-4 text-right",children:a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx(Se,{to:`/blog/${ee.slug}`,target:"_blank",className:"p-2 text-gray-400 hover:text-white hover:bg-gray-700 rounded transition-colors",title:"Visualizar",children:a.jsx(on,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>$(ee),className:"p-2 text-blue-400 hover:text-blue-300 hover:bg-blue-500/10 rounded transition-colors",title:"Editar",children:a.jsx(h6,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>ie(ee),className:"p-2 text-red-400 hover:text-red-300 hover:bg-red-500/10 rounded transition-colors",title:"Excluir",children:a.jsx(ps,{className:"w-5 h-5"})})]})})]},ee.id))})]})})}),f&&g&&vw.createPortal(a.jsx("div",{className:"fixed inset-0 bg-black/80 z-[60] flex justify-center items-center p-4 overflow-y-auto backdrop-blur-sm",onClick:O,children:a.jsxs("div",{className:`bg-gray-800 rounded-xl shadow-2xl w-full max-w-4xl border border-gray-700 flex flex-col max-h-[95vh] ${S?"shake":""}`,onClick:ee=>ee.stopPropagation(),children:[a.jsxs("div",{className:"p-4 border-b border-gray-700 flex justify-between items-center bg-gray-900/50 rounded-t-xl shrink-0",children:[a.jsx("h2",{className:"text-xl font-bold font-poppins",children:g.id?"Editar Postagem":"Nova Postagem"}),a.jsx("button",{onClick:P,className:"text-gray-500 hover:text-white transition-colors",children:a.jsx(It,{})})]}),a.jsxs("div",{className:"flex-grow overflow-y-auto p-6 space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:["Ttulo ",a.jsx("span",{className:"text-red-400",children:"*"})]}),a.jsx("input",{type:"text",placeholder:"Ex: Os Melhores Festivais de 2024",value:g.title,onChange:Y,className:"w-full input-style font-bold text-lg"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Slug (URL)"}),a.jsx("input",{type:"text",placeholder:"os-melhores-festivais-2024",value:g.slug,onChange:ee=>v(me=>({...me,slug:ee.target.value})),className:"w-full input-style font-mono text-sm text-gray-400"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Autor"}),a.jsx("input",{type:"text",placeholder:"Nome do Autor",value:g.author_name,onChange:ee=>v(me=>({...me,author_name:ee.target.value})),className:"w-full input-style"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Status"}),a.jsxs("select",{value:g.status,onChange:ee=>v(me=>({...me,status:ee.target.value})),className:"w-full input-style",children:[a.jsx("option",{value:"draft",children:"Rascunho (Oculto)"}),a.jsx("option",{value:"published",children:"Publicado (Visvel)"})]})]})]})]}),a.jsx("div",{className:"space-y-2",children:g.id?a.jsx(f6,{bucketName:"blog",folderPath:`blog/${g.id}`,initialUrl:g.image_url,onUpload:ne,onRemove:le}):a.jsxs("div",{className:"h-full flex flex-col items-center justify-center p-6 bg-gray-900/50 rounded-lg border-2 border-dashed border-gray-700 text-center",children:[a.jsx("p",{className:"text-gray-400 mb-2",children:"Imagem de Capa"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Salve o rascunho primeiro para habilitar o upload de imagem."})]})})]}),a.jsxs("div",{className:"pt-2",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-300",children:["Contedo do Post ",a.jsx("span",{className:"text-red-400",children:"*"})]}),a.jsxs("div",{className:"flex bg-gray-900 rounded p-1",children:[a.jsx("button",{type:"button",onClick:()=>T("write"),className:`px-3 py-1 text-xs font-bold rounded ${C==="write"?"bg-primary text-dark":"text-gray-400 hover:text-white"}`,children:"Escrever"}),a.jsx("button",{type:"button",onClick:()=>T("preview"),className:`px-3 py-1 text-xs font-bold rounded ${C==="preview"?"bg-secondary text-white":"text-gray-400 hover:text-white"}`,children:"Visualizar"})]})]}),C==="write"?a.jsxs("div",{className:"border border-gray-600 rounded-md overflow-hidden bg-gray-900 focus-within:ring-2 focus-within:ring-primary focus-within:border-primary transition-all shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-1 p-2 bg-gray-800 border-b border-gray-600 overflow-x-auto",children:[a.jsx(se,{onClick:()=>D("# "),icon:_6,title:"Ttulo 1"}),a.jsx(se,{onClick:()=>D("## "),icon:S6,title:"Ttulo 2"}),a.jsx(se,{onClick:()=>D("### "),icon:j6,title:"Ttulo 3"}),a.jsx(fe,{}),a.jsx(se,{onClick:()=>D("**","**"),icon:m6,title:"Negrito"}),a.jsx(se,{onClick:()=>D("*","*"),icon:p6,title:"Itlico"}),a.jsx(se,{onClick:()=>D("~~","~~"),icon:g6,title:"Riscado"}),a.jsx(fe,{}),a.jsx(se,{onClick:()=>D("- "),icon:x6,title:"Lista com Marcadores"}),a.jsx(se,{onClick:()=>D("1. "),icon:y6,title:"Lista Numerada"}),a.jsx(fe,{}),a.jsx(se,{onClick:()=>D("> "),icon:v6,title:"Citao"}),a.jsx(se,{onClick:()=>D("```\n","\n```"),icon:b6,title:"Bloco de Cdigo"}),a.jsx(se,{onClick:()=>D("`","`"),label:"<>",title:"Cdigo Inline"}),a.jsx(se,{onClick:()=>D("---"),icon:E6,title:"Linha Horizontal"}),a.jsx(fe,{}),a.jsx(se,{onClick:()=>D("[","](url)"),icon:w6,title:"Inserir Link"}),a.jsx(se,{onClick:()=>D("![","](url_imagem)"),icon:N6,title:"Inserir Imagem"})]}),a.jsx("textarea",{ref:U,placeholder:"Escreva seu artigo usando Markdown...",rows:18,value:g.content,onChange:ee=>v(me=>({...me,content:ee.target.value})),className:"w-full bg-gray-900 border-none p-4 text-white text-sm font-mono leading-relaxed focus:ring-0 resize-y min-h-[400px]"})]}):a.jsx("div",{className:"border border-gray-600 rounded-md bg-gray-900/50 p-6 min-h-[450px] max-h-[600px] overflow-y-auto",children:a.jsx(C6,{content:g.content||""})}),C==="write"&&a.jsx("p",{className:"text-xs text-gray-500 mt-2 text-right",children:"Suporta Markdown. Use a barra de ferramentas para formatar."})]})]}),a.jsxs("div",{className:"p-4 bg-gray-900/50 rounded-b-xl border-t border-gray-700 flex justify-end gap-3 shrink-0",children:[a.jsx("button",{onClick:P,className:"py-2 px-4 bg-gray-700 text-white rounded-md hover:bg-gray-600 transition-colors font-medium",children:"Cancelar"}),a.jsx("button",{onClick:L,disabled:b,className:"py-2 px-6 bg-secondary text-white font-bold rounded-md hover:bg-opacity-80 disabled:opacity-50 transition-all shadow-lg hover:shadow-secondary/20",children:b?"Salvando...":"Salvar Postagem"})]})]})}),document.body),a.jsx(sn,{isOpen:M,onClose:()=>z(!1),onConfirm:re,title:"Excluir Postagem",message:a.jsxs("p",{children:["Tem certeza que deseja excluir o post ",a.jsx("strong",{children:F==null?void 0:F.title}),"?"]}),confirmText:"Excluir",isConfirming:K})]})},A6=()=>{const[t,e]=N.useState([]),[s,n]=N.useState(!0),[i,l]=N.useState(""),[d,u]=N.useState(""),[f,m]=N.useState(null),g=async()=>{n(!0);try{const b=await xM.listLogs();e(b)}catch(b){l(he(b))}finally{n(!1)}};N.useEffect(()=>{g()},[]);const v=t.filter(b=>b.tipo_evento.toLowerCase().includes(d.toLowerCase())||b.provedor.toLowerCase().includes(d.toLowerCase()));return a.jsxs("div",{className:"text-white animate-fade-in",children:[a.jsxs("div",{className:"flex justify-between items-center mb-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-primary font-poppins",children:"Eventos Externos (Webhooks)"}),a.jsx("p",{className:"text-gray-400 text-sm",children:"Monitoramento de integrao com gateways e servios de infraestrutura."})]}),a.jsx("button",{onClick:g,className:"p-2 bg-gray-800 hover:bg-gray-700 rounded-lg transition-colors border border-gray-700",children:a.jsx(Jm,{className:s?"animate-spin":""})})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[a.jsxs("div",{className:"relative mb-6",children:[a.jsx("input",{type:"text",placeholder:"Buscar por evento ou provedor...",value:d,onChange:b=>u(b.target.value),className:"w-full bg-gray-900 border border-gray-700 rounded-xl py-3 pl-12 pr-4 text-white focus:ring-1 focus:ring-primary outline-none"}),a.jsx(ms,{className:"absolute left-4 top-3.5 w-5 h-5 text-gray-500"})]}),a.jsx("div",{className:"bg-gray-900 rounded-2xl border border-gray-800 overflow-hidden shadow-xl",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left",children:[a.jsx("thead",{className:"bg-gray-800 text-[10px] uppercase font-black text-gray-500",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4",children:"Provedor"}),a.jsx("th",{className:"p-4",children:"Evento"}),a.jsx("th",{className:"p-4",children:"Data/Hora"}),a.jsx("th",{className:"p-4 text-center",children:"Status"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-800",children:s?a.jsx("tr",{children:a.jsx("td",{colSpan:4,className:"p-8 text-center text-gray-600 animate-pulse",children:"Consultando logs de auditoria..."})}):v.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:4,className:"p-8 text-center text-gray-600",children:"Nenhum evento registrado recentemente."})}):v.map(b=>a.jsxs("tr",{onClick:()=>m(b),className:`cursor-pointer hover:bg-gray-800 transition-colors ${(f==null?void 0:f.id)===b.id?"bg-gray-800":""}`,children:[a.jsx("td",{className:"p-4",children:a.jsx("span",{className:"px-2 py-0.5 bg-gray-700 rounded text-[10px] font-bold text-gray-300 uppercase",children:b.provedor})}),a.jsx("td",{className:"p-4 font-mono text-xs text-primary",children:b.tipo_evento}),a.jsx("td",{className:"p-4 text-xs text-gray-500",children:new Date(b.criado_em).toLocaleString("pt-BR")}),a.jsx("td",{className:"p-4 text-center",children:a.jsx(Oe,{className:"w-4 h-4 text-green-500 mx-auto"})})]},b.id))})]})})})]}),a.jsx("div",{className:"lg:col-span-1",children:a.jsxs("div",{className:"bg-gray-900 rounded-2xl border border-gray-800 p-6 sticky top-24",children:[a.jsxs("h3",{className:"text-lg font-bold mb-6 flex items-center gap-2",children:[a.jsx(Fm,{className:"text-secondary w-5 h-5"})," Detalhes do Payload"]}),f?a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"p-4 bg-black rounded-xl border border-gray-800 font-mono text-[10px] text-green-400 overflow-x-auto whitespace-pre",children:JSON.stringify(f.payload,null,2)}),a.jsxs("div",{className:"pt-4 border-t border-gray-800",children:[a.jsx("p",{className:"text-[10px] text-gray-500 uppercase font-black mb-1",children:"ID do Rastreio"}),a.jsx("p",{className:"text-xs text-white break-all",children:f.id})]})]}):a.jsx("div",{className:"text-center py-20 text-gray-600 italic text-sm",children:"Selecione um log para ver os dados brutos da integrao."})]})})]})]})};var R6={};const k6=()=>{const[t,e]=N.useState(null),[s,n]=N.useState(!0),[i,l]=N.useState(""),[d,u]=N.useState(!1),[f,m]=N.useState(""),g=async()=>{n(!0);try{const b=await lm.getBIStats();e(b)}catch(b){m(he(b))}finally{n(!1)}};N.useEffect(()=>{g()},[]);const v=async()=>{if(!t)return;u(!0);const b=new jo({apiKey:R6.API_KEY});try{const _=`Aja como um analista de negcios snior e estrategista de produto para a plataforma RESONNA.
            Analise os seguintes KPIs reais da plataforma e sugira 3 aes estratgicas prioritrias para aumentar a receita e reteno.
            KPIs:
            - Usurios Ativos: ${t.activeUsers}
            - GMV (Volume Bruto): R$ ${t.totalGmv}
            - Receita da Plataforma (Taxas): R$ ${t.totalRevenue}
            - Taxa de Converso: ${t.conversionRate.toFixed(2)}%
            - Crescimento Mensal: ${t.monthlyGrowth}%
            
            Retorne um texto curto e altamente executivo em Portugus do Brasil dividido em "Status Atual" e "Plano de Ao Estratgico".`,S=await b.models.generateContent({model:"gemini-3-pro-preview",contents:{parts:[{text:_}]},config:{thinkingConfig:{thinkingBudget:1e3}}});l(S.text||"No foi possvel gerar insights no momento.")}catch(_){console.error(_),l("Erro ao conectar com AI Advisor de alto nvel.")}finally{u(!1)}};return s?a.jsx("div",{className:"p-20 text-center animate-pulse text-gray-500",children:"Consolidando mtricas de BI..."}):a.jsxs("div",{className:"text-white animate-fade-in pb-20",children:[a.jsxs("div",{className:"flex justify-between items-end mb-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-black text-primary font-poppins",children:"Business Intelligence"}),a.jsx("p",{className:"text-gray-400",children:"Viso macro e sade financeira da plataforma."})]}),a.jsx("button",{onClick:g,className:"text-xs bg-gray-800 px-4 py-2 rounded-lg border border-gray-700 hover:bg-gray-700",children:"Atualizar Dados"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[a.jsxs("div",{className:"bg-gray-900 p-6 rounded-2xl border border-gray-700 shadow-xl",children:[a.jsx("p",{className:"text-gray-500 text-[10px] font-black uppercase tracking-widest mb-1",children:"GMV Total (Vendas)"}),a.jsxs("p",{className:"text-2xl font-black text-white font-mono",children:["R$ ",t==null?void 0:t.totalGmv.toLocaleString("pt-BR")]}),a.jsxs("div",{className:"mt-2 flex items-center gap-1 text-green-400 text-xs font-bold",children:[a.jsx(ur,{className:"w-3 h-3"})," +12%"]})]}),a.jsxs("div",{className:"bg-gray-900 p-6 rounded-2xl border border-gray-700 shadow-xl",children:[a.jsx("p",{className:"text-gray-500 text-[10px] font-black uppercase tracking-widest mb-1",children:"Receita Lquida (Fees)"}),a.jsxs("p",{className:"text-2xl font-black text-primary font-mono",children:["R$ ",t==null?void 0:t.totalRevenue.toLocaleString("pt-BR")]}),a.jsx("p",{className:"text-[10px] text-gray-600 mt-2 uppercase",children:"Take Rate: 10% mdio"})]}),a.jsxs("div",{className:"bg-gray-900 p-6 rounded-2xl border border-gray-700 shadow-xl",children:[a.jsx("p",{className:"text-gray-500 text-[10px] font-black uppercase tracking-widest mb-1",children:"Converso Ativa"}),a.jsxs("p",{className:"text-2xl font-black text-white font-mono",children:[t==null?void 0:t.conversionRate.toFixed(1),"%"]}),a.jsx("p",{className:"text-[10px] text-gray-600 mt-2 uppercase",children:"Usurios vs Contratos"})]}),a.jsxs("div",{className:"bg-gray-900 p-6 rounded-2xl border border-gray-700 shadow-xl",children:[a.jsx("p",{className:"text-gray-500 text-[10px] font-black uppercase tracking-widest mb-1",children:"Crescimento WoW"}),a.jsxs("p",{className:"text-2xl font-black text-yellow-500 font-mono",children:["+",t==null?void 0:t.monthlyGrowth,"%"]}),a.jsx("p",{className:"text-[10px] text-gray-600 mt-2 uppercase",children:"ltimos 30 dias"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsxs("div",{className:"lg:col-span-2 bg-gray-900 rounded-2xl border border-gray-800 shadow-2xl overflow-hidden flex flex-col min-h-[400px]",children:[a.jsx("div",{className:"p-4 border-b border-gray-800 bg-gray-900/50 flex justify-between items-center",children:a.jsxs("h3",{className:"font-bold flex items-center gap-2",children:[a.jsx(Rs,{className:"w-5 h-5 text-green-400"})," Histrico Mensal"]})}),a.jsx("div",{className:"overflow-x-auto flex-grow",children:a.jsxs("table",{className:"w-full text-left",children:[a.jsx("thead",{className:"bg-gray-850 text-[10px] uppercase font-black text-gray-500",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4",children:"Ms Referncia"}),a.jsx("th",{className:"p-4",children:"Volume (GMV)"}),a.jsx("th",{className:"p-4",children:"Receita (Fees)"}),a.jsx("th",{className:"p-4 text-center",children:"Shows"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-800",children:t==null?void 0:t.financialData.map(b=>a.jsxs("tr",{className:"hover:bg-gray-800/50 transition-colors",children:[a.jsx("td",{className:"p-4 font-mono text-sm text-white",children:b.mes}),a.jsxs("td",{className:"p-4 text-sm text-gray-300",children:["R$ ",b.volume_total.toLocaleString()]}),a.jsxs("td",{className:"p-4 text-sm text-primary font-bold",children:["R$ ",b.receita_plataforma.toLocaleString()]}),a.jsx("td",{className:"p-4 text-center text-sm",children:b.contratos_count})]},b.mes))})]})})]}),a.jsx("div",{className:"lg:col-span-1",children:a.jsxs("div",{className:"bg-gradient-to-br from-indigo-900/40 to-gray-900 p-6 rounded-2xl border border-indigo-500/30 shadow-2xl sticky top-24",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"w-10 h-10 bg-indigo-500/20 rounded-full flex items-center justify-center border border-indigo-500/30",children:a.jsx(Ft,{className:"text-indigo-400 w-6 h-6 animate-pulse"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-white leading-none",children:"AI Advisor Pro"}),a.jsx("p",{className:"text-[10px] text-indigo-300 uppercase font-black tracking-widest mt-1",children:"Gemini Strategist"})]})]}),i?a.jsxs("div",{className:"space-y-4 animate-fade-in",children:[a.jsx("div",{className:"text-sm text-gray-300 leading-relaxed whitespace-pre-wrap italic bg-gray-950/50 p-4 rounded-xl border border-white/5",children:i}),a.jsx("button",{onClick:v,className:"text-[10px] text-indigo-400 underline hover:text-white uppercase font-bold",children:"Gerar nova anlise profunda"})]}):a.jsxs("div",{className:"text-center py-10",children:[a.jsx("p",{className:"text-xs text-gray-400 mb-6 leading-relaxed",children:"Nossa IA avanada pode analisar seus KPIs financeiros e sugerir estratgias de expanso de alto nvel."}),a.jsxs("button",{onClick:v,disabled:d,className:"w-full bg-indigo-600 hover:bg-white hover:text-dark text-white font-black py-3 rounded-xl transition-all shadow-lg flex items-center justify-center gap-2",children:[d?a.jsx(ea,{className:"w-5 h-5 animate-spin"}):a.jsx(Ft,{className:"w-5 h-5"}),d?"Consultando Gemini Pro...":"Anlise Estratgica"]})]})]})})]})]})},M6=()=>{const[t,e]=N.useState([]),[s,n]=N.useState(!0),[i,l]=N.useState(!1),[d,u]=N.useState(""),[f,m]=N.useState(""),[g,v]=N.useState(null),[b,_]=N.useState(!1),S=async()=>{n(!0);try{const R=await lm.fetchIaLogs();e(R)}catch(R){u(he(R))}finally{n(!1)}};N.useEffect(()=>{S()},[]);const E=async()=>{l(!0);try{await lm.clearIaLogs(),e([]),v(null),_(!1)}catch(R){alert(he(R))}finally{l(!1)}},C=t.filter(R=>R.servico.toLowerCase().includes(f.toLowerCase())||R.tipo_erro.toLowerCase().includes(f.toLowerCase())||R.mensagem_erro.toLowerCase().includes(f.toLowerCase())),T=R=>{switch(R){case"CORS":return"bg-orange-500/20 text-orange-300 border-orange-500/30";case"NETWORK":return"bg-red-500/20 text-red-300 border-red-500/30";case"QUOTA":return"bg-purple-500/20 text-purple-300 border-purple-500/30";default:return"bg-gray-700 text-gray-300 border-gray-600"}};return a.jsxs("div",{className:"text-white animate-fade-in",children:[a.jsxs("div",{className:"flex justify-between items-center mb-8",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-3xl font-bold text-primary font-poppins flex items-center gap-3",children:[a.jsx(Jm,{className:"w-8 h-8"})," Sade das Integraes (IA)"]}),a.jsx("p",{className:"text-gray-400 text-sm",children:"Rastreamento de erros em tempo real dos motores Gemini."})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>_(!0),className:"bg-red-900/20 hover:bg-red-900/40 text-red-400 px-4 py-2 rounded-lg border border-red-900/30 transition-all flex items-center gap-2 text-sm font-bold",children:[a.jsx(ps,{className:"w-4 h-4"})," Limpar Histrico"]}),a.jsxs("button",{onClick:S,className:"bg-gray-800 hover:bg-gray-700 text-white px-4 py-2 rounded-lg border border-gray-700 transition-all flex items-center gap-2",children:[a.jsx(ea,{className:`w-4 h-4 ${s?"animate-spin":""}`})," Atualizar Fila"]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[a.jsxs("div",{className:"relative mb-6",children:[a.jsx("input",{type:"text",placeholder:"Filtrar por servio ou erro...",value:f,onChange:R=>m(R.target.value),className:"w-full bg-gray-900 border border-gray-700 rounded-xl py-3 pl-12 pr-4 text-white focus:ring-1 focus:ring-primary outline-none"}),a.jsx(ms,{className:"absolute left-4 top-3.5 w-5 h-5 text-gray-500"})]}),a.jsx("div",{className:"bg-gray-900 rounded-2xl border border-gray-800 overflow-hidden shadow-xl",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left",children:[a.jsx("thead",{className:"bg-gray-800 text-[10px] uppercase font-black text-gray-500",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-4",children:"Servio / Contexto"}),a.jsx("th",{className:"p-4",children:"Tipo"}),a.jsx("th",{className:"p-4",children:"Horrio"}),a.jsx("th",{className:"p-4 text-center",children:"Status"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-800",children:s?a.jsx("tr",{children:a.jsx("td",{colSpan:4,className:"p-8 text-center text-gray-600 animate-pulse",children:"Sincronizando auditoria de rede..."})}):C.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:4,className:"p-8 text-center text-gray-600",children:"Nenhuma anomalia registrada. Sistema operando 100%."})}):C.map(R=>a.jsxs("tr",{onClick:()=>v(R),className:`cursor-pointer hover:bg-gray-800/50 transition-colors ${(g==null?void 0:g.id)===R.id?"bg-gray-800":""}`,children:[a.jsxs("td",{className:"p-4",children:[a.jsx("div",{className:"font-bold text-white text-xs",children:R.servico.toUpperCase()}),a.jsx("div",{className:"text-[10px] text-gray-500 truncate max-w-[200px]",children:R.mensagem_erro})]}),a.jsx("td",{className:"p-4",children:a.jsx("span",{className:`px-2 py-0.5 border rounded text-[10px] font-black uppercase ${T(R.tipo_erro)}`,children:R.tipo_erro})}),a.jsx("td",{className:"p-4 text-[10px] text-gray-500 font-mono",children:new Date(R.criado_em).toLocaleString("pt-BR")}),a.jsx("td",{className:"p-4 text-center",children:a.jsx(ss,{className:"w-4 h-4 text-orange-500 mx-auto"})})]},R.id))})]})})})]}),a.jsx("div",{className:"lg:col-span-1",children:a.jsxs("div",{className:"bg-gray-900 rounded-2xl border border-gray-800 p-6 sticky top-24 shadow-2xl",children:[a.jsxs("h3",{className:"text-lg font-bold mb-6 flex items-center gap-2 border-b border-gray-800 pb-3",children:[a.jsx(Fm,{className:"text-secondary w-5 h-5"})," Diagnstico Tcnico"]}),g?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] text-gray-500 uppercase font-black mb-1",children:"Causa Raiz"}),a.jsx("p",{className:"text-sm text-red-400 font-medium leading-relaxed bg-red-950/20 p-3 rounded-lg border border-red-900/30",children:g.mensagem_erro})]}),g.payload_input&&a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] text-gray-500 uppercase font-black mb-1",children:"Payload de Entrada"}),a.jsx("div",{className:"p-3 bg-black rounded-xl border border-gray-800 font-mono text-[10px] text-green-400 overflow-x-auto whitespace-pre",children:JSON.stringify(g.payload_input,null,2)})]}),a.jsxs("div",{className:"pt-4 border-t border-gray-800 flex flex-col gap-2",children:[a.jsx("p",{className:"text-[10px] text-gray-500 uppercase font-black",children:"ID do Evento"}),a.jsx("p",{className:"text-[9px] text-white font-mono break-all opacity-50",children:g.id}),a.jsx("p",{className:"text-[10px] text-gray-500 uppercase font-black mt-2",children:"Usurio Afetado"}),a.jsx("p",{className:"text-xs text-white",children:g.usuario_id||"Visitante Annimo"})]}),a.jsxs("div",{className:"bg-primary/5 p-4 rounded-xl border border-primary/20",children:[a.jsx("p",{className:"text-[10px] text-primary font-black uppercase mb-1",children:"Recomendao Admin"}),a.jsx("p",{className:"text-xs text-gray-300",children:g.tipo_erro==="CORS"?"Verifique as polticas do bucket de storage.":g.tipo_erro==="QUOTA"?"Aumente o limite de tokens ou aguarde o reset da cota.":"Verifique a estabilidade da conexo do cliente."})]})]}):a.jsx("div",{className:"text-center py-20 text-gray-600 italic text-sm",children:"Selecione uma ocorrncia para analisar os dados brutos de falha."})]})})]}),a.jsx(sn,{isOpen:b,onClose:()=>_(!1),onConfirm:E,title:"Limpar Histrico de Erros",message:"Tem certeza que deseja remover todos os registros de erro de integrao? Esta ao no pode ser desfeita e os dados de auditoria sero perdidos.",confirmText:"Limpar Tudo",isConfirming:i})]})},I6=t=>{switch(t){case"contrato":return a.jsx(Ln,{className:"w-5 h-5 text-blue-400"});case"mensagem":return a.jsx(en,{className:"w-5 h-5 text-green-400"});case"avaliacao":return a.jsx(At,{className:"w-5 h-5 text-yellow-400"});default:return a.jsx(Na,{className:"w-5 h-5 text-gray-400"})}},D6=t=>{switch(t){case"contrato":return"border-l-blue-500";case"mensagem":return"border-l-green-500";case"avaliacao":return"border-l-yellow-500";default:return"border-l-gray-600"}},P6=({notification:t,onRead:e})=>{const s=Xt(),n=l=>{const d=new Date(l),f=Math.max(0,Math.floor((new Date().getTime()-d.getTime())/1e3));let m=f/31536e3;return m>1?Math.floor(m)+"a":(m=f/2592e3,m>1?Math.floor(m)+"m":(m=f/86400,m>1?Math.floor(m)+"d":(m=f/3600,m>1?Math.floor(m)+"h":(m=f/60,m>1?Math.floor(m)+"m":"agora"))))},i=()=>{if(e(t.id),t.url_destino){const l=t.url_destino;l.startsWith("http")?window.open(l,"_blank","noopener,noreferrer"):s(l)}};return a.jsx("div",{onClick:i,className:`group p-5 border-b border-gray-800 hover:bg-gray-800/80 cursor-pointer transition-all duration-200 border-l-4 ${D6(t.tipo)} ${t.lida?"bg-transparent opacity-70 hover:opacity-100":"bg-gray-800/40"}`,children:a.jsxs("div",{className:"flex gap-4",children:[a.jsx("div",{className:`mt-1 p-2 rounded-full bg-gray-800/80 border border-gray-700 flex-shrink-0 group-hover:scale-110 transition-transform ${t.lida?"":"shadow-[0_0_10px_rgba(255,255,255,0.1)]"}`,children:I6(t.tipo)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex justify-between items-start mb-1",children:[a.jsx("p",{className:`text-sm truncate pr-2 ${t.lida?"font-medium text-gray-300":"font-bold text-white"}`,children:t.titulo}),a.jsx("span",{className:"text-[10px] text-gray-500 font-mono whitespace-nowrap bg-black/20 px-2 py-0.5 rounded ml-2",children:n(t.data_criacao)})]}),a.jsx("p",{className:"text-xs text-gray-400 line-clamp-2 leading-relaxed group-hover:text-gray-300 transition-colors",children:t.descricao})]}),!t.lida&&a.jsx("div",{className:"flex items-center justify-center pl-2",children:a.jsx("div",{className:"w-2.5 h-2.5 bg-primary rounded-full shadow-[0_0_8px_rgba(81,210,238,0.6)] animate-pulse"})})]})})},U6=t=>{const e={Hoje:[],Ontem:[],"Esta Semana":[],Antigas:[]},s=new Date;s.setHours(0,0,0,0);const n=new Date(s);n.setDate(n.getDate()-1);const i=new Date(s);return i.setDate(i.getDate()-7),t.forEach(l=>{const d=new Date(l.data_criacao),u=new Date(d);u.setHours(0,0,0,0),u.getTime()===s.getTime()?e.Hoje.push(l):u.getTime()===n.getTime()?e.Ontem.push(l):d>i?e["Esta Semana"].push(l):e.Antigas.push(l)}),e},L6=()=>{const{notifications:t,loading:e,markAsRead:s,markAllAsRead:n,unreadCount:i}=_d(),[l,d]=N.useState("all"),u=l==="unread"?t.filter(g=>!g.lida):t,f=U6(u),m=u.length>0;return a.jsxs("main",{className:"bg-dark text-white font-sans min-h-[calc(100vh-80px)] animate-fade-in",children:[a.jsx("section",{className:"bg-dark/95 backdrop-blur-md border-b border-gray-800 sticky top-16 md:top-20 z-30 shadow-lg transition-all",children:a.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-5",children:a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-gray-800 rounded-lg border border-gray-700",children:a.jsx(Na,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-xl font-bold text-white font-poppins leading-tight",children:"Notificaes"}),a.jsx("p",{className:"text-xs text-gray-400",children:"Fique por dentro do que acontece na sua conta."})]})]}),a.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[a.jsxs("div",{className:"flex bg-gray-800 p-1 rounded-lg border border-gray-700 w-full md:w-auto",children:[a.jsx("button",{onClick:()=>d("all"),className:`flex-1 md:flex-none text-xs font-bold py-2 px-6 rounded-md transition-all ${l==="all"?"bg-gray-700 text-white shadow-sm":"text-gray-400 hover:text-white hover:bg-gray-700/50"}`,children:"Todas"}),a.jsxs("button",{onClick:()=>d("unread"),className:`flex-1 md:flex-none text-xs font-bold py-2 px-6 rounded-md transition-all flex items-center justify-center gap-2 ${l==="unread"?"bg-gray-700 text-white shadow-sm":"text-gray-400 hover:text-white hover:bg-gray-700/50"}`,children:["No Lidas ",i>0&&a.jsx("span",{className:"bg-primary text-dark text-[9px] px-1.5 py-0.5 rounded-full font-extrabold",children:i})]})]}),i>0&&a.jsxs("button",{onClick:n,className:"hidden md:flex items-center gap-1 text-xs font-bold text-gray-400 hover:text-primary transition-colors px-3 py-2 border border-transparent hover:border-gray-700 rounded-lg",title:"Marcar todas como lidas",children:[a.jsx(Oe,{className:"w-4 h-4"})," Limpar"]})]})]})})}),a.jsx("section",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:a.jsx("div",{className:"max-w-3xl mx-auto",children:e?a.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[a.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-primary"}),a.jsx("p",{className:"text-gray-500 text-sm",children:"Sincronizando..."})]}):m?a.jsxs("div",{className:"space-y-10 pb-20",children:[i>0&&l!=="unread"&&a.jsx("button",{onClick:n,className:"md:hidden w-full text-center text-xs font-bold text-primary border border-primary/30 bg-primary/5 py-3 rounded-lg mb-6",children:"Marcar todas como lidas"}),Object.entries(f).map(([g,v])=>v.length===0?null:a.jsxs("div",{className:"animate-fade-in",children:[a.jsx("div",{className:"sticky top-40 md:top-44 z-20 pointer-events-none",children:a.jsx("h3",{className:"inline-block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-4 px-4 py-1.5 bg-gray-900/90 backdrop-blur-md rounded-full border border-gray-700 shadow-sm",children:g})}),a.jsx("div",{className:"bg-gray-900 rounded-2xl overflow-hidden border border-gray-700 shadow-xl",children:v.map(b=>a.jsx(P6,{notification:b,onRead:s},b.id))})]},g))]}):a.jsx("div",{className:"py-10",children:a.jsx(ja,{icon:Na,title:"Tudo limpo por aqui!",description:l==="unread"?"Voc leu todas as suas notificaes pendentes.":"Voc ainda no possui nenhuma notificao.",actionLabel:l==="unread"?"Ver histrico completo":void 0,onAction:l==="unread"?()=>d("all"):void 0})})})})]})},O6=()=>{const{profile:t,loading:e}=Ps(),{siteConfig:s}=ns(),n=s.homeBackgroundUrl||"https://images.unsplash.com/photo-1556761175-5973dc0f32e7?q=80&w=2070&auto=format&fit=crop";return e||!t?a.jsx("div",{className:"text-center p-8 bg-dark min-h-screen text-white flex items-center justify-center",children:"Carregando..."}):a.jsxs("main",{className:"bg-dark text-white font-sans min-h-screen",children:[a.jsxs("section",{className:"relative pt-32 pb-20 flex items-center justify-center text-center px-4 overflow-hidden",children:[a.jsxs("div",{className:"absolute inset-0 z-0 select-none pointer-events-none",children:[a.jsx("img",{src:n,className:"w-full h-full object-cover transition-all duration-700 ease-in-out scale-105 opacity-50",style:{filter:`blur(${s.heroBlur}px)`},alt:"Background"}),a.jsx("div",{className:"absolute inset-0 transition-all duration-500 ease-in-out mix-blend-multiply",style:{backgroundColor:s.heroOverlayColor,opacity:Math.max(s.heroOpacity,.8)}}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-dark/80 to-dark"})]}),a.jsxs("div",{className:"relative z-10 w-full max-w-4xl mx-auto space-y-4 animate-fade-in",children:[a.jsxs("h1",{className:"text-4xl md:text-5xl font-black text-white tracking-tight leading-none drop-shadow-2xl font-poppins",children:["Gesto de ",a.jsx("span",{className:"text-primary",children:"Contratos"})]}),a.jsx("p",{className:"max-w-2xl mx-auto text-lg text-gray-300 font-light leading-relaxed drop-shadow-md",children:"Acompanhe suas propostas, assinaturas e pagamentos em um s lugar. Segurana e transparncia para o seu negcio."})]})]}),a.jsx("section",{className:"container mx-auto px-4 sm:px-6 lg:px-8 pb-20 -mt-8 relative z-20",children:a.jsx("div",{className:"bg-gray-900/50 backdrop-blur-sm rounded-2xl border border-gray-800/50 p-6 md:p-8 shadow-2xl",children:a.jsx(Hm,{profile:t})})})]})};var r_="clover",q6=function(e){return e===3?"v3":e},o_="https://js.stripe.com",B6="".concat(o_,"/").concat(r_,"/stripe.js"),$6=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,z6=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/;var V6=function(e){return $6.test(e)||z6.test(e)},H6=function(){for(var e=document.querySelectorAll('script[src^="'.concat(o_,'"]')),s=0;s<e.length;s++){var n=e[s];if(V6(n.src))return n}return null},Ob=function(e){var s="",n=document.createElement("script");n.src="".concat(B6).concat(s);var i=document.head||document.body;if(!i)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return i.appendChild(n),n},G6=function(e,s){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"8.6.0",startTime:s})},Oi=null,$c=null,zc=null,F6=function(e){return function(s){e(new Error("Failed to load Stripe.js",{cause:s}))}},J6=function(e,s){return function(){window.Stripe?e(window.Stripe):s(new Error("Stripe.js not available"))}},K6=function(e){return Oi!==null?Oi:(Oi=new Promise(function(s,n){if(typeof window>"u"||typeof document>"u"){s(null);return}if(window.Stripe){s(window.Stripe);return}try{var i=H6();if(!(i&&e)){if(!i)i=Ob(e);else if(i&&zc!==null&&$c!==null){var l;i.removeEventListener("load",zc),i.removeEventListener("error",$c),(l=i.parentNode)===null||l===void 0||l.removeChild(i),i=Ob(e)}}zc=J6(s,n),$c=F6(n),i.addEventListener("load",zc),i.addEventListener("error",$c)}catch(d){n(d);return}}),Oi.catch(function(s){return Oi=null,Promise.reject(s)}))},Y6=function(e,s,n){if(e===null)return null;var i=s[0],l=i.match(/^pk_test/),d=q6(e.version),u=r_;l&&d!==u&&console.warn("Stripe.js@".concat(d," was loaded on the page, but @stripe/stripe-js@").concat("8.6.0"," expected Stripe.js@").concat(u,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var f=e.apply(void 0,s);return G6(f,n),f},qi,i_=!1,l_=function(){return qi||(qi=K6(null).catch(function(e){return qi=null,Promise.reject(e)}),qi)};Promise.resolve().then(function(){return l_()}).catch(function(t){i_||console.warn(t)});var qb=function(){for(var e=arguments.length,s=new Array(e),n=0;n<e;n++)s[n]=arguments[n];i_=!0;var i=Date.now();return l_().then(function(l){return Y6(l,s,i)})},jf={exports:{}},Ef,Bb;function W6(){if(Bb)return Ef;Bb=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Ef=t,Ef}var Cf,$b;function X6(){if($b)return Cf;$b=1;var t=W6();function e(){}function s(){}return s.resetWarningCache=e,Cf=function(){function n(d,u,f,m,g,v){if(v!==t){var b=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw b.name="Invariant Violation",b}}n.isRequired=n;function i(){return n}var l={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:i,element:n,elementType:n,instanceOf:i,node:n,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:s,resetWarningCache:e};return l.PropTypes=l,l},Cf}var zb;function Q6(){return zb||(zb=1,jf.exports=X6()()),jf.exports}var Z6=Q6();const it=fr(Z6);function Vb(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),s.push.apply(s,n)}return s}function Hb(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?Vb(Object(s),!0).forEach(function(n){c_(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Vb(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function Wc(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Wc=function(e){return typeof e}:Wc=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wc(t)}function c_(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function eP(t,e){if(t==null)return{};var s={},n=Object.keys(t),i,l;for(l=0;l<n.length;l++)i=n[l],!(e.indexOf(i)>=0)&&(s[i]=t[i]);return s}function tP(t,e){if(t==null)return{};var s=eP(t,e),n,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)n=l[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function d_(t,e){return sP(t)||aP(t,e)||nP(t,e)||rP()}function sP(t){if(Array.isArray(t))return t}function aP(t,e){var s=t&&(typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"]);if(s!=null){var n=[],i=!0,l=!1,d,u;try{for(s=s.call(t);!(i=(d=s.next()).done)&&(n.push(d.value),!(e&&n.length===e));i=!0);}catch(f){l=!0,u=f}finally{try{!i&&s.return!=null&&s.return()}finally{if(l)throw u}}return n}}function nP(t,e){if(t){if(typeof t=="string")return Gb(t,e);var s=Object.prototype.toString.call(t).slice(8,-1);if(s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set")return Array.from(t);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return Gb(t,e)}}function Gb(t,e){(e==null||e>t.length)&&(e=t.length);for(var s=0,n=new Array(e);s<e;s++)n[s]=t[s];return n}function rP(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var es=function(e,s,n){var i=!!n,l=qe.useRef(n);qe.useEffect(function(){l.current=n},[n]),qe.useEffect(function(){if(!i||!e)return function(){};var d=function(){l.current&&l.current.apply(l,arguments)};return e.on(s,d),function(){e.off(s,d)}},[i,s,e,l])},mm=function(e){var s=qe.useRef(e);return qe.useEffect(function(){s.current=e},[e]),s.current},Ro=function(e){return e!==null&&Wc(e)==="object"},oP=function(e){return Ro(e)&&typeof e.then=="function"},iP=function(e){return Ro(e)&&typeof e.elements=="function"&&typeof e.createToken=="function"&&typeof e.createPaymentMethod=="function"&&typeof e.confirmCardPayment=="function"},Fb="[object Object]",lP=function t(e,s){if(!Ro(e)||!Ro(s))return e===s;var n=Array.isArray(e),i=Array.isArray(s);if(n!==i)return!1;var l=Object.prototype.toString.call(e)===Fb,d=Object.prototype.toString.call(s)===Fb;if(l!==d)return!1;if(!l&&!n)return e===s;var u=Object.keys(e),f=Object.keys(s);if(u.length!==f.length)return!1;for(var m={},g=0;g<u.length;g+=1)m[u[g]]=!0;for(var v=0;v<f.length;v+=1)m[f[v]]=!0;var b=Object.keys(m);if(b.length!==u.length)return!1;var _=e,S=s,E=function(T){return t(_[T],S[T])};return b.every(E)},u_=function(e,s,n){return Ro(e)?Object.keys(e).reduce(function(i,l){var d=!Ro(s)||!lP(e[l],s[l]);return n.includes(l)?(d&&console.warn("Unsupported prop change: options.".concat(l," is not a mutable property.")),i):d?Hb(Hb({},i||{}),{},c_({},l,e[l])):i},null):null},h_="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",Jb=function(e){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:h_;if(e===null||iP(e))return e;throw new Error(s)},cP=function(e){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:h_;if(oP(e))return{tag:"async",stripePromise:Promise.resolve(e).then(function(i){return Jb(i,s)})};var n=Jb(e,s);return n===null?{tag:"empty"}:{tag:"sync",stripe:n}},dP=function(e){!e||!e._registerWrapper||!e.registerAppInfo||(e._registerWrapper({name:"react-stripe-js",version:"5.4.1"}),e.registerAppInfo({name:"react-stripe-js",version:"5.4.1",url:"https://stripe.com/docs/stripe-js/react"}))},Cd=qe.createContext(null);Cd.displayName="ElementsContext";var f_=function(e,s){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(s," in an <Elements> provider."));return e},m_=function(e){var s=e.stripe,n=e.options,i=e.children,l=qe.useMemo(function(){return cP(s)},[s]),d=qe.useState(function(){return{stripe:l.tag==="sync"?l.stripe:null,elements:l.tag==="sync"?l.stripe.elements(n):null}}),u=d_(d,2),f=u[0],m=u[1];qe.useEffect(function(){var b=!0,_=function(E){m(function(C){return C.stripe?C:{stripe:E,elements:E.elements(n)}})};return l.tag==="async"&&!f.stripe?l.stripePromise.then(function(S){S&&b&&_(S)}):l.tag==="sync"&&!f.stripe&&_(l.stripe),function(){b=!1}},[l,f,n]);var g=mm(s);qe.useEffect(function(){g!==null&&g!==s&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[g,s]);var v=mm(n);return qe.useEffect(function(){if(f.elements){var b=u_(n,v,["clientSecret","fonts"]);b&&f.elements.update(b)}},[n,v,f.elements]),qe.useEffect(function(){dP(f.stripe)},[f.stripe]),qe.createElement(Cd.Provider,{value:f},i)};m_.propTypes={stripe:it.any,options:it.object};var uP=function(e){var s=qe.useContext(Cd);return f_(s,e)},hP=function(){var e=uP("calls useElements()"),s=e.elements;return s};it.func.isRequired;var p_=qe.createContext(null);p_.displayName="CheckoutContext";it.any,it.shape({clientSecret:it.oneOfType([it.string,it.instanceOf(Promise)]).isRequired,elementsOptions:it.object}).isRequired;var pm=function(e){var s=qe.useContext(p_),n=qe.useContext(Cd);if(s){if(n)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CheckoutProvider> and <Elements> providers."));return s}else return f_(n,e)},fP=["mode"],mP=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},gs=function(e,s){var n="".concat(mP(e),"Element"),i=function(f){var m=f.id,g=f.className,v=f.options,b=v===void 0?{}:v,_=f.onBlur,S=f.onFocus,E=f.onReady,C=f.onChange,T=f.onEscape,R=f.onClick,A=f.onLoadError,M=f.onLoaderStart,z=f.onNetworksChange,F=f.onConfirm,G=f.onCancel,K=f.onShippingAddressChange,I=f.onShippingRateChange,U=f.onSavedPaymentMethodRemove,q=f.onSavedPaymentMethodUpdate,H=pm("mounts <".concat(n,">")),$="elements"in H?H.elements:null,ie="checkoutState"in H?H.checkoutState:null,re=(ie==null?void 0:ie.type)==="success"||(ie==null?void 0:ie.type)==="loading"?ie.sdk:null,P=qe.useState(null),O=d_(P,2),Y=O[0],ne=O[1],le=qe.useRef(null),L=qe.useRef(null);es(Y,"blur",_),es(Y,"focus",S),es(Y,"escape",T),es(Y,"click",R),es(Y,"loaderror",A),es(Y,"loaderstart",M),es(Y,"networkschange",z),es(Y,"confirm",F),es(Y,"cancel",G),es(Y,"shippingaddresschange",K),es(Y,"shippingratechange",I),es(Y,"savedpaymentmethodremove",U),es(Y,"savedpaymentmethodupdate",q),es(Y,"change",C);var D;E&&(e==="expressCheckout"?D=E:D=function(){E(Y)}),es(Y,"ready",D),qe.useLayoutEffect(function(){if(le.current===null&&L.current!==null&&($||re)){var se=null;if(re)switch(e){case"paymentForm":se=re.createPaymentFormElement();break;case"payment":se=re.createPaymentElement(b);break;case"address":if("mode"in b){var fe=b.mode,ee=tP(b,fP);if(fe==="shipping")se=re.createShippingAddressElement(ee);else if(fe==="billing")se=re.createBillingAddressElement(ee);else throw new Error("Invalid options.mode. mode must be 'billing' or 'shipping'.")}else throw new Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");break;case"expressCheckout":se=re.createExpressCheckoutElement(b);break;case"currencySelector":se=re.createCurrencySelectorElement();break;case"taxId":se=re.createTaxIdElement(b);break;default:throw new Error("Invalid Element type ".concat(n,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else $&&(se=$.create(e,b));le.current=se,ne(se),se&&se.mount(L.current)}},[$,re,b]);var te=mm(b);return qe.useEffect(function(){if(le.current){var se=u_(b,te,["paymentRequest"]);se&&"update"in le.current&&le.current.update(se)}},[b,te]),qe.useLayoutEffect(function(){return function(){if(le.current&&typeof le.current.destroy=="function")try{le.current.destroy(),le.current=null}catch{}}},[]),qe.createElement("div",{id:m,className:g,ref:L})},l=function(f){pm("mounts <".concat(n,">"));var m=f.id,g=f.className;return qe.createElement("div",{id:m,className:g})},d=s?l:i;return d.propTypes={id:it.string,className:it.string,onChange:it.func,onBlur:it.func,onFocus:it.func,onReady:it.func,onEscape:it.func,onClick:it.func,onLoadError:it.func,onLoaderStart:it.func,onNetworksChange:it.func,onConfirm:it.func,onCancel:it.func,onShippingAddressChange:it.func,onShippingRateChange:it.func,onSavedPaymentMethodRemove:it.func,onSavedPaymentMethodUpdate:it.func,options:it.object},d.displayName=n,d.__elementType=e,d},xs=typeof window>"u",pP=qe.createContext(null);pP.displayName="EmbeddedCheckoutProviderContext";var gP=function(){var e=pm("calls useStripe()"),s=e.stripe;return s};gs("auBankAccount",xs);gs("card",xs);gs("cardNumber",xs);gs("cardExpiry",xs);gs("cardCvc",xs);gs("iban",xs);var xP=gs("payment",xs);gs("expressCheckout",xs);gs("paymentRequestButton",xs);gs("linkAuthentication",xs);gs("address",xs);gs("shippingAddress",xs);gs("paymentMethodMessaging",xs);gs("taxId",xs);const yP="pk_test_51SIpEBK0NDevEoVigLdl3yMG7kyZviUW4Oy9UykPt0TVhjYHF3KJWJXTHROEoMz8kRv4V1pXSlQrM4LcUQ8C6OXi00tC13cTgH",vP=({amount:t,onSuccess:e,onError:s})=>{const n=gP(),i=hP(),[l,d]=N.useState(!1),u=async f=>{if(f.preventDefault(),!n||!i)return;d(!0);const{error:m,paymentIntent:g}=await n.confirmPayment({elements:i,confirmParams:{},redirect:"if_required"});m?(s(m.message||"Ocorreu um erro no pagamento."),d(!1)):g&&g.status==="succeeded"?e():(s("O pagamento no foi concludo. Status: "+((g==null?void 0:g.status)||"desconhecido")),d(!1))};return a.jsxs("form",{onSubmit:u,className:"space-y-6",children:[a.jsx("div",{className:"bg-gray-800 p-4 rounded-lg border border-gray-700",children:a.jsx(xP,{options:{layout:"tabs"}})}),a.jsx("button",{type:"submit",disabled:!n||l,className:"w-full bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white font-bold py-4 px-4 rounded-lg transition-all duration-300 transform hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed flex justify-center items-center gap-3 shadow-lg shadow-green-900/40 text-lg",children:l?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Processando..."]}):`Pagar R$ ${t.toLocaleString("pt-BR",{minimumFractionDigits:2})}`})]})},g_=({isOpen:t,onClose:e,onConfirm:s,amount:n,receiverName:i})=>{const{user:l}=Ps(),{siteConfig:d}=ns(),[u,f]=N.useState(()=>qb(d.stripePublishableKey||yP)),[m,g]=N.useState(""),[v,b]=N.useState(!1),[_,S]=N.useState(!1),[E,C]=N.useState(""),[T,R]=N.useState(!1);N.useEffect(()=>{d.stripePublishableKey&&f(qb(d.stripePublishableKey))},[d.stripePublishableKey]),N.useEffect(()=>{if(t){if(g(""),C(""),b(!1),typeof n!="number"||isNaN(n)||n<=0){C("O valor do contrato  invlido ou zero.");return}S(!0),bo.createPaymentIntent(n,`Pagamento para ${i}`,l==null?void 0:l.email).then(M=>{if(M&&M.clientSecret)g(M.clientSecret),b(!!M.isSimulated);else throw new Error("A resposta do servidor no incluiu o Client Secret.")}).catch(M=>{console.error("Payment Intent Error:",M),C(he(M))}).finally(()=>{S(!1)})}},[t,n,i,l]);const A=async()=>{R(!0),await new Promise(M=>setTimeout(M,2e3)),R(!1),s()};return t?a.jsx("div",{className:"fixed inset-0 bg-black/90 z-[80] flex justify-center items-center p-4 backdrop-blur-sm",children:a.jsxs("div",{className:"bg-gray-900 text-white rounded-2xl shadow-2xl w-full max-w-lg relative p-0 overflow-hidden flex flex-col max-h-[95vh] border border-gray-700",children:[a.jsxs("div",{className:"bg-gradient-to-r from-gray-800 to-gray-900 p-6 border-b border-gray-800 flex justify-between items-center relative overflow-hidden",children:[a.jsxs("div",{className:"relative z-10",children:[a.jsxs("h2",{className:"text-xl font-bold font-poppins flex items-center gap-2",children:[a.jsx(As,{className:"w-5 h-5 text-green-400"}),"Checkout Seguro"]}),a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Sua transao  protegida e criptografada."})]}),a.jsx("button",{onClick:e,className:"text-gray-400 hover:text-white relative z-10",children:a.jsx(It,{})})]}),a.jsxs("div",{className:"overflow-y-auto p-6",children:[a.jsxs("div",{className:"bg-gray-800/50 p-4 rounded-lg border border-gray-700 flex justify-between items-center mb-6",children:[a.jsx("div",{className:"text-sm text-gray-400",children:"Total a pagar:"}),a.jsxs("div",{className:"text-2xl font-bold text-green-400 font-mono",children:["R$ ",n.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),_?a.jsxs("div",{className:"text-center py-12 text-gray-400",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),"Iniciando conexo segura..."]}):v?a.jsxs("div",{className:"animate-fade-in space-y-6",children:[a.jsxs("div",{className:"bg-blue-500/10 border-l-4 border-blue-500 p-4 rounded-r-lg",children:[a.jsx("p",{className:"text-sm font-bold text-blue-300 mb-1",children:"Modo de Simulao Ativado"}),a.jsx("p",{className:"text-xs text-gray-400",children:"O servidor de pagamentos real est offline. Para no travar seu teste, voc pode usar este boto de simulao para prosseguir com o fluxo do contrato."})]}),a.jsx("button",{onClick:A,disabled:T,className:"w-full bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white font-bold py-4 px-4 rounded-lg transition-all shadow-lg flex justify-center items-center gap-2 text-lg",children:T?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Simulando..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Oe,{className:"w-6 h-6"}),"Confirmar Pagamento Simulado"]})})]}):E?a.jsxs("div",{className:"text-center py-8",children:[a.jsxs("div",{className:"bg-red-500/10 p-4 rounded-xl border border-red-500/20 mb-6 text-red-400",children:[a.jsx("p",{className:"font-bold mb-2 text-sm uppercase",children:"Falha na Requisio"}),a.jsx("p",{className:"text-xs",children:E})]}),a.jsx("button",{onClick:e,className:"bg-gray-700 text-white px-6 py-2 rounded-full font-bold hover:bg-gray-600 transition-colors",children:"Fechar"})]}):m?a.jsx(m_,{stripe:u,options:{clientSecret:m,appearance:{theme:"night"}},children:a.jsx(vP,{amount:n,onSuccess:s,onError:M=>C(M)})}):null]}),a.jsx("div",{className:"bg-gray-900 border-t border-gray-800 p-4 text-center text-[10px] text-gray-500",children:a.jsx("p",{children:"Ao clicar em pagar, voc autoriza o processamento seguro via plataforma."})})]})}):null},bP=({isOpen:t,onClose:e,onSubmit:s,targetName:n})=>{const[i,l]=N.useState(0),[d,u]=N.useState(0),[f,m]=N.useState(""),[g,v]=N.useState(!1),[b,_]=N.useState("");if(!t)return null;const S=async E=>{if(E.preventDefault(),i===0){_("Por favor, selecione uma nota de 1 a 5 estrelas.");return}v(!0),await new Promise(C=>setTimeout(C,500)),s(i,f),v(!1)};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-50 flex justify-center items-center p-4",children:a.jsxs("div",{className:"bg-gray-800 text-white rounded-xl shadow-2xl w-full max-w-md relative p-4 sm:p-8 animate-fade-in max-h-[90vh] overflow-y-auto",children:[a.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-500 hover:text-white",children:a.jsx(It,{})}),a.jsx("h2",{className:"text-2xl font-bold font-poppins mb-2 text-center",children:"Avaliar Experincia"}),a.jsxs("p",{className:"text-gray-400 text-center mb-6",children:["Como foi trabalhar com ",a.jsx("strong",{className:"text-white",children:n}),"?"]}),a.jsxs("form",{onSubmit:S,children:[a.jsx("div",{className:"flex justify-center gap-2 mb-6",children:[1,2,3,4,5].map(E=>a.jsx("button",{type:"button",onClick:()=>l(E),onMouseEnter:()=>u(E),onMouseLeave:()=>u(0),className:"focus:outline-none transition-transform transform hover:scale-110",children:a.jsx(At,{className:`w-10 h-10 ${(d||i)>=E?"text-yellow-400":"text-gray-600"}`})},E))}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{htmlFor:"comment",className:"block text-sm font-medium text-gray-300 mb-1",children:"Comentrio (Opcional)"}),a.jsx("textarea",{id:"comment",rows:4,className:"w-full bg-gray-700 border border-gray-600 rounded-md py-3 px-3 text-base text-white focus:outline-none focus:ring-2 focus:ring-primary resize-none",placeholder:"Conte mais detalhes sobre o evento...",value:f,onChange:E=>m(E.target.value)})]}),b&&a.jsx("p",{className:"text-red-400 text-sm text-center mb-4",children:b}),a.jsx("button",{type:"submit",disabled:g,className:"w-full bg-secondary text-white font-bold py-3 px-4 rounded-full hover:bg-opacity-80 transition-all duration-300 transform hover:scale-105 disabled:opacity-50 disabled:scale-100",children:g?"Enviando...":"Enviar Avaliao"})]})]})})},wP=(t,e)=>{if(t==="concluido"&&e)return Wa(e,t)?{text:"Finalizado & Liberado",color:"text-green-400",bg:"bg-green-900/30",border:"border-green-500/50"}:{text:"Pago (Em Custdia)",color:"text-blue-300",bg:"bg-blue-900/30",border:"border-blue-500/50"};switch(t){case"enviado":return{text:"Aguardando Assinatura",color:"text-purple-300",bg:"bg-purple-900/30",border:"border-purple-500/50"};case"assinado":return{text:"Assinado (Aguardando Pagamento)",color:"text-yellow-300",bg:"bg-yellow-900/30",border:"border-yellow-500/50"};case"cancelado":return{text:"Cancelado",color:"text-red-400",bg:"bg-red-900/30",border:"border-red-500/50"};default:return{text:"Rascunho",color:"text-gray-300",bg:"bg-gray-800",border:"border-gray-600"}}},Bi=({active:t,completed:e,cancelled:s,label:n,icon:i,date:l})=>a.jsxs("div",{className:"flex flex-col items-center flex-1 relative z-10",children:[a.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center border-2 transition-all duration-500 shadow-xl ${s?"bg-red-600 border-red-500 text-white shadow-red-900/30":e?"bg-green-500 border-green-400 text-white shadow-green-900/30":t?"bg-primary border-white text-dark shadow-primary/30 scale-110":"bg-gray-800 border-gray-600 text-gray-600"}`,children:s?a.jsx(Ta,{className:"w-6 h-6"}):e?a.jsx(Oe,{className:"w-6 h-6"}):a.jsx(i,{className:"w-5 h-5"})}),a.jsx("span",{className:`text-xs mt-3 font-bold text-center tracking-wide ${s?"text-red-400":e?"text-green-400":t?"text-white":"text-gray-500"}`,children:n}),l&&a.jsx("span",{className:"text-[10px] text-gray-400 mt-1 font-mono",children:l})]}),Tf=({completed:t,cancelled:e})=>a.jsx("div",{className:`flex-1 h-1 mx-2 transition-colors duration-500 rounded-full ${e?"bg-red-900/50":t?"bg-green-500":"bg-gray-800"}`}),NP=()=>{const{id:t}=ud(),{profile:e}=Ps(),[s,n]=N.useState(null),[i,l]=N.useState(!0),[d,u]=N.useState(!1),[f,m]=N.useState(!1),[g,v]=N.useState(!1),[b,_]=N.useState(""),[S,E]=N.useState(""),[C,T]=N.useState(!1),[R,A]=N.useState(!1),[M,z]=N.useState(!1),[F,G]=N.useState(!1),[K,I]=N.useState(""),[U,q]=N.useState(""),[H,$]=N.useState(null),ie=N.useRef(null),re=N.useCallback(async()=>{if(!t){_("ID do contrato no encontrado."),l(!1);return}l(!0);try{const be=await da.getById(t);if(n(be),e&&(be==null?void 0:be.status)==="concluido"){const He=await cm.getByContractAndReviewer(t,e.id);$(He)}}catch(be){_("Falha ao carregar o contrato: "+he(be))}finally{l(!1)}},[t,e]);N.useEffect(()=>{re()},[re]),N.useEffect(()=>{if(S||b){const be=setTimeout(()=>{E(""),_("")},5e3);return()=>clearTimeout(be)}},[S,b]);const P=async()=>{if(!s||!e)return;if(U.trim().toLowerCase()!==e.nome.trim().toLowerCase()){_(`A assinatura deve corresponder exatamente ao nome do seu perfil: "${e.nome}"`);return}u(!0),E("");const be=e.tipo==="artista",He=Array.isArray(s.estabelecimentos)?s.estabelecimentos[0]:s.estabelecimentos,lt=Array.isArray(s.artistas)?s.artistas[0]:s.artistas,Rt=Array.isArray(He==null?void 0:He.usuarios)?He.usuarios[0]:He==null?void 0:He.usuarios,Nt=Array.isArray(lt==null?void 0:lt.usuarios)?lt.usuarios[0]:lt==null?void 0:lt.usuarios,Je=be?Rt==null?void 0:Rt.id:Nt==null?void 0:Nt.id;try{const Jt=await da.sign(s.id,be?"artista":"estabelecimento"),ys=Jt.assinatura_artista&&Jt.assinatura_estabelecimento;let Aa=`Contrato assinado por ${e.nome}`;ys&&(await da.updateStatus(s.id,"assinado"),Aa="Contrato assinado por ambas as partes! Aguardando pagamento."),Je&&await wa.create({usuario_id:Je,tipo:"contrato",titulo:Aa,descricao:`O status do contrato para o evento em ${new Date(s.data_evento).toLocaleDateString("pt-BR",{timeZone:"UTC"})} foi atualizado.`,url_destino:`/contratos/${s.id}`}),E("Contrato assinado com sucesso!"),G(!1),q(""),re()}catch(Jt){_("Erro ao assinar o contrato: "+he(Jt))}finally{u(!1)}},O=async()=>{if(s){T(!1);try{await da.concludePayment(s.id);const be=Array.isArray(s.artistas)?s.artistas[0]:s.artistas,He=Array.isArray(be==null?void 0:be.usuarios)?be.usuarios[0]:be==null?void 0:be.usuarios;He!=null&&He.id&&await wa.create({usuario_id:He.id,tipo:"contrato",titulo:"Pagamento Realizado!",descricao:"O pagamento para o contrato foi confirmado e est em custdia.",url_destino:`/contratos/${s.id}`}),E("Pagamento realizado com sucesso!"),re()}catch(be){_("Erro ao processar pagamento: "+he(be))}}},Y=async(be,He)=>{if(!s||!e)return;z(!1);const lt=Array.isArray(s.artistas)?s.artistas[0]:s.artistas,Rt=Array.isArray(s.estabelecimentos)?s.estabelecimentos[0]:s.estabelecimentos,Nt=Array.isArray(lt==null?void 0:lt.usuarios)?lt.usuarios[0]:lt==null?void 0:lt.usuarios,Je=Array.isArray(Rt==null?void 0:Rt.usuarios)?Rt.usuarios[0]:Rt==null?void 0:Rt.usuarios,Jt=e.tipo==="artista"?Je==null?void 0:Je.id:Nt==null?void 0:Nt.id;if(Jt)try{const ys=await cm.create({contrato_id:s.id,avaliador_id:e.id,alvo_id:Jt,nota:be,comentario:He});$(ys),E("Avaliao enviada!"),await wa.create({usuario_id:Jt,tipo:"avaliacao",titulo:`Nova avaliao de ${e.nome}`,descricao:`Voc recebeu ${be} estrelas.`,url_destino:"#"})}catch(ys){_("Erro ao avaliar: "+he(ys))}},ne=async()=>{if(ie.current){m(!0);try{const be=(await cd(async()=>{const{default:et}=await import("./html2canvas.esm-QH1iLAAe.js");return{default:et}},[])).default,{jsPDF:He}=await cd(async()=>{const{jsPDF:et}=await import("./jspdf.es.min-CJ8LCFya.js").then(os=>os.j);return{jsPDF:et}},[]),lt=await be(ie.current,{scale:2,useCORS:!0,backgroundColor:"#ffffff",windowWidth:1200}),Rt=lt.toDataURL("image/png"),Nt=new He("p","mm","a4"),Je=Nt.internal.pageSize.getWidth(),Jt=Nt.internal.pageSize.getHeight(),ys=lt.width,Aa=lt.height,On=ys/Aa,Os=Je/On;let _t=Os,rs=0;for(Nt.addImage(Rt,"PNG",0,rs,Je,Os),_t-=Jt;_t>0;)rs=_t-Os,Nt.addPage(),Nt.addImage(Rt,"PNG",0,rs,Je,Os),_t-=Jt;Nt.save(`contrato-${s==null?void 0:s.id.substring(0,8)}.pdf`)}catch(be){console.error("PDF Error:",be),_("Erro ao gerar PDF.")}finally{m(!1)}}};if(i)return a.jsx("div",{className:"flex justify-center items-center h-screen bg-dark text-white",children:"Carregando detalhes..."});if(b||!s)return a.jsx("div",{className:"flex justify-center items-center h-screen bg-dark text-red-400",children:b||"Contrato no encontrado."});const le=Array.isArray(s.artistas)?s.artistas[0]:s.artistas,L=Array.isArray(s.estabelecimentos)?s.estabelecimentos[0]:s.estabelecimentos,D=Array.isArray(le==null?void 0:le.usuarios)?le.usuarios[0]:le==null?void 0:le.usuarios,te=Array.isArray(L==null?void 0:L.usuarios)?L.usuarios[0]:L==null?void 0:L.usuarios;if(!D||!te)return a.jsx("div",{className:"text-center p-8 text-red-400",children:"Dados incompletos."});const se=(e==null?void 0:e.id)===D.id,fe=(e==null?void 0:e.id)===te.id,ee=new Date(s.data_evento),me=new Date,je=ee.getTime()>me.getTime(),pe=Wa(s.data_evento,s.status);Ed(s.data_evento);const Ne=se&&!s.assinatura_artista||fe&&!s.assinatura_estabelecimento,Me=fe&&s.status==="assinado"&&(s.valor||0)>0,ue=s.status==="concluido",_e=!!s.data_pagamento,Ue=s.status==="cancelado",Fe=!je&&me.getTime()-ee.getTime()<2880*60*1e3,dt=s.status!=="cancelado"&&(se||fe)&&(je||ue&&Fe),pt=ue&&!je&&!H&&(se||fe),Dt=se?te.nome:D.nome,Ls=zm(s.valor,s.taxa_servico),sa=wP(s.status,s.data_evento),ga=s.status==="assinado"||s.status==="concluido"||Ue&&_e,Ae=!je&&!Ue;return a.jsxs("div",{className:"bg-dark text-white font-sans min-h-screen",children:[a.jsx("section",{className:"bg-gray-900 border-b border-gray-800 pt-32 pb-8 px-4",children:a.jsx("div",{className:"container mx-auto max-w-6xl",children:a.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-6",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-bold border flex items-center gap-2 ${sa.bg} ${sa.color} ${sa.border}`,children:[s.status==="concluido"&&a.jsx(Oe,{className:"w-4 h-4"}),sa.text]}),a.jsxs("span",{className:"text-gray-500 text-xs font-mono",children:["#",s.id.substring(0,8).toUpperCase()]})]}),a.jsx("h1",{className:"text-3xl md:text-4xl font-black font-poppins text-white leading-tight",children:se?te.nome:D.nome}),a.jsxs("div",{className:"flex items-center gap-4 mt-2 text-gray-400 text-sm",children:[a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(ma,{className:"w-4 h-4"})," ",ee.toLocaleDateString("pt-BR",{timeZone:"UTC"})]}),a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(ea,{className:"w-4 h-4"})," ",je?"Agendado":"Realizado"]})]})]}),a.jsxs("div",{className:"flex flex-wrap gap-3",children:[a.jsx("button",{onClick:ne,disabled:f,className:"flex items-center gap-2 bg-gray-800 hover:bg-gray-700 text-white px-4 py-2.5 rounded-lg font-bold text-sm transition-colors border border-gray-700",children:f?"...":a.jsxs(a.Fragment,{children:[a.jsx(Ao,{className:"w-4 h-4"})," PDF"]})}),dt&&a.jsxs("button",{onClick:()=>A(!0),className:"flex items-center gap-2 bg-red-900/20 hover:bg-red-900/40 text-red-400 px-4 py-2.5 rounded-lg font-bold text-sm transition-colors border border-red-900/30",children:[a.jsx(Ta,{className:"w-4 h-4"})," ",_e?"Disputa":"Cancelar"]}),Ne&&a.jsxs("button",{onClick:()=>G(!0),className:"flex items-center gap-2 bg-primary hover:bg-primary/90 text-dark px-6 py-2.5 rounded-lg font-bold text-sm transition-colors shadow-lg shadow-primary/20",children:[a.jsx(Yc,{className:"w-4 h-4"})," Assinar"]}),Me&&a.jsxs("button",{onClick:()=>T(!0),className:"flex items-center gap-2 bg-green-600 hover:bg-green-500 text-white px-6 py-2.5 rounded-lg font-bold text-sm transition-colors shadow-lg shadow-green-900/30",children:[a.jsx(Rs,{className:"w-4 h-4"})," Pagar Agora"]}),pt&&a.jsxs("button",{onClick:()=>z(!0),className:"flex items-center gap-2 bg-yellow-500 hover:bg-yellow-400 text-dark px-6 py-2.5 rounded-lg font-bold text-sm transition-colors shadow-lg shadow-yellow-900/30",children:[a.jsx(At,{className:"w-4 h-4"})," Avaliar"]})]})]})})}),a.jsxs("div",{className:"container mx-auto max-w-6xl px-4 mt-6",children:[S&&a.jsx("div",{className:"p-4 rounded-lg bg-green-500/10 border border-green-500/20 text-green-400 text-center font-medium animate-fade-in",children:S}),b&&a.jsx("div",{className:"p-4 rounded-lg bg-red-500/10 border border-red-500/20 text-red-400 text-center font-medium animate-fade-in",children:b})]}),a.jsxs("div",{className:"container mx-auto max-w-6xl px-4 py-8 grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsxs("section",{className:"lg:col-span-2 space-y-8",children:[a.jsxs("div",{className:"bg-gray-900 rounded-2xl border border-gray-800 p-8 shadow-xl",children:[a.jsx("h3",{className:"text-sm font-bold text-gray-400 uppercase tracking-wider mb-8",children:"Progresso do Contrato"}),a.jsxs("div",{className:"flex items-center justify-between relative px-2",children:[a.jsx("div",{className:"absolute top-5 left-4 right-4 h-1 bg-gray-800 -z-0"}),a.jsx(Bi,{active:!0,completed:ga,label:"Assinado",icon:Yc}),a.jsx(Tf,{completed:ga}),a.jsx(Bi,{active:ga,completed:ue||Ue&&_e,label:_e?"Pago":"Pagamento",icon:Rs}),a.jsx(Tf,{completed:ue||Ue&&_e,cancelled:Ue&&_e}),Ue&&_e?a.jsx(Bi,{active:!0,completed:!1,cancelled:!0,label:"Disputa",icon:Ta}):a.jsxs(a.Fragment,{children:[a.jsx(Bi,{active:ue,completed:Ae,label:"Evento",icon:ma,date:ee.toLocaleDateString("pt-BR",{timeZone:"UTC"})}),a.jsx(Tf,{completed:Ae}),a.jsx(Bi,{active:Ae,completed:pe,label:"Liberado",icon:Oe})]})]})]}),a.jsxs("div",{className:"bg-gray-800 rounded-2xl border border-gray-700 overflow-hidden shadow-2xl relative",children:[a.jsxs("div",{className:"bg-gray-900/50 p-4 border-b border-gray-700 flex justify-between items-center",children:[a.jsx("span",{className:"text-xs font-mono text-gray-500",children:"RES-DOC-v1.0"}),a.jsx("span",{className:"text-xs font-bold text-gray-400 uppercase",children:"Visualizao do Documento"})]}),a.jsx("div",{className:"p-8 md:p-12 bg-white text-black min-h-[600px] font-serif text-sm leading-relaxed overflow-x-auto",children:a.jsxs("div",{ref:ie,className:"pdf-content min-w-[100%] max-w-full",children:[a.jsxs("div",{className:"text-center mb-8 border-b-2 border-black pb-4",children:[a.jsx("h2",{className:"text-2xl font-bold uppercase mb-2",children:"Contrato de Prestao de Servios Artsticos"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Celebrado atravs da plataforma RESONA"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-8 text-sm",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-bold uppercase text-xs text-gray-500 mb-1",children:"Contratante"}),a.jsx("p",{className:"font-bold",children:te.nome}),a.jsx("p",{children:te.cidade})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"font-bold uppercase text-xs text-gray-500 mb-1",children:"Contratado"}),a.jsx("p",{className:"font-bold",children:D.nome}),a.jsx("p",{children:D.cidade})]})]}),a.jsxs("div",{className:"space-y-6 text-justify",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"1. OBJETO:"})," O presente contrato tem por objeto a apresentao musical do CONTRATADO no estabelecimento do CONTRATANTE, na data de ",a.jsx("strong",{children:ee.toLocaleDateString("pt-BR",{timeZone:"UTC"})}),"."]}),a.jsxs("p",{children:[a.jsx("strong",{children:"2. PAGAMENTO:"})," O valor total de ",a.jsxs("strong",{children:["R$ ",Ls.total.toLocaleString("pt-BR",{minimumFractionDigits:2})]})," ser pago via plataforma, ficando em custdia (Escrow) at a realizao do evento."]}),a.jsxs("p",{children:[a.jsx("strong",{children:"3. CONDIES:"})," ",s.condicoes||"Nenhuma condio adicional."]})]}),a.jsxs("div",{className:"mt-12 flex justify-between items-end pt-8 border-t border-gray-300",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-48 border-b border-black mb-2"}),a.jsx("p",{className:"font-bold text-xs",children:te.nome}),s.assinatura_estabelecimento&&a.jsx("p",{className:"text-[10px] text-green-600",children:"Assinado Digitalmente"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-48 border-b border-black mb-2"}),a.jsx("p",{className:"font-bold text-xs",children:D.nome}),s.assinatura_artista&&a.jsx("p",{className:"text-[10px] text-green-600",children:"Assinado Digitalmente"})]})]})]})})]})]}),a.jsx("aside",{className:"lg:col-span-1 space-y-6",children:a.jsxs("div",{className:"bg-gray-800 rounded-2xl border border-gray-700 p-6 shadow-lg sticky top-32",children:[a.jsxs("h3",{className:"text-lg font-bold text-white mb-6 flex items-center gap-2",children:[a.jsx(Rs,{className:"w-5 h-5 text-green-400"})," Resumo Financeiro"]}),a.jsxs("div",{className:"space-y-4 mb-6",children:[a.jsxs("div",{className:"flex justify-between items-center text-sm",children:[a.jsx("span",{className:"text-gray-400",children:"Cach Artstico"}),a.jsxs("span",{className:"text-white font-mono",children:["R$ ",Ls.cache.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),a.jsxs("div",{className:"flex justify-between items-center text-sm",children:[a.jsxs("span",{className:"text-gray-400",children:["Taxa de Servio (",Ji*100,"%)"]}),a.jsxs("span",{className:"text-gray-400 font-mono",children:["R$ ",Ls.fee.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),a.jsx("div",{className:"h-px bg-gray-700 my-2"}),a.jsxs("div",{className:"flex justify-between items-center text-lg font-bold",children:[a.jsx("span",{className:"text-white",children:"Total"}),a.jsxs("span",{className:"text-green-400 font-mono",children:["R$ ",Ls.total.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]}),a.jsxs("div",{className:"bg-gray-900 rounded-lg p-4 border border-gray-700",children:[a.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase mb-2",children:"Status do Dinheiro"}),pe?a.jsxs("div",{className:"flex items-center gap-2 text-green-400 text-sm font-bold",children:[a.jsx(Oe,{className:"w-5 h-5"})," Liberado para Saque"]}):ue?a.jsxs("div",{className:"flex items-center gap-2 text-blue-300 text-sm font-bold",children:[a.jsx(As,{className:"w-5 h-5"})," Protegido em Custdia"]}):a.jsxs("div",{className:"flex items-center gap-2 text-yellow-400 text-sm font-bold",children:[a.jsx(ea,{className:"w-5 h-5"})," Aguardando Pagamento"]})]})]})})]}),a.jsx(g_,{isOpen:C,onClose:()=>T(!1),onConfirm:O,amount:Ls.total,receiverName:`RESONA (Custdia para ${D.nome})`}),F&&e&&a.jsx("div",{className:"fixed inset-0 bg-black/90 z-50 flex justify-center items-center p-4 backdrop-blur-sm",children:a.jsxs("div",{className:"bg-gray-800 text-white rounded-xl shadow-2xl w-full max-w-lg relative p-8 animate-fade-in border border-gray-700",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("h3",{className:"text-2xl font-bold font-poppins flex items-center gap-2",children:[a.jsx(Yc,{className:"w-8 h-8 text-primary"}),"Assinatura Digital"]}),a.jsx("button",{onClick:()=>G(!1),className:"text-gray-500 hover:text-white",children:a.jsx(It,{})})]}),a.jsx("p",{className:"text-gray-300 text-sm mb-6",children:"Para formalizar, digite seu nome completo abaixo:"}),a.jsx("input",{type:"text",value:U,onChange:be=>{q(be.target.value),_("")},placeholder:`Ex: ${e.nome}`,className:"w-full bg-gray-900 border border-gray-600 rounded-lg p-4 text-white focus:outline-none focus:ring-2 focus:ring-primary text-lg mb-6"}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx("button",{onClick:()=>G(!1),className:"px-6 py-3 bg-gray-700 rounded-lg hover:bg-gray-600 text-white font-medium",children:"Cancelar"}),a.jsx("button",{onClick:P,disabled:d||!U.trim(),className:"px-8 py-3 bg-primary text-dark rounded-lg hover:bg-opacity-90 font-bold disabled:opacity-50",children:d?"Processando...":"Confirmar"})]})]})}),a.jsx(bP,{isOpen:M,onClose:()=>z(!1),onSubmit:Y,targetName:Dt})]})},_P=()=>{const{user:t,profile:e}=Ps(),[s,n]=N.useState(null),[i,l]=N.useState(!1),[d,u]=N.useState(""),f=async(m,g)=>{l(!0),u(m),n(null);try{const v=await g();n(v)}catch(v){n({error:v.message,details:v})}finally{l(!1)}};return t?a.jsxs("main",{className:"min-h-screen bg-dark text-white p-6 flex flex-col md:flex-row gap-6",children:[a.jsxs("aside",{className:"w-full md:w-1/3 bg-gray-800 p-4 rounded-lg shadow-lg overflow-y-auto max-h-[90vh]",children:[a.jsx("h2",{className:"text-xl font-bold mb-4 text-primary font-poppins",children:"Painel de Testes API"}),a.jsxs("div",{className:"mb-4 p-2 bg-gray-900 rounded text-xs text-gray-400",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"User ID (Auth):"})," ",t.id]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Profile ID:"})," ",(e==null?void 0:e.id)||"N/A"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Tipo:"})," ",(e==null?void 0:e.tipo)||"N/A"]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-secondary mb-2 border-b border-gray-700 pb-1",children:"Usurios"}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("button",{onClick:()=>f("Buscar Meu Perfil (Auth ID)",()=>Xe.getProfileByAuthId(t.id)),className:"w-full text-left px-3 py-2 bg-gray-700 hover:bg-gray-600 rounded text-sm",children:"Meu Perfil Completo"}),a.jsx("button",{onClick:()=>f("Listar Artistas",()=>Xe.getArtists({page:0,pageSize:5})),className:"w-full text-left px-3 py-2 bg-gray-700 hover:bg-gray-600 rounded text-sm",children:"Listar Artistas (Top 5)"}),a.jsx("button",{onClick:()=>f("Listar Estabelecimentos",()=>Xe.getVenues({page:0,pageSize:5})),className:"w-full text-left px-3 py-2 bg-gray-700 hover:bg-gray-600 rounded text-sm",children:"Listar Estabelecimentos"})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-secondary mb-2 border-b border-gray-700 pb-1",children:"Contratos"}),a.jsx("div",{className:"space-y-2",children:a.jsx("button",{onClick:()=>e?f("Listar Meus Contratos",()=>da.listByProfile(e.id,e.tipo)):alert("Perfil no carregado"),className:"w-full text-left px-3 py-2 bg-gray-700 hover:bg-gray-600 rounded text-sm",children:"Listar Meus Contratos"})})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-secondary mb-2 border-b border-gray-700 pb-1",children:"Mensagens"}),a.jsx("div",{className:"space-y-2",children:a.jsx("button",{onClick:()=>e?f("Minhas Conversas",()=>yo.getConversations(e.id)):alert("Perfil no carregado"),className:"w-full text-left px-3 py-2 bg-gray-700 hover:bg-gray-600 rounded text-sm",children:"Listar Minhas Conversas"})})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-secondary mb-2 border-b border-gray-700 pb-1",children:"Blog"}),a.jsx("div",{className:"space-y-2",children:a.jsx("button",{onClick:()=>f("Posts Publicados",()=>vo.getPublishedPosts({page:0,pageSize:5})),className:"w-full text-left px-3 py-2 bg-gray-700 hover:bg-gray-600 rounded text-sm",children:"Listar Posts"})})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-secondary mb-2 border-b border-gray-700 pb-1",children:"Notificaes"}),a.jsx("div",{className:"space-y-2",children:a.jsx("button",{onClick:()=>e?f("Minhas Notificaes",()=>wa.getByUser(e.id)):alert("Perfil no carregado"),className:"w-full text-left px-3 py-2 bg-gray-700 hover:bg-gray-600 rounded text-sm",children:"Listar Notificaes"})})]})]})]}),a.jsxs("section",{className:"w-full md:w-2/3 bg-gray-900 p-6 rounded-lg shadow-inner border border-gray-700 flex flex-col",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4 border-b border-gray-700 pb-2",children:[a.jsxs("h3",{className:"font-bold text-lg",children:["Resultado: ",d]}),i&&a.jsx("span",{className:"text-yellow-400 animate-pulse",children:"Carregando..."})]}),a.jsx("div",{className:"flex-grow overflow-auto bg-black p-4 rounded text-sm font-mono text-green-400",children:s?a.jsx("pre",{children:JSON.stringify(s,null,2)}):a.jsx("p",{className:"text-gray-500",children:"Clique em um boto ao lado para testar a API."})})]})]}):a.jsxs("div",{className:"p-8 text-center text-white",children:[a.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Teste de API"}),a.jsx("p",{className:"text-red-400",children:"Voc precisa estar logado para testar a maioria das funes da API."}),a.jsx("a",{href:"/#/login",className:"text-primary underline mt-4 block",children:"Ir para Login"})]})},Af=({title:t,price:e,numericPrice:s,description:n,features:i,isPopular:l,buttonText:d,icon:u,colorClass:f,onSelect:m,isActive:g,expirationDate:v})=>a.jsxs("div",{className:`relative bg-gray-900 rounded-3xl p-8 border ${l?"border-primary ring-1 ring-primary/30 shadow-2xl shadow-primary/10":"border-gray-800"} flex flex-col h-full transition-all hover:-translate-y-2 duration-300 ${g?"ring-2 ring-green-500/50":""}`,children:[l&&a.jsx("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2 bg-primary text-dark font-black text-[10px] px-4 py-1 rounded-full uppercase tracking-widest shadow-lg",children:"Mais Vendido"}),a.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center mb-6 ${f} bg-opacity-20 border border-opacity-30`,children:u}),a.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:t}),a.jsxs("div",{className:"flex items-baseline gap-1 mb-4",children:[a.jsx("span",{className:"text-4xl font-black text-white",children:e}),s>0&&a.jsx("span",{className:"text-gray-500 text-sm",children:"/ms"})]}),a.jsx("p",{className:"text-gray-400 text-sm mb-8 leading-relaxed",children:n}),a.jsx("ul",{className:"space-y-4 mb-10 flex-grow",children:i.map((b,_)=>a.jsxs("li",{className:"flex items-start gap-3 text-sm text-gray-300",children:[a.jsx(Oe,{className:"w-5 h-5 text-green-500 shrink-0 mt-0.5"}),a.jsx("span",{children:b})]},_))}),g&&v&&a.jsx("div",{className:"mb-4 text-center",children:a.jsxs("p",{className:"text-[10px] text-green-400 font-bold uppercase tracking-widest",children:["Renovao em: ",new Date(v).toLocaleDateString()]})}),a.jsx("button",{onClick:()=>m(t.toLowerCase().includes("pro")?"pro":t.toLowerCase().includes("business")?"business":"free",s),disabled:g,className:`w-full py-4 rounded-xl font-bold transition-all shadow-lg flex items-center justify-center gap-2 ${g?"bg-green-500/20 text-green-400 border border-green-500/30":l?"bg-primary text-dark hover:bg-white hover:shadow-primary/40":"bg-gray-800 text-white hover:bg-gray-700"}`,children:g?"Plano Atual Ativo":d})]}),SP=()=>{const{profile:t,user:e,refreshProfile:s}=Ps(),n=Xt(),[i,l]=N.useState(null),[d,u]=N.useState(0),[f,m]=N.useState(!1),[g,v]=N.useState(null),b=async(S,E)=>{if(!e){n("/login");return}(t==null?void 0:t.plano)!==S&&(E===0?_(S):(l(S),u(E),m(!0)))},_=async S=>{v(null);try{await Xe.updateUserPlan(t.id,S),await s(),v({message:`Parabns! Sua assinatura ${S.toUpperCase()} foi ativada por 30 dias.`,type:"success"}),setTimeout(()=>n("/painel"),2500)}catch(E){v({message:"Erro ao atualizar plano: "+he(E),type:"error"})}};return a.jsxs("div",{className:"bg-dark text-white font-sans min-h-screen pb-24",children:[a.jsx(Qt,{title:"Planos",description:"Escolha o plano ideal para sua carreira musical. Gratuito, Pro e Business com recursos exclusivos."}),a.jsxs("section",{className:"pt-32 pb-20 text-center px-4 relative overflow-hidden",children:[a.jsxs("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-full h-full max-w-6xl opacity-20 pointer-events-none",children:[a.jsx("div",{className:"absolute top-0 left-0 w-96 h-96 bg-primary rounded-full blur-[120px]"}),a.jsx("div",{className:"absolute bottom-0 right-0 w-96 h-96 bg-secondary rounded-full blur-[120px]"})]}),a.jsxs("div",{className:"relative z-10 max-w-4xl mx-auto",children:[a.jsx("h1",{className:"text-4xl md:text-6xl font-black text-white tracking-tight mb-6 font-poppins leading-none",children:"Turbine sua Carreira."}),a.jsx("p",{className:"text-gray-400 text-lg md:text-xl max-w-2xl mx-auto leading-relaxed",children:"Selecione o plano ideal para o seu momento na msica."})]})]}),a.jsxs("section",{id:"pricing-plans",className:"container mx-auto px-4",children:[g&&a.jsx("div",{className:`max-w-2xl mx-auto mb-12 p-4 rounded-xl text-center font-bold animate-fade-in ${g.type==="success"?"bg-green-500/20 text-green-400 border border-green-500/30":"bg-red-500/20 text-red-400 border border-red-500/30"}`,children:g.message}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 max-w-7xl mx-auto",children:[a.jsx(Af,{title:"Free",price:"Grtis",numericPrice:0,description:"O ponto de partida para novos talentos e palcos.",colorClass:"bg-gray-500",icon:a.jsx(At,{className:"text-gray-400"}),buttonText:"Comear Agora",onSelect:b,isActive:(t==null?void 0:t.plano)==="free",features:["Perfil pblico bsico","At 5 fotos no portflio","Agenda simplificada","Contratos padro"]}),a.jsx(Af,{title:"RESONA Pro",price:"R$ 29,90",numericPrice:29.9,isPopular:!0,description:"A escolha dos msicos que buscam profissionalismo.",colorClass:"bg-primary",icon:a.jsx(Ft,{className:"text-primary"}),buttonText:"Assinar Pro",onSelect:b,isActive:(t==null?void 0:t.plano)==="pro",expirationDate:t==null?void 0:t.plano_expiracao,features:["Selo Verificado","Busca Prioritria","Portflio Ilimitado","Estatsticas de Visitas","Taxas reduzidas"]}),a.jsx(Af,{title:"Business",price:"R$ 79,90",numericPrice:79.9,description:"Para locais e bandas com alto volume de shows.",colorClass:"bg-secondary",icon:a.jsx(Gm,{className:"text-secondary"}),buttonText:"Assinar Business",onSelect:b,isActive:(t==null?void 0:t.plano)==="business",expirationDate:t==null?void 0:t.plano_expiracao,features:["Destaque Master na Home","Suporte VIP","Conciliao Financeira","Analytics Avanado","Zero taxa de contrato"]})]})]}),i&&a.jsx(g_,{isOpen:f,onClose:()=>m(!1),onConfirm:()=>_(i),amount:d,receiverName:`Assinatura RESONNA ${i.toUpperCase()}`})]})},Kb=({position:t})=>{const{siteConfig:e}=ns(),s=t==="body-start"?e.scriptBodyStart:e.scriptBodyEnd;return N.useEffect(()=>{if(!s)return;const n=`script-container-${t}`;let i=document.getElementById(n);i||(i=document.createElement("div"),i.id=n,i.style.display="none",t==="body-start"?document.body.prepend(i):document.body.appendChild(i)),i.innerHTML="";const l=document.createElement("div");l.innerHTML=s,l.querySelectorAll("script").forEach(f=>{const m=document.createElement("script");Array.from(f.attributes).forEach(g=>{m.setAttribute(g.name,g.value)}),m.appendChild(document.createTextNode(f.innerHTML)),i==null||i.appendChild(m)}),Array.from(l.childNodes).filter(f=>f.nodeName!=="SCRIPT").forEach(f=>{i==null||i.appendChild(f.cloneNode(!0))})},[s,t]),null};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jP=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),EP=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,s,n)=>n?n.toUpperCase():s.toLowerCase()),Yb=t=>{const e=EP(t);return e.charAt(0).toUpperCase()+e.slice(1)},x_=(...t)=>t.filter((e,s,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===s).join(" ").trim(),CP=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var TP={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AP=N.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:s=2,absoluteStrokeWidth:n,className:i="",children:l,iconNode:d,...u},f)=>N.createElement("svg",{ref:f,...TP,width:e,height:e,stroke:t,strokeWidth:n?Number(s)*24/Number(e):s,className:x_("lucide",i),...!l&&!CP(u)&&{"aria-hidden":"true"},...u},[...d.map(([m,g])=>N.createElement(m,g)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=(t,e)=>{const s=N.forwardRef(({className:n,...i},l)=>N.createElement(AP,{ref:l,iconNode:e,className:x_(`lucide-${jP(Yb(t))}`,`lucide-${t}`,n),...i}));return s.displayName=Yb(t),s};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RP=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],kP=Us("arrow-left",RP);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],IP=Us("circle-alert",MP);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DP=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],PP=Us("database",DP);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UP=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],LP=Us("eye",UP);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OP=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],qP=Us("file-text",OP);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BP=[["path",{d:"m14 13-8.381 8.38a1 1 0 0 1-3.001-3l8.384-8.381",key:"pgg06f"}],["path",{d:"m16 16 6-6",key:"vzrcl6"}],["path",{d:"m21.5 10.5-8-8",key:"a17d9x"}],["path",{d:"m8 8 6-6",key:"18bi4p"}],["path",{d:"m8.5 7.5 8 8",key:"1oyaui"}]],$P=Us("gavel",BP);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zP=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Wb=Us("globe",zP);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VP=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],HP=Us("house",VP);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GP=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],FP=Us("lock",GP);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JP=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],Rf=Us("music",JP);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KP=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Xb=Us("shield-check",KP);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YP=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],WP=Us("shield",YP);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XP=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],QP=Us("user-check",XP),ZP=()=>a.jsxs("main",{className:"min-h-[80vh] flex flex-col items-center justify-center px-4 relative overflow-hidden bg-dark",children:[a.jsx(Qt,{title:"Pgina No Encontrada",description:"Desculpe, a pgina que voc est procurando no existe ou foi movida."}),a.jsx("div",{className:"absolute top-1/4 left-1/4 w-64 h-64 bg-primary/20 rounded-full blur-[100px] animate-pulse"}),a.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-64 h-64 bg-secondary/20 rounded-full blur-[100px] animate-pulse",style:{animationDelay:"1s"}}),a.jsxs("section",{className:"relative z-10 text-center max-w-2xl mx-auto",children:[a.jsxs("div",{className:"mb-8 inline-flex items-center justify-center w-24 h-24 rounded-full bg-gray-800/50 border border-gray-700 backdrop-blur-sm relative group",children:[a.jsx(Rf,{className:"w-12 h-12 text-primary group-hover:scale-110 transition-transform duration-300"}),a.jsx("div",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs font-bold px-2 py-1 rounded-full animate-bounce",children:"404"})]}),a.jsx("h1",{className:"text-5xl md:text-7xl font-bold font-montserrat mb-4 bg-gradient-to-r from-white via-primary to-secondary bg-clip-text text-transparent",children:"Ops! Nota Fora do Tom"}),a.jsx("p",{className:"text-xl text-gray-400 mb-12 font-light",children:"A pgina que voc est procurando parece ter sado do setlist. Que tal voltarmos para o palco principal?"}),a.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[a.jsxs(Se,{to:"/",className:"flex items-center gap-2 px-8 py-3 bg-primary text-dark font-bold rounded-xl hover:bg-white transition-all duration-300 shadow-lg shadow-primary/20 group",children:[a.jsx(HP,{className:"w-5 h-5"}),"Voltar para Incio"]}),a.jsxs("button",{onClick:()=>window.history.back(),className:"flex items-center gap-2 px-8 py-3 bg-gray-800 text-white font-medium rounded-xl hover:bg-gray-700 border border-gray-700 transition-all duration-300",children:[a.jsx(kP,{className:"w-5 h-5"}),"Pgina Anterior"]})]})]}),a.jsx("div",{className:"absolute top-20 right-10 opacity-10 animate-float",children:a.jsx(Rf,{className:"w-20 h-20"})}),a.jsx("div",{className:"absolute bottom-20 left-10 opacity-10 animate-float",style:{animationDelay:"2s"},children:a.jsx(Rf,{className:"w-16 h-16"})})]}),e8=()=>a.jsxs("div",{className:"bg-dark text-white min-h-screen pb-20",children:[a.jsx(Qt,{title:"Termos de Uso",description:"Leia os termos de uso da plataforma Resona. Regras para artistas e estabelecimentos."}),a.jsxs("section",{className:"relative py-20 overflow-hidden border-b border-gray-800",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-primary/5 to-transparent"}),a.jsxs("div",{className:"container mx-auto px-4 relative z-10 text-center",children:[a.jsx("div",{className:"inline-flex items-center justify-center p-3 bg-primary/10 rounded-2xl mb-6 ring-1 ring-primary/20",children:a.jsx(qP,{className:"w-8 h-8 text-primary"})}),a.jsx("h1",{className:"text-4xl md:text-5xl font-bold font-montserrat mb-4",children:"Termos de Uso"}),a.jsx("p",{className:"text-gray-400 max-w-2xl mx-auto text-lg",children:"Atualizado em 24 de Dezembro de 2025. Ao utilizar a Resona, voc concorda com estes termos."})]})]}),a.jsx("div",{className:"container mx-auto px-4 py-16",children:a.jsxs("div",{className:"max-w-4xl mx-auto space-y-12",children:[a.jsxs("section",{className:"bg-gray-900/40 border border-gray-800 p-8 rounded-3xl backdrop-blur-sm shadow-xl",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx(WP,{className:"w-6 h-6 text-primary"}),a.jsx("h2",{className:"text-2xl font-bold font-poppins",children:"1. Aceitao dos Termos"})]}),a.jsx("div",{className:"prose prose-invert max-w-none text-gray-300 leading-relaxed",children:a.jsx("p",{children:"A Resona  uma plataforma de conexo entre artistas musicais e estabelecimentos. Ao acessar ou usar nosso site e servios, voc concorda em cumprir e ser regido pelos seguintes termos e condies de uso. Se voc no concordar com qualquer parte destes termos, no dever acessar o servio."})})]}),a.jsxs("section",{className:"p-8 border-l-4 border-secondary bg-gray-900/20",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx(QP,{className:"w-6 h-6 text-secondary"}),a.jsx("h2",{className:"text-2xl font-bold font-poppins",children:"2. Cadastro e Contas"})]}),a.jsx("div",{className:"prose prose-invert max-w-none text-gray-300 leading-relaxed",children:a.jsxs("ul",{className:"list-disc pl-5 space-y-4",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Elegibilidade:"})," Voc deve ter pelo menos 18 anos para criar uma conta."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Preciso dos Dados:"})," Voc se compromete a fornecer informaes verdadeiras e atualizadas no seu perfil."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Segurana:"})," A responsabilidade pela segurana da senha de acesso  inteiramente do usurio."]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Proibio de Perfis Hbridos:"})," Cada conta deve ser estritamente de 'Artista' ou 'Estabelecimento'."]})]})})]}),a.jsxs("section",{className:"bg-gray-900/40 border border-gray-800 p-8 rounded-3xl backdrop-blur-sm shadow-xl",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx(IP,{className:"w-6 h-6 text-primary"}),a.jsx("h2",{className:"text-2xl font-bold font-poppins",children:"3. Condutas Proibidas"})]}),a.jsxs("div",{className:"prose prose-invert max-w-none text-gray-300 leading-relaxed grid md:grid-cols-2 gap-8",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-white mb-2",children:"No  permitido:"}),a.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[a.jsx("li",{children:"Publicar contedo ofensivo ou ilegal."}),a.jsx("li",{children:"Utilizar IA para gerar contratos fraudulentos."}),a.jsx("li",{children:"Assediar outros usurios."}),a.jsx("li",{children:"Tentar burlar as taxas da plataforma."})]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-white mb-2",children:"Consequncias:"}),a.jsx("p",{children:"O descumprimento destas regras resultar na suspenso imediata da conta e, em casos graves, no banimento permanente sem direito a reembolso de planos ativos."})]})]})]}),a.jsxs("section",{className:"p-8 border-l-4 border-primary bg-gray-900/20",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx($P,{className:"w-6 h-6 text-primary"}),a.jsx("h2",{className:"text-2xl font-bold font-poppins",children:"4. Pagamentos e Taxas"})]}),a.jsxs("div",{className:"prose prose-invert max-w-none text-gray-300 leading-relaxed space-y-4",children:[a.jsx("p",{children:"A Resona utiliza o Stripe como processador de pagamentos. Ao realizar transaes, voc tambm concorda com os termos de servio do Stripe."}),a.jsx("p",{children:"Taxas de servio podem ser aplicadas em contratos de shows. Os valores e percentuais so exibidos de forma transparente antes da assinatura do contrato."})]})]}),a.jsx("div",{className:"text-center pt-10",children:a.jsxs("p",{className:"text-gray-500 italic",children:["Dvidas sobre os termos? Entre em contato pelo e-mail: ",a.jsx("span",{className:"text-primary hover:underline cursor-pointer",children:"juridico@resona.app.br"})]})})]})})]}),t8=()=>a.jsxs("div",{className:"bg-dark text-white min-h-screen pb-20",children:[a.jsx(Qt,{title:"Poltica de Privacidade",description:"Saiba como a Resona protege seus dados pessoais e musicais. Transparncia e segurana em primeiro lugar."}),a.jsxs("section",{className:"relative py-20 overflow-hidden border-b border-gray-800",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-secondary/5 to-transparent"}),a.jsxs("div",{className:"container mx-auto px-4 relative z-10 text-center",children:[a.jsx("div",{className:"inline-flex items-center justify-center p-3 bg-secondary/10 rounded-2xl mb-6 ring-1 ring-secondary/20",children:a.jsx(Xb,{className:"w-8 h-8 text-secondary"})}),a.jsx("h1",{className:"text-4xl md:text-5xl font-bold font-montserrat mb-4",children:"Poltica de Privacidade"}),a.jsx("p",{className:"text-gray-400 max-w-2xl mx-auto text-lg",children:"Sua privacidade  a nossa maior prioridade. Entenda como coletamos e usamos seus dados."})]})]}),a.jsx("div",{className:"container mx-auto px-4 py-16",children:a.jsxs("div",{className:"max-w-4xl mx-auto space-y-12",children:[a.jsxs("section",{className:"bg-gray-900/40 border border-gray-800 p-8 rounded-3xl backdrop-blur-sm shadow-xl",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx(LP,{className:"w-6 h-6 text-primary"}),a.jsx("h2",{className:"text-2xl font-bold font-poppins",children:"Quais dados coletamos?"})]}),a.jsxs("div",{className:"prose prose-invert max-w-none text-gray-300 leading-relaxed space-y-4",children:[a.jsx("p",{children:"Coletamos apenas as informaes necessrias para conectar voc  cena musical:"}),a.jsxs("ul",{className:"grid md:grid-cols-2 gap-4 list-none pl-0",children:[a.jsxs("li",{className:"bg-gray-800/50 p-4 rounded-xl border border-gray-700",children:[a.jsx("span",{className:"text-white font-semibold",children:"Identificao:"})," Nome, e-mail, telefone e foto de perfil."]}),a.jsxs("li",{className:"bg-gray-800/50 p-4 rounded-xl border border-gray-700",children:[a.jsx("span",{className:"text-white font-semibold",children:"Perfil Profissional:"})," Gnero musical, rider tcnico e galeria de mdias."]}),a.jsxs("li",{className:"bg-gray-800/50 p-4 rounded-xl border border-gray-700",children:[a.jsx("span",{className:"text-white font-semibold",children:"Localizao:"})," Cidade e estado para busca regional."]}),a.jsxs("li",{className:"bg-gray-800/50 p-4 rounded-xl border border-gray-700",children:[a.jsx("span",{className:"text-white font-semibold",children:"Financeiro:"})," Dados bancrios (PIX) para recebimento de cachs."]})]})]})]}),a.jsxs("section",{className:"p-8 border-l-4 border-secondary bg-gray-900/20",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx(PP,{className:"w-6 h-6 text-secondary"}),a.jsx("h2",{className:"text-2xl font-bold font-poppins",children:"Como usamos seus dados?"})]}),a.jsxs("div",{className:"prose prose-invert max-w-none text-gray-300 leading-relaxed",children:[a.jsx("p",{children:"Seus dados so utilizados exclusivamente para:"}),a.jsxs("ol",{className:"list-decimal pl-5 space-y-3 mt-4",children:[a.jsx("li",{children:"Criar e manter seu perfil pblico na plataforma."}),a.jsx("li",{children:"Facilitar a negociao de contratos via Inteligncia Artificial."}),a.jsx("li",{children:"Processar pagamentos de forma segura atravs do Stripe."}),a.jsx("li",{children:"Enviar notificaes importantes sobre seus shows e propostas."}),a.jsx("li",{children:"Melhorar a experincia de busca e recomendaes."})]})]})]}),a.jsxs("section",{className:"bg-gray-900/40 border border-gray-800 p-8 rounded-3xl backdrop-blur-sm shadow-xl",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx(FP,{className:"w-6 h-6 text-primary"}),a.jsx("h2",{className:"text-2xl font-bold font-poppins",children:"Segurana e Armazenamento"})]}),a.jsx("p",{className:"text-gray-300 mb-6 font-light",children:"Ns no vendemos seus dados para terceiros. O armazenamento  feito em servidores seguros do Supabase, seguindo os mais altos padres de criptografia."}),a.jsxs("div",{className:"flex flex-wrap gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2 bg-green-500/10 text-green-400 px-4 py-2 rounded-full border border-green-500/20 text-sm",children:[a.jsx(Xb,{className:"w-4 h-4"})," Certificado SSL Ativo"]}),a.jsxs("div",{className:"flex items-center gap-2 bg-blue-500/10 text-blue-400 px-4 py-2 rounded-full border border-blue-500/20 text-sm",children:[a.jsx(Wb,{className:"w-4 h-4"})," Conformidade LGPD"]})]})]}),a.jsxs("section",{className:"p-8 border-l-4 border-primary bg-gray-900/20",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx(Wb,{className:"w-6 h-6 text-primary"}),a.jsx("h2",{className:"text-2xl font-bold font-poppins",children:"Seus Direitos"})]}),a.jsxs("div",{className:"prose prose-invert max-w-none text-gray-300 leading-relaxed",children:[a.jsx("p",{children:"Voc tem total controle sobre suas informaes. Atravs das configuraes da conta, voc pode:"}),a.jsxs("ul",{className:"list-disc pl-5 mt-4 space-y-2",children:[a.jsx("li",{children:"Acessar e atualizar seus dados a qualquer momento."}),a.jsx("li",{children:"Solicitar a excluso permanente de todos os seus dados da nossa base."}),a.jsx("li",{children:"Configurar a visibilidade do seu perfil."})]})]})]}),a.jsx("div",{className:"text-center pt-10",children:a.jsxs("p",{className:"text-gray-500 italic",children:["Dvidas sobre sua privacidade? Fale com nosso DPO: ",a.jsx("span",{className:"text-secondary hover:underline cursor-pointer",children:"privacidade@resona.app.br"})]})})]})})]}),s8=()=>{const{pathname:t}=Ds();return N.useEffect(()=>{window.scrollTo(0,0)},[t]),null},a8=()=>a.jsx(BN,{children:a.jsx(yM,{children:a.jsx(vM,{children:a.jsx(SM,{children:a.jsxs(fE,{children:[a.jsx(s8,{}),a.jsx(Kb,{position:"body-start"}),a.jsxs("div",{className:"flex flex-col min-h-screen bg-dark font-sans",children:[a.jsx(jM,{}),a.jsx("main",{className:"flex-grow",children:a.jsxs(z1,{children:[a.jsx(Pe,{path:"/",element:a.jsx(rI,{})}),a.jsx(Pe,{path:"/sobre",element:a.jsx(iI,{})}),a.jsx(Pe,{path:"/contato",element:a.jsx(dI,{})}),a.jsx(Pe,{path:"/blog",element:a.jsx(d6,{})}),a.jsx(Pe,{path:"/blog/:slug",element:a.jsx(u6,{})}),a.jsx(Pe,{path:"/artistas",element:a.jsx(mI,{})}),a.jsx(Pe,{path:"/artista/:id",element:a.jsx(CD,{})}),a.jsx(Pe,{path:"/estabelecimentos",element:a.jsx(xI,{})}),a.jsx(Pe,{path:"/estabelecimento/:id",element:a.jsx(TD,{})}),a.jsx(Pe,{path:"/login",element:a.jsx(vI,{})}),a.jsx(Pe,{path:"/cadastro",element:a.jsx(wI,{})}),a.jsx(Pe,{path:"/painel",element:a.jsx(wD,{})}),a.jsx(Pe,{path:"/planos",element:a.jsx(SP,{})}),a.jsx(Pe,{path:"/recuperar-senha",element:a.jsx(AD,{})}),a.jsx(Pe,{path:"/atualizar-senha",element:a.jsx(RD,{})}),a.jsx(Pe,{path:"/completar-perfil",element:a.jsx(o6,{})}),a.jsx(Pe,{path:"/notificacoes",element:a.jsx(L6,{})}),a.jsx(Pe,{path:"/contratos",element:a.jsx(O6,{})}),a.jsx(Pe,{path:"/contratos/:id",element:a.jsx(NP,{})}),a.jsx(Pe,{path:"/termos",element:a.jsx(e8,{})}),a.jsx(Pe,{path:"/privacidade",element:a.jsx(t8,{})}),a.jsx(Pe,{path:"/api-test",element:a.jsx(_P,{})}),a.jsx(Pe,{path:"/admin",element:a.jsx(kD,{}),children:a.jsxs(Pe,{element:a.jsx(OD,{}),children:[a.jsx(Pe,{index:!0,element:a.jsx(fw,{to:"dashboard",replace:!0})}),a.jsx(Pe,{path:"dashboard",element:a.jsx($D,{})}),a.jsx(Pe,{path:"analytics",element:a.jsx(k6,{})}),a.jsx(Pe,{path:"health",element:a.jsx(M6,{})}),a.jsx(Pe,{path:"usuarios",element:a.jsx(VD,{})}),a.jsx(Pe,{path:"verificacoes",element:a.jsx(GD,{})}),a.jsx(Pe,{path:"saques",element:a.jsx(HD,{})}),a.jsx(Pe,{path:"contratos",element:a.jsx(XD,{})}),a.jsx(Pe,{path:"webhooks",element:a.jsx(A6,{})}),a.jsx(Pe,{path:"conteudo",element:a.jsx(QD,{})}),a.jsx(Pe,{path:"mensagens",element:a.jsx(ZD,{})}),a.jsx(Pe,{path:"seguranca",element:a.jsx(e6,{})}),a.jsx(Pe,{path:"relatorios",element:a.jsx(t6,{})}),a.jsx(Pe,{path:"storage",element:a.jsx(a6,{})}),a.jsx(Pe,{path:"configuracoes",element:a.jsx(r6,{})}),a.jsx(Pe,{path:"blog",element:a.jsx(T6,{})})]})}),a.jsx(Pe,{path:"*",element:a.jsx(ZP,{})})]})}),a.jsx(EM,{})]}),a.jsx(Kb,{position:"body-end"})]})})})})}),y_=document.getElementById("root");if(!y_)throw new Error("Could not find root element to mount to");const n8=Vj.createRoot(y_);n8.render(a.jsx(a8,{}));export{cd as _,o8 as c,fr as g};
