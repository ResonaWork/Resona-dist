import{r as s,j as e,S as f,e as b,T as j}from"./index-Dujp5Lr2.js";import{C as N}from"./CreditCardIcon-CXRL2dJV.js";import{S as m}from"./SparklesIcon-C9jkymta.js";import{C as y}from"./ClockIcon-DXJPV_TQ.js";import{T as v}from"./TrendingUpIcon-CcMLwzci.js";var w={};const G=()=>{const[a,g]=s.useState(null),[p,n]=s.useState(!0),[o,l]=s.useState(""),[r,c]=s.useState(!1),[k,h]=s.useState(""),d=async()=>{n(!0);try{const t=await f.getBIStats();g(t)}catch(t){h(b(t))}finally{n(!1)}};s.useEffect(()=>{d()},[]);const x=async()=>{if(!a)return;c(!0);const t=new j({apiKey:w.API_KEY});try{const i=`Aja como um analista de negócios sênior e estrategista de produto para a plataforma RESONNA.
            Analise os seguintes KPIs reais da plataforma e sugira 3 ações estratégicas prioritárias para aumentar a receita e retenção.
            KPIs:
            - Usuários Ativos: ${a.activeUsers}
            - GMV (Volume Bruto): R$ ${a.totalGmv}
            - Receita da Plataforma (Taxas): R$ ${a.totalRevenue}
            - Taxa de Conversão: ${a.conversionRate.toFixed(2)}%
            - Crescimento Mensal: ${a.monthlyGrowth}%
            
            Retorne um texto curto e altamente executivo em Português do Brasil dividido em "Status Atual" e "Plano de Ação Estratégico".`,u=await t.models.generateContent({model:"gemini-3-pro-preview",contents:{parts:[{text:i}]},config:{thinkingConfig:{thinkingBudget:1e3}}});l(u.text||"Não foi possível gerar insights no momento.")}catch(i){console.error(i),l("Erro ao conectar com AI Advisor de alto nível.")}finally{c(!1)}};return p?e.jsx("div",{className:"p-20 text-center animate-pulse text-gray-500",children:"Consolidando métricas de BI..."}):e.jsxs("div",{className:"text-white animate-fade-in pb-20",children:[e.jsxs("div",{className:"flex justify-between items-end mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-black text-primary font-poppins",children:"Business Intelligence"}),e.jsx("p",{className:"text-gray-400",children:"Visão macro e saúde financeira da plataforma."})]}),e.jsx("button",{onClick:d,className:"text-xs bg-gray-800 px-4 py-2 rounded-lg border border-gray-700 hover:bg-gray-700",children:"Atualizar Dados"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gray-900 p-6 rounded-2xl border border-gray-700 shadow-xl",children:[e.jsx("p",{className:"text-gray-500 text-[10px] font-black uppercase tracking-widest mb-1",children:"GMV Total (Vendas)"}),e.jsxs("p",{className:"text-2xl font-black text-white font-mono",children:["R$ ",a==null?void 0:a.totalGmv.toLocaleString("pt-BR")]}),e.jsxs("div",{className:"mt-2 flex items-center gap-1 text-green-400 text-xs font-bold",children:[e.jsx(v,{className:"w-3 h-3"})," +12%"]})]}),e.jsxs("div",{className:"bg-gray-900 p-6 rounded-2xl border border-gray-700 shadow-xl",children:[e.jsx("p",{className:"text-gray-500 text-[10px] font-black uppercase tracking-widest mb-1",children:"Receita Líquida (Fees)"}),e.jsxs("p",{className:"text-2xl font-black text-primary font-mono",children:["R$ ",a==null?void 0:a.totalRevenue.toLocaleString("pt-BR")]}),e.jsx("p",{className:"text-[10px] text-gray-600 mt-2 uppercase",children:"Take Rate: 10% médio"})]}),e.jsxs("div",{className:"bg-gray-900 p-6 rounded-2xl border border-gray-700 shadow-xl",children:[e.jsx("p",{className:"text-gray-500 text-[10px] font-black uppercase tracking-widest mb-1",children:"Conversão Ativa"}),e.jsxs("p",{className:"text-2xl font-black text-white font-mono",children:[a==null?void 0:a.conversionRate.toFixed(1),"%"]}),e.jsx("p",{className:"text-[10px] text-gray-600 mt-2 uppercase",children:"Usuários vs Contratos"})]}),e.jsxs("div",{className:"bg-gray-900 p-6 rounded-2xl border border-gray-700 shadow-xl",children:[e.jsx("p",{className:"text-gray-500 text-[10px] font-black uppercase tracking-widest mb-1",children:"Crescimento WoW"}),e.jsxs("p",{className:"text-2xl font-black text-yellow-500 font-mono",children:["+",a==null?void 0:a.monthlyGrowth,"%"]}),e.jsx("p",{className:"text-[10px] text-gray-600 mt-2 uppercase",children:"Últimos 30 dias"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 bg-gray-900 rounded-2xl border border-gray-800 shadow-2xl overflow-hidden flex flex-col min-h-[400px]",children:[e.jsx("div",{className:"p-4 border-b border-gray-800 bg-gray-900/50 flex justify-between items-center",children:e.jsxs("h3",{className:"font-bold flex items-center gap-2",children:[e.jsx(N,{className:"w-5 h-5 text-green-400"})," Histórico Mensal"]})}),e.jsx("div",{className:"overflow-x-auto flex-grow",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-gray-850 text-[10px] uppercase font-black text-gray-500",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4",children:"Mês Referência"}),e.jsx("th",{className:"p-4",children:"Volume (GMV)"}),e.jsx("th",{className:"p-4",children:"Receita (Fees)"}),e.jsx("th",{className:"p-4 text-center",children:"Shows"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-800",children:a==null?void 0:a.financialData.map(t=>e.jsxs("tr",{className:"hover:bg-gray-800/50 transition-colors",children:[e.jsx("td",{className:"p-4 font-mono text-sm text-white",children:t.mes}),e.jsxs("td",{className:"p-4 text-sm text-gray-300",children:["R$ ",t.volume_total.toLocaleString()]}),e.jsxs("td",{className:"p-4 text-sm text-primary font-bold",children:["R$ ",t.receita_plataforma.toLocaleString()]}),e.jsx("td",{className:"p-4 text-center text-sm",children:t.contratos_count})]},t.mes))})]})})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-gradient-to-br from-indigo-900/40 to-gray-900 p-6 rounded-2xl border border-indigo-500/30 shadow-2xl sticky top-24",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-10 h-10 bg-indigo-500/20 rounded-full flex items-center justify-center border border-indigo-500/30",children:e.jsx(m,{className:"text-indigo-400 w-6 h-6 animate-pulse"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-white leading-none",children:"AI Advisor Pro"}),e.jsx("p",{className:"text-[10px] text-indigo-300 uppercase font-black tracking-widest mt-1",children:"Gemini Strategist"})]})]}),o?e.jsxs("div",{className:"space-y-4 animate-fade-in",children:[e.jsx("div",{className:"text-sm text-gray-300 leading-relaxed whitespace-pre-wrap italic bg-gray-950/50 p-4 rounded-xl border border-white/5",children:o}),e.jsx("button",{onClick:x,className:"text-[10px] text-indigo-400 underline hover:text-white uppercase font-bold",children:"Gerar nova análise profunda"})]}):e.jsxs("div",{className:"text-center py-10",children:[e.jsx("p",{className:"text-xs text-gray-400 mb-6 leading-relaxed",children:"Nossa IA avançada pode analisar seus KPIs financeiros e sugerir estratégias de expansão de alto nível."}),e.jsxs("button",{onClick:x,disabled:r,className:"w-full bg-indigo-600 hover:bg-white hover:text-dark text-white font-black py-3 rounded-xl transition-all shadow-lg flex items-center justify-center gap-2",children:[r?e.jsx(y,{className:"w-5 h-5 animate-spin"}):e.jsx(m,{className:"w-5 h-5"}),r?"Consultando Gemini Pro...":"Análise Estratégica"]})]})]})})]})]})};export{G as default};
