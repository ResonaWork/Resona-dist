import{h,j as e,B as x}from"./index-Cc-Lnn9x.js";import{r as g,u as f}from"./vendor-react-Dfcn4nkY.js";import{E as b}from"./EmptyState-DsZCot8O.js";import{M as y}from"./MessagesIcon-CtD9Vrd5.js";import{F as j}from"./FileSignatureIcon-CkuZe52x.js";import{S as N}from"./StarIcon-CdQqkD5t.js";import{C as w}from"./CheckCircleIcon-DMttEdVL.js";import{B as v}from"./Breadcrumbs-eOTmfCYt.js";import{S as k}from"./SEO-BrO4Q3VS.js";import"./vendor-jspdf-Bh_S0msn.js";import"./vendor-utils-DmyZJLyO.js";import"./vendor-ui-DKtFGipk.js";import"./ChevronRightIcon-DOOHeMMz.js";const D=t=>{switch(t){case"contrato":return e.jsx(j,{className:"w-5 h-5 text-blue-400"});case"mensagem":return e.jsx(y,{className:"w-5 h-5 text-green-400"});case"avaliacao":return e.jsx(N,{className:"w-5 h-5 text-yellow-400"});default:return e.jsx(x,{className:"w-5 h-5 text-gray-400"})}},M=t=>{switch(t){case"contrato":return"border-l-blue-500";case"mensagem":return"border-l-green-500";case"avaliacao":return"border-l-yellow-500";default:return"border-l-gray-600"}},_=({notification:t,onRead:o})=>{const n=f(),i=a=>{const l=new Date(a),c=Math.max(0,Math.floor((new Date().getTime()-l.getTime())/1e3));let r=c/31536e3;return r>1?Math.floor(r)+"a":(r=c/2592e3,r>1?Math.floor(r)+"m":(r=c/86400,r>1?Math.floor(r)+"d":(r=c/3600,r>1?Math.floor(r)+"h":(r=c/60,r>1?Math.floor(r)+"m":"agora"))))},s=()=>{if(o(t.id),t.url_destino){const a=t.url_destino;a.startsWith("http")?window.open(a,"_blank","noopener,noreferrer"):n(a)}};return e.jsx("div",{onClick:s,className:`group p-5 border-b border-gray-800 hover:bg-gray-800/80 cursor-pointer transition-all duration-200 border-l-4 ${M(t.tipo)} ${t.lida?"bg-transparent opacity-70 hover:opacity-100":"bg-gray-800/40"}`,children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:`mt-1 p-2 rounded-full bg-gray-800/80 border border-gray-700 flex-shrink-0 group-hover:scale-110 transition-transform ${t.lida?"":"shadow-[0_0_10px_rgba(255,255,255,0.1)]"}`,children:D(t.tipo)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsx("p",{className:`text-sm truncate pr-2 ${t.lida?"font-medium text-gray-300":"font-bold text-white"}`,children:t.titulo}),e.jsx("span",{className:"text-[10px] text-gray-500 font-mono whitespace-nowrap bg-black/20 px-2 py-0.5 rounded ml-2",children:i(t.data_criacao)})]}),e.jsx("p",{className:"text-xs text-gray-400 line-clamp-2 leading-relaxed group-hover:text-gray-300 transition-colors",children:t.descricao})]}),!t.lida&&e.jsx("div",{className:"flex items-center justify-center pl-2",children:e.jsx("div",{className:"w-2.5 h-2.5 bg-primary rounded-full shadow-[0_0_8px_rgba(81,210,238,0.6)] animate-pulse"})})]})})},C=t=>{const o={Hoje:[],Ontem:[],"Esta Semana":[],Antigas:[]},n=new Date;n.setHours(0,0,0,0);const i=new Date(n);i.setDate(i.getDate()-1);const s=new Date(n);return s.setDate(s.getDate()-7),t.forEach(a=>{const l=new Date(a.data_criacao),d=new Date(l);d.setHours(0,0,0,0),d.getTime()===n.getTime()?o.Hoje.push(a):d.getTime()===i.getTime()?o.Ontem.push(a):l>s?o["Esta Semana"].push(a):o.Antigas.push(a)}),o},L=()=>{const{notifications:t,loading:o,markAsRead:n,markAllAsRead:i,unreadCount:s}=h(),[a,l]=g.useState("all"),d=a==="unread"?t.filter(m=>!m.lida):t,c=C(d),r=d.length>0;return e.jsxs("div",{className:"bg-dark text-white font-sans min-h-[calc(100vh-80px)] animate-fade-in",children:[e.jsx(k,{title:"Notificações",description:"Fique por dentro das atualizações da sua conta, contratos e mensagens no Resona."}),e.jsx("section",{className:"bg-dark/95 backdrop-blur-md border-b border-gray-800 sticky top-16 md:top-20 z-30 shadow-lg transition-all pt-4",children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx(v,{items:[{label:"Notificações",path:"/notificacoes"}]}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 py-5",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gray-800 rounded-lg border border-gray-700",children:e.jsx(x,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-white font-poppins leading-tight",children:"Notificações"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Fique por dentro do que acontece na sua conta."})]})]}),e.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[e.jsxs("div",{className:"flex bg-gray-800 p-1 rounded-lg border border-gray-700 w-full md:w-auto",children:[e.jsx("button",{onClick:()=>l("all"),className:`flex-1 md:flex-none text-xs font-bold py-2 px-6 rounded-md transition-all ${a==="all"?"bg-gray-700 text-white shadow-sm":"text-gray-400 hover:text-white hover:bg-gray-700/50"}`,children:"Todas"}),e.jsxs("button",{onClick:()=>l("unread"),className:`flex-1 md:flex-none text-xs font-bold py-2 px-6 rounded-md transition-all flex items-center justify-center gap-2 ${a==="unread"?"bg-gray-700 text-white shadow-sm":"text-gray-400 hover:text-white hover:bg-gray-700/50"}`,children:["Não Lidas ",s>0&&e.jsx("span",{className:"bg-primary text-dark text-[9px] px-1.5 py-0.5 rounded-full font-extrabold",children:s})]})]}),s>0&&e.jsxs("button",{onClick:i,className:"hidden md:flex items-center gap-1 text-xs font-bold text-gray-400 hover:text-primary transition-colors px-3 py-2 border border-transparent hover:border-gray-700 rounded-lg",title:"Marcar todas como lidas",children:[e.jsx(w,{className:"w-4 h-4"})," Limpar"]})]})]})]})}),e.jsx("section",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsx("div",{className:"max-w-3xl mx-auto",children:o?e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-primary"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Sincronizando..."})]}):r?e.jsxs("div",{className:"space-y-10 pb-20",children:[s>0&&a!=="unread"&&e.jsx("button",{onClick:i,className:"md:hidden w-full text-center text-xs font-bold text-primary border border-primary/30 bg-primary/5 py-3 rounded-lg mb-6",children:"Marcar todas como lidas"}),Object.entries(c).map(([m,p])=>p.length===0?null:e.jsxs("div",{className:"animate-fade-in",children:[e.jsx("div",{className:"sticky top-40 md:top-44 z-20 pointer-events-none",children:e.jsx("h3",{className:"inline-block text-[10px] font-black text-gray-400 uppercase tracking-widest mb-4 px-4 py-1.5 bg-gray-900/90 backdrop-blur-md rounded-full border border-gray-700 shadow-sm",children:m})}),e.jsx("div",{className:"bg-gray-900 rounded-2xl overflow-hidden border border-gray-700 shadow-xl",children:p.map(u=>e.jsx(_,{notification:u,onRead:n},u.id))})]},m))]}):e.jsx("div",{className:"py-10",children:e.jsx(b,{icon:x,title:"Tudo limpo por aqui!",description:a==="unread"?"Você leu todas as suas notificações pendentes.":"Você ainda não possui nenhuma notificação.",actionLabel:a==="unread"?"Ver histórico completo":void 0,onAction:a==="unread"?()=>l("all"):void 0})})})})]})};export{L as default};
