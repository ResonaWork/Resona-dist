import{j as e,d as Ce,b as ae,o as ke,s as m,e as te,g as Ie,I as Pe,Y as De}from"./index-BhcEfvUj.js";import{i as Ue,u as Ae,r,L as re}from"./vendor-react-Dfcn4nkY.js";import{M as w}from"./MapPinIcon-B0TdpxUJ.js";import{P as Me}from"./PhotographIcon-0Nmszdam.js";import{C as $e}from"./CreateContractModal-C63srVqQ.js";import{U as Ee}from"./UsersIcon-uCaW_RuR.js";import{a as v}from"./ChevronLeftIcon-7zqGI7qy.js";import{g as Oe,I as Re}from"./imageUtils-DnUe408t.js";import{C as Te,R as Be}from"./ReviewList-CMAX1PlP.js";import{S as Le,I as qe}from"./ShareIcon-T7Val3Zc.js";import{M as oe}from"./MusicNoteIcon-BOsgUyXg.js";import{S as ze}from"./ShieldIcon-CCfUMPEB.js";import{F as Ge}from"./FileIcon-BEeGQuMI.js";import{D as ie}from"./DownloadIcon-DRBRo05X.js";import{S as Ve}from"./SEO-C8PmC30O.js";import"./vendor-pdf-DHYqqgbQ.js";import"./vendor-utils-DmyZJLyO.js";import"./vendor-ui-DKtFGipk.js";import"./financeUtils-CtoX7Xu7.js";import"./CheckCircleIcon-CrC6G3lk.js";import"./ChevronRightIcon-B7UStob_.js";import"./SearchIcon-BuX9Sfv1.js";import"./FileSignatureIcon-CsaxIVu2.js";import"./LockClosedIcon-BrBgfmDK.js";import"./SparklesIcon-DrPl16yt.js";import"./ClockIcon-JI__KHcP.js";import"./ExclamationIcon-BaRP9Mj2.js";import"./StarIcon-CUD3uJTA.js";import"./UserCircleIcon-ub-PyVAQ.js";import"./EmptyState-CYEo4RfC.js";const Ye=({className:x="w-6 h-6",...n})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:x,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,...n,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2h10a2 2 0 002-2v-1a2 2 0 012-2h1.945M7.757 15.757a4 4 0 105.657-5.657a4 4 0 00-5.657 5.657zM12 21a9 9 0 100-18 9 9 0 000 18z"})}),Fe=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],Qe={monday:"SEG",tuesday:"TER",wednesday:"QUA",thursday:"QUI",friday:"SEX",saturday:"SÁB",sunday:"DOM"},Ds=()=>{var R,T,B,L,q,z,G,V,Y,F,Q,W,H,X,Z;const{id:x}=Ue(),{profile:n,user:We}=Ce();Ae();const[a,le]=r.useState(null),[S,ne]=r.useState([]),[He,_]=r.useState(!0),[C,ce]=r.useState([]),[h,de]=r.useState([]),[k,me]=r.useState([]),[I,xe]=r.useState([]),[P,pe]=r.useState(null),[ge,u]=r.useState(!0),[D,f]=r.useState(null),[Xe,Ze]=r.useState(!1),[Je,Ke]=r.useState(""),[U,A]=r.useState(!1),[he,b]=r.useState(!1),[ue,M]=r.useState(!1),[fe,be]=r.useState(0),$=r.useCallback(async()=>{var s,t,J;if(!x){f("ID de usuário não fornecido."),u(!1);return}u(!0),f(null);try{const{data:p,error:we}=await ae.from("usuarios").select("*, artista:artistas!inner(*)").eq("id",x).eq("tipo","artista").single();if(we||!p)throw new Error("Perfil não encontrado.");const K=ke(p),o=K.artista;if(o!=null&&o.id){const{data:i}=await ae.from("contratos").select("id, data_evento, status, estabelecimentos!inner(usuario_id, usuarios!inner(nome, cidade))").eq("artista_id",o.id).in("status",["assinado","concluido"]).gte("data_evento",new Date().toISOString()).order("data_evento",{ascending:!0});ce((i||[]).map(c=>{const d=Array.isArray(c.estabelecimentos)?c.estabelecimentos[0]:c.estabelecimentos,g=d&&(Array.isArray(d.usuarios)?d.usuarios[0]:d.usuarios);return!d||!g?null:{id:c.id,titulo:`Show em ${g.nome}`,data_evento:c.data_evento,estabelecimento:{id:d.usuario_id,nome:g.nome,cidade:g.cidade}}}).filter(c=>c!==null))}const y=Date.now(),ee=((s=o==null?void 0:o.galeria_fotos)==null?void 0:s.filter(i=>!!i))||[],se=((t=o==null?void 0:o.galeria_videos)==null?void 0:t.filter(i=>!!i))||[],N=((J=o==null?void 0:o.galeria_audios)==null?void 0:J.filter(i=>!!i))||[];if(o!=null&&o.foto_capa){const i=Oe("artista",o.foto_capa,Re.coverPhoto);pe(i?`${i}&t=${y}`:`${m.getPublicUrl("artista",o.foto_capa)}?t=${y}`)}const[ve,Se,_e]=await Promise.all([ee.length>0?m.getSignedUrls("artista",ee,3600):Promise.resolve([]),se.length>0?m.getSignedUrls("artista",se,3600):Promise.resolve([]),N.length>0?m.getSignedUrls("artista",N,3600):Promise.resolve([])]);de(ve.map(i=>`${i}&t=${y}`)),me(Se),xe(_e.map((i,c)=>({name:N[c].split("/").pop()||`Track ${c+1}`,url:i}))),le(K)}catch(p){f(te(p))}finally{u(!1)}},[x]);r.useEffect(()=>{$()},[$]),r.useEffect(()=>{var s;(s=a==null?void 0:a.artista)!=null&&s.id&&(_(!0),Ie.list(a.artista.id).then(t=>ne(t||[])).finally(()=>_(!1)))},[(R=a==null?void 0:a.artista)==null?void 0:R.id]);const E=async s=>{if(s)try{const t=await m.getSignedUrls("artista",[s],300);t.length>0&&window.open(t[0],"_blank")}catch(t){alert("Falha ao obter documento: "+te(t))}};if(ge)return e.jsx("div",{className:"flex justify-center items-center h-screen bg-dark text-white",children:"Carregando perfil..."});if(D||!a)return e.jsxs("div",{className:"flex flex-col justify-center items-center h-screen bg-dark text-red-500",children:[e.jsx("h2",{className:"text-2xl font-bold",children:D||"Artista não encontrado."}),e.jsx(re,{to:"/artistas",className:"mt-4 text-primary underline",children:"Voltar"})]});const j=a.foto_url?`${m.getPublicUrl("perfis",a.foto_url)}?t=${Date.now()}`:"https://images.unsplash.com/photo-1511379938547-c1f69419868d?q=80&w=2070&auto=format&fit=crop",l=(T=a.artista)==null?void 0:T.midias_sociais,O=((B=a.artista)==null?void 0:B.disponibilidade)||{},je=Object.values(O).some(s=>s.active),ye=!!((L=a.artista)!=null&&L.rider_tecnico_url||(q=a.artista)!=null&&q.mapa_palco_url),Ne={"@context":"https://schema.org","@type":((G=(z=a.artista)==null?void 0:z.integrantes)==null?void 0:G.length)>1?"MusicGroup":"Person",name:a.nome,description:((V=a.artista)==null?void 0:V.descricao)||"",image:j,jobTitle:"Musician",genre:(Y=a.artista)==null?void 0:Y.genero_musical,address:{"@type":"PostalAddress",addressLocality:a.cidade,addressCountry:"BR"}};return e.jsxs("div",{className:"bg-dark text-white font-sans min-h-screen pb-24 lg:pb-0 relative",children:[e.jsx(Ve,{title:a.nome,description:((Q=(F=a.artista)==null?void 0:F.descricao)==null?void 0:Q.substring(0,160))||`Confira o perfil de ${a.nome} no Resona. Músico disponível para shows.`,image:j,type:"profile",schema:Ne}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"h-[45vh] md:h-[55vh] bg-cover bg-center relative",style:{backgroundImage:P?`url(${P})`:"linear-gradient(to right, #1f2937, #111827)"},children:e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-dark via-dark/60 to-transparent"})}),e.jsx("div",{className:"container mx-auto px-4 relative -mt-32 md:-mt-40 z-10",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center md:items-end gap-6",children:[e.jsx("img",{src:j,alt:a.nome,className:"w-40 h-40 md:w-56 md:h-56 rounded-full object-cover border-4 border-dark shadow-2xl relative z-10"}),e.jsxs("div",{className:"flex-grow mb-2 text-center md:text-left",children:[e.jsxs("h1",{className:"text-3xl sm:text-4xl md:text-6xl font-black font-poppins flex items-center justify-center md:justify-start gap-3",children:[a.nome,a.status_verificacao==="verificado"&&e.jsx(ze,{className:"w-6 h-6 md:w-8 md:h-8 text-primary shadow-primary/50"})]}),e.jsxs("div",{className:"flex flex-wrap items-center justify-center md:justify-start gap-4 mt-3",children:[e.jsx("span",{className:"bg-primary/20 backdrop-blur-md border border-primary/30 text-primary px-3 py-1 rounded-full text-sm font-bold uppercase tracking-wider",children:((W=a.artista)==null?void 0:W.genero_musical)||"Artista"}),e.jsxs("div",{className:"flex items-center text-gray-200 text-sm font-medium",children:[e.jsx(w,{className:"w-4 h-4 mr-1 text-primary"}),e.jsx("span",{children:a.cidade||"Brasil"})]})]})]}),e.jsxs("div",{className:"mb-4 md:mb-8 flex flex-col sm:flex-row gap-3 w-full md:w-auto justify-center",children:[e.jsxs("button",{onClick:()=>{navigator.clipboard.writeText(window.location.href),A(!0),setTimeout(()=>A(!1),2e3)},className:"flex items-center justify-center gap-2 bg-gray-800/80 px-5 py-2.5 rounded-full border border-gray-600 shadow-lg text-sm",children:[U?e.jsx(Te,{className:"w-5 h-5 text-green-400"}):e.jsx(Le,{className:"w-5 h-5"}),U?"Copiado!":"Compartilhar"]}),(n==null?void 0:n.tipo)==="estabelecimento"&&e.jsx("button",{onClick:()=>b(!0),disabled:!v(n).complete,className:`font-bold py-2.5 px-8 rounded-full shadow-lg transform transition-all text-sm ${v(n).complete?"bg-gradient-to-r from-primary to-secondary text-white hover:scale-105":"bg-gray-700 text-gray-500 cursor-not-allowed"}`,title:v(n).complete?"Contratar":"Complete seu perfil de estabelecimento para contratar.",children:"Contratar Agora"})]})]})})]}),e.jsx("div",{className:"container mx-auto px-4 py-12",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-12",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-10",children:[e.jsxs("section",{className:"bg-gray-800/50 p-8 rounded-2xl border border-gray-700/50 shadow-xl",children:[e.jsx("h2",{className:"text-2xl font-bold font-poppins mb-4",children:"Sobre"}),e.jsx("p",{className:"text-gray-300 leading-relaxed text-lg whitespace-pre-wrap",children:((H=a.artista)==null?void 0:H.descricao)||"O artista ainda não adicionou uma descrição."})]}),S.length>0&&e.jsxs("section",{className:"bg-gray-800/50 p-8 rounded-2xl border border-gray-700/50 shadow-xl",children:[e.jsx("h2",{className:"text-2xl font-bold font-poppins mb-6",children:"Integrantes"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:S.map(s=>e.jsxs("div",{className:"flex items-center gap-4 bg-gray-900/50 p-4 rounded-xl border border-gray-700",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/20 flex items-center justify-center text-primary",children:e.jsx(Ee,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-white",children:s.nome}),e.jsx("p",{className:"text-sm text-gray-400",children:s.instrumento})]})]},s.id))})]}),e.jsxs("section",{className:"bg-gray-800/50 p-8 rounded-2xl border border-gray-700/50 shadow-xl",children:[e.jsx("h2",{className:"text-2xl font-bold font-poppins mb-6",children:"Agenda Confirmada"}),C.length>0?e.jsx("div",{className:"space-y-3",children:C.map(s=>e.jsx("div",{className:"flex items-center justify-between bg-gray-900/50 p-4 rounded-xl border border-gray-700 hover:border-primary/50 transition-colors group",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"bg-gray-800 p-3 rounded-lg text-center min-w-[60px]",children:[e.jsx("span",{className:"block text-xs text-primary font-bold uppercase",children:new Date(s.data_evento).toLocaleString("pt-BR",{month:"short",timeZone:"UTC"})}),e.jsx("span",{className:"block text-xl font-black text-white",children:new Date(s.data_evento).getUTCDate()})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-white text-lg group-hover:text-primary transition-colors",children:s.titulo}),e.jsxs(re,{to:`/estabelecimento/${s.estabelecimento.id}`,className:"text-sm text-gray-400 flex items-center gap-1",children:[e.jsx(w,{className:"w-3 h-3"})," ",s.estabelecimento.nome]})]})]})},s.id))}):e.jsx("div",{className:"text-center py-8 text-gray-500 italic",children:"Nenhum show público agendado."})]}),e.jsxs("section",{className:"space-y-8",children:[e.jsx("h2",{className:"text-2xl font-bold font-poppins",children:"Galeria"}),h.length>0?e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:h.map((s,t)=>e.jsxs("div",{onClick:()=>{be(t),M(!0)},className:"cursor-pointer group relative overflow-hidden rounded-xl aspect-square",children:[e.jsx("img",{src:s,alt:"Galeria",className:"w-full h-full object-cover transition-transform group-hover:scale-110"}),e.jsx("div",{className:"absolute inset-0 bg-black/20 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:e.jsx(Me,{className:"w-8 h-8"})})]},t))}):e.jsx("p",{className:"text-gray-500 italic",children:"Sem fotos disponíveis."})]}),k.length>0&&e.jsxs("section",{className:"space-y-4",children:[e.jsx("h2",{className:"text-2xl font-bold font-poppins",children:"Vídeos"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:k.map((s,t)=>e.jsx("div",{className:"bg-gray-900 rounded-xl overflow-hidden border border-gray-700 shadow-lg group hover:border-primary/50 transition-colors",children:e.jsx("video",{controls:!0,className:"w-full aspect-video object-cover bg-black",src:s,preload:"metadata"})},t))})]}),I.length>0&&e.jsxs("section",{className:"space-y-4",children:[e.jsxs("h2",{className:"text-2xl font-bold font-poppins flex items-center gap-2",children:[e.jsx(oe,{className:"w-6 h-6 text-primary"}),"Músicas & Demos"]}),e.jsx("div",{className:"space-y-3",children:I.map((s,t)=>e.jsxs("div",{className:"bg-gray-800 p-4 rounded-xl border border-gray-700 flex flex-col md:flex-row items-center gap-4 hover:border-primary/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/20 flex items-center justify-center flex-shrink-0",children:e.jsx(oe,{className:"w-5 h-5 text-primary"})}),e.jsx("span",{className:"font-medium text-sm text-gray-200 truncate max-w-[150px] md:max-w-[200px]",title:s.name,children:s.name})]}),e.jsx("div",{className:"flex-grow w-full",children:e.jsx("audio",{controls:!0,className:"w-full h-8 block",src:s.url})})]},t))})]}),e.jsxs("section",{className:"pt-8 border-t border-gray-800",children:[e.jsx("h2",{className:"text-2xl font-bold font-poppins mb-8",children:"Avaliações"}),e.jsx(Be,{targetId:a.id})]})]}),e.jsxs("aside",{className:"lg:col-span-1 space-y-6",children:[e.jsxs("div",{className:"bg-gray-800 p-6 rounded-2xl shadow-xl border border-gray-700",children:[e.jsx("h2",{className:"text-xl font-bold font-poppins mb-6",children:"Redes & Contato"}),e.jsxs("div",{className:"space-y-4",children:[(l==null?void 0:l.instagram)&&e.jsxs("a",{href:`https://instagram.com/${l.instagram.replace("@","")}`,target:"_blank",className:"flex items-center p-3 rounded-lg bg-gray-900/50 hover:bg-gray-700 transition-colors",children:[e.jsx(Pe,{className:"w-5 h-5 mr-3 text-white"}),e.jsx("span",{children:"Instagram"})]}),(l==null?void 0:l.youtube)&&e.jsxs("a",{href:l.youtube,target:"_blank",className:"flex items-center p-3 rounded-lg bg-gray-900/50 hover:bg-gray-700 transition-colors",children:[e.jsx(De,{className:"w-5 h-5 mr-3 text-white"}),e.jsx("span",{children:"YouTube"})]}),(l==null?void 0:l.site)&&e.jsxs("a",{href:l.site,target:"_blank",className:"flex items-center p-3 rounded-lg bg-gray-900/50 hover:bg-gray-700 transition-colors",children:[e.jsx(Ye,{className:"w-5 h-5 mr-3 text-white"}),e.jsx("span",{children:"Website"})]})]})]}),ye&&e.jsxs("div",{className:"bg-gray-800 p-6 rounded-2xl shadow-xl border border-gray-700",children:[e.jsx("h2",{className:"text-xl font-bold font-poppins mb-4",children:"Documentos"}),e.jsxs("div",{className:"space-y-3",children:[((X=a.artista)==null?void 0:X.rider_tecnico_url)&&e.jsxs("button",{onClick:()=>{var s;return E((s=a.artista)==null?void 0:s.rider_tecnico_url)},className:"w-full flex items-center justify-between p-4 rounded-xl bg-gray-900/50 hover:bg-gray-700 transition-colors border border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ge,{className:"w-5 h-5 text-primary"}),e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Rider Técnico"})]}),e.jsx(ie,{className:"w-4 h-4 text-gray-500"})]}),((Z=a.artista)==null?void 0:Z.mapa_palco_url)&&e.jsxs("button",{onClick:()=>{var s;return E((s=a.artista)==null?void 0:s.mapa_palco_url)},className:"w-full flex items-center justify-between p-4 rounded-xl bg-gray-900/50 hover:bg-gray-700 transition-colors border border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(w,{className:"w-5 h-5 text-secondary"}),e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Mapa de Palco"})]}),e.jsx(ie,{className:"w-4 h-4 text-gray-500"})]})]})]}),je&&e.jsxs("div",{className:"bg-gray-800 p-6 rounded-2xl shadow-xl border border-gray-700",children:[e.jsx("h2",{className:"text-xl font-bold font-poppins mb-4",children:"Disponibilidade"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:Fe.map(s=>{const t=O[s];return e.jsxs("div",{className:`flex flex-col items-center justify-center p-2 rounded-lg border aspect-square ${t!=null&&t.active?"bg-primary/10 border-primary":"bg-gray-900/50 border-gray-700 opacity-40"}`,children:[e.jsx("span",{className:"text-[10px] font-bold uppercase",children:Qe[s]}),e.jsx("div",{className:`w-1.5 h-1.5 rounded-full mt-1 ${t!=null&&t.active?"bg-primary":"bg-gray-600"}`})]},s)})})]})]})]})}),he&&n&&e.jsx($e,{currentUserProfile:n,targetProfile:a,onClose:()=>b(!1),onContractCreated:()=>b(!1)}),e.jsx(qe,{isOpen:ue,images:h,initialIndex:fe,onClose:()=>M(!1)})]})};export{Ds as default};
