import{j as e,y as f,e as b}from"./index-Cc-Lnn9x.js";import{r as s}from"./vendor-react-Dfcn4nkY.js";import{G as v}from"./vendor-utils-DmyZJLyO.js";import{C as j}from"./ChartBarIcon-DgZdt84K.js";import{C as N}from"./CreditCardIcon-OXjEnC_f.js";import{S as m}from"./SparklesIcon-DK3M7bKx.js";import{C as w}from"./ClockIcon-BsQhkGky.js";import{T as y}from"./TrendingUpIcon-DLISoJx4.js";import"./vendor-jspdf-Bh_S0msn.js";import"./vendor-ui-DKtFGipk.js";var k={};const L=()=>{const[t,p]=s.useState(null),[g,o]=s.useState(!0),[n,l]=s.useState(""),[r,c]=s.useState(!1),[A,h]=s.useState(""),d=async()=>{o(!0);try{const a=await f.getBIStats();p(a)}catch(a){h(b(a))}finally{o(!1)}};s.useEffect(()=>{d()},[]);const x=async()=>{if(!t)return;c(!0);const a=new v({apiKey:k.API_KEY});try{const i=`Aja como um analista de negócios sênior e estrategista de produto para a plataforma RESONNA.
            Analise os seguintes KPIs reais da plataforma e sugira 3 ações estratégicas prioritárias para aumentar a receita e retenção.
            KPIs:
            - Usuários Ativos: ${t.activeUsers}
            - GMV (Volume Bruto): R$ ${t.totalGmv}
            - Receita da Plataforma (Taxas): R$ ${t.totalRevenue}
            - Taxa de Conversão: ${t.conversionRate.toFixed(2)}%
            - Crescimento Mensal: ${t.monthlyGrowth}%
            
            Retorne um texto curto e altamente executivo em Português do Brasil dividido em "Status Atual" e "Plano de Ação Estratégico".`,u=await a.models.generateContent({model:"gemini-3-pro-preview",contents:{parts:[{text:i}]},config:{thinkingConfig:{thinkingBudget:1e3}}});l(u.text||"Não foi possível gerar insights no momento.")}catch(i){console.error(i),l("Erro ao conectar com AI Advisor de alto nível.")}finally{c(!1)}};return g?e.jsx("div",{className:"p-20 text-center animate-pulse text-gray-600 font-black uppercase tracking-[0.4em] text-[10px]",children:"Consolidando métricas de BI..."}):e.jsxs("div",{className:"text-white animate-fade-in pb-20",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end mb-12 gap-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-heading-hero mb-3 uppercase",children:["BI & ",e.jsx("span",{className:"text-secondary italic",children:"PERFORMANCE"})]}),e.jsx("p",{className:"text-section-label text-gray-500",children:"Métricas Macro e Saúde Financeira do Ecossistema"})]}),e.jsxs("button",{onClick:d,className:"text-[10px] font-black uppercase tracking-widest bg-white/5 px-8 py-4 rounded-xl border border-white/10 hover:bg-white/10 transition-all active:scale-95 flex items-center gap-3 shadow-lg",children:[e.jsx(j,{className:"w-4 h-4 text-secondary"}),"Atualizar Dados"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-12",children:[e.jsxs("div",{className:"glass-card p-8 rounded-3xl border-white/5 relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-green-500/5 rounded-full blur-[40px] pointer-events-none group-hover:bg-green-500/10 transition-colors"}),e.jsx("p",{className:"text-gray-500 text-[9px] font-black uppercase tracking-[0.4em] mb-3",children:"Valor Bruto de Mídia (GMV)"}),e.jsxs("p",{className:"text-3xl font-black text-white font-mono tracking-tighter",children:["R$ ",t==null?void 0:t.totalGmv.toLocaleString("pt-BR")]}),e.jsxs("div",{className:"mt-4 flex items-center gap-1.5 text-green-400 text-[10px] font-black uppercase tracking-widest",children:[e.jsx(y,{className:"w-3.5 h-3.5"})," +12.4% Cresc."]})]}),e.jsxs("div",{className:"glass-card p-8 rounded-3xl border-white/5 relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-primary/5 rounded-full blur-[40px] pointer-events-none group-hover:bg-primary/10 transition-colors"}),e.jsx("p",{className:"text-gray-500 text-[9px] font-black uppercase tracking-[0.4em] mb-3",children:"Receita Líquida Plat."}),e.jsxs("p",{className:"text-3xl font-black text-primary font-mono tracking-tighter",children:["R$ ",t==null?void 0:t.totalRevenue.toLocaleString("pt-BR")]}),e.jsx("p",{className:"text-[9px] text-gray-600 mt-4 uppercase font-black tracking-widest",children:"Taxa de Comissão: 10% Média"})]}),e.jsxs("div",{className:"glass-card p-8 rounded-3xl border-white/5 relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-secondary/5 rounded-full blur-[40px] pointer-events-none group-hover:bg-secondary/10 transition-colors"}),e.jsx("p",{className:"text-gray-500 text-[9px] font-black uppercase tracking-[0.4em] mb-3",children:"Taxa de Ativação"}),e.jsxs("p",{className:"text-3xl font-black text-white font-mono tracking-tighter",children:[t==null?void 0:t.conversionRate.toFixed(1),"%"]}),e.jsx("p",{className:"text-[9px] text-gray-600 mt-4 uppercase font-black tracking-widest",children:"Âncora de Conversão"})]}),e.jsxs("div",{className:"glass-card p-8 rounded-3xl border-white/5 relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-yellow-500/5 rounded-full blur-[40px] pointer-events-none group-hover:bg-yellow-500/10 transition-colors"}),e.jsx("p",{className:"text-gray-500 text-[9px] font-black uppercase tracking-[0.4em] mb-3",children:"Velocidade de Crescimento"}),e.jsxs("p",{className:"text-3xl font-black text-yellow-500 font-mono tracking-tighter",children:["+",t==null?void 0:t.monthlyGrowth,"%"]}),e.jsx("p",{className:"text-[9px] text-gray-600 mt-4 uppercase font-black tracking-widest",children:"Ritmo 30 Dias"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-12",children:[e.jsxs("div",{className:"lg:col-span-2 glass-card rounded-3xl border-white/5 overflow-hidden flex flex-col min-h-[500px]",children:[e.jsx("div",{className:"p-8 border-b border-white/5 bg-white/[0.02] flex justify-between items-center",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-section-label text-gray-500 mb-1",children:"Log Financeiro"}),e.jsxs("p",{className:"text-xl font-black font-poppins text-white tracking-tighter flex items-center gap-3 uppercase",children:[e.jsx(N,{className:"w-5 h-5 text-secondary"}),"Histórico de Performance Mensal"]})]})}),e.jsx("div",{className:"overflow-x-auto flex-grow",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-white/5 text-section-label text-gray-400",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-6",children:"Mês Referência"}),e.jsx("th",{className:"p-6",children:"Volume Transacionado (GMV)"}),e.jsx("th",{className:"p-6",children:"Receita de Comissões (Fees)"}),e.jsx("th",{className:"p-6 text-center",children:"Contratos Ativos"})]})}),e.jsx("tbody",{className:"divide-y divide-white/[0.02]",children:t==null?void 0:t.financialData.map(a=>e.jsxs("tr",{className:"hover:bg-white/[0.02] transition-colors group",children:[e.jsx("td",{className:"p-6 font-mono text-sm text-white font-black group-hover:text-secondary transition-colors",children:a.mes}),e.jsxs("td",{className:"p-6 text-sm text-gray-400",children:["R$ ",a.volume_total.toLocaleString()]}),e.jsxs("td",{className:"p-6 text-sm text-primary font-black",children:["R$ ",a.receita_plataforma.toLocaleString()]}),e.jsx("td",{className:"p-6 text-center",children:e.jsx("span",{className:"bg-white/5 px-4 py-1 rounded-full text-[11px] font-mono text-gray-300 border border-white/5",children:a.contratos_count})})]},a.mes))})]})})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"glass-card p-10 rounded-3xl border-indigo-500/20 relative overflow-hidden shadow-2xl sticky top-24 group",children:[e.jsx("div",{className:"absolute -top-24 -right-24 w-64 h-64 bg-indigo-500/10 rounded-full blur-[80px] group-hover:bg-indigo-500/20 transition-all pointer-events-none"}),e.jsxs("div",{className:"flex items-center gap-4 mb-10",children:[e.jsxs("div",{className:"w-16 h-16 bg-indigo-500/10 rounded-2xl flex items-center justify-center border border-indigo-500/30 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-indigo-500/20 animate-pulse"}),e.jsx(m,{className:"text-indigo-400 w-8 h-8 relative z-10"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-black text-white font-poppins tracking-tighter leading-none mb-1 uppercase",children:"Strategist Pro"}),e.jsx("p",{className:"text-[10px] text-indigo-400 uppercase font-black tracking-[0.3em]",children:"Insight de IA Avançado"})]})]}),n?e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"text-sm text-white/90 leading-premium whitespace-pre-wrap font-medium p-8 rounded-3xl border border-white/5 relative",children:[e.jsx("div",{className:"absolute top-4 left-4 w-1 h-8 bg-indigo-500/50 rounded-full"}),n]}),e.jsx("button",{onClick:x,className:"w-full text-[10px] font-black uppercase tracking-widest text-indigo-400 hover:text-white transition-colors py-4 border border-indigo-500/20 rounded-full bg-indigo-500/5 hover:bg-indigo-500/10",children:"Recalcular Estratégia"})]}):e.jsxs("div",{className:"text-center py-10 relative z-10",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-10 leading-premium font-medium",children:"O motor Gemini Pro 1.5 está pronto para analisar seus ativos financeiros e sugerir o próximo passo tático."}),e.jsxs("button",{onClick:x,disabled:r,className:"w-full bg-white text-dark font-black uppercase tracking-[0.2em] text-[10px] py-6 rounded-2xl transition-all shadow-xl hover:bg-indigo-500 hover:text-white disabled:opacity-50 flex items-center justify-center gap-3 active:scale-95",children:[r?e.jsx(w,{className:"w-5 h-5 animate-spin"}):e.jsx(m,{className:"w-5 h-5"}),r?"Sincronizando Inteligência...":"Iniciar Análise"]})]})]})})]})]})};export{L as default};
