import{r as a,j as e,Q as h,e as g}from"./index-Dujp5Lr2.js";import{A as u,D as y}from"./ActivityIcon-DMd-Ulyp.js";import{C as j}from"./CheckCircleIcon-7T9K-hjK.js";import{S as b}from"./SearchIcon-FhuQLpZ4.js";const k=()=>{const[d,i]=a.useState([]),[o,l]=a.useState(!0),[N,x]=a.useState(""),[r,p]=a.useState(""),[t,m]=a.useState(null),c=async()=>{l(!0);try{const s=await h.listLogs();i(s)}catch(s){x(g(s))}finally{l(!1)}};a.useEffect(()=>{c()},[]);const n=d.filter(s=>s.tipo_evento.toLowerCase().includes(r.toLowerCase())||s.provedor.toLowerCase().includes(r.toLowerCase()));return e.jsxs("div",{className:"text-white animate-fade-in",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-primary font-poppins",children:"Eventos Externos (Webhooks)"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Monitoramento de integração com gateways e serviços de infraestrutura."})]}),e.jsx("button",{onClick:c,className:"p-2 bg-gray-800 hover:bg-gray-700 rounded-lg transition-colors border border-gray-700",children:e.jsx(u,{className:o?"animate-spin":""})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[e.jsxs("div",{className:"relative mb-6",children:[e.jsx("input",{type:"text",placeholder:"Buscar por evento ou provedor...",value:r,onChange:s=>p(s.target.value),className:"w-full bg-gray-900 border border-gray-700 rounded-xl py-3 pl-12 pr-4 text-white focus:ring-1 focus:ring-primary outline-none"}),e.jsx(b,{className:"absolute left-4 top-3.5 w-5 h-5 text-gray-500"})]}),e.jsx("div",{className:"bg-gray-900 rounded-2xl border border-gray-800 overflow-hidden shadow-xl",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-gray-800 text-[10px] uppercase font-black text-gray-500",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4",children:"Provedor"}),e.jsx("th",{className:"p-4",children:"Evento"}),e.jsx("th",{className:"p-4",children:"Data/Hora"}),e.jsx("th",{className:"p-4 text-center",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-800",children:o?e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"p-8 text-center text-gray-600 animate-pulse",children:"Consultando logs de auditoria..."})}):n.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"p-8 text-center text-gray-600",children:"Nenhum evento registrado recentemente."})}):n.map(s=>e.jsxs("tr",{onClick:()=>m(s),className:`cursor-pointer hover:bg-gray-800 transition-colors ${(t==null?void 0:t.id)===s.id?"bg-gray-800":""}`,children:[e.jsx("td",{className:"p-4",children:e.jsx("span",{className:"px-2 py-0.5 bg-gray-700 rounded text-[10px] font-bold text-gray-300 uppercase",children:s.provedor})}),e.jsx("td",{className:"p-4 font-mono text-xs text-primary",children:s.tipo_evento}),e.jsx("td",{className:"p-4 text-xs text-gray-500",children:new Date(s.criado_em).toLocaleString("pt-BR")}),e.jsx("td",{className:"p-4 text-center",children:e.jsx(j,{className:"w-4 h-4 text-green-500 mx-auto"})})]},s.id))})]})})})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-gray-900 rounded-2xl border border-gray-800 p-6 sticky top-24",children:[e.jsxs("h3",{className:"text-lg font-bold mb-6 flex items-center gap-2",children:[e.jsx(y,{className:"text-secondary w-5 h-5"})," Detalhes do Payload"]}),t?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-4 bg-black rounded-xl border border-gray-800 font-mono text-[10px] text-green-400 overflow-x-auto whitespace-pre",children:JSON.stringify(t.payload,null,2)}),e.jsxs("div",{className:"pt-4 border-t border-gray-800",children:[e.jsx("p",{className:"text-[10px] text-gray-500 uppercase font-black mb-1",children:"ID do Rastreio"}),e.jsx("p",{className:"text-xs text-white break-all",children:t.id})]})]}):e.jsx("div",{className:"text-center py-20 text-gray-600 italic text-sm",children:"Selecione um log para ver os dados brutos da integração."})]})})]})]})};export{k as default};
