import{j as e,c as v}from"./index-Cc-Lnn9x.js";import{r as m,L as y}from"./vendor-react-Dfcn4nkY.js";import{P as N}from"./PlusIcon-CPWUX53x.js";import{C}from"./CreateContractModal-CqyQF2Zo.js";import{i as k,a as A}from"./ChevronLeftIcon-BkDyRmha.js";import{E as P}from"./ExclamationIcon-CXRxAwkS.js";import{L as S}from"./LockClosedIcon-BhEtnb0z.js";import{C as _}from"./CheckCircleIcon-DMttEdVL.js";import{F as L}from"./FileSignatureIcon-CkuZe52x.js";import{X as I}from"./XCircleIcon-D5u5_z3n.js";import{C as E}from"./ClockIcon-BsQhkGky.js";import{E as F}from"./EmptyState-DsZCot8O.js";import{M}from"./MapPinIcon-CPSUTHrZ.js";const R=()=>e.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg animate-pulse",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("div",{className:"h-5 bg-gray-700 rounded w-48 mb-2"}),e.jsx("div",{className:"h-4 bg-gray-700 rounded w-32"})]}),e.jsx("div",{className:"h-5 bg-gray-700 rounded-full w-24"})]}),e.jsx("div",{className:"flex justify-end mt-2",children:e.jsx("div",{className:"h-5 bg-gray-700 rounded w-20"})})]}),$=({contract:s,profile:g})=>{const r=Array.isArray(s.artistas)?s.artistas[0]:s.artistas,i=Array.isArray(s.estabelecimentos)?s.estabelecimentos[0]:s.estabelecimentos,o=Array.isArray(r==null?void 0:r.usuarios)?r.usuarios[0]:r==null?void 0:r.usuarios,l=Array.isArray(i==null?void 0:i.usuarios)?i.usuarios[0]:i==null?void 0:i.usuarios,h=(o==null?void 0:o.nome)||"Artista não definido",w=(l==null?void 0:l.nome)||"Local não definido",x=(l==null?void 0:l.cidade)||"Localização não definida",a=g.tipo==="artista",p=s.status==="enviado"&&(a&&!s.assinatura_artista||!a&&!s.assinatura_estabelecimento),u=!a&&s.status==="assinado"&&!s.data_pagamento,d=p||u,b=new Date(s.data_evento),t=new Date,c=s.status==="concluido",f=b>t;let n=null,j="";return c?f?n=e.jsxs("span",{className:"text-[10px] uppercase font-bold text-blue-300 bg-blue-500/10 px-2 py-0.5 rounded border border-blue-500/20 flex items-center gap-1",children:[e.jsx(S,{className:"w-3 h-3"})," Em Custódia"]}):n=e.jsxs("span",{className:"text-[10px] uppercase font-bold text-green-400 bg-green-500/10 px-2 py-0.5 rounded border border-green-500/20 flex items-center gap-1",children:[e.jsx(_,{className:"w-3 h-3"})," Liberado"]}):s.status==="cancelado"?n=e.jsxs("span",{className:"text-[10px] uppercase font-bold text-red-400 bg-red-500/10 px-2 py-0.5 rounded border border-red-500/20 flex items-center gap-1",children:[e.jsx(I,{className:"w-3 h-3"})," Cancelado"]}):d&&(j="shadow-[0_0_15px_rgba(234,179,8,0.1)]"),e.jsxs(y,{to:`/contratos/${s.id}`,className:`block rounded-[2rem] transition-all duration-500 overflow-hidden group border glass-card glass-card-hover relative ${j}`,children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/[0.02] rounded-full blur-[60px] pointer-events-none group-hover:bg-white/[0.05] transition-colors"}),e.jsxs("div",{className:"p-7 flex flex-col h-full relative z-10",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{className:"min-w-0 flex-1 pr-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${d?"bg-yellow-500 animate-pulse":c?"bg-green-500":"bg-gray-600"}`}),e.jsx("p",{className:"text-[10px] font-black text-gray-500 uppercase tracking-[0.2em]",children:a?"Contratante":"Artista"})]}),e.jsx("h3",{className:"font-black text-white text-2xl group-hover:text-primary transition-colors truncate font-poppins tracking-tighter leading-tight",children:a?w:h}),e.jsxs("div",{className:"flex items-center gap-2 mt-2 text-[10px] font-bold text-gray-500 uppercase tracking-widest",children:[e.jsx(M,{className:"w-4 h-4 text-primary"})," ",a?x:(o==null?void 0:o.cidade)||"Brasil"]})]}),e.jsx("div",{className:"text-right flex-shrink-0",children:e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsxs("span",{className:"text-[10px] text-gray-600 font-black mb-1.5 uppercase tracking-tighter",children:["REF: ",s.id.substring(0,6)]}),e.jsxs("div",{className:"text-white font-mono font-black text-2xl tracking-tighter bg-white/5 px-4 py-2 rounded-2xl border border-white/5 group-hover:border-primary/20 transition-colors",children:[e.jsx("span",{className:"text-xs text-gray-500 align-top mr-1 font-sans",children:"R$"}),s.valor?s.valor.toLocaleString("pt-BR",{minimumFractionDigits:2}):"0,00"]})]})})]}),e.jsxs("div",{className:"mt-auto pt-6 border-t border-white/5 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 text-xs font-black text-gray-300 bg-white/5 px-4 py-2 rounded-full border border-white/5 uppercase tracking-widest",children:[e.jsx(E,{className:"w-4 h-4 text-primary"}),e.jsx("span",{className:"font-black",children:b.toLocaleDateString("pt-BR",{timeZone:"UTC",weekday:"short",day:"2-digit",month:"short"})})]}),e.jsx("div",{children:n})]}),d&&e.jsxs("div",{className:"mt-5 bg-yellow-500 text-dark rounded-2xl px-4 py-3 flex items-center justify-center gap-3 text-[10px] font-black uppercase tracking-[0.2em] shadow-lg shadow-yellow-500/10 group-hover:scale-[1.02] transition-transform",children:[e.jsx(P,{className:"w-4 h-4 flex-shrink-0"}),p?"Assinatura Pendente":"Pagamento Pendente"]})]}),e.jsx("div",{className:"absolute inset-0 border-[6px] border-white/0 group-hover:border-white/5 transition-all duration-700 pointer-events-none rounded-[2rem]"})]})},W=({profile:s})=>{const[g,r]=m.useState([]),[i,o]=m.useState(!0),[l,h]=m.useState(""),[w,x]=m.useState(!1),[a,p]=m.useState(""),u=s.tipo==="artista"?k(s).complete:A(s).complete,d=m.useCallback(async()=>{var c,f;const t=s.tipo==="artista"?(c=s.artista)==null?void 0:c.id:(f=s.estabelecimento)==null?void 0:f.id;if(!s||!t){o(!1),r([]);return}o(!0),h("");try{const n=await v.listByProfile(t,s.tipo,a||void 0);r(n)}catch(n){h("Falha ao buscar contratos."),console.error(n.message)}finally{o(!1)}},[s,a]);m.useEffect(()=>{d()},[d]);const b=[{value:"",label:"Todos"},{value:"enviado",label:"Pendentes"},{value:"assinado",label:"Aguard. Pagamento"},{value:"concluido",label:"Confirmados"},{value:"cancelado",label:"Cancelados"}];return e.jsxs("div",{className:"animate-fade-in",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-8 mb-12",children:[e.jsx("div",{className:"w-full md:w-auto overflow-x-auto pb-4 md:pb-0 scrollbar-hide",children:e.jsx("div",{className:"flex items-center gap-3 p-1",children:b.map(t=>e.jsx("button",{onClick:()=>p(t.value),className:`px-7 py-3 rounded-full text-[10px] font-black uppercase tracking-[0.2em] whitespace-nowrap transition-all duration-500 border ${a===t.value?"bg-primary text-dark border-transparent shadow-[0_0_20px_rgba(81,210,238,0.3)] transform scale-105":"bg-white/5 text-gray-500 border-white/5 hover:border-white/10 hover:text-white hover:bg-white/10"}`,children:t.label},t.value))})}),e.jsxs("button",{onClick:()=>x(!0),disabled:!u,title:u?"Novo Contrato":"Complete seu perfil para criar contratos",className:`w-full md:w-auto flex items-center justify-center gap-3 font-black uppercase tracking-widest text-xs py-4 px-10 rounded-full transition-all duration-500 transform shadow-2xl ${u?"bg-white text-dark hover:scale-105 hover:shadow-[0_0_30px_rgba(255,255,255,0.2)] active:scale-95":"bg-white/5 text-gray-600 cursor-not-allowed opacity-50 border border-white/5"}`,children:[e.jsx(N,{className:"w-5 h-5"}),"Novo Contrato"]})]}),!u&&e.jsx("div",{className:"mb-8 bg-yellow-500/10 border border-yellow-500/50 rounded-lg p-4 backdrop-blur-sm animate-fade-in",children:e.jsxs("p",{className:"text-yellow-200 text-sm text-center flex items-center justify-center gap-2 font-medium",children:[e.jsx("span",{className:"w-2 h-2 bg-yellow-500 rounded-full animate-pulse"}),'Seu perfil está incompleto. Você precisa preencher todos os dados obrigatórios na aba "Perfil" para poder criar e assinar contratos.']})}),i?e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3",children:Array.from({length:6}).map((t,c)=>e.jsx(R,{},c))}):l?e.jsx("p",{className:"text-center text-red-400 bg-red-500/10 p-6 rounded-xl border border-red-500/20",children:l}):g.length===0?e.jsx(F,{icon:L,title:a?"Nenhum contrato nesta categoria":"Sua agenda está vazia",description:a?"Tente mudar o filtro para ver outros contratos.":"Você ainda não possui contratos. Inicie uma nova proposta para formalizar seus shows e garantir seu pagamento.",actionLabel:a?"Limpar Filtros":"Criar Primeiro Contrato",onAction:a?()=>p(""):()=>x(!0)}):e.jsx("div",{className:"grid gap-8 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3",children:g.map(t=>e.jsx($,{contract:t,profile:s},t.id))}),w&&e.jsx(C,{currentUserProfile:s,onClose:()=>x(!1),onContractCreated:()=>{x(!1),p(""),d()}})]})};export{W as C};
