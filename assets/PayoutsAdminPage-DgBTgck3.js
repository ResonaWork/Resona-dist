import{p as m,e as u,j as e}from"./index-Cc-Lnn9x.js";import{r as a}from"./vendor-react-Dfcn4nkY.js";import{C as E}from"./CheckCircleIcon-DMttEdVL.js";import{X as T}from"./XCircleIcon-D5u5_z3n.js";import{C as q}from"./ClockIcon-BsQhkGky.js";import{S as D}from"./SearchIcon-DH3o1suK.js";import{C as N}from"./ConfirmationModal-FOR2G1eE.js";import"./vendor-jspdf-Bh_S0msn.js";import"./vendor-utils-DmyZJLyO.js";import"./vendor-ui-DKtFGipk.js";import"./ExclamationIcon-CXRxAwkS.js";const Q=()=>{const[y,C]=a.useState([]),[S,h]=a.useState(!0),[M,k]=a.useState(null),[r,P]=a.useState(""),[d,L]=a.useState("all"),[s,i]=a.useState(null),[A,x]=a.useState(!1),[R,p]=a.useState(!1),[g,l]=a.useState(!1),[f,j]=a.useState("");a.useEffect(()=>{o()},[]);const o=async()=>{h(!0);try{const t=await m.listAllPayouts();C(t)}catch(t){k(u(t))}finally{h(!1)}},I=async()=>{if(s){l(!0);try{await m.updatePayoutStatus(s.id,{status:"pago",data_pagamento:new Date().toISOString(),comprovante_url:f||void 0}),x(!1),i(null),j(""),o()}catch(t){alert(u(t))}finally{l(!1)}}},O=async()=>{if(s){l(!0);try{await m.updatePayoutStatus(s.id,{status:"rejeitado"}),p(!1),i(null),o()}catch(t){alert(u(t))}finally{l(!1)}}},_=t=>{navigator.clipboard.writeText(t),alert("Copiado para a área de transferência!")},b=y.filter(t=>{var w,v;const n=((w=t.usuarios)==null?void 0:w.nome.toLowerCase().includes(r.toLowerCase()))||((v=t.usuarios)==null?void 0:v.email.toLowerCase().includes(r.toLowerCase()))||t.chave_pix.includes(r),c=d==="all"||t.status===d;return n&&c});return e.jsxs("div",{className:"text-white animate-fade-in pb-12",children:[e.jsxs("div",{className:"flex flex-col mb-12",children:[e.jsxs("h1",{className:"text-heading-hero mb-3 uppercase",children:["LOGÍSTICA DE ",e.jsx("span",{className:"text-primary italic",children:"PAGAMENTOS"})]}),e.jsx("p",{className:"text-section-label text-gray-500",children:"Auditoria de Liquidação Global e Desembolsos PIX"})]}),e.jsxs("div",{className:"glass-card p-6 rounded-3xl mb-12 border-white/5 shadow-2xl flex flex-col lg:flex-row items-center gap-6 group",children:[e.jsxs("div",{className:"relative flex-grow w-full lg:w-auto",children:[e.jsx("input",{type:"text",placeholder:"Escanear identidades financeiras (Nome, Email, PIX)...",value:r,onChange:t=>P(t.target.value),className:"w-full bg-white/5 border border-white/10 rounded-xl py-4 pl-12 pr-6 focus:outline-none focus:ring-2 focus:ring-primary/50 text-white font-medium transition-all group-hover:bg-white/[0.08]"}),e.jsx(D,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"})]}),e.jsxs("div",{className:"flex items-center gap-4 w-full lg:w-auto overflow-x-auto",children:[e.jsxs("select",{value:d,onChange:t=>L(t.target.value),className:"bg-white/5 border border-white/10 rounded-xl py-4 px-6 text-[10px] font-black uppercase tracking-widest focus:outline-none focus:ring-2 focus:ring-primary/50 text-white cursor-pointer hover:bg-white/10 transition-all min-w-[200px]",children:[e.jsx("option",{value:"all",className:"bg-dark text-white",children:"Todos: Ativos"}),e.jsx("option",{value:"pendente",className:"bg-dark text-white",children:"Status: Pendente"}),e.jsx("option",{value:"pago",className:"bg-dark text-white",children:"Status: Pago"}),e.jsx("option",{value:"rejeitado",className:"bg-dark text-white",children:"Status: Rejeitado"})]}),e.jsx("button",{onClick:o,className:"text-[10px] font-black uppercase tracking-widest bg-white/5 px-8 py-4 rounded-xl border border-white/10 hover:bg-white/10 transition-all active:scale-95 flex items-center gap-3 whitespace-nowrap shadow-lg",children:"Atualizar Caixa"})]})]}),e.jsx("div",{className:"glass-card rounded-3xl border-white/5 overflow-hidden shadow-2xl",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-white/5 text-section-label text-gray-400",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-6 pl-10",children:"Entidade Favorecida"}),e.jsx("th",{className:"p-6",children:"Dados de Liquidação"}),e.jsx("th",{className:"p-6 text-center",children:"Montante"}),e.jsx("th",{className:"p-6 text-center",children:"Status Vital"}),e.jsx("th",{className:"p-6 text-right pr-10",children:"Ações"})]})}),e.jsx("tbody",{className:"divide-y divide-white/[0.02]",children:S?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"p-24 text-center text-gray-600 font-black uppercase tracking-widest animate-pulse",children:"Sincronizando Livro Caixa Global..."})}):b.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"p-24 text-center text-gray-600 font-black uppercase tracking-widest leading-premium",children:"Nenhuma solicitação de liquidação encontrada nesta frequência."})}):b.map(t=>{var n,c;return e.jsxs("tr",{className:"hover:bg-white/[0.02] transition-colors group",children:[e.jsx("td",{className:"p-6 pl-10",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"font-black text-white font-poppins tracking-tight text-lg leading-none group-hover:text-primary transition-colors uppercase",children:(n=t.usuarios)==null?void 0:n.nome}),e.jsx("span",{className:"text-[11px] font-mono text-gray-500 uppercase tracking-widest",children:(c=t.usuarios)==null?void 0:c.email}),e.jsxs("span",{className:"text-[9px] text-gray-600 flex items-center gap-1.5 mt-1",children:[e.jsx(q,{className:"w-3 h-3"}),new Date(t.criado_em).toLocaleString("pt-BR")]})]})}),e.jsx("td",{className:"p-6",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("span",{className:"text-[9px] bg-white/5 px-3 py-1 rounded-full border border-white/10 uppercase font-black tracking-widest text-gray-400 w-fit",children:t.tipo_chave}),e.jsx("button",{onClick:()=>_(t.chave_pix),className:"text-white hover:text-primary font-mono text-xs text-left transition-colors truncate max-w-[200px]",title:"Clique para copiar",children:t.chave_pix})]})}),e.jsx("td",{className:"p-6 text-center",children:e.jsxs("p",{className:"font-black text-white font-mono text-2xl tracking-tighter",children:[e.jsx("span",{className:"text-gray-600 text-[11px] mr-1",children:"R$"}),t.valor.toLocaleString("pt-BR",{minimumFractionDigits:2})]})}),e.jsx("td",{className:"p-6 text-center",children:e.jsx("span",{className:`px-4 py-1.5 rounded-full text-[9px] font-black uppercase tracking-widest border ${t.status==="pago"?"bg-green-500/10 text-green-400 border-green-500/20 shadow-[0_0_20px_rgba(34,197,94,0.1)]":t.status==="rejeitado"?"bg-red-500/10 text-red-500 border-red-500/20":"bg-yellow-500/10 text-yellow-500 border-yellow-500/20 animate-pulse"}`,children:t.status})}),e.jsx("td",{className:"p-6 text-right pr-10",children:t.status==="pendente"&&e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>{i(t),x(!0)},className:"w-10 h-10 flex items-center justify-center bg-green-500/10 hover:bg-green-500 border border-green-500/20 rounded-xl text-green-400 hover:text-dark shadow-xl transition-all active:scale-90",title:"Confirmar Pagamento",children:e.jsx(E,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>{i(t),p(!0)},className:"w-10 h-10 flex items-center justify-center bg-red-500/10 hover:bg-red-500 border border-red-500/20 rounded-xl text-red-500 hover:text-white shadow-xl transition-all active:scale-90",title:"Rejeitar Pedido",children:e.jsx(T,{className:"w-5 h-5"})})]})})]},t.id)})})]})})}),e.jsx(N,{isOpen:A,onClose:()=>x(!1),onConfirm:I,title:"Confirmar Pagamento",message:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{children:["Você confirma que realizou a transferência de ",e.jsxs("strong",{children:["R$ ",s==null?void 0:s.valor.toLocaleString("pt-BR",{minimumFractionDigits:2})]})," para a chave PIX abaixo?"]}),e.jsx("div",{className:"bg-gray-900 p-3 rounded font-mono text-sm border border-gray-700 break-all",children:s==null?void 0:s.chave_pix}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"URL do Comprovante (Opcional)"}),e.jsx("input",{type:"text",value:f,onChange:t=>j(t.target.value),className:"w-full bg-gray-900 border border-gray-700 rounded p-2 text-sm",placeholder:"Link do PDF/Imagem"})]})]}),confirmText:"Confirmar Saque",isConfirming:g}),e.jsx(N,{isOpen:R,onClose:()=>p(!1),onConfirm:O,title:"Rejeitar Solicitação",message:e.jsx("p",{children:"Tem certeza que deseja rejeitar este pedido de saque? O usuário será notificado e o saldo voltará a ficar disponível para nova solicitação."}),confirmText:"Rejeitar",isConfirming:g})]})};export{Q as default};
