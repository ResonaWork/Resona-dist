import{j as e,y as m,e as h}from"./index-Cc-Lnn9x.js";import{r as a}from"./vendor-react-Dfcn4nkY.js";import{A as v}from"./ActivityIcon-ys33kT0z.js";import{D as y}from"./DatabaseIcon-CMfcDGwG.js";import{S as k}from"./SearchIcon-DH3o1suK.js";import{C as S}from"./ClockIcon-BsQhkGky.js";import{T as C}from"./TrashIcon-Dw3P_7Ho.js";import{C as L}from"./ConfirmationModal-FOR2G1eE.js";import"./vendor-jspdf-Bh_S0msn.js";import"./vendor-utils-DmyZJLyO.js";import"./vendor-ui-DKtFGipk.js";import"./ExclamationIcon-CXRxAwkS.js";const H=()=>{const[g,i]=a.useState([]),[l,n]=a.useState(!0),[u,c]=a.useState(!1),[I,b]=a.useState(""),[s,f]=a.useState(""),[r,d]=a.useState(null),[j,o]=a.useState(!1),p=async()=>{n(!0);try{const t=await m.fetchIaLogs();i(t)}catch(t){b(h(t))}finally{n(!1)}};a.useEffect(()=>{p()},[]);const w=async()=>{c(!0);try{await m.clearIaLogs(),i([]),d(null),o(!1)}catch(t){alert(h(t))}finally{c(!1)}},x=g.filter(t=>t.servico.toLowerCase().includes(s.toLowerCase())||t.tipo_erro.toLowerCase().includes(s.toLowerCase())||t.mensagem_erro.toLowerCase().includes(s.toLowerCase())),N=t=>{switch(t){case"CORS":return"bg-orange-500/10 text-orange-500 border-orange-500/20";case"NETWORK":return"bg-red-500/10 text-red-500 border-red-500/20";case"QUOTA":return"bg-purple-500/10 text-purple-500 border-purple-500/20";default:return"bg-white/5 text-gray-400 border-white/5"}};return e.jsxs("div",{className:"text-white animate-fade-in relative pb-20",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-end mb-12 gap-8",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-heading-hero mb-3 uppercase",children:["TELEMETRIA ",e.jsx("span",{className:"text-primary italic",children:"DO SISTEMA"})]}),e.jsx("p",{className:"text-section-label text-gray-500",children:"Saúde das Integrações e Motores de IA em Tempo Real"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("button",{onClick:()=>o(!0),className:"group bg-red-500/10 text-red-500 font-black uppercase tracking-[0.2em] text-[10px] py-4 px-8 rounded-2xl border border-red-500/20 transition-all hover:bg-red-500 hover:text-white active:scale-95 flex items-center gap-3",children:[e.jsx(C,{className:"w-5 h-5 transition-transform group-hover:rotate-12"})," Limpar Logs"]}),e.jsxs("button",{onClick:p,className:"group bg-white text-dark font-black uppercase tracking-[0.2em] text-[10px] py-4 px-8 rounded-2xl transition-all shadow-xl hover:bg-primary hover:text-white active:scale-95 flex items-center gap-3",children:[e.jsx(S,{className:`w-5 h-5 ${l?"animate-spin":"group-hover:rotate-180 transition-transform duration-700"}`})," Sincronizar"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-10",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[e.jsx("div",{className:"glass-card p-6 rounded-3xl border-white/5 shadow-2xl flex items-center gap-4 group",children:e.jsxs("div",{className:"relative flex-grow",children:[e.jsx("input",{type:"text",placeholder:"ESCANEAR ANOMALIAS (SERVIÇO, ERRO)...",value:s,onChange:t=>f(t.target.value),className:"w-full bg-white/5 border border-white/10 rounded-xl py-4 pl-12 pr-6 focus:outline-none focus:ring-2 focus:ring-primary/50 text-white font-black uppercase tracking-widest text-[10px] transition-all placeholder:text-gray-600 focus:bg-white/10"}),e.jsx(k,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500 group-hover:text-primary transition-colors"})]})}),e.jsx("div",{className:"glass-card rounded-3xl overflow-hidden shadow-2xl border-white/5 h-fit",children:e.jsx("div",{className:"overflow-x-auto custom-scrollbar",children:e.jsxs("table",{className:"w-full text-left",children:[e.jsx("thead",{className:"bg-white/5 border-b border-white/5",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-6 text-section-label text-gray-400",children:"Contexto do Serviço"}),e.jsx("th",{className:"p-6 text-section-label text-gray-400",children:"Tipo de Anomalia"}),e.jsx("th",{className:"p-6 text-section-label text-gray-400",children:"Sinal de Tempo"}),e.jsx("th",{className:"p-6 text-section-label text-gray-400 text-center",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-white/5",children:l?e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"p-12 text-center text-gray-500 animate-pulse text-[10px] font-black uppercase tracking-widest",children:"Interceptando Feed..."})}):x.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"p-12 text-center text-gray-500 text-[10px] font-black uppercase tracking-widest",children:"Nenhum sinal interceptado. Protocolo 100%."})}):x.map(t=>e.jsxs("tr",{onClick:()=>d(t),className:`cursor-pointer group hover:bg-white/[0.05] transition-colors relative ${(r==null?void 0:r.id)===t.id?"bg-primary/[0.05]":""}`,children:[e.jsxs("td",{className:"p-6",children:[e.jsx("div",{className:"font-black text-white text-[11px] uppercase tracking-tighter group-hover:text-primary transition-colors",children:t.servico}),e.jsx("div",{className:"text-[10px] text-gray-600 font-medium truncate max-w-[200px] mt-1",children:t.mensagem_erro})]}),e.jsx("td",{className:"p-6",children:e.jsx("span",{className:`px-4 py-1.5 border rounded-full text-[9px] font-black uppercase tracking-widest shadow-lg inline-block transition-all group-hover:scale-105 ${N(t.tipo_erro)}`,children:t.tipo_erro})}),e.jsx("td",{className:"p-6 text-[10px] text-gray-500 font-mono font-black uppercase tracking-tighter",children:new Date(t.criado_em).toLocaleString("pt-BR")}),e.jsx("td",{className:"p-6 text-center",children:e.jsx("div",{className:"w-5 h-5 rounded-full bg-red-500/10 flex items-center justify-center border border-red-500/20 group-hover:bg-red-500/20 transition-all mx-auto",children:e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-red-500 animate-pulse"})})})]},t.id))})]})})})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"glass-card p-10 rounded-3xl border-white/5 shadow-2xl sticky top-24 overflow-hidden group/audit",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-secondary/5 rounded-full blur-[80px] group-hover/audit:scale-150 transition-transform"}),e.jsxs("h2",{className:"text-xl font-black text-white font-poppins tracking-tighter mb-10 flex items-center gap-4 relative z-10 uppercase",children:[e.jsx(y,{className:"text-primary w-8 h-8"})," Rastro Digital"]}),r?e.jsxs("div",{className:"space-y-10 relative z-10",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-[10px] text-gray-500 uppercase font-black tracking-widest mb-4 flex items-center gap-2",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-red-500"})," Mensagem de Ruptura"]}),e.jsxs("p",{className:"text-sm text-red-500 font-black font-poppins leading-relaxed bg-red-500/5 p-6 rounded-2xl border border-red-500/10 italic",children:['"',r.mensagem_erro,'"']})]}),r.payload_input&&e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-gray-500 uppercase font-black tracking-widest mb-4",children:"Snapshot do Input"}),e.jsx("div",{className:"p-6 bg-black/40 rounded-[1.5rem] border border-white/5 font-mono text-[10px] text-primary/80 overflow-x-auto whitespace-pre custom-scrollbar",children:JSON.stringify(r.payload_input,null,2)})]}),e.jsxs("div",{className:"pt-8 border-t border-white/5 grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[9px] text-gray-600 uppercase font-black tracking-widest mb-2",children:"Nodo Sujeito"}),e.jsx("p",{className:"text-[11px] text-white font-mono truncate",children:r.usuario_id||"Visitante Anônimo"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[9px] text-gray-600 uppercase font-black tracking-widest mb-2",children:"ID do Ciclo"}),e.jsx("p",{className:"text-[11px] text-white font-mono truncate opacity-40",children:r.id.substring(0,12)})]})]}),e.jsxs("div",{className:"bg-primary/5 p-6 rounded-[1.5rem] border border-primary/10 group-hover:bg-primary/[0.08] transition-all",children:[e.jsx("p",{className:"text-[10px] text-primary font-black uppercase tracking-[0.2em] mb-3",children:"Recomendação de Protocolo"}),e.jsx("p",{className:"text-[11px] text-gray-400 font-medium leading-premium",children:r.tipo_erro==="CORS"?"Revalidar cabeçalhos de segurança no bucket de storage.":r.tipo_erro==="QUOTA"?"Cota excedida. Recomenda-se aumentar os limites de tokens.":"Instabilidade de rede detectada. Monitore a latência do endpoint."})]})]}):e.jsxs("div",{className:"text-center py-20 flex flex-col items-center gap-6 opacity-30 group-hover:opacity-100 transition-opacity",children:[e.jsx(v,{className:"w-16 h-16 text-gray-600"}),e.jsx("p",{className:"text-[10px] font-black uppercase tracking-[0.4em] text-gray-600",children:"Selecione um sinal para decodificação"})]})]})})]}),e.jsx(L,{isOpen:j,onClose:()=>o(!1),onConfirm:w,title:"Limpar Histórico de Erros",message:"Tem certeza que deseja remover todos os registros de erro de integração? Esta ação não pode ser desfeita.",confirmText:"Limpar Tudo",isConfirming:u})]})};export{H as default};
