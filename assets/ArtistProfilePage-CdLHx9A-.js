import{j as e,x as _e,h as ke,a as Ie,r,d as ae,y as Pe,s as x,e as te,k as Me,L as re}from"./index-COZr6oUa.js";import{M as w}from"./MapPinIcon-CEFc6rUJ.js";import{P as Ae}from"./PhotographIcon-CVzA4UAX.js";import{C as De}from"./CreateContractModal-BEJlkR3e.js";import{U as Ue}from"./UsersIcon-ClJ7jTPH.js";import{a as N}from"./ChevronLeftIcon-goxmtNsv.js";import{g as $e,I as Ee}from"./imageUtils-BjSnEOwx.js";import{C as Re,R as ze}from"./ReviewList-INrVTy_f.js";import{S as Oe,I as Te}from"./ShareIcon-BQNUIPPy.js";import{M as oe}from"./MusicNoteIcon-D-SfetRL.js";import{S as Be}from"./ShieldIcon-Du1jeZBy.js";import{F as Le}from"./FileIcon-Bd2VHODz.js";import{D as ie}from"./DownloadIcon-BwjbsArL.js";import{S as Ve}from"./SEO-BCqgIYpW.js";import"./financeUtils-CtoX7Xu7.js";import"./CheckCircleIcon-BNVOgBBu.js";import"./ChevronRightIcon-CiS7WmRa.js";import"./SearchIcon-CYbvkkvq.js";import"./FileSignatureIcon-DMIHOEx9.js";import"./LockClosedIcon-Bwjsghw3.js";import"./SparklesIcon-gf8BCoIq.js";import"./ClockIcon-Dd-MByIB.js";import"./ExclamationIcon-42o_Tq39.js";import"./StarIcon-Ch2sh94e.js";import"./UserCircleIcon-CmCTjQsR.js";import"./EmptyState-DL1pPdG5.js";const qe=({className:d="w-6 h-6",...i})=>e.jsx("svg",{className:d,fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",...i,children:e.jsx("path",{fillRule:"evenodd",d:"M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.218 2.427.465a4.902 4.902 0 011.772 1.153 4.902 4.902 0 011.153 1.772c.247.636.416 1.363.465 2.427.048 1.024.06 1.378.06 3.808s-.012 2.784-.06 3.808c-.049 1.064-.218 1.791-.465 2.427a4.902 4.902 0 01-1.153 1.772 4.902 4.902 0 01-1.772 1.153c-.636.247-1.363.416-2.427.465-1.024.048-1.378.06-3.808.06s-2.784-.012-3.808-.06c-1.064-.049-1.791-.218-2.427-.465a4.902 4.902 0 011.153-1.772A4.902 4.902 0 016.08 2.525c.636-.247 1.363-.416 2.427-.465C9.53 2.013 9.884 2 12.315 2zM12 7a5 5 0 100 10 5 5 0 000-10zm0 8a3 3 0 110-6 3 3 0 010 6zm5.25-10a1.25 1.25 0 100 2.5 1.25 1.25 0 000-2.5z",clipRule:"evenodd"})}),Ge=({className:d="w-6 h-6",...i})=>e.jsx("svg",{className:d,fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",...i,children:e.jsx("path",{fillRule:"evenodd",d:"M19.812 5.418c.861.23 1.538.907 1.768 1.768C21.998 8.78 22 12 22 12s0 3.22-.418 4.814a2.506 2.506 0 0 1-1.768 1.768c-1.594.419-7.814.419-7.814.419s-6.22 0-7.814-.419a2.505 2.505 0 0 1-1.768-1.768C2 15.22 2 12 2 12s0-3.22.418-4.814a2.506 2.506 0 0 1 1.768-1.768C5.78 5 12 5 12 5s6.22 0 7.812.418zM9.75 15.562V8.438L15.468 12 9.75 15.562z",clipRule:"evenodd"})}),Ye=({className:d="w-6 h-6",...i})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:d,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,...i,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2h10a2 2 0 002-2v-1a2 2 0 012-2h1.945M7.757 15.757a4 4 0 105.657-5.657a4 4 0 00-5.657 5.657zM12 21a9 9 0 100-18 9 9 0 000 18z"})}),Fe=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],Qe={monday:"SEG",tuesday:"TER",wednesday:"QUA",thursday:"QUI",friday:"SEX",saturday:"SÁB",sunday:"DOM"},_s=()=>{var z,O,T,B,L,V,q,G,Y,F,Q,W,H,X,Z;const{id:d}=_e(),{profile:i,user:We}=ke();Ie();const[a,le]=r.useState(null),[C,ne]=r.useState([]),[He,S]=r.useState(!0),[_,ce]=r.useState([]),[g,de]=r.useState([]),[k,me]=r.useState([]),[I,xe]=r.useState([]),[P,pe]=r.useState(null),[he,u]=r.useState(!0),[M,f]=r.useState(null),[Xe,Ze]=r.useState(!1),[Je,Ke]=r.useState(""),[A,D]=r.useState(!1),[ge,b]=r.useState(!1),[ue,U]=r.useState(!1),[fe,be]=r.useState(0),$=r.useCallback(async()=>{var s,t,J;if(!d){f("ID de usuário não fornecido."),u(!1);return}u(!0),f(null);try{const{data:p,error:we}=await ae.from("usuarios").select("*, artista:artistas!inner(*)").eq("id",d).eq("tipo","artista").single();if(we||!p)throw new Error("Perfil não encontrado.");const K=Pe(p),o=K.artista;if(o!=null&&o.id){const{data:l}=await ae.from("contratos").select("id, data_evento, status, estabelecimentos!inner(usuario_id, usuarios!inner(nome, cidade))").eq("artista_id",o.id).in("status",["assinado","concluido"]).gte("data_evento",new Date().toISOString()).order("data_evento",{ascending:!0});ce((l||[]).map(c=>{const m=Array.isArray(c.estabelecimentos)?c.estabelecimentos[0]:c.estabelecimentos,h=m&&(Array.isArray(m.usuarios)?m.usuarios[0]:m.usuarios);return!m||!h?null:{id:c.id,titulo:`Show em ${h.nome}`,data_evento:c.data_evento,estabelecimento:{id:m.usuario_id,nome:h.nome,cidade:h.cidade}}}).filter(c=>c!==null))}const y=Date.now(),ee=((s=o==null?void 0:o.galeria_fotos)==null?void 0:s.filter(l=>!!l))||[],se=((t=o==null?void 0:o.galeria_videos)==null?void 0:t.filter(l=>!!l))||[],v=((J=o==null?void 0:o.galeria_audios)==null?void 0:J.filter(l=>!!l))||[];if(o!=null&&o.foto_capa){const l=$e("artista",o.foto_capa,Ee.coverPhoto);pe(l?`${l}&t=${y}`:`${x.getPublicUrl("artista",o.foto_capa)}?t=${y}`)}const[Ne,Ce,Se]=await Promise.all([ee.length>0?x.getSignedUrls("artista",ee,3600):Promise.resolve([]),se.length>0?x.getSignedUrls("artista",se,3600):Promise.resolve([]),v.length>0?x.getSignedUrls("artista",v,3600):Promise.resolve([])]);de(Ne.map(l=>`${l}&t=${y}`)),me(Ce),xe(Se.map((l,c)=>({name:v[c].split("/").pop()||`Track ${c+1}`,url:l}))),le(K)}catch(p){f(te(p))}finally{u(!1)}},[d]);r.useEffect(()=>{$()},[$]),r.useEffect(()=>{var s;(s=a==null?void 0:a.artista)!=null&&s.id&&(S(!0),Me.list(a.artista.id).then(t=>ne(t||[])).finally(()=>S(!1)))},[(z=a==null?void 0:a.artista)==null?void 0:z.id]);const E=async s=>{if(s)try{const t=await x.getSignedUrls("artista",[s],300);t.length>0&&window.open(t[0],"_blank")}catch(t){alert("Falha ao obter documento: "+te(t))}};if(he)return e.jsx("div",{className:"flex justify-center items-center h-screen bg-dark text-white",children:"Carregando perfil..."});if(M||!a)return e.jsxs("div",{className:"flex flex-col justify-center items-center h-screen bg-dark text-red-500",children:[e.jsx("h2",{className:"text-2xl font-bold",children:M||"Artista não encontrado."}),e.jsx(re,{to:"/artistas",className:"mt-4 text-primary underline",children:"Voltar"})]});const j=a.foto_url?`${x.getPublicUrl("perfis",a.foto_url)}?t=${Date.now()}`:"https://images.unsplash.com/photo-1511379938547-c1f69419868d?q=80&w=2070&auto=format&fit=crop",n=(O=a.artista)==null?void 0:O.midias_sociais,R=((T=a.artista)==null?void 0:T.disponibilidade)||{},je=Object.values(R).some(s=>s.active),ye=!!((B=a.artista)!=null&&B.rider_tecnico_url||(L=a.artista)!=null&&L.mapa_palco_url),ve={"@context":"https://schema.org","@type":((q=(V=a.artista)==null?void 0:V.integrantes)==null?void 0:q.length)>1?"MusicGroup":"Person",name:a.nome,description:((G=a.artista)==null?void 0:G.descricao)||"",image:j,jobTitle:"Musician",genre:(Y=a.artista)==null?void 0:Y.genero_musical,address:{"@type":"PostalAddress",addressLocality:a.cidade,addressCountry:"BR"}};return e.jsxs("div",{className:"bg-dark text-white font-sans min-h-screen pb-24 lg:pb-0 relative",children:[e.jsx(Ve,{title:a.nome,description:((Q=(F=a.artista)==null?void 0:F.descricao)==null?void 0:Q.substring(0,160))||`Confira o perfil de ${a.nome} no Resona. Músico disponível para shows.`,image:j,type:"profile",schema:ve}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"h-[45vh] md:h-[55vh] bg-cover bg-center relative",style:{backgroundImage:P?`url(${P})`:"linear-gradient(to right, #1f2937, #111827)"},children:e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-dark via-dark/60 to-transparent"})}),e.jsx("div",{className:"container mx-auto px-4 relative -mt-32 md:-mt-40 z-10",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center md:items-end gap-6",children:[e.jsx("img",{src:j,alt:a.nome,className:"w-40 h-40 md:w-56 md:h-56 rounded-full object-cover border-4 border-dark shadow-2xl relative z-10"}),e.jsxs("div",{className:"flex-grow mb-2 text-center md:text-left",children:[e.jsxs("h1",{className:"text-3xl sm:text-4xl md:text-6xl font-black font-poppins flex items-center justify-center md:justify-start gap-3",children:[a.nome,a.status_verificacao==="verificado"&&e.jsx(Be,{className:"w-6 h-6 md:w-8 md:h-8 text-primary shadow-primary/50"})]}),e.jsxs("div",{className:"flex flex-wrap items-center justify-center md:justify-start gap-4 mt-3",children:[e.jsx("span",{className:"bg-primary/20 backdrop-blur-md border border-primary/30 text-primary px-3 py-1 rounded-full text-sm font-bold uppercase tracking-wider",children:((W=a.artista)==null?void 0:W.genero_musical)||"Artista"}),e.jsxs("div",{className:"flex items-center text-gray-200 text-sm font-medium",children:[e.jsx(w,{className:"w-4 h-4 mr-1 text-primary"}),e.jsx("span",{children:a.cidade||"Brasil"})]})]})]}),e.jsxs("div",{className:"mb-4 md:mb-8 flex flex-col sm:flex-row gap-3 w-full md:w-auto justify-center",children:[e.jsxs("button",{onClick:()=>{navigator.clipboard.writeText(window.location.href),D(!0),setTimeout(()=>D(!1),2e3)},className:"flex items-center justify-center gap-2 bg-gray-800/80 px-5 py-2.5 rounded-full border border-gray-600 shadow-lg text-sm",children:[A?e.jsx(Re,{className:"w-5 h-5 text-green-400"}):e.jsx(Oe,{className:"w-5 h-5"}),A?"Copiado!":"Compartilhar"]}),(i==null?void 0:i.tipo)==="estabelecimento"&&e.jsx("button",{onClick:()=>b(!0),disabled:!N(i).complete,className:`font-bold py-2.5 px-8 rounded-full shadow-lg transform transition-all text-sm ${N(i).complete?"bg-gradient-to-r from-primary to-secondary text-white hover:scale-105":"bg-gray-700 text-gray-500 cursor-not-allowed"}`,title:N(i).complete?"Contratar":"Complete seu perfil de estabelecimento para contratar.",children:"Contratar Agora"})]})]})})]}),e.jsx("div",{className:"container mx-auto px-4 py-12",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-12",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-10",children:[e.jsxs("section",{className:"bg-gray-800/50 p-8 rounded-2xl border border-gray-700/50 shadow-xl",children:[e.jsx("h2",{className:"text-2xl font-bold font-poppins mb-4",children:"Sobre"}),e.jsx("p",{className:"text-gray-300 leading-relaxed text-lg whitespace-pre-wrap",children:((H=a.artista)==null?void 0:H.descricao)||"O artista ainda não adicionou uma descrição."})]}),C.length>0&&e.jsxs("section",{className:"bg-gray-800/50 p-8 rounded-2xl border border-gray-700/50 shadow-xl",children:[e.jsx("h2",{className:"text-2xl font-bold font-poppins mb-6",children:"Integrantes"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:C.map(s=>e.jsxs("div",{className:"flex items-center gap-4 bg-gray-900/50 p-4 rounded-xl border border-gray-700",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/20 flex items-center justify-center text-primary",children:e.jsx(Ue,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-white",children:s.nome}),e.jsx("p",{className:"text-sm text-gray-400",children:s.instrumento})]})]},s.id))})]}),e.jsxs("section",{className:"bg-gray-800/50 p-8 rounded-2xl border border-gray-700/50 shadow-xl",children:[e.jsx("h2",{className:"text-2xl font-bold font-poppins mb-6",children:"Agenda Confirmada"}),_.length>0?e.jsx("div",{className:"space-y-3",children:_.map(s=>e.jsx("div",{className:"flex items-center justify-between bg-gray-900/50 p-4 rounded-xl border border-gray-700 hover:border-primary/50 transition-colors group",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"bg-gray-800 p-3 rounded-lg text-center min-w-[60px]",children:[e.jsx("span",{className:"block text-xs text-primary font-bold uppercase",children:new Date(s.data_evento).toLocaleString("pt-BR",{month:"short",timeZone:"UTC"})}),e.jsx("span",{className:"block text-xl font-black text-white",children:new Date(s.data_evento).getUTCDate()})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-white text-lg group-hover:text-primary transition-colors",children:s.titulo}),e.jsxs(re,{to:`/estabelecimento/${s.estabelecimento.id}`,className:"text-sm text-gray-400 flex items-center gap-1",children:[e.jsx(w,{className:"w-3 h-3"})," ",s.estabelecimento.nome]})]})]})},s.id))}):e.jsx("div",{className:"text-center py-8 text-gray-500 italic",children:"Nenhum show público agendado."})]}),e.jsxs("section",{className:"space-y-8",children:[e.jsx("h2",{className:"text-2xl font-bold font-poppins",children:"Galeria"}),g.length>0?e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:g.map((s,t)=>e.jsxs("div",{onClick:()=>{be(t),U(!0)},className:"cursor-pointer group relative overflow-hidden rounded-xl aspect-square",children:[e.jsx("img",{src:s,alt:"Galeria",className:"w-full h-full object-cover transition-transform group-hover:scale-110"}),e.jsx("div",{className:"absolute inset-0 bg-black/20 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:e.jsx(Ae,{className:"w-8 h-8"})})]},t))}):e.jsx("p",{className:"text-gray-500 italic",children:"Sem fotos disponíveis."})]}),k.length>0&&e.jsxs("section",{className:"space-y-4",children:[e.jsx("h2",{className:"text-2xl font-bold font-poppins",children:"Vídeos"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:k.map((s,t)=>e.jsx("div",{className:"bg-gray-900 rounded-xl overflow-hidden border border-gray-700 shadow-lg group hover:border-primary/50 transition-colors",children:e.jsx("video",{controls:!0,className:"w-full aspect-video object-cover bg-black",src:s,preload:"metadata"})},t))})]}),I.length>0&&e.jsxs("section",{className:"space-y-4",children:[e.jsxs("h2",{className:"text-2xl font-bold font-poppins flex items-center gap-2",children:[e.jsx(oe,{className:"w-6 h-6 text-primary"}),"Músicas & Demos"]}),e.jsx("div",{className:"space-y-3",children:I.map((s,t)=>e.jsxs("div",{className:"bg-gray-800 p-4 rounded-xl border border-gray-700 flex flex-col md:flex-row items-center gap-4 hover:border-primary/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/20 flex items-center justify-center flex-shrink-0",children:e.jsx(oe,{className:"w-5 h-5 text-primary"})}),e.jsx("span",{className:"font-medium text-sm text-gray-200 truncate max-w-[150px] md:max-w-[200px]",title:s.name,children:s.name})]}),e.jsx("div",{className:"flex-grow w-full",children:e.jsx("audio",{controls:!0,className:"w-full h-8 block",src:s.url})})]},t))})]}),e.jsxs("section",{className:"pt-8 border-t border-gray-800",children:[e.jsx("h2",{className:"text-2xl font-bold font-poppins mb-8",children:"Avaliações"}),e.jsx(ze,{targetId:a.id})]})]}),e.jsxs("aside",{className:"lg:col-span-1 space-y-6",children:[e.jsxs("div",{className:"bg-gray-800 p-6 rounded-2xl shadow-xl border border-gray-700",children:[e.jsx("h2",{className:"text-xl font-bold font-poppins mb-6",children:"Redes & Contato"}),e.jsxs("div",{className:"space-y-4",children:[(n==null?void 0:n.instagram)&&e.jsxs("a",{href:`https://instagram.com/${n.instagram.replace("@","")}`,target:"_blank",className:"flex items-center p-3 rounded-lg bg-gray-900/50 hover:bg-gray-700 transition-colors",children:[e.jsx(qe,{className:"w-5 h-5 mr-3 text-white"}),e.jsx("span",{children:"Instagram"})]}),(n==null?void 0:n.youtube)&&e.jsxs("a",{href:n.youtube,target:"_blank",className:"flex items-center p-3 rounded-lg bg-gray-900/50 hover:bg-gray-700 transition-colors",children:[e.jsx(Ge,{className:"w-5 h-5 mr-3 text-white"}),e.jsx("span",{children:"YouTube"})]}),(n==null?void 0:n.site)&&e.jsxs("a",{href:n.site,target:"_blank",className:"flex items-center p-3 rounded-lg bg-gray-900/50 hover:bg-gray-700 transition-colors",children:[e.jsx(Ye,{className:"w-5 h-5 mr-3 text-white"}),e.jsx("span",{children:"Website"})]})]})]}),ye&&e.jsxs("div",{className:"bg-gray-800 p-6 rounded-2xl shadow-xl border border-gray-700",children:[e.jsx("h2",{className:"text-xl font-bold font-poppins mb-4",children:"Documentos"}),e.jsxs("div",{className:"space-y-3",children:[((X=a.artista)==null?void 0:X.rider_tecnico_url)&&e.jsxs("button",{onClick:()=>{var s;return E((s=a.artista)==null?void 0:s.rider_tecnico_url)},className:"w-full flex items-center justify-between p-4 rounded-xl bg-gray-900/50 hover:bg-gray-700 transition-colors border border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Le,{className:"w-5 h-5 text-primary"}),e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Rider Técnico"})]}),e.jsx(ie,{className:"w-4 h-4 text-gray-500"})]}),((Z=a.artista)==null?void 0:Z.mapa_palco_url)&&e.jsxs("button",{onClick:()=>{var s;return E((s=a.artista)==null?void 0:s.mapa_palco_url)},className:"w-full flex items-center justify-between p-4 rounded-xl bg-gray-900/50 hover:bg-gray-700 transition-colors border border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(w,{className:"w-5 h-5 text-secondary"}),e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Mapa de Palco"})]}),e.jsx(ie,{className:"w-4 h-4 text-gray-500"})]})]})]}),je&&e.jsxs("div",{className:"bg-gray-800 p-6 rounded-2xl shadow-xl border border-gray-700",children:[e.jsx("h2",{className:"text-xl font-bold font-poppins mb-4",children:"Disponibilidade"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:Fe.map(s=>{const t=R[s];return e.jsxs("div",{className:`flex flex-col items-center justify-center p-2 rounded-lg border aspect-square ${t!=null&&t.active?"bg-primary/10 border-primary":"bg-gray-900/50 border-gray-700 opacity-40"}`,children:[e.jsx("span",{className:"text-[10px] font-bold uppercase",children:Qe[s]}),e.jsx("div",{className:`w-1.5 h-1.5 rounded-full mt-1 ${t!=null&&t.active?"bg-primary":"bg-gray-600"}`})]},s)})})]})]})]})}),ge&&i&&e.jsx(De,{currentUserProfile:i,targetProfile:a,onClose:()=>b(!1),onContractCreated:()=>b(!1)}),e.jsx(Te,{isOpen:ue,images:g,initialIndex:fe,onClose:()=>U(!1)})]})};export{_s as default};
