import{j as e,u as $,r as a,C as B,L as P,b as k,e as I,s as F}from"./index-GuXP6Wz1.js";import{S as L}from"./SearchIcon-DpzGgnsg.js";import{S as A}from"./SEO-DqYDF51v.js";import{M}from"./MapPinIcon-BaIC7-dx.js";import{U}from"./UsersIcon-E2bBNV8B.js";import{C as _}from"./ChevronRightIcon-Dcn93mje.js";import{E as D}from"./EmptyState-DywqxwZl.js";import{S as O}from"./StarIcon-C41slj-a.js";const R=()=>e.jsxs("div",{className:"bg-gray-800 rounded-lg overflow-hidden shadow-lg",children:[e.jsx("div",{className:"relative",children:e.jsx("div",{className:"w-full h-56 bg-gray-700 animate-pulse"})}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"h-5 bg-gray-700 rounded w-3/4 mb-2 animate-pulse"}),e.jsx("div",{className:"h-4 bg-gray-700 rounded w-1/2 mb-4 animate-pulse"}),e.jsx("div",{className:"h-3 bg-gray-700 rounded w-full animate-pulse mb-1"}),e.jsx("div",{className:"h-3 bg-gray-700 rounded w-5/6 animate-pulse"})]})]}),q=({profile:s})=>{var x,i;const n="https://images.unsplash.com/photo-1514320291840-2e0a9bf2a9ae?q=80&w=2070&auto=format&fit=crop",[p,b]=a.useState(n),[d,m]=a.useState(!1);a.useEffect(()=>{(()=>{var v;const u=(v=s.estabelecimento)==null?void 0:v.foto_capa,y=s.foto_url,j=Date.now(),g=u||y;if(g){const o=u?"estabelecimento":"perfis",h=F.getPublicUrl(o,g);b(h?`${h}?t=${j}`:n)}})()},[s]);const f=((x=s.estabelecimento)==null?void 0:x.descricao)||"Espaço pronto para receber grandes eventos.";return e.jsxs(P,{to:`/estabelecimento/${s.id}`,className:"group relative bg-gray-900 rounded-2xl overflow-hidden border border-gray-800 hover:border-gray-600 transition-all duration-300 hover:-translate-y-1 shadow-lg hover:shadow-2xl hover:shadow-secondary/10 flex flex-col h-full",children:[e.jsxs("div",{className:"relative h-52 sm:h-64 overflow-hidden bg-gray-800",children:[e.jsx("img",{src:p,onError:()=>b(n),alt:s.nome,loading:"lazy",onLoad:()=>m(!0),className:`absolute inset-0 w-full h-full object-cover transition-all duration-700 ease-in-out group-hover:scale-110 ${d?"opacity-100":"opacity-0"}`}),!d&&e.jsx("div",{className:"absolute inset-0 bg-gray-800 animate-pulse z-10"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-900 via-gray-900/20 to-transparent opacity-90"}),((i=s.estabelecimento)==null?void 0:i.capacidade)&&e.jsx("div",{className:"absolute top-4 right-4 z-20",children:e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-[10px] sm:text-xs font-bold bg-secondary/90 text-white backdrop-blur-sm shadow-lg border border-secondary/50",children:[e.jsx(U,{className:"w-3 h-3 mr-1.5"}),s.estabelecimento.capacidade," Pessoas"]})})]}),e.jsxs("div",{className:"p-5 flex flex-col flex-grow relative -mt-10 sm:-mt-12 z-20",children:[e.jsxs("div",{className:"mb-auto",children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white font-poppins mb-1 leading-tight group-hover:text-secondary transition-colors line-clamp-1",children:s.nome}),e.jsxs("div",{className:"flex items-center text-gray-400 text-xs mb-3 font-medium uppercase tracking-wide",children:[e.jsx(M,{className:"w-3.5 h-3.5 mr-1 text-secondary"}),e.jsx("span",{className:"truncate",children:s.cidade||"Brasil"})]}),e.jsx("p",{className:"text-gray-400 text-sm leading-relaxed line-clamp-3",children:f})]}),e.jsxs("div",{className:"mt-5 pt-4 border-t border-gray-800 flex items-center justify-between group/btn",children:[e.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Ver Detalhes do Local"}),e.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-800 flex items-center justify-center text-secondary group-hover/btn:bg-secondary group-hover/btn:text-white transition-all duration-300",children:e.jsx(_,{className:"w-4 h-4"})})]})]})]})},w=9,Y=()=>{const{siteConfig:s}=$(),[n,p]=a.useState([]),[b,d]=a.useState(!0),[m,f]=a.useState(!1),[x,i]=a.useState(null),[N,u]=a.useState(0),[y,j]=a.useState(!1),[g,v]=a.useState(0),[o,h]=a.useState(""),[l,C]=a.useState(""),[S,z]=a.useState(""),T=s.homeBackgroundUrl||"https://images.unsplash.com/photo-1514320291840-2e0a9bf2a9ae?q=80&w=2070&auto=format&fit=crop";a.useEffect(()=>{const t=setTimeout(()=>z(o),500);return()=>clearTimeout(t)},[o]),a.useEffect(()=>{(async()=>{d(!0),i(null);try{const{data:r,count:c}=await k.getVenues({search:S,city:l,page:0,pageSize:w});p(r),v(c),j(c>w),u(1)}catch(r){i(I(r)),console.error(r)}finally{d(!1)}})()},[S,l]);const V=async()=>{if(!(m||!y)){f(!0);try{const{data:t}=await k.getVenues({search:S,city:l,page:N,pageSize:w});p(c=>[...c,...t]);const r=(N+1)*w;j(r<g),u(c=>c+1)}catch(t){i("Erro ao carregar mais estabelecimentos: "+I(t))}finally{f(!1)}}},E=()=>{h(""),C("")};return e.jsxs("div",{className:"bg-dark text-white font-sans min-h-screen",children:[e.jsx(A,{title:"Estabelecimentos",description:"Encontre os melhores locais para tocar. Bares, pubs, casas de show e eventos esperando por música ao vivo."}),e.jsxs("section",{className:"relative pt-32 pb-24 flex items-center justify-center text-center px-4 overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 z-0 select-none pointer-events-none",children:[e.jsx("img",{src:T,className:"w-full h-full object-cover transition-all duration-700 ease-in-out scale-105",style:{filter:`blur(${s.heroBlur}px)`},alt:"Background"}),e.jsx("div",{className:"absolute inset-0 transition-all duration-500 ease-in-out mix-blend-multiply",style:{backgroundColor:s.heroOverlayColor,opacity:Math.max(s.heroOpacity,.6)}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-dark/50 to-dark"})]}),e.jsxs("div",{className:"relative z-10 w-full max-w-4xl mx-auto space-y-6 animate-fade-in",children:[e.jsxs("h1",{className:"text-4xl md:text-6xl font-black text-white tracking-tight leading-none drop-shadow-2xl",children:["Encontre o ",e.jsx("span",{className:"text-secondary",children:"Palco Perfeito"})]}),e.jsx("p",{className:"max-w-2xl mx-auto text-lg md:text-xl text-gray-200 font-light leading-relaxed drop-shadow-md",children:"Conecte-se com casas de shows, bares e eventos prontos para receber seu som."})]})]}),e.jsxs("section",{id:"search-results",className:"container mx-auto px-4 sm:px-6 lg:px-8 pb-24 -mt-16 relative z-20",children:[e.jsx("div",{className:"bg-gray-900/80 backdrop-blur-xl p-6 rounded-2xl shadow-2xl border border-gray-700/50 mb-12",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-center",children:[e.jsxs("div",{className:"relative flex-grow w-full lg:w-auto group",children:[e.jsx("input",{type:"text",placeholder:"Buscar por nome do local...",value:o,onChange:t=>h(t.target.value),className:"w-full bg-gray-800/50 border border-gray-600 rounded-xl py-3 pl-11 pr-4 text-white focus:outline-none focus:ring-2 focus:ring-secondary focus:border-transparent transition-all placeholder-gray-500 group-hover:bg-gray-800"}),e.jsx(L,{className:"absolute left-4 top-3.5 w-5 h-5 text-gray-400 group-focus-within:text-secondary transition-colors"})]}),e.jsxs("div",{className:"relative w-full lg:w-1/3 group",children:[e.jsx("input",{type:"text",placeholder:"Filtrar por Cidade",value:l,onChange:t=>C(t.target.value),className:"w-full bg-gray-800/50 border border-gray-600 rounded-xl py-3 pl-11 pr-4 text-white focus:outline-none focus:ring-2 focus:ring-secondary focus:border-transparent transition-all placeholder-gray-500 group-hover:bg-gray-800"}),e.jsx(M,{className:"absolute left-4 top-3.5 w-5 h-5 text-gray-400 group-focus-within:text-secondary transition-colors"})]}),(o||l)&&e.jsxs("button",{onClick:E,className:"w-full lg:w-auto px-4 py-3 bg-red-500/10 text-red-400 hover:bg-red-500/20 hover:text-red-300 rounded-xl font-semibold transition-colors flex items-center justify-center gap-2 border border-red-500/20",children:[e.jsx(B,{className:"w-4 h-4"})," ",e.jsx("span",{className:"lg:hidden xl:inline",children:"Limpar"})]})]})}),b?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:Array.from({length:6}).map((t,r)=>e.jsx(R,{},r))}):x?e.jsx("p",{className:"text-center text-red-400 bg-red-500/10 p-6 rounded-xl border border-red-500/20",children:x}):n.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex justify-between items-end mb-6 px-2",children:e.jsxs("h2",{className:"text-xl font-bold text-white",children:["Resultados ",e.jsxs("span",{className:"text-gray-500 text-sm font-normal ml-2",children:["(",g," encontrados)"]})]})}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:n.map(t=>e.jsx(q,{profile:t},t.id))}),y&&e.jsx("div",{className:"text-center mt-16",children:e.jsx("button",{onClick:V,disabled:m,className:"bg-gray-800 border border-gray-700 text-white font-bold py-3 px-10 rounded-full hover:bg-gray-700 hover:border-gray-500 transition-all duration-300 disabled:opacity-50 transform hover:scale-105 shadow-lg",children:m?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Carregando..."]}):"Carregar Mais Locais"})})]}):e.jsx("div",{className:"py-12",children:e.jsx(D,{icon:L,title:"Nenhum local encontrado",description:`Não encontramos resultados para "${o}" ${l?`em ${l}`:""}. Tente ajustar os filtros.`,actionLabel:"Limpar Filtros",onAction:E})})]}),e.jsx("section",{className:"py-20 border-t border-gray-800 bg-gray-900/50",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 text-center",children:e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-secondary to-primary rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg shadow-secondary/20 transform -rotate-3",children:e.jsx(O,{className:"w-8 h-8 text-white"})}),e.jsx("h2",{className:"text-3xl font-bold text-white mb-4 font-poppins",children:"Tem um estabelecimento?"}),e.jsx("p",{className:"text-gray-400 text-lg mb-8 leading-relaxed",children:"Cadastre seu local e conecte-se com artistas profissionais prontos para lotar sua casa."}),e.jsx(P,{to:"/cadastro?tipo=estabelecimento",className:"inline-block bg-white text-dark font-bold py-4 px-10 rounded-full hover:bg-gray-200 transition-all duration-300 shadow-xl hover:shadow-2xl hover:-translate-y-1",children:"Cadastrar Estabelecimento"})]})})})]})};export{Y as default};
