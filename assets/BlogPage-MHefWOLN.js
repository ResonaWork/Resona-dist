import{j as e,b as O,u as U,q as D,e as L,C as R,s as z}from"./index-BhcEfvUj.js";import{L as C,r as a}from"./vendor-react-Dfcn4nkY.js";import{S as F}from"./SearchIcon-BuX9Sfv1.js";import{B as $}from"./BookOpenIcon-CjRMGffi.js";import{E as T}from"./EmptyState-CYEo4RfC.js";import{C as G}from"./ChevronRightIcon-B7UStob_.js";import{S as H}from"./SEO-C8PmC30O.js";import"./vendor-pdf-DHYqqgbQ.js";import"./vendor-utils-DmyZJLyO.js";import"./vendor-ui-DKtFGipk.js";const V=({post:t})=>{const o=t.content.substring(0,120)+"...",i=new Date(t.created_at).toLocaleDateString("pt-BR",{day:"2-digit",month:"long",year:"numeric"}),d=()=>{if(t.image_url){const{data:n}=O.storage.from("blog").getPublicUrl(t.image_url);return n.publicUrl}return"https://images.unsplash.com/photo-1499428665502-503f6c608263?q=80&w=2070&auto=format&fit=crop"};return e.jsxs(C,{to:`/blog/${t.slug}`,className:"block bg-gray-800 rounded-lg overflow-hidden group transform hover:-translate-y-2 transition-transform duration-300 ease-in-out shadow-lg hover:shadow-primary/30",children:[e.jsx("img",{src:d(),alt:t.title,className:"w-full h-56 object-cover group-hover:opacity-80 transition-opacity duration-300"}),e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-white font-poppins mb-2 group-hover:text-primary transition-colors",children:t.title}),e.jsx("p",{className:"text-gray-400 text-sm mb-4 h-16 overflow-hidden",children:o}),e.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[e.jsx("span",{children:t.author_name}),e.jsx("span",{className:"mx-2",children:"•"}),e.jsx("span",{children:i})]})]})]})},Z=()=>e.jsxs("div",{className:"bg-gray-800 rounded-lg overflow-hidden shadow-lg animate-pulse",children:[e.jsx("div",{className:"w-full h-56 bg-gray-700"}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"h-5 bg-gray-700 rounded w-3/4 mb-3"}),e.jsx("div",{className:"h-3 bg-gray-700 rounded w-full mb-2"}),e.jsx("div",{className:"h-3 bg-gray-700 rounded w-5/6 mb-4"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-3 bg-gray-700 rounded w-1/4"}),e.jsx("div",{className:"mx-2 text-gray-700",children:"•"}),e.jsx("div",{className:"h-3 bg-gray-700 rounded w-1/3"})]})]})]}),k=9,J=({post:t})=>{const o=()=>t.image_url&&z.getPublicUrl("blog",t.image_url)||"https://images.unsplash.com/photo-1499428665502-503f6c608263?q=80&w=2070&auto=format&fit=crop";return e.jsxs(C,{to:`/blog/${t.slug}`,className:"group relative w-full h-[400px] md:h-[500px] rounded-2xl overflow-hidden block shadow-2xl mb-12 border border-gray-800 hover:border-gray-600 transition-all duration-300",children:[e.jsxs("div",{className:"absolute inset-0 bg-gray-900",children:[e.jsx("img",{src:o(),alt:t.title,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-105 opacity-80 group-hover:opacity-100"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-dark via-dark/60 to-transparent"})]}),e.jsxs("div",{className:"absolute bottom-0 left-0 p-6 md:p-10 w-full md:w-2/3",children:[e.jsx("span",{className:"inline-block px-3 py-1 bg-primary/20 text-primary text-xs font-bold rounded-full border border-primary/30 uppercase tracking-wider mb-4 backdrop-blur-sm",children:"Destaque"}),e.jsx("h2",{className:"text-3xl md:text-5xl font-black text-white font-poppins mb-4 leading-tight drop-shadow-lg group-hover:text-primary transition-colors",children:t.title}),e.jsxs("p",{className:"text-gray-200 text-lg line-clamp-2 md:line-clamp-3 mb-6 font-light drop-shadow-md",children:[t.content.replace(/#|`|\*|_/g,"").substring(0,150),"..."]}),e.jsxs("div",{className:"flex items-center gap-2 text-white font-bold text-sm",children:["Ler Artigo Completo ",e.jsx(G,{className:"w-4 h-4 transition-transform group-hover:translate-x-1"})]})]})]})},oe=()=>{const{siteConfig:t}=U(),[o,i]=a.useState([]),[d,n]=a.useState(!0),[m,p]=a.useState(!1),[b,f]=a.useState(null),[g,P]=a.useState(0),[v,E]=a.useState(!1),[B,_]=a.useState(0),[c,j]=a.useState(""),[r,A]=a.useState(""),I=t.homeBackgroundUrl||"https://images.unsplash.com/photo-1505238680356-6678f244482a?q=80&w=2070&auto=format&fit=crop";a.useEffect(()=>{const s=setTimeout(()=>A(c),500);return()=>clearTimeout(s)},[c]);const x=a.useCallback(async(s,S=!1)=>{s===0?n(!0):p(!0),f(null);try{const{data:l,count:h}=await D.getPublishedPosts({page:s,pageSize:k,search:r});l&&(i(s===0?l:q=>[...q,...l]),h!==null&&(_(h),E((s+1)*k<h))),P(s)}catch(l){f(L(l)),console.error(l)}finally{n(!1),p(!1)}},[r]);a.useEffect(()=>{x(0,!0)},[r,x]);const M=()=>{!m&&v&&x(g+1)},y=()=>{j("")},N=!r&&g===0&&o.length>0,u=N?o[0]:null,w=N?o.slice(1):o;return e.jsxs("div",{className:"bg-dark text-white font-sans min-h-screen",children:[e.jsx(H,{title:"Blog",description:"Notícias, dicas e histórias do universo da música ao vivo para artistas e produtores."}),e.jsxs("section",{className:"relative pt-32 pb-24 flex items-center justify-center text-center px-4 overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 z-0 select-none pointer-events-none",children:[e.jsx("img",{src:I,className:"w-full h-full object-cover transition-all duration-700 ease-in-out scale-105",style:{filter:`blur(${t.heroBlur}px)`},alt:"Background"}),e.jsx("div",{className:"absolute inset-0 transition-all duration-500 ease-in-out mix-blend-multiply",style:{backgroundColor:t.heroOverlayColor,opacity:Math.max(t.heroOpacity,.6)}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-dark/50 to-dark"})]}),e.jsxs("div",{className:"relative z-10 w-full max-w-4xl mx-auto space-y-6 animate-fade-in",children:[e.jsxs("h1",{className:"text-4xl md:text-6xl font-black text-white tracking-tight leading-none drop-shadow-2xl",children:["Blog ",e.jsx("span",{className:"text-primary",children:"RESONA"})]}),e.jsx("p",{className:"max-w-2xl mx-auto text-lg md:text-xl text-gray-200 font-light leading-relaxed drop-shadow-md",children:"Notícias, dicas e histórias do universo da música ao vivo."})]})]}),e.jsxs("section",{id:"blog-posts",className:"container mx-auto px-4 sm:px-6 lg:px-8 pb-24 -mt-16 relative z-20",children:[e.jsx("div",{className:"bg-gray-900/80 backdrop-blur-xl p-6 rounded-2xl shadow-2xl border border-gray-700/50 mb-12",children:e.jsx("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:e.jsxs("div",{className:"relative flex-grow w-full group",children:[e.jsx("input",{type:"text",placeholder:"Buscar artigos...",value:c,onChange:s=>j(s.target.value),className:"w-full bg-gray-800/50 border border-gray-600 rounded-xl py-3 pl-11 pr-12 text-white focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all placeholder-gray-500 group-hover:bg-gray-800"}),e.jsx(F,{className:"absolute left-4 top-3.5 w-5 h-5 text-gray-400 group-focus-within:text-primary transition-colors"}),c&&e.jsx("button",{onClick:y,className:"absolute right-4 top-3.5 text-gray-500 hover:text-white transition-colors",children:e.jsx(R,{className:"w-5 h-5"})})]})})}),d&&g===0?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:Array.from({length:6}).map((s,S)=>e.jsx(Z,{},S))}):b?e.jsx("p",{className:"text-center text-red-400 bg-red-500/10 p-6 rounded-xl border border-red-500/20",children:b}):o.length>0?e.jsxs(e.Fragment,{children:[u&&e.jsx(J,{post:u}),r&&e.jsx("div",{className:"mb-6 px-2",children:e.jsxs("h2",{className:"text-xl font-bold text-white",children:['Resultados para "',r,'" ',e.jsxs("span",{className:"text-gray-500 text-sm font-normal ml-2",children:["(",B," encontrados)"]})]})}),w.length>0?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8 mb-16",children:w.map(s=>e.jsx(V,{post:s},s.id))}):!u&&e.jsx("div",{className:"text-center py-10 text-gray-500",children:"Sem resultados adicionais."}),v&&e.jsx("div",{className:"text-center",children:e.jsx("button",{onClick:M,disabled:m,className:"bg-gray-800 border border-gray-700 text-white font-bold py-3 px-10 rounded-full hover:bg-gray-700 hover:border-gray-500 transition-all duration-300 disabled:opacity-50 transform hover:scale-105 shadow-lg flex items-center gap-2 mx-auto",children:m?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Carregando..."]}):"Carregar Mais Artigos"})})]}):e.jsx("div",{className:"py-12",children:e.jsx(T,{icon:$,title:"Nenhum artigo encontrado",description:r?`Não encontramos artigos com o termo "${r}".`:"O blog ainda está sendo populado. Volte em breve!",actionLabel:r?"Limpar Busca":void 0,onAction:r?y:void 0})})]})]})};export{oe as default};
